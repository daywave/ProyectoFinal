(self.webpackChunkReservaciones=self.webpackChunkReservaciones||[]).push([[179],{712:(qr,Zi,_i)=>{"use strict";function zt(n){return"function"==typeof n}function Un(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const ii=Un(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function f(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Le{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(zt(i))try{i()}catch(s){e=s instanceof ii?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Dt(s)}catch(u){e=e??[],u instanceof ii?e=[...e,...u.errors]:e.push(u)}}if(e)throw new ii(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Dt(e);else{if(e instanceof Le){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&f(t,e)}remove(e){const{_finalizers:t}=this;t&&f(t,e),e instanceof Le&&e._removeParent(this)}}Le.EMPTY=(()=>{const n=new Le;return n.closed=!0,n})();const Jt=Le.EMPTY;function qt(n){return n instanceof Le||n&&"closed"in n&&zt(n.remove)&&zt(n.add)&&zt(n.unsubscribe)}function Dt(n){zt(n)?n():n.unsubscribe()}const qe={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},wt={setTimeout(n,e,...t){const{delegate:i}=wt;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=wt;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ft(n){wt.setTimeout(()=>{const{onUnhandledError:e}=qe;if(!e)throw n;e(n)})}function an(){}const ai=kn("C",void 0,void 0);function kn(n,e,t){return{kind:n,value:e,error:t}}let ln=null;function ft(n){if(qe.useDeprecatedSynchronousErrorHandling){const e=!ln;if(e&&(ln={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=ln;if(ln=null,t)throw i}}else n()}class De extends Le{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qt(e)&&e.add(this)):this.destination=yn}static create(e,t,i){return new Mi(e,t,i)}next(e){this.isStopped?er(function yt(n){return kn("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?er(function Nt(n){return kn("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?er(ai,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function Et(n,e){return at.call(n,e)}class En{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Ge(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Ge(i)}else Ge(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ge(t)}}}class Mi extends De{constructor(e,t,i){let r;if(super(),zt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&qe.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Et(e.next,s),error:e.error&&Et(e.error,s),complete:e.complete&&Et(e.complete,s)}):r=e}this.destination=new En(r)}}function Ge(n){qe.useDeprecatedSynchronousErrorHandling?function me(n){qe.useDeprecatedSynchronousErrorHandling&&ln&&(ln.errorThrown=!0,ln.error=n)}(n):Ft(n)}function er(n,e){const{onStoppedNotification:t}=qe;t&&wt.setTimeout(()=>t(n,e))}const yn={closed:!0,next:an,error:function Ji(n){throw n},complete:an},rr="function"==typeof Symbol&&Symbol.observable||"@@observable";function In(n){return n}function Vs(n){return 0===n.length?In:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let bn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function Ko(n){return n&&n instanceof De||function cl(n){return n&&zt(n.next)&&zt(n.error)&&zt(n.complete)}(n)&&qt(n)}(t)?t:new Mi(t,i,r);return ft(()=>{const{operator:u,source:_}=this;s.add(u?u.call(s,_):_?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=js(i))((r,s)=>{const u=new Mi({next:_=>{try{t(_)}catch(y){s(y),u.unsubscribe()}},error:s,complete:r});this.subscribe(u)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[rr](){return this}pipe(...t){return Vs(t)(this)}toPromise(t){return new(t=js(t))((i,r)=>{let s;this.subscribe(u=>s=u,u=>r(u),()=>i(s))})}}return n.create=e=>new n(e),n})();function js(n){var e;return null!==(e=n??qe.Promise)&&void 0!==e?e:Promise}const wr=Un(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Gn=(()=>{class n extends bn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new ca(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new wr}next(t){ft(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){ft(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){ft(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Jt:(this.currentObservers=null,s.push(t),new Le(()=>{this.currentObservers=null,f(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new bn;return t.source=this,t}}return n.create=(e,t)=>new ca(e,t),n})();class ca extends Gn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Jt}}class Yi extends Gn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function ho(n){return zt(n?.lift)}function mi(n){return e=>{if(ho(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Qn(n,e,t,i,r){return new ul(n,e,t,i,r)}class ul extends De{constructor(e,t,i,r,s,u){super(e),this.onFinalize=s,this.shouldUnsubscribe=u,this._next=t?function(_){try{t(_)}catch(y){e.error(y)}}:super._next,this._error=r?function(_){try{r(_)}catch(y){e.error(y)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(_){e.error(_)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Gt(n,e){return mi((t,i)=>{let r=0;t.subscribe(Qn(i,s=>{i.next(n.call(e,s,r++))}))})}function Mo(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]])}return t}function Zr(n){return this instanceof Zr?(this.v=n,this):new Zr(n)}function ka(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function vo(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(u){return new Promise(function(_,y){!function r(s,u,_,y){Promise.resolve(y).then(function(E){s({value:E,done:_})},u)}(_,y,(u=n[s](u)).done,u.value)})}}}const Pa=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Oa(n){return zt(n?.then)}function Cr(n){return zt(n[rr])}function da(n){return Symbol.asyncIterator&&zt(n?.[Symbol.asyncIterator])}function Pc(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const se=function fl(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function $(n){return zt(n?.[se])}function q(n){return function Er(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(U){i[U]&&(r[U]=function(X){return new Promise(function(ie,xe){s.push([U,X,ie,xe])>1||_(U,X)})})}function _(U,X){try{!function y(U){U.value instanceof Zr?Promise.resolve(U.value.v).then(E,D):R(s[0][2],U)}(i[U](X))}catch(ie){R(s[0][3],ie)}}function E(U){_("next",U)}function D(U){_("throw",U)}function R(U,X){U(X),s.shift(),s.length&&_(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Zr(t.read());if(r)return yield Zr(void 0);yield yield Zr(i)}}finally{t.releaseLock()}})}function re(n){return zt(n?.getReader)}function ue(n){if(n instanceof bn)return n;if(null!=n){if(Cr(n))return function we(n){return new bn(e=>{const t=n[rr]();if(zt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Pa(n))return function Re(n){return new bn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Oa(n))return function ke(n){return new bn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ft)})}(n);if(da(n))return Oe(n);if($(n))return function Te(n){return new bn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(re(n))return function ot(n){return Oe(q(n))}(n)}throw Pc(n)}function Oe(n){return new bn(e=>{(function Mt(n,e){var t,i,r,s;return function Ma(n,e,t,i){return new(t||(t=Promise))(function(s,u){function _(D){try{E(i.next(D))}catch(R){u(R)}}function y(D){try{E(i.throw(D))}catch(R){u(R)}}function E(D){D.done?s(D.value):function r(s){return s instanceof t?s:new t(function(u){u(s)})}(D.value).then(_,y)}E((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=ka(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(u){r={error:u}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ut(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Pt(n,e,t=1/0){return zt(e)?Pt((i,r)=>Gt((s,u)=>e(i,s,r,u))(ue(n(i,r))),t):("number"==typeof e&&(t=e),mi((i,r)=>function tn(n,e,t,i,r,s,u,_){const y=[];let E=0,D=0,R=!1;const U=()=>{R&&!y.length&&!E&&e.complete()},X=xe=>E<i?ie(xe):y.push(xe),ie=xe=>{s&&e.next(xe),E++;let ze=!1;ue(t(xe,D++)).subscribe(Qn(e,Qe=>{r?.(Qe),s?X(Qe):e.next(Qe)},()=>{ze=!0},void 0,()=>{if(ze)try{for(E--;y.length&&E<i;){const Qe=y.shift();u?ut(e,u,()=>ie(Qe)):ie(Qe)}U()}catch(Qe){e.error(Qe)}}))};return n.subscribe(Qn(e,X,()=>{R=!0,U()})),()=>{_?.()}}(i,r,n,t)))}function xt(n=1/0){return Pt(In,n)}const Zt=new bn(n=>n.complete());function on(n){return n&&zt(n.schedule)}function gi(n){return n[n.length-1]}function vi(n){return zt(gi(n))?n.pop():void 0}function Po(n){return on(gi(n))?n.pop():void 0}function Ye(n,e=0){return mi((t,i)=>{t.subscribe(Qn(i,r=>ut(i,n,()=>i.next(r),e),()=>ut(i,n,()=>i.complete(),e),r=>ut(i,n,()=>i.error(r),e)))})}function tr(n,e=0){return mi((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Na(n,e){if(!n)throw new Error("Iterable cannot be null");return new bn(t=>{ut(t,e,()=>{const i=n[Symbol.asyncIterator]();ut(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function mt(n,e){return e?function Hl(n,e){if(null!=n){if(Cr(n))return function gr(n,e){return ue(n).pipe(tr(e),Ye(e))}(n,e);if(Pa(n))return function rf(n,e){return new bn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(Oa(n))return function Fa(n,e){return ue(n).pipe(tr(e),Ye(e))}(n,e);if(da(n))return Na(n,e);if($(n))return function Us(n,e){return new bn(t=>{let i;return ut(t,e,()=>{i=n[se](),ut(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(u){return void t.error(u)}s?t.complete():t.next(r)},0,!0)}),()=>zt(i?.return)&&i.return()})}(n,e);if(re(n))return function sf(n,e){return Na(q(n),e)}(n,e)}throw Pc(n)}(n,e):ue(n)}function Rn(...n){const e=Po(n),t=function Jo(n,e){return"number"==typeof gi(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?ue(i[0]):xt(t)(mt(i,e)):Zt}function Ct(...n){return mt(n,Po(n))}function es(n={}){const{connector:e=(()=>new Gn),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let u,_,y,E=0,D=!1,R=!1;const U=()=>{_?.unsubscribe(),_=void 0},X=()=>{U(),u=y=void 0,D=R=!1},ie=()=>{const xe=u;X(),xe?.unsubscribe()};return mi((xe,ze)=>{E++,!R&&!D&&U();const Qe=y=y??e();ze.add(()=>{E--,0===E&&!R&&!D&&(_=ha(ie,r))}),Qe.subscribe(ze),!u&&E>0&&(u=new Mi({next:Ve=>Qe.next(Ve),error:Ve=>{R=!0,U(),_=ha(X,t,Ve),Qe.error(Ve)},complete:()=>{D=!0,U(),_=ha(X,i),Qe.complete()}}),ue(xe).subscribe(u))})(s)}}function ha(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Mi({next:()=>{i.unsubscribe(),n()}});return ue(e(...t)).subscribe(i)}function dn(n,e){return mi((t,i)=>{let r=null,s=0,u=!1;const _=()=>u&&!r&&i.complete();t.subscribe(Qn(i,y=>{r?.unsubscribe();let E=0;const D=s++;ue(n(y,D)).subscribe(r=Qn(i,R=>i.next(e?e(y,R,D,E++):R),()=>{r=null,_()}))},()=>{u=!0,_()}))})}function $l(n,e){return n===e}function ui(n){for(let e in n)if(n[e]===ui)return e;throw Error("Could not find renamed property on target object.")}function Yr(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function An(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(An).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Fc(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Br=ui({__forward_ref__:ui});function ki(n){return n.__forward_ref__=ki,n.toString=function(){return An(this())},n}function mn(n){return Gl(n)?n():n}function Gl(n){return"function"==typeof n&&n.hasOwnProperty(Br)&&n.__forward_ref__===ki}function Wl(n){return n&&!!n.\u0275providers}const La="https://g.co/ng/security#xss";class Xe extends Error{constructor(e,t){super(function ql(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function cn(n){return"string"==typeof n?n:null==n?"":String(n)}function Xr(n,e){throw new Xe(-201,!1)}function Fo(n,e){null==n&&function ri(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Tt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Pn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Eo(n){return Wd(n,Vc)||Wd(n,Zl)}function Wd(n,e){return n.hasOwnProperty(e)?n[e]:null}function zc(n){return n&&(n.hasOwnProperty(jc)||n.hasOwnProperty(pl))?n[jc]:null}const Vc=ui({\u0275prov:ui}),jc=ui({\u0275inj:ui}),Zl=ui({ngInjectableDef:ui}),pl=ui({ngInjectorDef:ui});var gn=(()=>((gn=gn||{})[gn.Default=0]="Default",gn[gn.Host=1]="Host",gn[gn.Self=2]="Self",gn[gn.SkipSelf=4]="SkipSelf",gn[gn.Optional=8]="Optional",gn))();let Yl;function Sr(n){const e=Yl;return Yl=n,e}function Ba(n,e,t){const i=Eo(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&gn.Optional?null:void 0!==e?e:void Xr(An(n))}const Ri=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Gs={},_l="__NG_DI_FLAG__",Xl="ngTempTokenPath",qd=/\n/gm,Va="__source";let pa;function On(n){const e=pa;return pa=n,e}function ja(n,e=gn.Default){if(void 0===pa)throw new Xe(-203,!1);return null===pa?Ba(n,void 0,e):pa.get(n,e&gn.Optional?null:void 0,e)}function lt(n,e=gn.Default){return(function Uc(){return Yl}()||ja)(mn(n),e)}function Ht(n,e=gn.Default){return lt(n,Ws(e))}function Ws(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function $c(n){const e=[];for(let t=0;t<n.length;t++){const i=mn(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Xe(900,!1);let r,s=gn.Default;for(let u=0;u<i.length;u++){const _=i[u],y=kp(_);"number"==typeof y?-1===y?r=_.token:s|=y:r=_}e.push(lt(r,s))}else e.push(lt(i))}return e}function Kl(n,e){return n[_l]=e,n.prototype[_l]=e,n}function kp(n){return n[_l]}function ts(n){return{toString:n}.toString()}var ns=(()=>((ns=ns||{})[ns.OnPush=0]="OnPush",ns[ns.Default=1]="Default",ns))(),Co=(()=>{return(n=Co||(Co={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Co;var n})();const As={},wi=[],Ua=ui({\u0275cmp:ui}),ml=ui({\u0275dir:ui}),Hu=ui({\u0275pipe:ui}),Ql=ui({\u0275mod:ui}),Ms=ui({\u0275fac:ui}),No=ui({__NG_ELEMENT_ID__:ui}),$u=ui({__NG_ENV_ID__:ui});function Gu(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function Ha(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],u=t[i++],_=t[i++];n.setAttribute(e,u,_,s)}else{const s=r,u=t[++i];qc(s)?n.setProperty(e,s,u):n.setAttribute(e,s,u),i++}}return i}function Wc(n){return 3===n||4===n||6===n}function qc(n){return 64===n.charCodeAt(0)}function Zc(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Wu(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Wu(n,e,t,i,r){let s=0,u=n.length;if(-1===e)u=-1;else for(;s<n.length;){const _=n[s++];if("number"==typeof _){if(_===e){u=-1;break}if(_>e){u=s-1;break}}}for(;s<n.length;){const _=n[s];if("number"==typeof _)break;if(_===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==u&&(n.splice(u,0,e),s=u+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const qu="ng-template";function Yc(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const u=n[i++];if(t&&"class"===s&&-1!==Gu(u.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function Xc(n){return 4===n.type&&n.value!==qu}function Zu(n,e,t){return e===(4!==n.type||t?n.value:qu)}function cf(n,e,t){let i=4;const r=n.attrs||[],s=function Jl(n){for(let e=0;e<n.length;e++)if(Wc(n[e]))return e;return n.length}(r);let u=!1;for(let _=0;_<e.length;_++){const y=e[_];if("number"!=typeof y){if(!u)if(4&i){if(i=2|1&i,""!==y&&!Zu(n,y,t)||""===y&&1===e.length){if(To(i))return!1;u=!0}}else{const E=8&i?y:e[++_];if(8&i&&null!==n.attrs){if(!Yc(n.attrs,E,t)){if(To(i))return!1;u=!0}continue}const R=Rp(8&i?"class":y,r,Xc(n),t);if(-1===R){if(To(i))return!1;u=!0;continue}if(""!==E){let U;U=R>s?"":r[R+1].toLowerCase();const X=8&i?U:null;if(X&&-1!==Gu(X,E,0)||2&i&&E!==U){if(To(i))return!1;u=!0}}}}else{if(!u&&!To(i)&&!To(y))return!1;if(u&&To(y))continue;u=!1,i=y|1&i}}return To(i)||u}function To(n){return 0==(1&n)}function Rp(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const u=e[r];if(u===n)return r;if(3===u||6===u)s=!0;else{if(1===u||2===u){let _=e[++r];for(;"string"==typeof _;)_=e[++r];continue}if(4===u)break;if(0===u){r+=4;continue}}r+=s?1:2}return-1}return function df(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function $a(n,e,t=!1){for(let i=0;i<e.length;i++)if(cf(n,e[i],t))return!0;return!1}function ec(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function hf(n,e){return n?":not("+e.trim()+")":e}function ff(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let u=n[t];if("string"==typeof u)if(2&i){const _=n[++t];r+="["+u+(_.length>0?'="'+_+'"':"")+"]"}else 8&i?r+="."+u:4&i&&(r+=" "+u);else""!==r&&!To(u)&&(e+=hf(s,r),r=""),i=u,s=s||!To(i);t++}return""!==r&&(e+=hf(s,r)),e}function zr(n){return ts(()=>{const e=qs(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ns.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Co.Emulated,styles:n.styles||wi,_:null,schemas:n.schemas||null,tView:null,id:""};qn(t);const i=n.dependencies;return t.directiveDefs=gl(i,!1),t.pipeDefs=gl(i,!0),t.id=function Qd(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Xd(n){return Kn(n)||Ir(n)}function Yu(n){return null!==n}function Xn(n){return ts(()=>({type:n.type,bootstrap:n.bootstrap||wi,declarations:n.declarations||wi,imports:n.imports||wi,exports:n.exports||wi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Kd(n,e){if(null==n)return As;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function xn(n){return ts(()=>{const e=qs(n);return qn(e),e})}function sr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Kn(n){return n[Ua]||null}function Ir(n){return n[ml]||null}function Vr(n){return n[Hu]||null}function ar(n,e){const t=n[Ql]||null;if(!t&&!0===e)throw new Error(`Type ${An(n)} does not have '\u0275mod' property.`);return t}function qs(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||As,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||wi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Kd(n.inputs,e),outputs:Kd(n.outputs)}}function qn(n){n.features?.forEach(e=>e(n))}function gl(n,e){if(!n)return null;const t=e?Vr:Xd;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(Yu)}const lr=0,jt=1,Fn=2,Fi=3,F=4,N=5,W=6,ge=7,tt=8,Wt=9,xi=10,sn=11,cr=12,St=13,jr=14,Ur=15,Kc=16,Ga=17,is=18,Xu=19,Jd=20,Wa=21,Zs=22,tc=23,nc=24,wn=25,Np=1,Lp=2,Rs=7,xl=9,Hr=11;function fs(n){return Array.isArray(n)&&"object"==typeof n[Np]}function So(n){return Array.isArray(n)&&!0===n[Np]}function mf(n){return 0!=(4&n.flags)}function yl(n){return n.componentOffset>-1}function Ju(n){return 1==(1&n.flags)}function Lo(n){return!!n.template}function ed(n){return 0!=(512&n[Fn])}function rc(n,e){return n.hasOwnProperty(Ms)?n[Ms]:null}let wf=Ri.WeakRef??class ih{constructor(e){this.ref=e}deref(){return this.ref}},Fm=0,_a=null,id=!1;function oo(n){const e=_a;return _a=n,e}class Hp{constructor(){this.id=Fm++,this.ref=function nd(n){return new wf(n)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,t]of this.producers){const i=t.producerNode.deref();if(void 0!==i&&t.atTrackingVersion===this.trackingVersion){if(i.producerPollStatus(t.seenValueVersion))return!0}else this.producers.delete(e),i?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=id;id=!0;try{for(const[t,i]of this.consumers){const r=i.consumerNode.deref();void 0!==r&&r.trackingVersion===i.atTrackingVersion?r.onConsumerDependencyMayHaveChanged():(this.consumers.delete(t),r?.producers.delete(this.id))}}finally{id=e}}producerAccessed(){if(id)throw new Error("");if(null===_a)return;let e=_a.producers.get(this.id);void 0===e?(e={consumerNode:_a.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:_a.trackingVersion},_a.producers.set(this.id,e),this.consumers.set(_a.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=_a.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==_a?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let sh=null;const I=()=>{};class M extends Hp{constructor(e,t,i){super(),this.watch=e,this.schedule=t,this.dirty=!1,this.cleanupFn=I,this.registerOnCleanup=r=>{this.cleanupFn=r},this.consumerAllowSignalWrites=i}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=oo(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=I,this.watch(this.registerOnCleanup)}finally{oo(e)}}cleanup(){this.cleanupFn()}}class P{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function B(){return z}function z(n){return n.type.prototype.ngOnChanges&&(n.setInput=K),H}function H(){const n=ee(this),e=n?.current;if(e){const t=n.previous;if(t===As)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function K(n,e,t,i){const r=this.declaredInputs[t],s=ee(n)||function te(n,e){return n[J]=e}(n,{previous:As,current:null}),u=s.current||(s.current={}),_=s.previous,y=_[r];u[r]=new P(y&&y.currentValue,e,_===As),n[i]=e}B.ngInherit=!0;const J="__ngSimpleChanges__";function ee(n){return n[J]||null}const le=function(n,e,t){};function fe(n){for(;Array.isArray(n);)n=n[lr];return n}function Ee(n,e){return fe(e[n])}function Ie(n,e){return fe(e[n.index])}function Ue(n,e){return n.data[e]}function Ae(n,e){const t=e[n];return fs(t)?t:t[lr]}function Fe(n,e){return null==e?null:n[e]}function Me(n){n[Ga]=0}function He(n){1024&n[Fn]||(n[Fn]|=1024,pt(n,1))}function st(n){1024&n[Fn]&&(n[Fn]&=-1025,pt(n,-1))}function pt(n,e){let t=n[Fi];if(null===t)return;t[N]+=e;let i=t;for(t=t[Fi];null!==t&&(1===e&&1===i[N]||-1===e&&0===i[N]);)t[N]+=e,i=t,t=t[Fi]}const ct={lFrame:kv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ci(){return ct.bindingsEnabled}function Ti(){return null!==ct.skipHydrationRootTNode}function Je(){return ct.lFrame.lView}function nn(){return ct.lFrame.tView}function Pi(){let n=Hi();for(;null!==n&&64===n.type;)n=n.parent;return n}function Hi(){return ct.lFrame.currentTNode}function ur(n,e){const t=ct.lFrame;t.currentTNode=n,t.isParent=e}function qa(){return ct.lFrame.isParent}function oc(){ct.lFrame.isParent=!1}function Dr(){const n=ct.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ah(){return ct.lFrame.bindingIndex++}function Iv(n,e){const t=ct.lFrame;t.bindingIndex=t.bindingRootIndex=n,Lm(e)}function Lm(n){ct.lFrame.currentDirectiveIndex=n}function dx(){return ct.lFrame.currentQueryIndex}function zm(n){ct.lFrame.currentQueryIndex=n}function Av(n){const e=n[jt];return 2===e.type?e.declTNode:1===e.type?n[W]:null}function Mv(n,e,t){if(t&gn.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&gn.Host||(r=Av(s),null===r||(s=s[jr],10&r.type))););if(null===r)return!1;e=r,n=s}const i=ct.lFrame=rd();return i.currentTNode=e,i.lView=n,!0}function hx(n){const e=rd(),t=n[jt];ct.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function rd(){const n=ct.lFrame,e=null===n?null:n.child;return null===e?kv(n):e}function kv(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Vm(){const n=ct.lFrame;return ct.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const jm=Vm;function Um(){const n=Vm();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _s(){return ct.lFrame.selectedIndex}function eu(n){ct.lFrame.selectedIndex=n}function pr(){const n=ct.lFrame;return Ue(n.tView,n.selectedIndex)}let Fv=!0;function Gm(){return Fv}function sc(n){Fv=n}function nu(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:_,ngAfterViewInit:y,ngAfterViewChecked:E,ngOnDestroy:D}=s;u&&(n.contentHooks??=[]).push(-t,u),_&&((n.contentHooks??=[]).push(t,_),(n.contentCheckHooks??=[]).push(t,_)),y&&(n.viewHooks??=[]).push(-t,y),E&&((n.viewHooks??=[]).push(t,E),(n.viewCheckHooks??=[]).push(t,E)),null!=D&&(n.destroyHooks??=[]).push(t,D)}}function Ya(n,e,t){iu(n,e,3,t)}function Ys(n,e,t,i){(3&n[Fn])===t&&iu(n,e,t,i)}function ac(n,e){let t=n[Fn];(3&t)===e&&(t&=8191,t+=1,n[Fn]=t)}function iu(n,e,t,i){const s=i??-1,u=e.length-1;let _=0;for(let y=void 0!==i?65535&n[Ga]:0;y<u;y++)if("number"==typeof e[y+1]){if(_=e[y],null!=i&&_>=i)break}else e[y]<0&&(n[Ga]+=65536),(_<s||-1==s)&&($C(n,t,e,y),n[Ga]=(4294901760&n[Ga])+y+2),y++}function od(n,e){le(4,n,e);const t=oo(null);try{e.call(n)}finally{oo(t),le(5,n,e)}}function $C(n,e,t,i){const r=t[i]<0,s=t[i+1],_=n[r?-t[i]:t[i]];r?n[Fn]>>13<n[Ga]>>16&&(3&n[Fn])===e&&(n[Fn]+=8192,od(_,s)):od(_,s)}const Cf=-1;class Gp{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function ru(n){return n!==Cf}function lh(n){return 32767&n}function Wp(n,e){let t=function Xs(n){return n>>16}(n),i=e;for(;t>0;)i=i[jr],t--;return i}let Wm=!0;function Ks(n){const e=Wm;return Wm=n,e}const sd=255,Sf=5;let ch=0;const Xa={};function qp(n,e){const t=Lv(n,e);if(-1!==t)return t;const i=e[jt];i.firstCreatePass&&(n.injectorIndex=e.length,Zm(i.data,n),Zm(e,null),Zm(i.blueprint,null));const r=Zp(n,e),s=n.injectorIndex;if(ru(r)){const u=lh(r),_=Wp(r,e),y=_[jt].data;for(let E=0;E<8;E++)e[s+E]=_[u+E]|y[u+E]}return e[s+8]=r,s}function Zm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Lv(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Zp(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Bv(r),null===i)return Cf;if(t++,r=r[jr],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Cf}function Ym(n,e,t){!function qm(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(No)&&(i=t[No]),null==i&&(i=t[No]=ch++);const r=i&sd;e.data[n+(r>>Sf)]|=1<<r}(n,e,t)}function uh(n,e,t){if(t&gn.Optional||void 0!==n)return n;Xr()}function cc(n,e,t,i){if(t&gn.Optional&&void 0===i&&(i=null),!(t&(gn.Self|gn.Host))){const r=n[Wt],s=Sr(void 0);try{return r?r.get(e,i,t&gn.Optional):Ba(e,i,t&gn.Optional)}finally{Sr(s)}}return uh(i,0,t)}function Xm(n,e,t,i=gn.Default,r){if(null!==n){if(2048&e[Fn]&&!(i&gn.Self)){const u=function El(n,e,t,i,r){let s=n,u=e;for(;null!==s&&null!==u&&2048&u[Fn]&&!(512&u[Fn]);){const _=fx(s,u,t,i|gn.Self,Xa);if(_!==Xa)return _;let y=s.parent;if(!y){const E=u[Jd];if(E){const D=E.get(t,Xa,i);if(D!==Xa)return D}y=Bv(u),u=u[jr]}s=y}return r}(n,e,t,i,Xa);if(u!==Xa)return u}const s=fx(n,e,t,i,Xa);if(s!==Xa)return s}return cc(e,t,i,r)}function fx(n,e,t,i,r){const s=function Kp(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(No)?n[No]:void 0;return"number"==typeof e?e>=0?e&sd:Ar:e}(t);if("function"==typeof s){if(!Mv(e,n,i))return i&gn.Host?uh(r,0,i):cc(e,t,i,r);try{const u=s(i);if(null!=u||i&gn.Optional)return u;Xr()}finally{jm()}}else if("number"==typeof s){let u=null,_=Lv(n,e),y=Cf,E=i&gn.Host?e[Ur][W]:null;for((-1===_||i&gn.SkipSelf)&&(y=-1===_?Zp(n,e):e[_+8],y!==Cf&&xa(i,!1)?(u=e[jt],_=lh(y),e=Wp(y,e)):_=-1);-1!==_;){const D=e[jt];if(os(s,_,D.data)){const R=Xp(_,e,t,u,i,E);if(R!==Xa)return R}y=e[_+8],y!==Cf&&xa(i,e[jt].data[_+8]===E)&&os(s,_,e)?(u=D,_=lh(y),e=Wp(y,e)):_=-1}}return r}function Xp(n,e,t,i,r,s){const u=e[jt],_=u.data[n+8],D=ad(_,u,t,null==i?yl(_)&&Wm:i!=u&&0!=(3&_.type),r&gn.Host&&s===_);return null!==D?Io(e,u,D,_):Xa}function ad(n,e,t,i,r){const s=n.providerIndexes,u=e.data,_=1048575&s,y=n.directiveStart,D=s>>20,U=r?_+D:n.directiveEnd;for(let X=i?_:_+D;X<U;X++){const ie=u[X];if(X<y&&t===ie||X>=y&&ie.type===t)return X}if(r){const X=u[y];if(X&&Lo(X)&&X.type===t)return y}return null}function Io(n,e,t,i){let r=n[t];const s=e.data;if(function GC(n){return n instanceof Gp}(r)){const u=r;u.resolving&&function Pu(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Xe(-200,`Circular dependency in DI detected for ${n}${t}`)}(function vn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():cn(n)}(s[t]));const _=Ks(u.canSeeViewProviders);u.resolving=!0;const y=u.injectImpl?Sr(u.injectImpl):null;Mv(n,i,gn.Default);try{r=n[t]=u.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function $p(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const u=z(e);(t.preOrderHooks??=[]).push(n,u),(t.preOrderCheckHooks??=[]).push(n,u)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==y&&Sr(y),Ks(_),u.resolving=!1,jm()}}return r}function os(n,e,t){return!!(t[e+(n>>Sf)]&1<<n)}function xa(n,e){return!(n&gn.Self||n&gn.Host&&e)}class ld{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Xm(this._tNode,this._lView,e,Ws(i),t)}}function Ar(){return new ld(Pi(),Je())}function zo(n){return ts(()=>{const e=n.prototype.constructor,t=e[Ms]||dh(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Ms]||dh(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function dh(n){return Gl(n)?()=>{const e=dh(mn(n));return e&&e()}:rc(n)}function Bv(n){const e=n[jt],t=e.type;return 2===t?e.declTNode:1===t?n[W]:null}const fh="__parameters__";function ph(n,e,t){return ts(()=>{const i=function Qm(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const u=new r(...s);return _.annotation=u,_;function _(y,E,D){const R=y.hasOwnProperty(fh)?y[fh]:Object.defineProperty(y,fh,{value:[]})[fh];for(;R.length<=D;)R.push(null);return(R[D]=R[D]||[]).push(u),y}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function cd(n,e){n.forEach(t=>Array.isArray(t)?cd(t,e):e(t))}function _x(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function e0(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function mh(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function ya(n,e,t){let i=ud(n,e);return i>=0?n[1|i]=t:(i=~i,function jv(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Df(n,e){const t=ud(n,e);if(t>=0)return n[1|t]}function ud(n,e){return function gh(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),u=n[s<<t];if(e===u)return s<<t;u>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const n0=Kl(ph("Inject",n=>({token:n})),-1),Gr=Kl(ph("Optional"),8),hd=Kl(ph("SkipSelf"),4);function o0(n){return 128==(128&n.flags)}var Qs=(()=>((Qs=Qs||{})[Qs.Important=1]="Important",Qs[Qs.DashCase=2]="DashCase",Qs))();const l_=new Map;let su=0;const a0="__ngContext__";function eo(n,e){fs(e)?(n[a0]=e[Xu],function aT(n){l_.set(n[Xu],n)}(e)):n[a0]=e}let Dx;function br(n,e){return Dx(n,e)}function Nf(n){const e=n[Fi];return So(e)?e[Fi]:e}function Lf(n){return Mx(n[cr])}function Ax(n){return Mx(n[F])}function Mx(n){for(;null!==n&&!So(n);)n=n[F];return n}function fc(n,e,t,i,r){if(null!=i){let s,u=!1;So(i)?s=i:fs(i)&&(u=!0,i=i[lr]);const _=fe(i);0===n&&null!==t?null==r?Bx(e,t,_):xh(e,t,_,r||null,!0):1===n&&null!==t?xh(e,t,_,r||null,!0):2===n?function md(n,e,t){const i=f0(n,e);i&&function xT(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,_,u):3===n&&e.destroyNode(_),null!=s&&function d1(n,e,t,i,r){const s=t[Rs];s!==fe(t)&&fc(e,n,i,s,r);for(let _=Hr;_<t.length;_++){const y=t[_];lu(y[jt],y,n,e,i,s)}}(e,n,s,t,r)}}function u_(n,e,t){return n.createElement(e,t)}function h_(n,e){const t=n[xl],i=t.indexOf(e);st(e),t.splice(i,1)}function Fx(n,e){if(n.length<=Hr)return;const t=Hr+e,i=n[t];if(i){const r=i[Kc];null!==r&&r!==n&&h_(r,i),e>0&&(n[t-1][F]=i[F]);const s=e0(n,Hr+e);!function d_(n,e){lu(n,e,e[sn],2,null,null),e[lr]=null,e[W]=null}(i[jt],i);const u=s[is];null!==u&&u.detachView(s[jt]),i[Fi]=null,i[F]=null,i[Fn]&=-129}return i}function r1(n,e){if(!(256&e[Fn])){const t=e[sn];e[tc]?.destroy(),e[nc]?.destroy(),t.destroyNode&&lu(n,e,t,3,null,null),function _T(n){let e=n[cr];if(!e)return Nx(n[jt],n);for(;e;){let t=null;if(fs(e))t=e[cr];else{const i=e[Hr];i&&(t=i)}if(!t){for(;e&&!e[F]&&e!==n;)fs(e)&&Nx(e[jt],e),e=e[Fi];null===e&&(e=n),fs(e)&&Nx(e[jt],e),t=e&&e[F]}e=t}}(e)}}function Nx(n,e){if(!(256&e[Fn])){e[Fn]&=-129,e[Fn]|=256,function gT(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Gp)){const s=t[i+1];if(Array.isArray(s))for(let u=0;u<s.length;u+=2){const _=r[s[u]],y=s[u+1];le(4,_,y);try{y.call(_)}finally{le(5,_,y)}}else{le(4,r,s);try{s.call(r)}finally{le(5,r,s)}}}}}(n,e),function mT(n,e){const t=n.cleanup,i=e[ge];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const u=t[s+3];u>=0?i[u]():i[-u].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[ge]=null);const r=e[Wa];if(null!==r){e[Wa]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[jt].type&&e[sn].destroy();const t=e[Kc];if(null!==t&&So(e[Fi])){t!==e[Fi]&&h_(t,e);const i=e[is];null!==i&&i.detachView(n)}!function lT(n){l_.delete(n[Xu])}(e)}}function Lx(n,e,t){return function f_(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[lr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Co.None||s===Co.Emulated)return null}return Ie(i,t)}}(n,e.parent,t)}function xh(n,e,t,i,r){n.insertBefore(e,t,i,r)}function Bx(n,e,t){n.appendChild(e,t)}function yh(n,e,t,i,r){null!==i?xh(n,e,t,i,r):Bx(n,e,t)}function f0(n,e){return n.parentNode(e)}function zx(n,e,t){return a1(n,e,t)}let Vx,p_,vh,__,a1=function s1(n,e,t){return 40&n.type?Ie(n,t):null};function bh(n,e,t,i){const r=Lx(n,i,e),s=e[sn],_=zx(i.parent||e[W],i,e);if(null!=r)if(Array.isArray(t))for(let y=0;y<t.length;y++)yh(s,r,t[y],_,!1);else yh(s,r,t,_,!1);void 0!==Vx&&Vx(s,i,e,t,r)}function _d(n,e){if(null!==e){const t=e.type;if(3&t)return Ie(e,n);if(4&t)return jx(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return _d(n,i);{const r=n[e.index];return So(r)?jx(-1,r):fe(r)}}if(32&t)return br(e,n)()||fe(n[e.index]);{const i=l1(n,e);return null!==i?Array.isArray(i)?i[0]:_d(Nf(n[Ur]),i):_d(n,e.next)}}return null}function l1(n,e){return null!==e?n[Ur][W].projection[e.projection]:null}function jx(n,e){const t=Hr+n+1;if(t<e.length){const i=e[t],r=i[jt].firstChild;if(null!==r)return _d(i,r)}return e[Rs]}function _0(n,e,t,i,r,s,u){for(;null!=t;){const _=i[t.index],y=t.type;if(u&&0===e&&(_&&eo(fe(_),i),t.flags|=2),32!=(32&t.flags))if(8&y)_0(n,e,t.child,i,r,s,!1),fc(e,n,r,_,s);else if(32&y){const E=br(t,i);let D;for(;D=E();)fc(e,n,r,D,s);fc(e,n,r,_,s)}else 16&y?u1(n,e,i,t,r,s):fc(e,n,r,_,s);t=u?t.projectionNext:t.next}}function lu(n,e,t,i,r,s){_0(t,i,n.firstChild,e,r,s,!1)}function u1(n,e,t,i,r,s){const u=t[Ur],y=u[W].projection[i.projection];if(Array.isArray(y))for(let E=0;E<y.length;E++)fc(e,n,r,y[E],s);else{let E=y;const D=u[Fi];o0(i)&&(E.flags|=128),_0(n,e,E,D,r,s,!0)}}function Ux(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Hx(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Ha(n,e,i),null!==r&&Ux(n,e,r),null!==s&&function f1(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Vf(n){return function $x(){if(void 0===p_&&(p_=null,Ri.trustedTypes))try{p_=Ri.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return p_}()?.createHTML(n)||n}function g1(n){return function g0(){if(void 0===__&&(__=null,Ri.trustedTypes))try{__=Ri.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return __}()?.createScriptURL(n)||n}class wh{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${La})`}}class bT extends wh{getTypeName(){return"HTML"}}class vT extends wh{getTypeName(){return"Style"}}class x0 extends wh{getTypeName(){return"Script"}}class wT extends wh{getTypeName(){return"URL"}}class x1 extends wh{getTypeName(){return"ResourceURL"}}function ta(n){return n instanceof wh?n.changingThisBreaksApplicationSecurity:n}function Sl(n,e){const t=function ET(n){return n instanceof wh&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${La})`)}return t===e}class jo{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Vf(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class pc{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Vf(e),t}}const y0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function uu(n){return(n=String(n)).match(y0)?n:"unsafe:"+n}function du(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function m_(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const Uf=du("area,br,col,hr,img,wbr"),v1=du("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),w1=du("rp,rt"),Ni=m_(Uf,m_(v1,du("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),m_(w1,du("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),m_(w1,v1)),g_=du("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_c=m_(g_,du("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),du("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Hf=du("script,style,template");class E1{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Ni.hasOwnProperty(t))return this.sanitizedSomething=!0,!Hf.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),u=s.name,_=u.toLowerCase();if(!_c.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let y=s.value;g_[_]&&(y=uu(y)),this.buf.push(" ",u,'="',C1(y),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Ni.hasOwnProperty(t)&&!Uf.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(C1(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const RT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,PT=/([^\#-~ |!])/g;function C1(n){return n.replace(/&/g,"&amp;").replace(RT,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(PT,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let v0;function T1(n,e){let t=null;try{v0=v0||function b1(n){const e=new pc(n);return function Gx(){try{return!!(new window.DOMParser).parseFromString(Vf(""),"text/html")}catch{return!1}}()?new jo(e):e}(n);let i=e?String(e):"";t=v0.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=v0.getInertBodyElement(i)}while(i!==s);return Vf((new E1).sanitizeChildren(Wx(t)||t))}finally{if(t){const i=Wx(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Wx(n){return"content"in n&&function OT(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var $i=(()=>(($i=$i||{})[$i.NONE=0]="NONE",$i[$i.HTML=1]="HTML",$i[$i.STYLE=2]="STYLE",$i[$i.SCRIPT=3]="SCRIPT",$i[$i.URL=4]="URL",$i[$i.RESOURCE_URL=5]="RESOURCE_URL",$i))();function gd(n){const e=hu();return e?e.sanitize($i.URL,n)||"":Sl(n,"URL")?ta(n):uu(cn(n))}function E0(n){const e=hu();if(e)return g1(e.sanitize($i.RESOURCE_URL,n)||"");if(Sl(n,"ResourceURL"))return g1(ta(n));throw new Xe(904,!1)}function hu(){const n=Je();return n&&n[xi].sanitizer}class vt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Tt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Eh=new vt("ENVIRONMENT_INITIALIZER"),x_=new vt("INJECTOR",-1),S1=new vt("INJECTOR_DEF_TYPES");class Zx{get(e,t=Gs){if(t===Gs){const i=new Error(`NullInjectorError: No provider for ${An(e)}!`);throw i.name="NullInjectorError",i}return t}}function VT(...n){return{\u0275providers:Yx(0,n),\u0275fromNgModule:!0}}function Yx(n,...e){const t=[],i=new Set;let r;return cd(e,s=>{const u=s;y_(u,t,[],i)&&(r||=[],r.push(u))}),void 0!==r&&Xx(r,t),t}function Xx(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];Kx(r,s=>{e.push(s)})}}function y_(n,e,t,i){if(!(n=mn(n)))return!1;let r=null,s=zc(n);const u=!s&&Kn(n);if(s||u){if(u&&!u.standalone)return!1;r=n}else{const y=n.ngModule;if(s=zc(y),!s)return!1;r=y}const _=i.has(r);if(u){if(_)return!1;if(i.add(r),u.dependencies){const y="function"==typeof u.dependencies?u.dependencies():u.dependencies;for(const E of y)y_(E,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!_){let E;i.add(r);try{cd(s.imports,D=>{y_(D,e,t,i)&&(E||=[],E.push(D))})}finally{}void 0!==E&&Xx(E,e)}if(!_){const E=rc(r)||(()=>new r);e.push({provide:r,useFactory:E,deps:wi},{provide:S1,useValue:r,multi:!0},{provide:Eh,useValue:()=>lt(r),multi:!0})}const y=s.providers;null==y||_||Kx(y,D=>{e.push(D)})}}return r!==n&&void 0!==n.providers}function Kx(n,e){for(let t of n)Wl(t)&&(t=t.\u0275providers),Array.isArray(t)?Kx(t,e):e(t)}const I1=ui({provide:String,useValue:ui});function Il(n){return null!==n&&"object"==typeof n&&I1 in n}function xd(n){return"function"==typeof n}const ey=new vt("Set Injector scope."),S0={},A1={};let I0;function yd(){return void 0===I0&&(I0=new Zx),I0}class mc{}class D0 extends mc{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ty(e,u=>this.processProvider(u)),this.records.set(x_,Ch(void 0,this)),r.has("environment")&&this.records.set(mc,Ch(void 0,this));const s=this.records.get(ey);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(S1.multi,wi,gn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=On(this),i=Sr(void 0);try{return e()}finally{On(t),Sr(i)}}get(e,t=Gs,i=gn.Default){if(this.assertNotDestroyed(),e.hasOwnProperty($u))return e[$u](this);i=Ws(i);const r=On(this),s=Sr(void 0);try{if(!(i&gn.SkipSelf)){let _=this.records.get(e);if(void 0===_){const y=function UT(n){return"function"==typeof n||"object"==typeof n&&n instanceof vt}(e)&&Eo(e);_=y&&this.injectableDefInScope(y)?Ch(b_(e),S0):null,this.records.set(e,_)}if(null!=_)return this.hydrate(e,_)}return(i&gn.Self?yd():this.parent).get(e,t=i&gn.Optional&&t===Gs?null:t)}catch(u){if("NullInjectorError"===u.name){if((u[Xl]=u[Xl]||[]).unshift(An(e)),r)throw u;return function Gc(n,e,t,i){const r=n[Xl];throw e[Va]&&r.unshift(e[Va]),n.message=function Uu(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=An(e);if(Array.isArray(e))r=e.map(An).join(" -> ");else if("object"==typeof e){let s=[];for(let u in e)if(e.hasOwnProperty(u)){let _=e[u];s.push(u+":"+("string"==typeof _?JSON.stringify(_):An(_)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(qd,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Xl]=null,n}(u,e,"R3InjectorError",this.source)}throw u}finally{Sr(s),On(r)}}resolveInjectorInitializers(){const e=On(this),t=Sr(void 0);try{const i=this.get(Eh.multi,wi,gn.Self);for(const r of i)r()}finally{On(e),Sr(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(An(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Xe(205,!1)}processProvider(e){let t=xd(e=mn(e))?e:mn(e&&e.provide);const i=function M1(n){return Il(n)?Ch(void 0,n.useValue):Ch(v_(n),S0)}(e);if(xd(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Ch(void 0,S0,!0),r.factory=()=>$c(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===S0&&(t.value=A1,t.value=t.factory()),"object"==typeof t.value&&t.value&&function M0(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=mn(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function b_(n){const e=Eo(n),t=null!==e?e.factory:rc(n);if(null!==t)return t;if(n instanceof vt)throw new Xe(204,!1);if(n instanceof Function)return function $f(n){const e=n.length;if(e>0)throw mh(e,"?"),new Xe(204,!1);const t=function af(n){return n&&(n[Vc]||n[Zl])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Xe(204,!1)}function v_(n,e,t){let i;if(xd(n)){const r=mn(n);return rc(r)||b_(r)}if(Il(n))i=()=>mn(n.useValue);else if(function Jx(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...$c(n.deps||[]));else if(function Qx(n){return!(!n||!n.useExisting)}(n))i=()=>lt(mn(n.useExisting));else{const r=mn(n&&(n.useClass||n.provide));if(!function A0(n){return!!n.deps}(n))return rc(r)||b_(r);i=()=>new r(...$c(n.deps))}return i}function Ch(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ty(n,e){for(const t of n)Array.isArray(t)?ty(t,e):t&&Wl(t)?ty(t.\u0275providers,e):e(t)}const k0=new vt("AppId",{providedIn:"root",factory:()=>HT}),HT="ng",k1=new vt("Platform Initializer"),xs=new vt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ny=new vt("AnimationModuleType"),iy=new vt("CSP nonce",{providedIn:"root",factory:()=>function cu(){if(void 0!==vh)return vh;if(typeof document<"u")return document;throw new Xe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let N1=(n,e)=>null;function w_(n,e){return N1(n,e)}class B0{}class E_{}class ly{resolveComponentFactory(e){throw function z0(n){const e=Error(`No component factory found for ${An(n)}.`);return e.ngComponent=n,e}(e)}}let nl=(()=>{class n{}return n.NULL=new ly,n})();function qT(){return vd(Pi(),Je())}function vd(n,e){return new to(Ie(n,e))}let to=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=qT,n})();function V0(n){return n instanceof to?n.nativeElement:n}class C_{}let fu=(()=>{class n{constructor(){this.destroyNode=null}}return n.__NG_ELEMENT_ID__=()=>function ZT(){const n=Je(),t=Ae(Pi().index,n);return(fs(t)?t:n)[sn]}(),n})(),YT=(()=>{class n{}return n.\u0275prov=Tt({token:n,providedIn:"root",factory:()=>null}),n})();class gc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const H1=new gc("16.1.1"),Dh={};function T_(n){for(;n;){n[Fn]|=64;const e=Nf(n);if(ed(n)&&!e)return n;n=e}return null}function cy(n){return n.ngOriginalError}class xc{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&cy(e);for(;t&&cy(t);)t=cy(t);return t||null}}const pu=new vt("",{providedIn:"root",factory:()=>!1});function bc(n){return n instanceof Function?n():n}class Y1 extends Hp{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){T_(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,t,i){const r=oo(this);this.trackingVersion++;try{e(t,i)}finally{oo(r)}}destroy(){this.trackingVersion++}}let H0=null;function S_(){return H0??=new Y1,H0}function X1(n,e){return n[e]??S_()}function Ah(n,e){const t=S_();t.hasReadASignal&&(n[e]=H0,t.lView=n,H0=new Y1)}const Hn={};function oi(n){kl(nn(),Je(),_s()+n,!1)}function kl(n,e,t,i){if(!i)if(3==(3&e[Fn])){const s=n.preOrderCheckHooks;null!==s&&Ya(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Ys(e,s,0,t)}eu(t)}function py(n,e=null,t=null,i){const r=_y(n,e,t,i);return r.resolveInjectorInitializers(),r}function _y(n,e=null,t=null,i,r=new Set){const s=[t||wi,VT(n)];return i=i||("object"==typeof n?void 0:An(n)),new D0(s,e||yd(),i||null,r)}let as=(()=>{class n{static create(t,i){if(Array.isArray(t))return py({name:""},i,t,"");{const r=t.name??"";return py({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=Gs,n.NULL=new Zx,n.\u0275prov=Tt({token:n,providedIn:"any",factory:()=>lt(x_)}),n.__NG_ELEMENT_ID__=-1,n})();function nt(n,e=gn.Default){const t=Je();return null===t?lt(n,e):Xm(Pi(),t,mn(n),e)}function a(n,e,t,i,r,s,u,_,y,E,D){const R=e.blueprint.slice();return R[lr]=r,R[Fn]=140|i,(null!==E||n&&2048&n[Fn])&&(R[Fn]|=2048),Me(R),R[Fi]=R[jr]=n,R[tt]=t,R[xi]=u||n&&n[xi],R[sn]=_||n&&n[sn],R[Wt]=y||n&&n[Wt]||null,R[W]=s,R[Xu]=function Js(){return su++}(),R[Zs]=D,R[Jd]=E,R[Ur]=2==e.type?n[Ur]:R,R}function o(n,e,t,i,r){let s=n.data[e];if(null===s)s=function l(n,e,t,i,r){const s=Hi(),u=qa(),y=n.data[e]=function ae(n,e,t,i,r,s){let u=e?e.injectorIndex:-1,_=0;return Ti()&&(_|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:u,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:_,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=y),null!==s&&(u?null==s.child&&null!==y.parent&&(s.child=y):null===s.next&&(s.next=y,y.prev=s)),y}(n,e,t,i,r),function Sv(){return ct.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const u=function Kr(){const n=ct.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===u?-1:u.injectorIndex}return ur(s,!0),s}function d(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function p(n,e,t,i,r){const s=X1(e,tc),u=_s(),_=2&i;try{if(eu(-1),_&&e.length>wn&&kl(n,e,wn,!1),le(_?2:0,r),_)s.runInContext(t,i,r);else{const E=oo(null);try{t(i,r)}finally{oo(E)}}}finally{_&&null===e[tc]&&Ah(e,tc),eu(u),le(_?3:1,r)}}function g(n,e,t){if(mf(e)){const i=oo(null);try{const s=e.directiveEnd;for(let u=e.directiveStart;u<s;u++){const _=n.data[u];_.contentQueries&&_.contentQueries(1,t[u],u)}}finally{oo(i)}}}function b(n,e,t){Ci()&&(function ht(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;yl(t)&&function Yn(n,e,t){const i=Ie(e,n),r=T(t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const _=Li(n,a(n,r,null,u,i,e,null,n[xi].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=_}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||qp(t,e),eo(i,e);const u=t.initialInputs;for(let _=r;_<s;_++){const y=n.data[_],E=Io(e,n,_,t);eo(E,e),null!==u&&hn(0,_-r,E,y,0,u),Lo(y)&&(Ae(t.index,e)[tt]=Io(e,n,_,t))}}(n,e,t,Ie(t,e)),64==(64&t.flags)&&gt(n,e,t))}function w(n,e,t=Ie){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const u=i[s+1],_=-1===u?t(e,n):n[u];n[r++]=_}}}function T(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=S(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function S(n,e,t,i,r,s,u,_,y,E,D){const R=wn+i,U=R+r,X=function k(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Hn);return t}(R,U),ie="function"==typeof E?E():E;return X[jt]={type:n,blueprint:X,template:t,queries:null,viewQuery:_,declTNode:e,data:X.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:y,consts:ie,incompleteFirstPass:!1,ssrId:D}}let V=n=>null;function _e(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?oe(t,e,r,s):i.hasOwnProperty(r)&&oe(t,e,i[r],s)}return t}function oe(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function pe(n,e,t,i,r,s,u,_){const y=Ie(e,t);let D,E=e.inputs;!_&&null!=E&&(D=E[i])?(Mr(n,t,D,i,r),yl(e)&&function je(n,e){const t=Ae(e,n);16&t[Fn]||(t[Fn]|=64)}(t,e.index)):3&e.type&&(i=function be(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=u?u(r,e.value||"",i):r,s.setProperty(y,i,r))}function _t(n,e,t,i){if(Ci()){const r=null===i?null:{"":-1},s=function It(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const u=t[s];if($a(e,u.selectors,!1))if(i||(i=[]),Lo(u))if(null!==u.findHostDirectiveDefs){const _=[];r=r||new Map,u.findHostDirectiveDefs(u,_,r),i.unshift(..._,u),rn(n,e,_.length)}else i.unshift(u),rn(n,e,0);else r=r||new Map,u.findHostDirectiveDefs?.(u,i,r),i.push(u)}return null===i?null:[i,r]}(n,t);let u,_;null===s?u=_=null:[u,_]=s,null!==u&&$e(n,e,t,u,r,_),r&&function kt(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Xe(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=Zc(t.mergedAttrs,t.attrs)}function $e(n,e,t,i,r,s){for(let E=0;E<i.length;E++)Ym(qp(t,e),n,i[E].type);!function At(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let E=0;E<i.length;E++){const D=i[E];D.providersResolver&&D.providersResolver(D)}let u=!1,_=!1,y=d(n,e,i.length,null);for(let E=0;E<i.length;E++){const D=i[E];t.mergedAttrs=Zc(t.mergedAttrs,D.hostAttrs),un(n,t,e,y,D),Ut(y,D,r),null!==D.contentQueries&&(t.flags|=4),(null!==D.hostBindings||null!==D.hostAttrs||0!==D.hostVars)&&(t.flags|=64);const R=D.type.prototype;!u&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!_&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),_=!0),y++}!function he(n,e,t){const r=e.directiveEnd,s=n.data,u=e.attrs,_=[];let y=null,E=null;for(let D=e.directiveStart;D<r;D++){const R=s[D],U=t?t.get(R):null,ie=U?U.outputs:null;y=_e(R.inputs,D,y,U?U.inputs:null),E=_e(R.outputs,D,E,ie);const xe=null===y||null===u||Xc(e)?null:Tn(y,D,u);_.push(xe)}null!==y&&(y.hasOwnProperty("class")&&(e.flags|=8),y.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=_,e.inputs=y,e.outputs=E}(n,t,s)}function gt(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,u=function Dv(){return ct.lFrame.currentDirectiveIndex}();try{eu(s);for(let _=i;_<r;_++){const y=n.data[_],E=e[_];Lm(_),(null!==y.hostBindings||0!==y.hostVars||null!==y.hostAttrs)&&We(y,E)}}finally{eu(-1),Lm(u)}}function We(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function rn(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Ut(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Lo(e)&&(t[""]=n)}}function un(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=rc(r.type)),u=new Gp(s,Lo(r),nt);n.blueprint[i]=u,t[i]=u,function et(n,e,t,i,r){const s=r.hostBindings;if(s){let u=n.hostBindingOpCodes;null===u&&(u=n.hostBindingOpCodes=[]);const _=~e.index;(function rt(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(u)!=_&&u.push(_),u.push(t,i,s)}}(n,e,i,d(n,t,r.hostVars,Hn),r)}function Cn(n,e,t,i,r,s){const u=Ie(n,e);!function zn(n,e,t,i,r,s,u){if(null==s)n.removeAttribute(e,r,t);else{const _=null==u?cn(s):u(s,i||"",r);n.setAttribute(e,r,_,t)}}(e[sn],u,s,n.value,t,i,r)}function hn(n,e,t,i,r,s){const u=s[e];if(null!==u)for(let _=0;_<u.length;)Ii(i,t,u[_++],u[_++],u[_++])}function Ii(n,e,t,i,r){const s=oo(null);try{const u=n.inputTransforms;null!==u&&u.hasOwnProperty(i)&&(r=u[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{oo(s)}}function Tn(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const u=n[s];for(let _=0;_<u.length;_+=2)if(u[_]===e){i.push(s,u[_+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function $n(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function Oi(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const u=n.data[s];zm(t[i]),u.contentQueries(2,e[s],s)}}}function Li(n,e){return n[cr]?n[St][F]=e:n[cr]=e,n[St]=e,e}function Bi(n,e,t){zm(0);const i=oo(null);try{e(n,t)}finally{oo(i)}}function Xi(n){return n[ge]||(n[ge]=[])}function _r(n){return n.cleanup||(n.cleanup=[])}function Di(n,e){const t=n[Wt],i=t?t.get(xc,null):null;i&&i.handleError(e)}function Mr(n,e,t,i,r){for(let s=0;s<t.length;){const u=t[s++],_=t[s++];Ii(n.data[u],e[u],i,_,r)}}function fi(n,e){const t=Ae(e,n),i=t[jt];!function dr(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[lr];null!==r&&null===t[Zs]&&(t[Zs]=w_(r,t[Wt])),Wr(i,t,t[tt])}function Wr(n,e,t){hx(e);try{const i=n.viewQuery;null!==i&&Bi(1,i,t);const r=n.template;null!==r&&p(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Oi(n,e),n.staticViewQueries&&Bi(2,n.viewQuery,t);const s=n.components;null!==s&&function zi(n,e){for(let t=0;t<e.length;t++)fi(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Fn]&=-5,Um()}}let _o=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const s=typeof Zone>"u"?null:Zone.current,u=new M(t,E=>{this.all.has(E)&&this.queue.set(E,s)},r);let _;this.all.add(u),u.notify();const y=()=>{u.cleanup(),_?.(),this.all.delete(u),this.queue.delete(u)};return _=i?.onDestroy(y),{destroy:y}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}}return n.\u0275prov=Tt({token:n,providedIn:"root",factory:()=>new n}),n})();function no(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let u=0;u<e.length;u++){const _=e[u];"number"==typeof _?s=_:1==s?r=Fc(r,_):2==s&&(i=Fc(i,_+": "+e[++u]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function ba(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(fe(s)),So(s)){for(let _=Hr;_<s.length;_++){const y=s[_],E=y[jt].firstChild;null!==E&&ba(y[jt],y,E,i)}s[Rs]!==s[lr]&&i.push(s[Rs])}const u=t.type;if(8&u)ba(n,e,t.child,i);else if(32&u){const _=br(t,e);let y;for(;y=_();)i.push(y)}else if(16&u){const _=l1(e,t);if(Array.isArray(_))i.push(..._);else{const y=Nf(e[Ur]);ba(y[jt],y,_,i,!0)}}t=r?t.projectionNext:t.next}return i}function mu(n,e,t,i=!0){const r=e[xi].rendererFactory;r.begin&&r.begin();try{my(n,e,n.template,t)}catch(u){throw i&&Di(e,u),u}finally{r.end&&r.end(),e[xi].effectManager?.flush()}}function my(n,e,t,i){const r=e[Fn];if(256!=(256&r)){e[xi].effectManager?.flush(),hx(e);try{Me(e),function Jc(n){return ct.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&p(n,e,t,2,i);const u=3==(3&r);if(u){const E=n.preOrderCheckHooks;null!==E&&Ya(e,E,null)}else{const E=n.preOrderHooks;null!==E&&Ys(e,E,0,null),ac(e,0)}if(function n2(n){for(let e=Lf(n);null!==e;e=Ax(e)){if(!e[Lp])continue;const t=e[xl];for(let i=0;i<t.length;i++){He(t[i])}}}(e),gy(e,2),null!==n.contentQueries&&Oi(n,e),u){const E=n.contentCheckHooks;null!==E&&Ya(e,E)}else{const E=n.contentHooks;null!==E&&Ys(e,E,1),ac(e,1)}!function t2(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=X1(e,nc);try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)eu(~s);else{const u=s,_=t[++r],y=t[++r];Iv(_,u),i.runInContext(y,2,e[u])}}}finally{null===e[nc]&&Ah(e,nc),eu(-1)}}(n,e);const _=n.components;null!==_&&Rl(e,_,0);const y=n.viewQuery;if(null!==y&&Bi(2,y,i),u){const E=n.viewCheckHooks;null!==E&&Ya(e,E)}else{const E=n.viewHooks;null!==E&&Ys(e,E,2),ac(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Fn]&=-73,st(e)}finally{Um()}}}function gy(n,e){for(let t=Lf(n);null!==t;t=Ax(t))for(let i=Hr;i<t.length;i++)W0(t[i],e)}function xy(n,e,t){W0(Ae(e,n),t)}function W0(n,e){if(!function Ze(n){return 128==(128&n[Fn])}(n))return;const t=n[jt];if(80&n[Fn]&&0===e||1024&n[Fn]||2===e)my(t,n,t.template,n[tt]);else if(n[N]>0){gy(n,1);const r=n[jt].components;null!==r&&Rl(n,r,1)}}function Rl(n,e,t){for(let i=0;i<e.length;i++)xy(n,e[i],t)}class Yf{get rootNodes(){const e=this._lView,t=e[jt];return ba(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[tt]}set context(e){this._lView[tt]=e}get destroyed(){return 256==(256&this._lView[Fn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Fi];if(So(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Fx(e,i),e0(t,i))}this._attachedToViewContainer=!1}r1(this._lView[jt],this._lView)}onDestroy(e){!function $t(n,e){if(256==(256&n[Fn]))throw new Xe(911,!1);null===n[Wa]&&(n[Wa]=[]),n[Wa].push(e)}(this._lView,e)}markForCheck(){T_(this._cdRefInjectingView||this._lView)}detach(){this._lView[Fn]&=-129}reattach(){this._lView[Fn]|=128}detectChanges(){mu(this._lView[jt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Rx(n,e){lu(n,e,e[sn],2,null,null)}(this._lView[jt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Xe(902,!1);this._appRef=e}}class kh extends Yf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;mu(e[jt],e,e[tt],!1)}checkNoChanges(){}get context(){return null}}class q0 extends nl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Kn(e);return new M_(t,this.ngModule)}}function Z0(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class yy{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Ws(i);const r=this.injector.get(e,Dh,i);return r!==Dh||t===Dh?r:this.parentInjector.get(e,t,i)}}class M_ extends E_{get inputs(){return Z0(this.componentDef.inputs)}get outputs(){return Z0(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Yd(n){return n.map(ff).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof mc?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const u=s?new yy(e,s):e,_=u.get(C_,null);if(null===_)throw new Xe(407,!1);const D={rendererFactory:_,sanitizer:u.get(YT,null),effectManager:u.get(_o,null)},R=_.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",X=i?function O(n,e,t,i){const s=i.get(pu,!1)||t===Co.ShadowDom,u=n.selectRootElement(e,s);return function L(n){V(n)}(u),u}(R,i,this.componentDef.encapsulation,u):u_(R,U,function Ed(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(U)),ze=this.componentDef.signals?4608:this.componentDef.onPush?576:528,Qe=S(0,null,null,1,0,null,null,null,null,null,null),Ve=a(null,Qe,null,ze,null,null,D,R,u,null,null);let Bt,Qt;hx(Ve);try{const Sn=this.componentDef;let Wi,co=null;Sn.findHostDirectiveDefs?(Wi=[],co=new Map,Sn.findHostDirectiveDefs(Sn,Wi,co),Wi.push(Sn)):Wi=[Sn];const Vl=function k_(n,e){const t=n[jt],i=wn;return n[i]=e,o(t,i,2,"#host",null)}(Ve,X),Aa=function by(n,e,t,i,r,s,u){const _=r[jt];!function r2(n,e,t,i){for(const r of n)e.mergedAttrs=Zc(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(no(e,e.mergedAttrs,!0),null!==t&&Hx(i,t,e))}(i,n,e,u);let y=null;null!==e&&(y=w_(e,r[Wt]));const E=s.rendererFactory.createRenderer(e,t);let D=16;t.signals?D=4096:t.onPush&&(D=64);const R=a(r,T(t),null,D,r[n.index],n,s,E,null,null,y);return _.firstCreatePass&&rn(_,n,i.length-1),Li(r,R),r[n.index]=R}(Vl,X,Sn,Wi,Ve,D,R);Qt=Ue(Qe,wn),X&&function dU(n,e,t,i){if(i)Ha(n,t,["ng-version",H1.full]);else{const{attrs:r,classes:s}=function pf(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!To(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Ha(n,t,r),s&&s.length>0&&Ux(n,t,s.join(" "))}}(R,Sn,X,i),void 0!==t&&function hU(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(Qt,this.ngContentSelectors,t),Bt=function Rh(n,e,t,i,r,s){const u=Pi(),_=r[jt],y=Ie(u,r);$e(_,r,u,t,null,i);for(let D=0;D<t.length;D++)eo(Io(r,_,u.directiveStart+D,u),r);gt(_,r,u),y&&eo(y,r);const E=Io(r,_,u.directiveStart+u.componentOffset,u);if(n[tt]=r[tt]=E,null!==s)for(const D of s)D(E,e);return g(_,u,n),E}(Aa,Sn,Wi,co,Ve,[fU]),Wr(Qe,Ve,null)}finally{Um()}return new na(this.componentType,Bt,vd(Qt,Ve),Ve,Qt)}}class na extends B0{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new kh(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Mr(s[jt],s,r,e,t),this.previousInputValues.set(e,t),T_(Ae(this._tNode.index,s))}}get injector(){return new ld(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function fU(){const n=Pi();nu(Je()[jt],n)}function Ki(n){let e=function AR(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Lo(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Xe(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const u=n;u.inputs=o2(n.inputs),u.inputTransforms=o2(n.inputTransforms),u.declaredInputs=o2(n.declaredInputs),u.outputs=o2(n.outputs);const _=r.hostBindings;_&&gU(n,_);const y=r.viewQuery,E=r.contentQueries;if(y&&_U(n,y),E&&mU(n,E),Yr(n.inputs,r.inputs),Yr(n.declaredInputs,r.declaredInputs),Yr(n.outputs,r.outputs),null!==r.inputTransforms&&(null===u.inputTransforms&&(u.inputTransforms={}),Yr(u.inputTransforms,r.inputTransforms)),Lo(r)&&r.data.animation){const D=n.data;D.animation=(D.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let u=0;u<s.length;u++){const _=s[u];_&&_.ngInherit&&_(n),_===Ki&&(t=!1)}}e=Object.getPrototypeOf(e)}!function pU(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Zc(r.hostAttrs,t=Zc(t,r.hostAttrs))}}(i)}function o2(n){return n===As?{}:n===wi?[]:n}function _U(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function mU(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function gU(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function PR(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function s2(n){return!!tS(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function tS(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Cd(n,e,t){return n[e]=t}function ia(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function gu(n,e,t,i){const r=Je();return ia(r,ah(),e)&&(nn(),Cn(pr(),r,n,e,t,i)),gu}function X0(n,e,t,i){return ia(n,ah(),t)?e+cn(t)+i:Hn}function Pl(n,e,t,i,r,s,u,_){const y=Je(),E=nn(),D=n+wn,R=E.firstCreatePass?function UU(n,e,t,i,r,s,u,_,y){const E=e.consts,D=o(e,n,4,u||null,Fe(E,_));_t(e,t,D,Fe(E,y)),nu(e,D);const R=D.tView=S(2,D,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,E,null);return null!==e.queries&&(e.queries.template(e,D),R.queries=e.queries.embeddedTView(D)),D}(D,E,y,e,t,i,r,s,u):E.data[D];ur(R,!1);const U=WR(E,y,R,n);Gm()&&bh(E,y,U,R),eo(U,y),Li(y,y[D]=$n(U,y,U,R)),Ju(R)&&b(E,y,R),null!=u&&w(y,R,_)}let WR=function qR(n,e,t,i){return sc(!0),e[sn].createComment("")};function Ui(n,e,t){const i=Je();return ia(i,ah(),e)&&pe(nn(),pr(),i,n,e,i[sn],t,!1),Ui}function aS(n,e,t,i,r){const u=r?"class":"style";Mr(n,t,e.inputs[u],u,i)}function ve(n,e,t,i){const r=Je(),s=nn(),u=wn+n,_=r[sn],y=s.firstCreatePass?function qU(n,e,t,i,r,s){const u=e.consts,y=o(e,n,2,i,Fe(u,r));return _t(e,t,y,Fe(u,s)),null!==y.attrs&&no(y,y.attrs,!1),null!==y.mergedAttrs&&no(y,y.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,y),y}(u,s,r,e,t,i):s.data[u],E=ZR(s,r,y,_,e,n);r[u]=E;const D=Ju(y);return ur(y,!0),Hx(_,E,y),32!=(32&y.flags)&&Gm()&&bh(s,r,E,y),0===function Zn(){return ct.lFrame.elementDepthCount}()&&eo(E,r),function en(){ct.lFrame.elementDepthCount++}(),D&&(b(s,r,y),g(s,y,r)),null!==i&&w(r,y),ve}function Ce(){let n=Pi();qa()?oc():(n=n.parent,ur(n,!1));const e=n;(function ji(n){return ct.skipHydrationRootTNode===n})(e)&&function vl(){ct.skipHydrationRootTNode=null}(),function Ei(){ct.lFrame.elementDepthCount--}();const t=nn();return t.firstCreatePass&&(nu(t,n),mf(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function qC(n){return 0!=(8&n.flags)}(e)&&aS(t,e,Je(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function ZC(n){return 0!=(16&n.flags)}(e)&&aS(t,e,Je(),e.stylesWithoutHost,!1),Ce}function Xt(n,e,t,i){return ve(n,e,t,i),Ce(),Xt}let ZR=(n,e,t,i,r,s)=>(sc(!0),u_(i,r,function Ov(){return ct.lFrame.currentNamespace}()));function Ty(n){return!!n&&"function"==typeof n.then}function KR(n){return!!n&&"function"==typeof n.subscribe}function _n(n,e,t,i){const r=Je(),s=nn(),u=Pi();return function JR(n,e,t,i,r,s,u){const _=Ju(i),E=n.firstCreatePass&&_r(n),D=e[tt],R=Xi(e);let U=!0;if(3&i.type||u){const xe=Ie(i,e),ze=u?u(xe):xe,Qe=R.length,Ve=u?Qt=>u(fe(Qt[i.index])):i.index;let Bt=null;if(!u&&_&&(Bt=function eH(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const u=r[s];if(u===t&&r[s+1]===i){const _=e[ge],y=r[s+2];return _.length>y?_[y]:null}"string"==typeof u&&(s+=2)}return null}(n,e,r,i.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=s,Bt.__ngLastListenerFn__=s,U=!1;else{s=tP(i,e,D,s,!1);const Qt=t.listen(ze,r,s);R.push(s,Qt),E&&E.push(r,Ve,Qe,Qe+1)}}else s=tP(i,e,D,s,!1);const X=i.outputs;let ie;if(U&&null!==X&&(ie=X[r])){const xe=ie.length;if(xe)for(let ze=0;ze<xe;ze+=2){const Sn=e[ie[ze]][ie[ze+1]].subscribe(s),Wi=R.length;R.push(s,Sn),E&&E.push(r,i.index,Wi,-(Wi+1))}}}(s,r,r[sn],u,n,e,i),_n}function eP(n,e,t,i){try{return le(6,e,t),!1!==t(i)}catch(r){return Di(n,r),!1}finally{le(7,e,t)}}function tP(n,e,t,i,r){return function s(u){if(u===Function)return i;T_(n.componentOffset>-1?Ae(n.index,e):e);let y=eP(e,t,i,u),E=s.__ngNextListenerFn__;for(;E;)y=eP(e,t,E,u)&&y,E=E.__ngNextListenerFn__;return r&&!1===y&&u.preventDefault(),y}}function nH(n,e){let t=null;const i=function uf(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?$a(n,s,!0):ec(i,s))return r}else t=r}return t}function d2(n,e,t){return uS(n,"",e,"",t),d2}function uS(n,e,t,i,r){const s=Je(),u=X0(s,e,t,i);return u!==Hn&&pe(nn(),pr(),s,n,u,s[sn],r,!1),uS}function h2(n,e){return n<<17|e<<2}function Xf(n){return n>>17&32767}function dS(n){return 2|n}function P_(n){return(131068&n)>>2}function hS(n,e){return-131069&n|e<<2}function fS(n){return 1|n}function hP(n,e,t,i,r){const s=n[t+1],u=null===e;let _=i?Xf(s):P_(s),y=!1;for(;0!==_&&(!1===y||u);){const D=n[_+1];lH(n[_],e)&&(y=!0,n[_+1]=i?fS(D):dS(D)),_=i?Xf(D):P_(D)}y&&(n[t+1]=i?dS(s):fS(s))}function lH(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ud(n,e)>=0}function pS(n,e,t){return xu(n,e,t,!1),pS}function Sy(n,e){return xu(n,e,null,!0),Sy}function xu(n,e,t,i){const r=Je(),s=nn(),u=function wl(n){const e=ct.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function bP(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[_s()],u=function yP(n,e){return e>=n.expandoStartIndex}(n,t);(function CP(n,e){return 0!=(n.flags&(e?8:16))})(s,i)&&null===e&&!u&&(e=!1),e=function gH(n,e,t,i){const r=function Bm(n){const e=ct.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Iy(t=_S(null,n,e,t,i),e.attrs,i),s=null);else{const u=e.directiveStylingLast;if(-1===u||n[u]!==r)if(t=_S(r,n,e,t,i),null===s){let y=function xH(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==P_(i))return n[Xf(i)]}(n,e,i);void 0!==y&&Array.isArray(y)&&(y=_S(null,n,e,y[1],i),y=Iy(y,e.attrs,i),function yH(n,e,t,i){n[Xf(t?e.classBindings:e.styleBindings)]=i}(n,e,i,y))}else s=function bH(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Iy(i,n[s].hostAttrs,t);return Iy(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function sH(n,e,t,i,r,s){let u=s?e.classBindings:e.styleBindings,_=Xf(u),y=P_(u);n[i]=t;let D,E=!1;if(Array.isArray(t)?(D=t[1],(null===D||ud(t,D)>0)&&(E=!0)):D=t,r)if(0!==y){const U=Xf(n[_+1]);n[i+1]=h2(U,_),0!==U&&(n[U+1]=hS(n[U+1],i)),n[_+1]=function rH(n,e){return 131071&n|e<<17}(n[_+1],i)}else n[i+1]=h2(_,0),0!==_&&(n[_+1]=hS(n[_+1],i)),_=i;else n[i+1]=h2(y,0),0===_?_=i:n[y+1]=hS(n[y+1],i),y=i;E&&(n[i+1]=dS(n[i+1])),hP(n,D,i,!0),hP(n,D,i,!1),function aH(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ud(s,e)>=0&&(t[i+1]=fS(t[i+1]))}(e,D,n,i,s),u=h2(_,y),s?e.classBindings=u:e.styleBindings=u}(r,s,e,t,u,i)}}(s,n,u,i),e!==Hn&&ia(r,u,e)&&function wP(n,e,t,i,r,s,u,_){if(!(3&e.type))return;const y=n.data,E=y[_+1],D=function oH(n){return 1==(1&n)}(E)?EP(y,e,t,r,P_(E),u):void 0;f2(D)||(f2(s)||function iH(n){return 2==(2&n)}(E)&&(s=EP(y,null,t,r,_,u)),function h1(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Qs.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Qs.Important),n.setStyle(t,i,r,s))}}(i,u,Ee(_s(),t),r,s))}(s,s.data[_s()],r,r[sn],n,r[u+1]=function CH(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=An(ta(n)))),n}(e,t),i,u)}function _S(n,e,t,i,r){let s=null;const u=t.directiveEnd;let _=t.directiveStylingLast;for(-1===_?_=t.directiveStart:_++;_<u&&(s=e[_],i=Iy(i,s.hostAttrs,r),s!==n);)_++;return null!==n&&(t.directiveStylingLast=_),i}function Iy(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const u=e[s];"number"==typeof u?r=u:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ya(n,u,!!t||e[++s]))}return void 0===n?null:n}function EP(n,e,t,i,r,s){const u=null===e;let _;for(;r>0;){const y=n[r],E=Array.isArray(y),D=E?y[1]:y,R=null===D;let U=t[r+1];U===Hn&&(U=R?wi:void 0);let X=R?Df(U,i):D===i?U:void 0;if(E&&!f2(X)&&(X=Df(y,i)),f2(X)&&(_=X,u))return _;const ie=n[r+1];r=u?Xf(ie):P_(ie)}if(null!==e){let y=s?e.residualClasses:e.residualStyles;null!=y&&(_=Df(y,i))}return _}function f2(n){return void 0!==n}function Pe(n,e=""){const t=Je(),i=nn(),r=n+wn,s=i.firstCreatePass?o(i,r,1,e,null):i.data[r],u=TP(i,t,s,e,n);t[r]=u,Gm()&&bh(i,t,u,s),ur(s,!1)}let TP=(n,e,t,i,r)=>(sc(!0),function Bf(n,e){return n.createText(e)}(e[sn],i));function Ph(n){return Dy("",n,""),Ph}function Dy(n,e,t){const i=Je(),r=X0(i,n,e,t);return r!==Hn&&function Gi(n,e,t){const i=Ee(e,n);!function h0(n,e,t){n.setValue(e,t)}(n[sn],i,t)}(i,_s(),r),Dy}const sg="en-US";let WP=sg;function yS(n,e,t,i,r){if(n=mn(n),Array.isArray(n))for(let s=0;s<n.length;s++)yS(n[s],e,t,i,r);else{const s=nn(),u=Je();let _=xd(n)?n:mn(n.provide),y=v_(n);const E=Pi(),D=1048575&E.providerIndexes,R=E.directiveStart,U=E.providerIndexes>>20;if(xd(n)||!n.multi){const X=new Gp(y,r,nt),ie=vS(_,e,r?D:D+U,R);-1===ie?(Ym(qp(E,u),s,_),bS(s,n,e.length),e.push(_),E.directiveStart++,E.directiveEnd++,r&&(E.providerIndexes+=1048576),t.push(X),u.push(X)):(t[ie]=X,u[ie]=X)}else{const X=vS(_,e,D+U,R),ie=vS(_,e,D,D+U),ze=ie>=0&&t[ie];if(r&&!ze||!r&&!(X>=0&&t[X])){Ym(qp(E,u),s,_);const Qe=function $$(n,e,t,i,r){const s=new Gp(n,t,nt);return s.multi=[],s.index=e,s.componentProviders=0,gO(s,r,i&&!t),s}(r?H$:U$,t.length,r,i,y);!r&&ze&&(t[ie].providerFactory=Qe),bS(s,n,e.length,0),e.push(_),E.directiveStart++,E.directiveEnd++,r&&(E.providerIndexes+=1048576),t.push(Qe),u.push(Qe)}else bS(s,n,X>-1?X:ie,gO(t[r?ie:X],y,!r&&i));!r&&i&&ze&&t[ie].componentProviders++}}}function bS(n,e,t,i){const r=xd(e),s=function D1(n){return!!n.useClass}(e);if(r||s){const y=(s?mn(e.useClass):e).prototype.ngOnDestroy;if(y){const E=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const D=E.indexOf(t);-1===D?E.push(t,[i,y]):E[D+1].push(i,y)}else E.push(t,y)}}}function gO(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function vS(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function U$(n,e,t,i){return wS(this.multi,[])}function H$(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const u=this.providerFactory.componentProviders,_=Io(t,t[jt],this.providerFactory.index,i);s=_.slice(0,u),wS(r,s);for(let y=u;y<_.length;y++)s.push(_[y])}else s=[],wS(r,s);return s}function wS(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Rr(n,e=[]){return t=>{t.providersResolver=(i,r)=>function j$(n,e,t){const i=nn();if(i.firstCreatePass){const r=Lo(n);yS(t,i.data,i.blueprint,r,!0),yS(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class ag{}class xO{}class ES extends ag{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new q0(this);const r=ar(e);this._bootstrapComponents=bc(r.bootstrap),this._r3Injector=_y(e,t,[{provide:ag,useValue:this},{provide:nl,useValue:this.componentFactoryResolver},...i],An(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class CS extends xO{constructor(e){super(),this.moduleType=e}create(e){return new ES(this.moduleType,e,[])}}class yO extends ag{constructor(e){super(),this.componentFactoryResolver=new q0(this),this.instance=null;const t=new D0([...e.providers,{provide:ag,useValue:this},{provide:nl,useValue:this.componentFactoryResolver}],e.parent||yd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function TS(n,e,t=null){return new yO({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let q$=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=Yx(0,t.type),r=i.length>0?TS([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Tt({token:n,providedIn:"environment",factory:()=>new n(lt(mc))}),n})();function SS(n){n.getStandaloneInjector=e=>e.get(q$).getOrCreateStandaloneInjector(n)}function x2(n,e,t,i){return function SO(n,e,t,i,r,s){const u=e+t;return ia(n,u,r)?Cd(n,u+1,s?i.call(s,r):i(r)):Oy(n,u+1)}(Je(),Dr(),n,e,t,i)}function Oy(n,e){const t=n[e];return t===Hn?void 0:t}function IO(n,e,t,i,r,s,u){const _=e+t;return function R_(n,e,t,i){const r=ia(n,e,t);return ia(n,e+1,i)||r}(n,_,r,s)?Cd(n,_+2,u?i.call(u,r,s):i(r,s)):Oy(n,_+2)}function RO(n,e,t,i){const r=n+wn,s=Je(),u=function bt(n,e){return n[e]}(s,r);return function Fy(n,e){return n[jt].data[e].pure}(s,r)?IO(s,Dr(),e,u.transform,t,i,u):u.transform(t,i)}function DS(n){return e=>{setTimeout(n,void 0,e)}}const Pr=class mG extends Gn{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),u=i;if(e&&"object"==typeof e){const y=e;r=y.next?.bind(y),s=y.error?.bind(y),u=y.complete?.bind(y)}this.__isAsync&&(s=DS(s),r&&(r=DS(r)),u&&(u=DS(u)));const _=super.subscribe({next:r,error:s,complete:u});return e instanceof Le&&e.add(_),_}};function gG(){return this._results[Symbol.iterator]()}class AS{get changes(){return this._changes||(this._changes=new Pr)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=AS.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=gG)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function Ja(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Qa(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Oh=(()=>{class n{}return n.__NG_ELEMENT_ID__=bG,n})();const xG=Oh,yG=class extends xG{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t,null)}createEmbeddedViewImpl(e,t,i){const u=this._declarationTContainer.tView,_=a(this._declarationLView,u,e,4096&this._declarationLView[Fn]?4096:16,null,u.declTNode,null,null,null,t||null,i||null);_[Kc]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[is];return null!==E&&(_[is]=E.createEmbeddedView(u)),Wr(u,_,e),new Yf(_)}};function bG(){return y2(Pi(),Je())}function y2(n,e){return 4&n.type?new yG(e,n,vd(n,e)):null}let bu=(()=>{class n{}return n.__NG_ELEMENT_ID__=IG,n})();function IG(){return BO(Pi(),Je())}const DG=bu,NO=class extends DG{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return vd(this._hostTNode,this._hostLView)}get injector(){return new ld(this._hostTNode,this._hostLView)}get parentInjector(){const e=Zp(this._hostTNode,this._hostLView);if(ru(e)){const t=Wp(e,this._hostLView),i=lh(e);return new ld(t[jt].data[i+8],t)}return new ld(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=LO(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Hr}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const _=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(_,r,false),_}createComponent(e,t,i,r,s){const u=e&&!function ms(n){return"function"==typeof n}(e);let _;if(u)_=t;else{const xe=t||{};_=xe.index,i=xe.injector,r=xe.projectableNodes,s=xe.environmentInjector||xe.ngModuleRef}const y=u?e:new M_(Kn(e)),E=i||this.parentInjector;if(!s&&null==y.ngModule){const ze=(u?E:this.parentInjector).get(mc,null);ze&&(s=ze)}Kn(y.componentType??{});const X=y.create(E,r,null,s);return this.insertImpl(X.hostView,_,false),X}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView,s=r[jt];if(function dt(n){return So(n[Fi])}(r)){const y=this.indexOf(e);if(-1!==y)this.detach(y);else{const E=r[Fi],D=new NO(E,E[W],E[Fi]);D.detach(D.indexOf(e))}}const u=this._adjustIndex(t),_=this._lContainer;if(function Px(n,e,t,i){const r=Hr+i,s=t.length;i>0&&(t[r-1][F]=e),i<s-Hr?(e[F]=t[r],_x(t,Hr+i,e)):(t.push(e),e[F]=null),e[Fi]=t;const u=e[Kc];null!==u&&t!==u&&function Ox(n,e){const t=n[xl];e[Ur]!==e[Fi][Fi][Ur]&&(n[Lp]=!0),null===t?n[xl]=[e]:t.push(e)}(u,e);const _=e[is];null!==_&&_.insertView(n),e[Fn]|=128}(s,r,_,u),!i){const y=jx(u,_),E=r[sn],D=f0(E,_[Rs]);null!==D&&function pT(n,e,t,i,r,s){i[lr]=r,i[W]=e,lu(n,i,t,1,r,s)}(s,_[W],E,r,D,y)}return e.attachToViewContainerRef(),_x(kS(_),u,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=LO(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Fx(this._lContainer,t);i&&(e0(kS(this._lContainer),t),r1(i[jt],i))}detach(e){const t=this._adjustIndex(e,-1),i=Fx(this._lContainer,t);return i&&null!=e0(kS(this._lContainer),t)?new Yf(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function LO(n){return n[8]}function kS(n){return n[8]||(n[8]=[])}function BO(n,e){let t;const i=e[n.index];return So(i)?t=i:(t=$n(i,e,null,n),e[n.index]=t,Li(e,t)),zO(t,e,n,i),new NO(t,n,e)}let zO=function VO(n,e,t,i){if(n[Rs])return;let r;r=8&t.type?fe(i):function AG(n,e){const t=n[sn],i=t.createComment(""),r=Ie(e,n);return xh(t,f0(t,r),i,function o1(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[Rs]=r};class RS{constructor(e){this.queryList=e,this.matches=null}clone(){return new RS(this.queryList)}setDirty(){this.queryList.setDirty()}}class PS{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const u=t.getByIndex(s);r.push(this.queries[u.indexInDeclarationView].clone())}return new PS(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==qO(e,t).matches&&this.queries[t].setDirty()}}class jO{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class OS{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new OS(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class FS{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new FS(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,RG(t,s)),this.matchTNodeWithReadOption(e,t,ad(t,e,s,!1,!1))}else i===Oh?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ad(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===to||r===bu||r===Oh&&4&t.type)this.addMatch(t.index,-2);else{const s=ad(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function RG(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function OG(n,e,t,i){return-1===t?function PG(n,e){return 11&n.type?vd(n,e):4&n.type?y2(n,e):null}(e,n):-2===t?function FG(n,e,t){return t===to?vd(e,n):t===Oh?y2(e,n):t===bu?BO(e,n):void 0}(n,e,i):Io(n,n[jt],t,e)}function UO(n,e,t,i){const r=e[is].queries[i];if(null===r.matches){const s=n.data,u=t.matches,_=[];for(let y=0;y<u.length;y+=2){const E=u[y];_.push(E<0?null:OG(e,s[E],u[y+1],t.metadata.read))}r.matches=_}return r.matches}function NS(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const u=UO(n,e,r,t);for(let _=0;_<s.length;_+=2){const y=s[_];if(y>0)i.push(u[_/2]);else{const E=s[_+1],D=e[-y];for(let R=Hr;R<D.length;R++){const U=D[R];U[Kc]===U[Fi]&&NS(U[jt],U,E,i)}if(null!==D[xl]){const R=D[xl];for(let U=0;U<R.length;U++){const X=R[U];NS(X[jt],X,E,i)}}}}}return i}function LS(n){const e=Je(),t=nn(),i=dx();zm(i+1);const r=qO(t,i);if(n.dirty&&function it(n){return 4==(4&n[Fn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?NS(t,e,i,[]):UO(t,e,r,i);n.reset(s,V0),n.notifyOnChanges()}return!0}return!1}function HO(n,e,t){const i=nn();i.firstCreatePass&&(function WO(n,e,t){null===n.queries&&(n.queries=new OS),n.queries.track(new FS(e,t))}(i,new jO(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function GO(n,e,t){const i=new AS(4==(4&t));(function Q(n,e,t,i){const r=Xi(e);r.push(t),n.firstCreatePass&&_r(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[is]&&(e[is]=new PS),e[is].queries.push(new RS(i))}(i,Je(),e)}function qO(n,e){return n.queries.getByIndex(e)}const v2=new vt("Application Initializer");let $S=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Ht(v2,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(Ty(s))t.push(s);else if(KR(s)){const u=new Promise((_,y)=>{s.subscribe({complete:_,error:y})});t.push(u)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),d7=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Id=new vt("LocaleId",{providedIn:"root",factory:()=>Ht(Id,gn.Optional|gn.SkipSelf)||function oW(){return typeof $localize<"u"&&$localize.locale||sg}()});let h7=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Yi(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class aW{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let f7=(()=>{class n{compileModuleSync(t){return new CS(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=bc(ar(t).declarations).reduce((u,_)=>{const y=Kn(_);return y&&u.push(new M_(y)),u},[]);return new aW(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uW=(()=>Promise.resolve(0))();function GS(n){typeof Zone>"u"?uW.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}function m7(...n){}class pi{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pr(!1),this.onMicrotaskEmpty=new Pr(!1),this.onStable=new Pr(!1),this.onError=new Pr(!1),typeof Zone>"u")throw new Xe(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function dW(){let n=Ri.requestAnimationFrame,e=Ri.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function pW(n){const e=()=>{!function fW(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ri,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,qS(n),n.isCheckStableRunning=!0,WS(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),qS(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,u,_)=>{try{return g7(n),t.invokeTask(r,s,u,_)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),x7(n)}},onInvoke:(t,i,r,s,u,_,y)=>{try{return g7(n),t.invoke(r,s,u,_,y)}finally{n.shouldCoalesceRunChangeDetection&&e(),x7(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,qS(n),WS(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pi.isInAngularZone())throw new Xe(909,!1)}static assertNotInAngularZone(){if(pi.isInAngularZone())throw new Xe(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,u=s.scheduleEventTask("NgZoneEvent: "+r,e,hW,m7,m7);try{return s.runTask(u,t,i)}finally{s.cancelTask(u)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const hW={};function WS(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function qS(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function g7(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function x7(n){n._nesting--,WS(n)}class _W{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pr,this.onMicrotaskEmpty=new Pr,this.onStable=new Pr,this.onError=new Pr}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const y7=new vt("",{providedIn:"root",factory:b7});function b7(){const n=Ht(pi);let e=!0;return Rn(new bn(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new bn(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{pi.assertNotInAngularZone(),GS(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const u=n.onUnstable.subscribe(()=>{pi.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),u.unsubscribe()}}).pipe(es()))}const v7=new vt(""),w2=new vt("");let XS,ZS=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,XS||(function mW(n){XS=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pi.assertNotInAngularZone(),GS(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())GS(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(lt(pi),lt(YS),lt(w2))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})(),YS=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return XS?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Kf=null;const w7=new vt("AllowMultipleToken"),KS=new vt("PlatformDestroyListeners"),QS=new vt("appBootstrapListener");class C7{constructor(e,t){this.name=e,this.token=t}}function S7(n,e,t=[]){const i=`Platform: ${e}`,r=new vt(i);return(s=[])=>{let u=JS();if(!u||u.injector.get(w7,!1)){const _=[...t,...s,{provide:r,useValue:!0}];n?n(_):function yW(n){if(Kf&&!Kf.get(w7,!1))throw new Xe(400,!1);(function E7(){!function m(n){sh=n}(()=>{throw new Xe(600,!1)})})(),Kf=n;const e=n.get(D7);(function T7(n){n.get(k1,null)?.forEach(t=>t())})(n)}(function I7(n=[],e){return as.create({name:e,providers:[{provide:ey,useValue:"platform"},{provide:KS,useValue:new Set([()=>Kf=null])},...n]})}(_,i))}return function vW(n){const e=JS();if(!e)throw new Xe(401,!1);return e}()}}function JS(){return Kf?.get(D7)??null}let D7=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function wW(n="zone.js",e){return"noop"===n?new _W:"zone.js"===n?new pi(e):n}(i?.ngZone,function A7(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function W$(n,e,t){return new ES(n,e,t)}(t.moduleType,this.injector,function O7(n){return[{provide:pi,useFactory:n},{provide:Eh,multi:!0,useFactory:()=>{const e=Ht(CW,{optional:!0});return()=>e.initialize()}},{provide:P7,useFactory:EW},{provide:y7,useFactory:b7}]}(()=>r)),u=s.injector.get(xc,null);return r.runOutsideAngular(()=>{const _=r.onError.subscribe({next:y=>{u.handleError(y)}});s.onDestroy(()=>{E2(this._modules,s),_.unsubscribe()})}),function M7(n,e,t){try{const i=t();return Ty(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(u,r,()=>{const _=s.injector.get($S);return _.runInitializers(),_.donePromise.then(()=>(function qP(n){Fo(n,"Expected localeId to be defined"),"string"==typeof n&&(WP=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Id,sg)||sg),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,i=[]){const r=k7({},i);return function gW(n,e,t){const i=new CS(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Fh);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Xe(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Xe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(KS,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(lt(as))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function k7(n,e){return Array.isArray(e)?e.reduce(k7,n):{...n,...e}}let Fh=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ht(P7),this.zoneIsStable=Ht(y7),this.componentTypes=[],this.components=[],this.isStable=Ht(h7).hasPendingTasks.pipe(dn(t=>t?Ct(!1):this.zoneIsStable),function Oc(n,e=In){return n=n??$l,mi((t,i)=>{let r,s=!0;t.subscribe(Qn(i,u=>{const _=e(u);(s||!n(r,_))&&(s=!1,r=_,i.next(u))}))})}(),es()),this._injector=Ht(mc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof E_;if(!this._injector.get($S).done)throw!r&&function ks(n){const e=Kn(n)||Ir(n)||Vr(n);return null!==e&&e.standalone}(t),new Xe(405,!1);let u;u=r?t:this._injector.get(nl).resolveComponentFactory(t),this.componentTypes.push(u.componentType);const _=function xW(n){return n.isBoundToModule}(u)?void 0:this._injector.get(ag),E=u.create(as.NULL,[],i||u.selector,_),D=E.location.nativeElement,R=E.injector.get(v7,null);return R?.registerApplication(D),E.onDestroy(()=>{this.detachView(E.hostView),E2(this.components,E),R?.unregisterApplication(D)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Xe(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;E2(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(QS,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>E2(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Xe(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function E2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const P7=new vt("",{providedIn:"root",factory:()=>Ht(xc).handleError.bind(void 0)});function EW(){const n=Ht(pi),e=Ht(xc);return t=>n.runOutsideAngular(()=>e.handleError(t))}let CW=(()=>{class n{constructor(){this.zone=Ht(pi),this.applicationRef=Ht(Fh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();let Ly=(()=>{class n{}return n.__NG_ELEMENT_ID__=IW,n})();function IW(n){return function DW(n,e,t){if(yl(n)&&!t){const i=Ae(n.index,e);return new Yf(i,i)}return 47&n.type?new Yf(e[Ur],e):null}(Pi(),Je(),16==(16&n))}class B7{constructor(){}supports(e){return s2(e)}create(e){return new OW(e)}}const PW=(n,e)=>e;class OW{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||PW}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const u=!i||t&&t.currentIndex<V7(i,r,s)?t:i,_=V7(u,r,s),y=u.currentIndex;if(u===i)r--,i=i._nextRemoved;else if(t=t._next,null==u.previousIndex)r++;else{s||(s=[]);const E=_-r,D=y-r;if(E!=D){for(let U=0;U<E;U++){const X=U<s.length?s[U]:s[U]=0,ie=X+U;D<=ie&&ie<E&&(s[U]=X+1)}s[u.previousIndex]=D-E}}_!==y&&e(u,_,y)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!s2(e))throw new Xe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,u,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let _=0;_<this.length;_++)s=e[_],u=this._trackByFn(_,s),null!==t&&Object.is(t.trackById,u)?(i&&(t=this._verifyReinsertion(t,s,u,_)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,u,_),i=!0),t=t._next}else r=0,function CU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,_=>{u=this._trackByFn(r,_),null!==t&&Object.is(t.trackById,u)?(i&&(t=this._verifyReinsertion(t,_,u,r)),Object.is(t.item,_)||this._addIdentityChange(t,_)):(t=this._mismatch(t,_,u,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new FW(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new z7),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new z7),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class FW{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class NW{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class z7{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new NW,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function V7(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class j7{constructor(){}supports(e){return e instanceof Map||tS(e)}create(){return new LW}}class LW{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||tS(e)))throw new Xe(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,u=r._next;return s&&(s._next=u),u&&(u._prev=s),r._next=null,r._prev=null,r}const i=new BW(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class BW{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function U7(){return new S2([new B7])}let S2=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||U7()),deps:[[n,new hd,new Gr]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Xe(901,!1)}}return n.\u0275prov=Tt({token:n,providedIn:"root",factory:U7}),n})();function H7(){return new By([new j7])}let By=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||H7()),deps:[[n,new hd,new Gr]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Xe(901,!1)}}return n.\u0275prov=Tt({token:n,providedIn:"root",factory:H7}),n})();const jW=S7(null,"core",[]);let UW=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(lt(Fh))},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({}),n})();function ug(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let sI=null;function Qf(){return sI}class eq{}const ir=new vt("DocumentToken");let aI=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:function(){return Ht(nq)},providedIn:"platform"}),n})();const tq=new vt("Location Initialized");let nq=(()=>{class n extends aI{constructor(){super(),this._doc=Ht(ir),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qf().getBaseHref(this._doc)}onPopState(t){const i=Qf().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Qf().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function lI(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function X7(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Nh(n){return n&&"?"!==n[0]?"?"+n:n}let N_=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:function(){return Ht(Q7)},providedIn:"root"}),n})();const K7=new vt("appBaseHref");let Q7=(()=>{class n extends N_{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ht(ir).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return lI(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Nh(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const u=this.prepareExternalUrl(r+Nh(s));this._platformLocation.pushState(t,i,u)}replaceState(t,i,r,s){const u=this.prepareExternalUrl(r+Nh(s));this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(lt(aI),lt(K7,8))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iq=(()=>{class n extends N_{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=lI(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let u=this.prepareExternalUrl(r+Nh(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,i,u)}replaceState(t,i,r,s){let u=this.prepareExternalUrl(r+Nh(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(lt(aI),lt(K7,8))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})(),D2=(()=>{class n{constructor(t){this._subject=new Pr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function sq(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(X7(J7(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Nh(i))}normalize(t){return n.stripTrailingSlash(function oq(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,J7(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Nh(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Nh(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Nh,n.joinWithSlash=lI,n.stripTrailingSlash=X7,n.\u0275fac=function(t){return new(t||n)(lt(N_))},n.\u0275prov=Tt({token:n,factory:function(){return function rq(){return new D2(lt(N_))}()},providedIn:"root"}),n})();function J7(n){return n.replace(/\/index.html$/,"")}const xI=/\s+/,lF=[];let yI=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=lF,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(xI):lF}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(xI):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(xI).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(nt(S2),nt(By),nt(to),nt(fu))},n.\u0275dir=xn({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Gq{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let B2=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,u)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Gq(r.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)i.remove(null===s?void 0:s);else if(null!==s){const _=i.get(s);i.move(_,u),uF(_,r)}});for(let r=0,s=i.length;r<s;r++){const _=i.get(r).context;_.index=r,_.count=s,_.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{uF(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(nt(bu),nt(Oh),nt(S2))},n.\u0275dir=xn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function uF(n,e){n.context.$implicit=e.item}let dF=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Wq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(nt(bu),nt(Oh))},n.\u0275dir=xn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Wq{constructor(){this.$implicit=null,this.ngIf=null}}function hF(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${An(e)}'.`)}class bI{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let z2=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const i of this._defaultViews)i.enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=xn({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),fF=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new bI(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(nt(bu),nt(Oh),nt(z2,9))},n.\u0275dir=xn({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),_F=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),u=-1===r.indexOf("-")?void 0:Qs.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,u):this._renderer.removeStyle(this._ngEl.nativeElement,r,u)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(nt(to),nt(By),nt(fu))},n.\u0275dir=xn({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),dg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({}),n})();const gF="browser";function EI(n){return n===gF}function xF(n){return"server"===n}let bZ=(()=>{class n{}return n.\u0275prov=Tt({token:n,providedIn:"root",factory:()=>new vZ(lt(ir),window)}),n})();class vZ{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function wZ(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=yF(this.window.history)||yF(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function yF(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class WZ extends eq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class SI extends WZ{static makeCurrent(){!function JW(n){sI||(sI=n)}(new SI)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function qZ(){return Uy=Uy||document.querySelector("base"),Uy?Uy.getAttribute("href"):null}();return null==t?null:function ZZ(n){U2=U2||document.createElement("a"),U2.setAttribute("href",n);const e=U2.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Uy=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Hq(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let U2,Uy=null,XZ=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();const II=new vt("EventManagerPlugins");let CF=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new Xe(5101,!1);return this._eventNameToPlugin.set(t,i),i}}return n.\u0275fac=function(t){return new(t||n)(lt(II),lt(pi))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();class TF{constructor(e){this._doc=e}}const DI="ng-app-id";let SF=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xF(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${DI}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(DI),s;{const u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=i,this.platformIsServer&&u.setAttribute(DI,this.appId),u}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const s=this.styleRef,u=s.get(i)?.elements;u?u.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(lt(ir),lt(k0),lt(iy,8),lt(xs))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();const AI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},MI=/%COMP%/g,eY=new vt("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function DF(n,e){return e.map(t=>t.replace(MI,n))}let kI=(()=>{class n{constructor(t,i,r,s,u,_,y,E=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.doc=u,this.platformId=_,this.ngZone=y,this.nonce=E,this.rendererByCompId=new Map,this.platformIsServer=xF(_),this.defaultRenderer=new RI(t,u,y,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Co.ShadowDom&&(i={...i,encapsulation:Co.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof MF?r.applyToHost(t):r instanceof PI&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const u=this.doc,_=this.ngZone,y=this.eventManager,E=this.sharedStylesHost,D=this.removeStylesOnCompDestory,R=this.platformIsServer;switch(i.encapsulation){case Co.Emulated:s=new MF(y,E,i,this.appId,D,u,_,R);break;case Co.ShadowDom:return new rY(y,E,t,i,u,_,this.nonce,R);default:s=new PI(y,E,i,D,u,_,R)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(lt(CF),lt(SF),lt(k0),lt(eY),lt(ir),lt(xs),lt(pi),lt(iy))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();class RI{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(AI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(AF(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(AF(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Xe(5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=AI[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=AI[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Qs.DashCase|Qs.Important)?e.style.setProperty(t,i,r&Qs.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Qs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Qf().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function AF(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class rY extends RI{constructor(e,t,i,r,s,u,_,y){super(e,s,u,y),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const E=DF(r.id,r.styles);for(const D of E){const R=document.createElement("style");_&&R.setAttribute("nonce",_),R.textContent=D,this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class PI extends RI{constructor(e,t,i,r,s,u,_,y){super(e,s,u,_),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=y?DF(y,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class MF extends PI{constructor(e,t,i,r,s,u,_,y){const E=r+"-"+i.id;super(e,t,i,s,u,_,y,E),this.contentAttr=function tY(n){return"_ngcontent-%COMP%".replace(MI,n)}(E),this.hostAttr=function nY(n){return"_nghost-%COMP%".replace(MI,n)}(E)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let oY=(()=>{class n extends TF{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(lt(ir))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();const kF=["alt","control","meta","shift"],sY={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},aY={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let lY=(()=>{class n extends TF{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),u=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qf().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let u="",_=i.indexOf("code");if(_>-1&&(i.splice(_,1),u="code."),kF.forEach(E=>{const D=i.indexOf(E);D>-1&&(i.splice(D,1),u+=E+".")}),u+=s,0!=i.length||0===s.length)return null;const y={};return y.domEventName=r,y.fullKey=u,y}static matchEventFullKeyCode(t,i){let r=sY[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),kF.forEach(u=>{u!==r&&(0,aY[u])(t)&&(s+=u+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(lt(ir))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();const hY=S7(jW,"browser",[{provide:xs,useValue:gF},{provide:k1,useValue:function cY(){SI.makeCurrent()},multi:!0},{provide:ir,useFactory:function dY(){return function jf(n){vh=n}(document),document},deps:[]}]),fY=new vt(""),OF=[{provide:w2,useClass:class YZ{addToWindow(e){Ri.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Xe(5103,!1);return s},Ri.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ri.getAllAngularRootElements=()=>e.getAllRootElements(),Ri.frameworkStabilizers||(Ri.frameworkStabilizers=[]),Ri.frameworkStabilizers.push(i=>{const r=Ri.getAllAngularTestabilities();let s=r.length,u=!1;const _=function(y){u=u||y,s--,0==s&&i(u)};r.forEach(function(y){y.whenStable(_)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Qf().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:v7,useClass:ZS,deps:[pi,YS,w2]},{provide:ZS,useClass:ZS,deps:[pi,YS,w2]}],FF=[{provide:ey,useValue:"root"},{provide:xc,useFactory:function uY(){return new xc},deps:[]},{provide:II,useClass:oY,multi:!0,deps:[ir,pi,xs]},{provide:II,useClass:lY,multi:!0,deps:[ir]},kI,SF,CF,{provide:C_,useExisting:kI},{provide:class EZ{},useClass:XZ,deps:[]},[]];let NF=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:k0,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(lt(fY,12))},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({providers:[...FF,...OF],imports:[dg,UW]}),n})(),LF=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(lt(ir))},n.\u0275prov=Tt({token:n,factory:function(t){let i=null;return i=t?new t:function _Y(){return new LF(lt(ir))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let H2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:function(t){let i=null;return i=t?new(t||n):lt(VF),i},providedIn:"root"}),n})(),VF=(()=>{class n extends H2{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case $i.NONE:return i;case $i.HTML:return Sl(i,"HTML")?ta(i):T1(this._doc,String(i)).toString();case $i.STYLE:return Sl(i,"Style")?ta(i):i;case $i.SCRIPT:if(Sl(i,"Script"))return ta(i);throw new Xe(5200,!1);case $i.URL:return Sl(i,"URL")?ta(i):uu(String(i));case $i.RESOURCE_URL:if(Sl(i,"ResourceURL"))return ta(i);throw new Xe(5201,!1);default:throw new Xe(5202,!1)}}bypassSecurityTrustHtml(t){return function CT(n){return new bT(n)}(t)}bypassSecurityTrustStyle(t){return function TT(n){return new vT(n)}(t)}bypassSecurityTrustScript(t){return function ST(n){return new x0(n)}(t)}bypassSecurityTrustUrl(t){return function IT(n){return new wT(n)}(t)}bypassSecurityTrustResourceUrl(t){return function y1(n){return new x1(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(lt(ir))},n.\u0275prov=Tt({token:n,factory:function(t){let i=null;return i=t?new t:function yY(n){return new VF(n.get(ir))}(lt(as)),i},providedIn:"root"}),n})();var bY=_i(574),$2=_i.n(bY);const UF_mapbox_accessToken="pk.eyJ1IjoiY2RhbmllbGlyYSIsImEiOiJjbGhuMWJmcDYxaDN3M2twYmp0M2xtb25rIn0.tWzZ68XZxhcQTfilWWdf9g";function HF(n,e,t,i,r,s,u){try{var _=n[s](u),y=_.value}catch(E){return void t(E)}_.done?e(y):Promise.resolve(y).then(i,r)}function Se(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function u(y){HF(s,i,r,u,_,"next",y)}function _(y){HF(s,i,r,u,_,"throw",y)}u(void 0)})}}const Ot=function(n,e){if(!n)throw hg(e)},hg=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},$F=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):55296==(64512&r)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&n.charCodeAt(++i)),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e},G2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],u=r+1<n.length,_=u?n[r+1]:0,y=r+2<n.length,E=y?n[r+2]:0;let U=(15&_)<<2|E>>6,X=63&E;y||(X=64,u||(U=64)),i.push(t[s>>2],t[(3&s)<<4|_>>4],t[U],t[X])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($F(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const y=((7&r)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(1023&y))}else{const s=n[t++],u=n[t++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&u)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],_=r<n.length?t[n.charAt(r)]:0;++r;const E=r<n.length?t[n.charAt(r)]:64;++r;const R=r<n.length?t[n.charAt(r)]:64;if(++r,null==s||null==_||null==E||null==R)throw new wY;i.push(s<<2|_>>4),64!==E&&(i.push(_<<4&240|E>>2),64!==R&&i.push(E<<6&192|R))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class wY extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GF=function(n){const e=$F(n);return G2.encodeByteArray(e,!0)},W2=function(n){return GF(n).replace(/\./g,"")},q2=function(n){try{return G2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function EY(n){return WF(void 0,n)}function WF(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!CY(t)||(n[t]=WF(n[t],e[t]));return n}function CY(n){return"__proto__"!==n}const Z2=()=>{try{return function TY(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&q2(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},qF=n=>{var e,t;return null===(t=null===(e=Z2())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},ZF=()=>{var n;return null===(n=Z2())||void 0===n?void 0:n.config},YF=n=>{var e;return null===(e=Z2())||void 0===e?void 0:e[`_${n}`]};class L_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function bs(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function NI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bs())}function LI(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function XF(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function B_(){try{return"object"==typeof indexedDB}catch{return!1}}function Hy(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e((null===(s=r.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function BI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Cu extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,Cu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dd.prototype.create)}}class Dd{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],u=s?function OY(n,e){return n.replace(FY,(t,i)=>{const r=e[i];return null!=r?String(r):`<${i}?>`})}(s,i):"Error";return new Cu(r,`${this.serviceName}: ${u} (${r}).`,i)}}const FY=/\{\$([^}]+)}/g;function $y(n){return JSON.parse(n)}function ds(n){return JSON.stringify(n)}const Y2=function(n){let e={},t={},i={},r="";try{const s=n.split(".");e=$y(q2(s[0])||""),t=$y(q2(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}};function Ad(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function fg(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function zI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function X2(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function K2(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],u=e[r];if(KF(s)&&KF(u)){if(!K2(s,u))return!1}else if(s!==u)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function KF(n){return null!==n&&"object"==typeof n}function z_(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Gy(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Wy(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class BY{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if("string"==typeof e)for(let R=0;R<16;R++)i[R]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let R=0;R<16;R++)i[R]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let R=16;R<80;R++){const U=i[R-3]^i[R-8]^i[R-14]^i[R-16];i[R]=4294967295&(U<<1|U>>>31)}let E,D,r=this.chain_[0],s=this.chain_[1],u=this.chain_[2],_=this.chain_[3],y=this.chain_[4];for(let R=0;R<80;R++){R<40?R<20?(E=_^s&(u^_),D=1518500249):(E=s^u^_,D=1859775393):R<60?(E=s&u|_&(s|u),D=2400959708):(E=s^u^_,D=3395469782);const U=(r<<5|r>>>27)+E+y+D+i[R]&4294967295;y=_,_=u,u=4294967295&(s<<30|s>>>2),s=r,r=U}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+_&4294967295,this.chain_[4]=this.chain_[4]+y&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const i=t-this.blockSize;let r=0;const s=this.buf_;let u=this.inbuf_;for(;r<t;){if(0===u)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(s[u]=e.charCodeAt(r),++u,++r,u===this.blockSize){this.compress_(s),u=0;break}}else for(;r<t;)if(s[u]=e[r],++u,++r,u===this.blockSize){this.compress_(s),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}class VY{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(void 0===e&&void 0===t&&void 0===i)throw new Error("Missing Observer.");r=function jY(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:i},void 0===r.next&&(r.next=VI),void 0===r.error&&(r.error=VI),void 0===r.complete&&(r.complete=VI);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VI(){}function V_(n,e){return`${n} failed: ${e} argument `}const Q2=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e},HY=1e3,$Y=2,GY=144e5,WY=.5;function jI(n,e=HY,t=$Y){const i=e*Math.pow(t,n),r=Math.round(WY*i*(Math.random()-.5)*2);return Math.min(GY,i+r)}function Go(n){return n&&n._delegate?n._delegate:n}class ra{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const j_="[DEFAULT]";class ZY{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new L_;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),r=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function XY(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:j_})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=j_){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return Se(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=j_){return this.instances.has(e)}getOptions(e=j_){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,u]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(s)&&u.resolve(r);return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=null!==(i=this.onInitCallbacks.get(r))&&void 0!==i?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const u=this.instances.get(r);return u&&e(u,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===j_?void 0:n),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}var n;return i||null}normalizeInstanceIdentifier(e=j_){return this.component?this.component.multipleInstances?e:j_:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class KY{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZY(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const UI=[];var ti=(()=>((ti=ti||{})[ti.DEBUG=0]="DEBUG",ti[ti.VERBOSE=1]="VERBOSE",ti[ti.INFO=2]="INFO",ti[ti.WARN=3]="WARN",ti[ti.ERROR=4]="ERROR",ti[ti.SILENT=5]="SILENT",ti))();const QF={debug:ti.DEBUG,verbose:ti.VERBOSE,info:ti.INFO,warn:ti.WARN,error:ti.ERROR,silent:ti.SILENT},QY=ti.INFO,JY={[ti.DEBUG]:"log",[ti.VERBOSE]:"log",[ti.INFO]:"info",[ti.WARN]:"warn",[ti.ERROR]:"error"},eX=(n,e,...t)=>{if(e<n.logLevel)return;const i=(new Date).toISOString(),r=JY[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${n.name}:`,...t)};class pg{constructor(e){this.name=e,this._logLevel=QY,this._logHandler=eX,this._userLogHandler=null,UI.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ti))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?QF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ti.DEBUG,...e),this._logHandler(this,ti.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ti.VERBOSE,...e),this._logHandler(this,ti.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ti.INFO,...e),this._logHandler(this,ti.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ti.WARN,...e),this._logHandler(this,ti.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ti.ERROR,...e),this._logHandler(this,ti.ERROR,...e)}}const tX=(n,e)=>e.some(t=>n instanceof t);let JF,eN;const tN=new WeakMap,HI=new WeakMap,nN=new WeakMap,$I=new WeakMap,GI=new WeakMap;let WI={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return HI.get(n);if("objectStoreNames"===e)return n.objectStoreNames||nN.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ep(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function lX(n){return"function"==typeof n?function aX(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function iX(){return eN||(eN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(qI(this),e),ep(tN.get(this))}:function(...e){return ep(n.apply(qI(this),e))}:function(e,...t){const i=n.call(qI(this),e,...t);return nN.set(i,e.sort?e.sort():[e]),ep(i)}}(n):(n instanceof IDBTransaction&&function oX(n){if(HI.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",u),n.removeEventListener("abort",u)},s=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",u),n.addEventListener("abort",u)});HI.set(n,e)}(n),tX(n,function nX(){return JF||(JF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,WI):n)}function ep(n){if(n instanceof IDBRequest)return function rX(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",u)},s=()=>{t(ep(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&tN.set(t,n)}).catch(()=>{}),GI.set(e,n),e}(n);if($I.has(n))return $I.get(n);const e=lX(n);return e!==n&&($I.set(n,e),GI.set(e,n)),e}const qI=n=>GI.get(n),uX=["get","getKey","getAll","getAllKeys","count"],dX=["put","add","delete","clear"],ZI=new Map;function iN(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(ZI.get(e))return ZI.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=dX.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!uX.includes(t))return;const s=function(){var u=Se(function*(_,...y){const E=this.transaction(_,r?"readwrite":"readonly");let D=E.store;return i&&(D=D.index(y.shift())),(yield Promise.all([D[t](...y),r&&E.done]))[0]});return function(y){return u.apply(this,arguments)}}();return ZI.set(e,s),s}!function sX(n){WI=n(WI)}(n=>({...n,get:(e,t,i)=>iN(e,t)||n.get(e,t,i),has:(e,t)=>!!iN(e,t)||n.has(e,t)}));class hX{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function fX(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}return null}).filter(t=>t).join(" ")}}const YI="@firebase/app",U_=new pg("@firebase/app"),J2="[DEFAULT]",zX={[YI]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},H_=new Map,ew=new Map;function VX(n,e){try{n.container.addComponent(e)}catch(t){U_.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ca(n){const e=n.name;if(ew.has(e))return U_.debug(`There were multiple attempts to register component ${e}.`),!1;ew.set(e,n);for(const t of H_.values())VX(t,n);return!0}function _g(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const zh=new Dd("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class UX{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zh.create("app-deleted",{appName:this._name})}}const $_="9.22.2";function oN(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:J2,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw zh.create("bad-app-name",{appName:String(r)});if(t||(t=ZF()),!t)throw zh.create("no-options");const s=H_.get(r);if(s){if(K2(t,s.options)&&K2(i,s.config))return s;throw zh.create("duplicate-app",{appName:r})}const u=new KY(r);for(const y of ew.values())u.addComponent(y);const _=new UX(t,i,u);return H_.set(r,_),_}function XI(n=J2){const e=H_.get(n);if(!e&&n===J2&&ZF())return oN();if(!e)throw zh.create("no-app",{appName:n});return e}function sN(){return Array.from(H_.values())}function go(n,e,t){var i;let r=null!==(i=zX[n])&&void 0!==i?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),u=e.match(/\s|\//);if(s||u){const _=[`Unable to register library "${r}" with version "${e}":`];return s&&_.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&u&&_.push("and"),u&&_.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void U_.warn(_.join(" "))}Ca(new ra(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const HX="firebase-heartbeat-database",$X=1,qy="firebase-heartbeat-store";let QI=null;function aN(){return QI||(QI=function cX(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const u=indexedDB.open(n,e),_=ep(u);return i&&u.addEventListener("upgradeneeded",y=>{i(ep(u.result),y.oldVersion,y.newVersion,ep(u.transaction),y)}),t&&u.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),_.then(y=>{s&&y.addEventListener("close",()=>s()),r&&y.addEventListener("versionchange",E=>r(E.oldVersion,E.newVersion,E))}).catch(()=>{}),_}(HX,$X,{upgrade:(n,e)=>{0===e&&n.createObjectStore(qy)}}).catch(n=>{throw zh.create("idb-open",{originalErrorMessage:n.message})})),QI}function JI(){return(JI=Se(function*(n){try{return yield(yield aN()).transaction(qy).objectStore(qy).get(cN(n))}catch(e){if(e instanceof Cu)U_.warn(e.message);else{const t=zh.create("idb-get",{originalErrorMessage:e?.message});U_.warn(t.message)}}})).apply(this,arguments)}function lN(n,e){return eD.apply(this,arguments)}function eD(){return(eD=Se(function*(n,e){try{const i=(yield aN()).transaction(qy,"readwrite");yield i.objectStore(qy).put(e,cN(n)),yield i.done}catch(t){if(t instanceof Cu)U_.warn(t.message);else{const i=zh.create("idb-set",{originalErrorMessage:t?.message});U_.warn(i.message)}}})).apply(this,arguments)}function cN(n){return`${n.name}!${n.options.appId}`}class ZX{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XX(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var e=this;return Se(function*(){const i=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=uN();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==r&&!e._heartbeatsCache.heartbeats.some(s=>s.date===r))return e._heartbeatsCache.heartbeats.push({date:r,agent:i}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const u=new Date(s.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return Se(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=uN(),{heartbeatsToSend:i,unsentEntries:r}=function YX(n,e=1024){const t=[];let i=n.slice();for(const r of n){const s=t.find(u=>u.agent===r.agent);if(s){if(s.dates.push(r.date),dN(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),dN(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}(e._heartbeatsCache.heartbeats),s=W2(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function uN(){return(new Date).toISOString().substring(0,10)}class XX{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return Se(function*(){return!!B_()&&Hy().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return Se(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function GX(n){return JI.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return Se(function*(){var i;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return lN(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return Se(function*(){var i;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return lN(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function dN(n){return W2(JSON.stringify({version:2,heartbeats:n})).length}!function KX(n){Ca(new ra("platform-logger",e=>new hX(e),"PRIVATE")),Ca(new ra("heartbeat",e=>new ZX(e),"PRIVATE")),go(YI,"0.9.12",n),go(YI,"0.9.12","esm2017"),go("fire-js","")}(""),go("firebase","9.22.2","app");const eK=(n,e)=>e.some(t=>n instanceof t);let hN,fN;const pN=new WeakMap,tD=new WeakMap,_N=new WeakMap,nD=new WeakMap,iD=new WeakMap;let rD={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return tD.get(n);if("objectStoreNames"===e)return n.objectStoreNames||_N.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return tp(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function aK(n){return"function"==typeof n?function sK(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function nK(){return fN||(fN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(oD(this),e),tp(pN.get(this))}:function(...e){return tp(n.apply(oD(this),e))}:function(e,...t){const i=n.call(oD(this),e,...t);return _N.set(i,e.sort?e.sort():[e]),tp(i)}}(n):(n instanceof IDBTransaction&&function rK(n){if(tD.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",u),n.removeEventListener("abort",u)},s=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",u),n.addEventListener("abort",u)});tD.set(n,e)}(n),eK(n,function tK(){return hN||(hN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,rD):n)}function tp(n){if(n instanceof IDBRequest)return function iK(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",u)},s=()=>{t(tp(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&pN.set(t,n)}).catch(()=>{}),iD.set(e,n),e}(n);if(nD.has(n))return nD.get(n);const e=aK(n);return e!==n&&(nD.set(n,e),iD.set(e,n)),e}const oD=n=>iD.get(n),cK=["get","getKey","getAll","getAllKeys","count"],uK=["put","add","delete","clear"],sD=new Map;function mN(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(sD.get(e))return sD.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=uK.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!cK.includes(t))return;const s=function(){var u=Se(function*(_,...y){const E=this.transaction(_,r?"readwrite":"readonly");let D=E.store;return i&&(D=D.index(y.shift())),(yield Promise.all([D[t](...y),r&&E.done]))[0]});return function(y){return u.apply(this,arguments)}}();return sD.set(e,s),s}!function oK(n){rD=n(rD)}(n=>({...n,get:(e,t,i)=>mN(e,t)||n.get(e,t,i),has:(e,t)=>!!mN(e,t)||n.has(e,t)}));const gN="@firebase/installations",aD="0.6.4",xN=1e4,yN=`w:${aD}`,bN="FIS_v2",dK="https://firebaseinstallations.googleapis.com/v1",hK=36e5,Vh=new Dd("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function vN(n){return n instanceof Cu&&n.code.includes("request-failed")}function lD({projectId:n}){return`${dK}/projects/${n}/installations`}function wN(n){return{token:n.token,requestStatus:2,expiresIn:mK(n.expiresIn),creationTime:Date.now()}}function cD(n,e){return uD.apply(this,arguments)}function uD(){return(uD=Se(function*(n,e){const i=(yield e.json()).error;return Vh.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})).apply(this,arguments)}function EN({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function dD(n){return hD.apply(this,arguments)}function hD(){return(hD=Se(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function mK(n){return Number(n.replace("s","000"))}function fD(){return(fD=Se(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=lD(n),r=EN(n),s=e.getImmediate({optional:!0});if(s){const E=yield s.getHeartbeatsHeader();E&&r.append("x-firebase-client",E)}const _={method:"POST",headers:r,body:JSON.stringify({fid:t,authVersion:bN,appId:n.appId,sdkVersion:yN})},y=yield dD(()=>fetch(i,_));if(y.ok){const E=yield y.json();return{fid:E.fid||t,registrationStatus:2,refreshToken:E.refreshToken,authToken:wN(E.authToken)}}throw yield cD("Create Installation",y)})).apply(this,arguments)}function TN(n){return new Promise(e=>{setTimeout(e,n)})}const bK=/^[cdef][\w-]{21}$/,pD="";function vK(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function wK(n){return function yK(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return bK.test(t)?t:pD}catch{return pD}}function mg(n){return`${n.appName}!${n.appId}`}const gg=new Map;function SN(n,e){const t=mg(n);IN(t,e),function TK(n,e){const t=function DN(){return!G_&&"BroadcastChannel"in self&&(G_=new BroadcastChannel("[Firebase] FID Change"),G_.onmessage=n=>{IN(n.data.key,n.data.fid)}),G_}();t&&t.postMessage({key:n,fid:e}),function AN(){0===gg.size&&G_&&(G_.close(),G_=null)}()}(t,e)}function IN(n,e){const t=gg.get(n);if(t)for(const i of t)i(e)}let G_=null;const SK="firebase-installations-database",IK=1,W_="firebase-installations-store";let _D=null;function mD(){return _D||(_D=function lK(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const u=indexedDB.open(n,e),_=tp(u);return i&&u.addEventListener("upgradeneeded",y=>{i(tp(u.result),y.oldVersion,y.newVersion,tp(u.transaction))}),t&&u.addEventListener("blocked",()=>t()),_.then(y=>{s&&y.addEventListener("close",()=>s()),r&&y.addEventListener("versionchange",()=>r())}).catch(()=>{}),_}(SK,IK,{upgrade:(n,e)=>{0===e&&n.createObjectStore(W_)}})),_D}function tw(n,e){return gD.apply(this,arguments)}function gD(){return(gD=Se(function*(n,e){const t=mg(n),r=(yield mD()).transaction(W_,"readwrite"),s=r.objectStore(W_),u=yield s.get(t);return yield s.put(e,t),yield r.done,(!u||u.fid!==e.fid)&&SN(n,e.fid),e})).apply(this,arguments)}function xD(n){return yD.apply(this,arguments)}function yD(){return(yD=Se(function*(n){const e=mg(n),i=(yield mD()).transaction(W_,"readwrite");yield i.objectStore(W_).delete(e),yield i.done})).apply(this,arguments)}function Zy(n,e){return bD.apply(this,arguments)}function bD(){return(bD=Se(function*(n,e){const t=mg(n),r=(yield mD()).transaction(W_,"readwrite"),s=r.objectStore(W_),u=yield s.get(t),_=e(u);return void 0===_?yield s.delete(t):yield s.put(_,t),yield r.done,_&&(!u||u.fid!==_.fid)&&SN(n,_.fid),_})).apply(this,arguments)}function vD(n){return wD.apply(this,arguments)}function wD(){return wD=Se(function*(n){let e;const t=yield Zy(n.appConfig,i=>{const r=function DK(n){return kN(n||{fid:vK(),registrationStatus:0})}(i),s=function AK(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Vh.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function MK(n,e){return ED.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:kK(n)}:{installationEntry:e}}(n,r);return e=s.registrationPromise,s.installationEntry});return t.fid===pD?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),wD.apply(this,arguments)}function ED(){return ED=Se(function*(n,e){try{const t=yield function xK(n,e){return fD.apply(this,arguments)}(n,e);return tw(n.appConfig,t)}catch(t){throw vN(t)&&409===t.customData.serverCode?yield xD(n.appConfig):yield tw(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),ED.apply(this,arguments)}function kK(n){return CD.apply(this,arguments)}function CD(){return(CD=Se(function*(n){let e=yield MN(n.appConfig);for(;1===e.registrationStatus;)yield TN(100),e=yield MN(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:i}=yield vD(n);return i||t}return e})).apply(this,arguments)}function MN(n){return Zy(n,e=>{if(!e)throw Vh.create("installation-not-found");return kN(e)})}function kN(n){return function RK(n){return 1===n.registrationStatus&&n.registrationTime+xN<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function TD(){return(TD=Se(function*({appConfig:n,heartbeatServiceProvider:e},t){const i=function OK(n,{fid:e}){return`${lD(n)}/${e}/authTokens:generate`}(n,t),r=function CN(n,{refreshToken:e}){const t=EN(n);return t.append("Authorization",function gK(n){return`${bN} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const E=yield s.getHeartbeatsHeader();E&&r.append("x-firebase-client",E)}const _={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:yN,appId:n.appId}})},y=yield dD(()=>fetch(i,_));if(y.ok)return wN(yield y.json());throw yield cD("Generate Auth Token",y)})).apply(this,arguments)}function SD(n){return ID.apply(this,arguments)}function ID(){return ID=Se(function*(n,e=!1){let t;const i=yield Zy(n.appConfig,s=>{if(!PN(s))throw Vh.create("not-registered");const u=s.authToken;if(!e&&function LK(n){return 2===n.requestStatus&&!function BK(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+hK}(n)}(u))return s;if(1===u.requestStatus)return t=function FK(n,e){return DD.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw Vh.create("app-offline");const _=function zK(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function NK(n,e){return AD.apply(this,arguments)}(n,_),_}});return t?yield t:i.authToken}),ID.apply(this,arguments)}function DD(){return(DD=Se(function*(n,e){let t=yield RN(n.appConfig);for(;1===t.authToken.requestStatus;)yield TN(100),t=yield RN(n.appConfig);const i=t.authToken;return 0===i.requestStatus?SD(n,e):i})).apply(this,arguments)}function RN(n){return Zy(n,e=>{if(!PN(e))throw Vh.create("not-registered");return function VK(n){return 1===n.requestStatus&&n.requestTime+xN<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function AD(){return AD=Se(function*(n,e){try{const t=yield function PK(n,e){return TD.apply(this,arguments)}(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield tw(n.appConfig,i),t}catch(t){if(!vN(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield tw(n.appConfig,i)}else yield xD(n.appConfig);throw t}}),AD.apply(this,arguments)}function PN(n){return void 0!==n&&2===n.registrationStatus}function MD(){return(MD=Se(function*(n){const e=n,{installationEntry:t,registrationPromise:i}=yield vD(e);return i?i.catch(console.error):SD(e).catch(console.error),t.fid})).apply(this,arguments)}function kD(){return kD=Se(function*(n,e=!1){const t=n;return yield function HK(n){return RD.apply(this,arguments)}(t),(yield SD(t,e)).token}),kD.apply(this,arguments)}function RD(){return(RD=Se(function*(n){const{registrationPromise:e}=yield vD(n);e&&(yield e)})).apply(this,arguments)}function FD(n){return Vh.create("missing-app-config-values",{valueName:n})}const ON="installations",ZK=n=>{const e=n.getProvider("app").getImmediate(),t=function WK(n){if(!n||!n.options)throw FD("App Configuration");if(!n.name)throw FD("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw FD(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:_g(e,"heartbeat"),_delete:()=>Promise.resolve()}},YK=n=>{const t=_g(n.getProvider("app").getImmediate(),ON).getImmediate();return{getId:()=>function jK(n){return MD.apply(this,arguments)}(t),getToken:r=>function UK(n){return kD.apply(this,arguments)}(t,r)}};(function XK(){Ca(new ra(ON,ZK,"PUBLIC")),Ca(new ra("installations-internal",YK,"PRIVATE"))})(),go(gN,aD),go(gN,aD,"esm2017");const ND="@firebase/remote-config",ol=new Dd("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class aQ{constructor(e,t,i,r){this.client=e,this.storage=t,this.storageCache=i,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const i=Date.now()-t,r=i<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return Se(function*(){const[i,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,i))return r;e.eTag=r&&r.eTag;const s=yield t.client.fetch(e),u=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&u.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(u),s})()}}function lQ(n=navigator){return n.languages&&n.languages[0]||n.language}class cQ{constructor(e,t,i,r,s,u){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=i,this.projectId=r,this.apiKey=s,this.appId=u}fetch(e){var t=this;return Se(function*(){const[i,r]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),u=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,_={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},y={sdk_version:t.sdkVersion,app_instance_id:i,app_instance_id_token:r,app_id:t.appId,language_code:lQ()},E={method:"POST",headers:_,body:JSON.stringify(y)},D=fetch(u,E),R=new Promise((Qe,Ve)=>{e.signal.addEventListener(()=>{const Bt=new Error("The operation was aborted.");Bt.name="AbortError",Ve(Bt)})});let U;try{yield Promise.race([D,R]),U=yield D}catch(Qe){let Ve="fetch-client-network";throw"AbortError"===Qe?.name&&(Ve="fetch-timeout"),ol.create(Ve,{originalErrorMessage:Qe?.message})}let X=U.status;const ie=U.headers.get("ETag")||void 0;let xe,ze;if(200===U.status){let Qe;try{Qe=yield U.json()}catch(Ve){throw ol.create("fetch-client-parse",{originalErrorMessage:Ve?.message})}xe=Qe.entries,ze=Qe.state}if("INSTANCE_STATE_UNSPECIFIED"===ze?X=500:"NO_CHANGE"===ze?X=304:("NO_TEMPLATE"===ze||"EMPTY_CONFIG"===ze)&&(xe={}),304!==X&&200!==X)throw ol.create("fetch-status",{httpStatus:X});return{status:X,eTag:ie,config:xe}})()}}class hQ{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return Se(function*(){const i=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,i)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:i}){var r=this;return Se(function*(){yield function uQ(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(ol.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),s}catch(s){if(!function dQ(n){if(!(n instanceof Cu&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const u={throttleEndTimeMillis:Date.now()+jI(i),backoffCount:i+1};return yield r.storage.setThrottleMetadata(u),r.attemptFetch(e,u)}})()}}class _Q{constructor(e,t,i,r,s){this.app=e,this._client=t,this._storageCache=i,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function iw(n,e){const t=n.target.error||void 0;return ol.create(e,{originalErrorMessage:t&&t?.message})}const q_="app_namespace_store";class yQ{constructor(e,t,i,r=function xQ(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=i=>{e(iw(i,"storage-open"))},t.onsuccess=i=>{n(i.target.result)},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(q_,{keyPath:"compositeKey"})}}catch(t){e(ol.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return Se(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{const _=i.transaction([q_],"readonly").objectStore(q_),y=t.createCompositeKey(e);try{const E=_.get(y);E.onerror=D=>{s(iw(D,"storage-get"))},E.onsuccess=D=>{const R=D.target.result;r(R?R.value:void 0)}}catch(E){s(ol.create("storage-get",{originalErrorMessage:E?.message}))}})})()}set(e,t){var i=this;return Se(function*(){const r=yield i.openDbPromise;return new Promise((s,u)=>{const y=r.transaction([q_],"readwrite").objectStore(q_),E=i.createCompositeKey(e);try{const D=y.put({compositeKey:E,value:t});D.onerror=R=>{u(iw(R,"storage-set"))},D.onsuccess=()=>{s()}}catch(D){u(ol.create("storage-set",{originalErrorMessage:D?.message}))}})})()}delete(e){var t=this;return Se(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{const _=i.transaction([q_],"readwrite").objectStore(q_),y=t.createCompositeKey(e);try{const E=_.delete(y);E.onerror=D=>{s(iw(D,"storage-delete"))},E.onsuccess=()=>{r()}}catch(E){s(ol.create("storage-delete",{originalErrorMessage:E?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class bQ{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return Se(function*(){const t=e.storage.getLastFetchStatus(),i=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const u=yield i;u&&(e.lastSuccessfulFetchTimestampMillis=u);const _=yield r;_&&(e.activeConfig=_)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function wQ(){return jD.apply(this,arguments)}function jD(){return(jD=Se(function*(){if(!B_())return!1;try{return yield Hy()}catch{return!1}})).apply(this,arguments)}!function vQ(){Ca(new ra("remote-config",function n(e,{instanceIdentifier:t}){const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ol.create("registration-window");if(!B_())throw ol.create("indexed-db-unavailable");const{projectId:s,apiKey:u,appId:_}=i.options;if(!s)throw ol.create("registration-project-id");if(!u)throw ol.create("registration-api-key");if(!_)throw ol.create("registration-app-id");const y=new yQ(_,i.name,t=t||"firebase"),E=new bQ(y),D=new pg(ND);D.logLevel=ti.ERROR;const R=new cQ(r,$_,t,s,u,_),U=new hQ(R,y),X=new aQ(U,y,E,D),ie=new _Q(i,X,E,y,D);return function rQ(n){const e=Go(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(ie),ie},"PUBLIC").setMultipleInstances(!0)),go(ND,"0.4.4"),go(ND,"0.4.4","esm2017")}();const EQ=(n,e)=>e.some(t=>n instanceof t);let BN,zN;const VN=new WeakMap,UD=new WeakMap,jN=new WeakMap,HD=new WeakMap,$D=new WeakMap;let GD={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return UD.get(n);if("objectStoreNames"===e)return n.objectStoreNames||jN.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return jh(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function MQ(n){return"function"==typeof n?function AQ(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function TQ(){return zN||(zN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(WD(this),e),jh(VN.get(this))}:function(...e){return jh(n.apply(WD(this),e))}:function(e,...t){const i=n.call(WD(this),e,...t);return jN.set(i,e.sort?e.sort():[e]),jh(i)}}(n):(n instanceof IDBTransaction&&function IQ(n){if(UD.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",u),n.removeEventListener("abort",u)},s=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",u),n.addEventListener("abort",u)});UD.set(n,e)}(n),EQ(n,function CQ(){return BN||(BN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,GD):n)}function jh(n){if(n instanceof IDBRequest)return function SQ(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",u)},s=()=>{t(jh(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&VN.set(t,n)}).catch(()=>{}),$D.set(e,n),e}(n);if(HD.has(n))return HD.get(n);const e=MQ(n);return e!==n&&(HD.set(n,e),$D.set(e,n)),e}const WD=n=>$D.get(n);function UN(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const u=indexedDB.open(n,e),_=jh(u);return i&&u.addEventListener("upgradeneeded",y=>{i(jh(u.result),y.oldVersion,y.newVersion,jh(u.transaction))}),t&&u.addEventListener("blocked",()=>t()),_.then(y=>{s&&y.addEventListener("close",()=>s()),r&&y.addEventListener("versionchange",()=>r())}).catch(()=>{}),_}function qD(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),jh(t).then(()=>{})}const kQ=["get","getKey","getAll","getAllKeys","count"],RQ=["put","add","delete","clear"],ZD=new Map;function HN(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(ZD.get(e))return ZD.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=RQ.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!kQ.includes(t))return;const s=function(){var u=Se(function*(_,...y){const E=this.transaction(_,r?"readwrite":"readonly");let D=E.store;return i&&(D=D.index(y.shift())),(yield Promise.all([D[t](...y),r&&E.done]))[0]});return function(y){return u.apply(this,arguments)}}();return ZD.set(e,s),s}!function DQ(n){GD=n(GD)}(n=>({...n,get:(e,t,i)=>HN(e,t)||n.get(e,t,i),has:(e,t)=>!!HN(e,t)||n.has(e,t)}));const PQ="/firebase-messaging-sw.js",OQ="/firebase-cloud-messaging-push-scope",$N="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",FQ="https://fcmregistrations.googleapis.com/v1",GN="google.c.a.c_id",NQ="google.c.a.c_l",LQ="google.c.a.ts";var np=(()=>((np=np||{}).PUSH_RECEIVED="push-received",np.NOTIFICATION_CLICKED="notification-clicked",np))();function Uh(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zQ(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}const YD="fcm_token_details_db",VQ=5,WN="fcm_token_object_Store";function XD(){return XD=Se(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(YD))return null;let e=null;return(yield UN(YD,VQ,{upgrade:(i=Se(function*(r,s,u,_){var y;if(s<2||!r.objectStoreNames.contains(WN))return;const E=_.objectStore(WN),D=yield E.index("fcmSenderId").get(n);if(yield E.clear(),D)if(2===s){const R=D;if(!R.auth||!R.p256dh||!R.endpoint)return;e={token:R.fcmToken,createTime:null!==(y=R.createTime)&&void 0!==y?y:Date.now(),subscriptionOptions:{auth:R.auth,p256dh:R.p256dh,endpoint:R.endpoint,swScope:R.swScope,vapidKey:"string"==typeof R.vapidKey?R.vapidKey:Uh(R.vapidKey)}}}else if(3===s){const R=D;e={token:R.fcmToken,createTime:R.createTime,subscriptionOptions:{auth:Uh(R.auth),p256dh:Uh(R.p256dh),endpoint:R.endpoint,swScope:R.swScope,vapidKey:Uh(R.vapidKey)}}}else if(4===s){const R=D;e={token:R.fcmToken,createTime:R.createTime,subscriptionOptions:{auth:Uh(R.auth),p256dh:Uh(R.p256dh),endpoint:R.endpoint,swScope:R.swScope,vapidKey:Uh(R.vapidKey)}}}}),function(s,u,_,y){return i.apply(this,arguments)})})).close(),yield qD(YD),yield qD("fcm_vapid_details_db"),yield qD("undefined"),function UQ(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var i}),XD.apply(this,arguments)}const HQ="firebase-messaging-database",$Q=1,Z_="firebase-messaging-store";let KD=null;function QD(){return KD||(KD=UN(HQ,$Q,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Z_)}})),KD}function qN(n){return JD.apply(this,arguments)}function JD(){return JD=Se(function*(n){const e=iA(n),i=yield(yield QD()).transaction(Z_).objectStore(Z_).get(e);if(i)return i;{const r=yield function jQ(n){return XD.apply(this,arguments)}(n.appConfig.senderId);if(r)return yield eA(n,r),r}}),JD.apply(this,arguments)}function eA(n,e){return tA.apply(this,arguments)}function tA(){return(tA=Se(function*(n,e){const t=iA(n),r=(yield QD()).transaction(Z_,"readwrite");return yield r.objectStore(Z_).put(e,t),yield r.done,e})).apply(this,arguments)}function nA(){return(nA=Se(function*(n){const e=iA(n),i=(yield QD()).transaction(Z_,"readwrite");yield i.objectStore(Z_).delete(e),yield i.done})).apply(this,arguments)}function iA({appConfig:n}){return n.appId}const Ns=new Dd("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function qQ(n,e){return rA.apply(this,arguments)}function rA(){return(rA=Se(function*(n,e){const t=yield lA(n),i=YN(e),r={method:"POST",headers:t,body:JSON.stringify(i)};let s;try{s=yield(yield fetch(aA(n.appConfig),r)).json()}catch(u){throw Ns.create("token-subscribe-failed",{errorInfo:u?.toString()})}if(s.error)throw Ns.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Ns.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function oA(){return(oA=Se(function*(n,e){const t=yield lA(n),i=YN(e.subscriptionOptions),r={method:"PATCH",headers:t,body:JSON.stringify(i)};let s;try{s=yield(yield fetch(`${aA(n.appConfig)}/${e.token}`,r)).json()}catch(u){throw Ns.create("token-update-failed",{errorInfo:u?.toString()})}if(s.error)throw Ns.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Ns.create("token-update-no-token");return s.token})).apply(this,arguments)}function ZN(n,e){return sA.apply(this,arguments)}function sA(){return(sA=Se(function*(n,e){const i={method:"DELETE",headers:yield lA(n)};try{const s=yield(yield fetch(`${aA(n.appConfig)}/${e}`,i)).json();if(s.error)throw Ns.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(r){throw Ns.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})).apply(this,arguments)}function aA({projectId:n}){return`${FQ}/projects/${n}/registrations`}function lA(n){return cA.apply(this,arguments)}function cA(){return(cA=Se(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function YN({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const r={web:{endpoint:t,auth:e,p256dh:n}};return i!==$N&&(r.web.applicationPubKey=i),r}const YQ=6048e5;function uA(){return uA=Se(function*(n){const e=yield function QQ(n,e){return pA.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Uh(e.getKey("auth")),p256dh:Uh(e.getKey("p256dh"))},i=yield qN(n.firebaseDependencies);if(i){if(function JQ(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(i.subscriptionOptions,t))return Date.now()>=i.createTime+YQ?function KQ(n,e){return hA.apply(this,arguments)}(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{yield ZN(n.firebaseDependencies,i.token)}catch(r){console.warn(r)}return KN(n.firebaseDependencies,t)}return KN(n.firebaseDependencies,t)}),uA.apply(this,arguments)}function dA(){return dA=Se(function*(n){const e=yield qN(n.firebaseDependencies);e&&(yield ZN(n.firebaseDependencies,e.token),yield function GQ(n){return nA.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),dA.apply(this,arguments)}function hA(){return hA=Se(function*(n,e){try{const t=yield function ZQ(n,e){return oA.apply(this,arguments)}(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield eA(n.firebaseDependencies,i),t}catch(t){throw yield function XN(n){return dA.apply(this,arguments)}(n),t}}),hA.apply(this,arguments)}function KN(n,e){return fA.apply(this,arguments)}function fA(){return(fA=Se(function*(n,e){const i={token:yield qQ(n,e),createTime:Date.now(),subscriptionOptions:e};return yield eA(n,i),i.token})).apply(this,arguments)}function pA(){return(pA=Se(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zQ(e)})})).apply(this,arguments)}function QN(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function eJ(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const r=e.notification.image;r&&(n.notification.image=r);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function tJ(n,e){e.data&&(n.data=e.data)}(e,n),function nJ(n,e){var t,i,r,s,u;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const _=null!==(r=null===(i=e.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==r?r:null===(s=e.notification)||void 0===s?void 0:s.click_action;_&&(n.fcmOptions.link=_);const y=null===(u=e.fcmOptions)||void 0===u?void 0:u.analytics_label;y&&(n.fcmOptions.analyticsLabel=y)}(e,n),e}function JN(n,e){const t=[];for(let i=0;i<n.length;i++)t.push(n.charAt(i)),i<e.length&&t.push(e.charAt(i));return t.join("")}function _A(n){return Ns.create("missing-app-config-values",{valueName:n})}JN("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),JN("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class oJ{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function rJ(n){if(!n||!n.options)throw _A("App Configuration Object");if(!n.name)throw _A("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw _A(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}function mA(){return(mA=Se(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(PQ,{scope:OQ}),n.swRegistration.update().catch(()=>{})}catch(e){throw Ns.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function gA(){return(gA=Se(function*(n,e){if(!e&&!n.swRegistration&&(yield function eL(n){return mA.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Ns.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function xA(){return(xA=Se(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=$N)})).apply(this,arguments)}function yA(){return yA=Se(function*(n,e){if(!navigator)throw Ns.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ns.create("permission-blocked");return yield function aJ(n,e){return xA.apply(this,arguments)}(n,e?.vapidKey),yield function sJ(n,e){return gA.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function XQ(n){return uA.apply(this,arguments)}(n)}),yA.apply(this,arguments)}function bA(){return(bA=Se(function*(n,e,t){const i=function cJ(n){switch(n){case np.NOTIFICATION_CLICKED:return"notification_open";case np.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[GN],message_name:t[NQ],message_time:t[LQ],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function vA(){return vA=Se(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===np.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(QN(t)):n.onMessageHandler.next(QN(t)));const i=t.data;(function iJ(n){return"object"==typeof n&&!!n&&GN in n})(i)&&"1"===i["google.c.a.e"]&&(yield function lJ(n,e,t){return bA.apply(this,arguments)}(n,t.messageType,i))}),vA.apply(this,arguments)}const nL="@firebase/messaging",dJ=n=>{const e=new oJ(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function uJ(n,e){return vA.apply(this,arguments)}(e,t)),e},hJ=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:i=>function tL(n,e){return yA.apply(this,arguments)}(e,i)}};function rL(){return wA.apply(this,arguments)}function wA(){return(wA=Se(function*(){try{yield Hy()}catch{return!1}return typeof window<"u"&&B_()&&BI()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function fJ(){Ca(new ra("messaging",dJ,"PUBLIC")),Ca(new ra("messaging-internal",hJ,"PRIVATE")),go(nL,"0.12.4"),go(nL,"0.12.4","esm2017")}();const rw="analytics",mJ="firebase_id",gJ="origin",xJ=6e4,yJ="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",TA="https://www.googletagmanager.com/gtag/js",vs=new pg("@firebase/analytics"),Ta=new Dd("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function vJ(n){if(!n.startsWith(TA)){const e=Ta.create("invalid-gtag-resource",{gtagURL:n});return vs.warn(e.message),""}return n}function oL(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function SA(){return(SA=Se(function*(n,e,t,i,r,s){const u=i[r];try{if(u)yield e[u];else{const y=(yield oL(t)).find(E=>E.measurementId===r);y&&(yield e[y.appId])}}catch(_){vs.error(_)}n("config",r,s)})).apply(this,arguments)}function IA(){return(IA=Se(function*(n,e,t,i,r){try{let s=[];if(r&&r.send_to){let u=r.send_to;Array.isArray(u)||(u=[u]);const _=yield oL(t);for(const y of u){const E=_.find(R=>R.measurementId===y),D=E&&e[E.appId];if(!D){s=[];break}s.push(D)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",i,r||{})}catch(s){vs.error(s)}})).apply(this,arguments)}const MJ=30,sL=new class RJ{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function PJ(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function DA(){return(DA=Se(function*(n){var e;const{appId:t,apiKey:i}=n,r={method:"GET",headers:PJ(i)},s=yJ.replace("{app-id}",t),u=yield fetch(s,r);if(200!==u.status&&304!==u.status){let _="";try{const y=yield u.json();null!==(e=y.error)&&void 0!==e&&e.message&&(_=y.error.message)}catch{}throw Ta.create("config-fetch-failed",{httpStatus:u.status,responseMessage:_})}return u.json()})).apply(this,arguments)}function AA(){return(AA=Se(function*(n,e=sL,t){const{appId:i,apiKey:r,measurementId:s}=n.options;if(!i)throw Ta.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Ta.create("no-api-key")}const u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},_=new BJ;return setTimeout(Se(function*(){_.abort()}),void 0!==t?t:xJ),aL({appId:i,apiKey:r,measurementId:s},u,_,e)})).apply(this,arguments)}function aL(n,e,t){return MA.apply(this,arguments)}function MA(){return MA=Se(function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=sL){var s;const{appId:u,measurementId:_}=n;try{yield function NJ(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(Ta.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(i,e)}catch(y){if(_)return vs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:u,measurementId:_};throw y}try{const y=yield function OJ(n){return DA.apply(this,arguments)}(n);return r.deleteThrottleMetadata(u),y}catch(y){const E=y;if(!function LJ(n){if(!(n instanceof Cu&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(E)){if(r.deleteThrottleMetadata(u),_)return vs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_} provided in the "measurementId" field in the local Firebase config. [${E?.message}]`),{appId:u,measurementId:_};throw y}const D=503===Number(null===(s=E?.customData)||void 0===s?void 0:s.httpStatus)?jI(t,r.intervalMillis,MJ):jI(t,r.intervalMillis),R={throttleEndTimeMillis:Date.now()+D,backoffCount:t+1};return r.setThrottleMetadata(u,R),vs.debug(`Calling attemptFetch again in ${D} millis`),aL(n,R,i,r)}}),MA.apply(this,arguments)}class BJ{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let kA,BA;function RA(){return(RA=Se(function*(n,e,t,i,r){if(r&&r.global)n("event",t,i);else{const s=yield e;n("event",t,Object.assign(Object.assign({},i),{send_to:s}))}})).apply(this,arguments)}function zA(){return(zA=Se(function*(){if(!B_())return vs.warn(Ta.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Hy()}catch(n){return vs.warn(Ta.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function VA(){return VA=Se(function*(n,e,t,i,r,s,u){var _;const y=function FJ(n){return AA.apply(this,arguments)}(n);y.then(X=>{t[X.measurementId]=X.appId,n.options.measurementId&&X.measurementId!==n.options.measurementId&&vs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${X.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(X=>vs.error(X)),e.push(y);const E=function GJ(){return zA.apply(this,arguments)}().then(X=>{if(X)return i.getId()}),[D,R]=yield Promise.all([y,E]);(function AJ(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(TA)&&t.src.includes(n))return t;return null})(s)||function EJ(n,e){const t=function wJ(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:vJ}),i=document.createElement("script"),r=`${TA}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}(s,D.measurementId),BA&&(r("consent","default",BA),function lL(n){BA=n}(void 0)),r("js",new Date);const U=null!==(_=u?.config)&&void 0!==_?_:{};return U[gJ]="firebase",U.update=!0,null!=R&&(U[mJ]=R),r("config",D.measurementId,U),kA&&(r("set",kA),function cL(n){kA=n}(void 0)),D.measurementId}),VA.apply(this,arguments)}class qJ{constructor(e){this.app=e}_delete(){return delete Md[this.app.options.appId],Promise.resolve()}}let Md={},uL=[];const dL={};let fL,kd,ow="dataLayer",jA=!1;function YJ(n,e,t){!function ZJ(){const n=[];if(LI()&&n.push("This is a browser extension environment."),BI()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=Ta.create("invalid-analytics-context",{errorInfo:e});vs.warn(t.message)}}();const i=n.options.appId;if(!i)throw Ta.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Ta.create("no-api-key");vs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Md[i])throw Ta.create("already-exists",{id:i});if(!jA){!function CJ(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(ow);const{wrappedGtag:s,gtagCore:u}=function DJ(n,e,t,i,r){let s=function(...u){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function IJ(n,e,t,i){function s(){return s=Se(function*(u,..._){try{if("event"===u){const[y,E]=_;yield function SJ(n,e,t,i,r){return IA.apply(this,arguments)}(n,e,t,y,E)}else if("config"===u){const[y,E]=_;yield function TJ(n,e,t,i,r,s){return SA.apply(this,arguments)}(n,e,t,i,y,E)}else if("consent"===u){const[y]=_;n("consent","update",y)}else if("get"===u){const[y,E,D]=_;n("get",y,E,D)}else if("set"===u){const[y]=_;n("set",y)}else n(u,..._)}catch(y){vs.error(y)}}),s.apply(this,arguments)}return function r(u){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[r]}}(Md,uL,dL,ow,"gtag");kd=s,fL=u,jA=!0}return Md[i]=function WJ(n,e,t,i,r,s,u){return VA.apply(this,arguments)}(n,uL,dL,e,fL,ow,t),new qJ(n)}function KJ(){return UA.apply(this,arguments)}function UA(){return(UA=Se(function*(){if(LI()||!BI()||!B_())return!1;try{return yield Hy()}catch{return!1}})).apply(this,arguments)}const pL="@firebase/analytics";!function JJ(){Ca(new ra(rw,(e,{options:t})=>YJ(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Ca(new ra("analytics-internal",function n(e){try{const t=e.getProvider(rw).getImmediate();return{logEvent:(i,r,s)=>function QJ(n,e,t,i){n=Go(n),function zJ(n,e,t,i,r){return RA.apply(this,arguments)}(kd,Md[n.app.options.appId],e,t,i).catch(r=>vs.error(r))}(t,i,r,s)}}catch(t){throw Ta.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),go(pL,"0.10.0"),go(pL,"0.10.0","esm2017")}();class eee extends Le{constructor(e,t){super()}schedule(e,t=0){return this}}const sw={setInterval(n,e,...t){const{delegate:i}=sw;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=sw;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class aw extends eee{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return sw.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&sw.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,f(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const mL={now:()=>(mL.delegate||Date).now(),delegate:void 0};class Yy{constructor(e,t=Yy.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Yy.now=mL.now;class lw extends Yy{constructor(e,t=Yy.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const iee=new class nee extends lw{}(class tee extends aw{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}}),Xy=new lw(aw),ree=Xy;function Wo(n,e,t){const i=zt(n)||e||t?{next:n,error:e,complete:t}:n;return i?mi((r,s)=>{var u;null===(u=i.subscribe)||void 0===u||u.call(i);let _=!0;r.subscribe(Qn(s,y=>{var E;null===(E=i.next)||void 0===E||E.call(i,y),s.next(y)},()=>{var y;_=!1,null===(y=i.complete)||void 0===y||y.call(i),s.complete()},y=>{var E;_=!1,null===(E=i.error)||void 0===E||E.call(i,y),s.error(y)},()=>{var y,E;_&&(null===(y=i.unsubscribe)||void 0===y||y.call(i)),null===(E=i.finalize)||void 0===E||E.call(i)}))}):In}const cw=new gc("7.6.1"),$A="__angularfire_symbol__analyticsIsSupportedValue",GA="__angularfire_symbol__analyticsIsSupported",WA="__angularfire_symbol__remoteConfigIsSupportedValue",qA="__angularfire_symbol__remoteConfigIsSupported",ZA="__angularfire_symbol__messagingIsSupportedValue",YA="__angularfire_symbol__messagingIsSupported";function KA(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(u=>u.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[GA]||(globalThis[GA]=KJ().then(n=>globalThis[$A]=n).catch(()=>globalThis[$A]=!1)),globalThis[YA]||(globalThis[YA]=rL().then(n=>globalThis[ZA]=n).catch(()=>globalThis[ZA]=!1)),globalThis[qA]||(globalThis[qA]=wQ().then(n=>globalThis[WA]=n).catch(()=>globalThis[WA]=!1));const QA=(n,e)=>{const t=e?[e]:sN(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(u=>{i.includes(u)||i.push(u)})}),i};function xg(){}class gL{constructor(e,t=iee){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(u){r.runGuarded(()=>{e.apply(this,[u])})},t,i)}}class oee{constructor(e){this.zone=e,this.task=null}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xg,{},xg,xg)),t.pipe(Wo({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let JA=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new gL(Zone.current)),this.insideAngular=t.run(()=>new gL(Zone.current,Xy)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(lt(pi))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Y_(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function X_(n){return Y_().ngZone.run(()=>n())}function aee(n){return Y_(),function lee(n){return function(t){return(t=t.lift(new oee(n.ngZone))).pipe(tr(n.outsideAngular),Ye(n.insideAngular))}}(Y_())(n)}const cee=(n,e)=>function(){const i=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),X_(()=>n.apply(void 0,i))},Hh=(n,e)=>function(){let t;const i=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof i[s]&&(e&&(t||(t=X_(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xg,{},xg,xg)))),i[s]=cee(i[s],t));const r=function see(n){return Y_().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,i));if(!e){if(r instanceof bn){const s=Y_();return r.pipe(tr(s.outsideAngular),Ye(s.insideAngular))}return X_(()=>r)}return r instanceof bn?r.pipe(aee):r instanceof Promise?X_(()=>new Promise((s,u)=>r.then(_=>X_(()=>s(_)),_=>X_(()=>u(_))))):"function"==typeof r&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),r.apply(this,arguments)}:X_(()=>r)};class yg{constructor(e){return e}}class eM{constructor(){return sN()}}const tM=new vt("angularfire2._apps"),dee={provide:yg,useFactory:function uee(n){return n&&1===n.length?n[0]:new yg(XI())},deps:[[new Gr,tM]]},hee={provide:eM,deps:[[new Gr,tM]]};function fee(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new yg(i)}}let pee=(()=>{class n{constructor(t){go("angularfire",cw.full,"core"),go("angularfire",cw.full,"app"),go("angular",H1.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(lt(xs))},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({providers:[dee,hee]}),n})();function _ee(n,...e){return{ngModule:pee,providers:[{provide:tM,useFactory:fee(n),multi:!0,deps:[pi,as,JA,...e]}]}}const mee=Hh(oN,!0),nM=new Map,xL={activated:!1,tokenObservers:[]},gee={initialized:!1,enabled:!1};function xo(n){return nM.get(n)||Object.assign({},xL)}function uw(){return gee}const iM="https://content-firebaseappcheck.googleapis.com/v1",vee="exchangeDebugToken",yL={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Eee{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return Se(function*(){t.stop();try{t.pending=new L_,yield function Cee(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L_,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ls=new Dd("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function rM(n){if(!xo(n).activated)throw Ls.create("use-before-activation",{appName:n.name})}function fw(n,e){return sM.apply(this,arguments)}function sM(){return(sM=Se(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const R=yield r.getHeartbeatsHeader();R&&(i["X-Firebase-Client"]=R)}const s={method:"POST",body:JSON.stringify(e),headers:i};let u,_;try{u=yield fetch(n,s)}catch(R){throw Ls.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==u.status)throw Ls.create("fetch-status-error",{httpStatus:u.status});try{_=yield u.json()}catch(R){throw Ls.create("fetch-parse-error",{originalErrorMessage:R?.message})}const y=_.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Ls.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const E=1e3*Number(y[1]),D=Date.now();return{token:_.token,expireTimeMillis:D+E,issuedAtTimeMillis:D}})).apply(this,arguments)}function bL(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${iM}/projects/${t}/apps/${i}:${vee}?key=${r}`,body:{debug_token:e}}}const Dee="firebase-app-check-database",Aee=1,Ky="firebase-app-check-store";let pw=null;function aM(){return(aM=Se(function*(n,e){const i=(yield function wL(){return pw||(pw=new Promise((n,e)=>{try{const t=indexedDB.open(Dee,Aee);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Ls.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Ky,{keyPath:"compositeKey"})}}catch(t){e(Ls.create("storage-open",{originalErrorMessage:t?.message}))}}),pw)}()).transaction(Ky,"readwrite"),s=i.objectStore(Ky).put({compositeKey:n,value:e});return new Promise((u,_)=>{s.onsuccess=y=>{u()},i.onerror=y=>{var E;_(Ls.create("storage-set",{originalErrorMessage:null===(E=y.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const Qy=new pg("@firebase/app-check");function uM(n,e){return B_()?function kee(n,e){return function EL(n,e){return aM.apply(this,arguments)}(function TL(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Qy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hM(){return uw().enabled}function fM(){return pM.apply(this,arguments)}function pM(){return(pM=Se(function*(){const n=uw();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Lee={error:"UNKNOWN_ERROR"};function Bee(n){return G2.encodeString(JSON.stringify(n),!1)}function _w(n){return _M.apply(this,arguments)}function _M(){return(_M=Se(function*(n,e=!1){const t=n.app;rM(t);const i=xo(t);let s,r=i.token;if(r&&!bg(r)&&(i.token=void 0,r=void 0),!r){const y=yield i.cachedTokenPromise;y&&(bg(y)?r=y:yield uM(t,void 0))}if(!e&&r&&bg(r))return{token:r.token};let _,u=!1;if(hM()){i.exchangeTokenPromise||(i.exchangeTokenPromise=fw(bL(t,yield fM()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),u=!0);const y=yield i.exchangeTokenPromise;return yield uM(t,y),i.token=y,{token:y.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),u=!0),r=yield xo(t).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Qy.warn(y.message):Qy.error(y),s=y}return r?s?_=bg(r)?{token:r.token,internalError:s}:AL(s):(_={token:r.token},i.token=r,yield uM(t,r)):_=AL(s),u&&function DL(n,e){const t=xo(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}(t,_),_})).apply(this,arguments)}function SL(n){return mM.apply(this,arguments)}function mM(){return(mM=Se(function*(n){const e=n.app;rM(e);const{provider:t}=xo(e);if(hM()){const i=yield fM(),{token:r}=yield fw(bL(e,i),n.heartbeatServiceProvider);return{token:r}}{const{token:i}=yield t.getToken();return{token:i}}})).apply(this,arguments)}function xM(n,e){const t=xo(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function IL(n){const{app:e}=n,t=xo(e);let i=t.tokenRefresher;i||(i=function zee(n){const{app:e}=n;return new Eee(Se(function*(){let i;if(i=xo(e).token?yield _w(n,!0):yield _w(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=xo(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},yL.RETRIAL_MIN_WAIT,yL.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function bg(n){return n.expireTimeMillis-Date.now()>0}function AL(n){return{token:Bee(Lee),error:n}}class Vee{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=xo(this.app);for(const t of e)xM(this.app,t.next);return Promise.resolve()}}const LL="app-check-internal";!function ete(){Ca(new ra("app-check",n=>function jee(n,e){return new Vee(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(LL).initialize()})),Ca(new ra(LL,n=>function Uee(n){return{getToken:e=>_w(n,e),getLimitedUseToken:()=>SL(n),addTokenListener:e=>function gM(n,e,t,i){const{app:r}=n,s=xo(r);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:i,type:e}],s.token&&bg(s.token)){const _=s.token;Promise.resolve().then(()=>{t({token:_.token}),IL(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>IL(n))}(n,"INTERNAL",e),removeTokenListener:e=>xM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),go("@firebase/app-check","0.8.0")}();class wM{constructor(){return QA("app-check")}}typeof window<"u"&&window;const ote=function zL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},VL=new Dd("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gw=new pg("@firebase/auth");function xw(n,...e){gw.logLevel<=ti.ERROR&&gw.error(`Auth (${$_}): ${n}`,...e)}function sl(n,...e){throw CM(n,...e)}function Ol(n,...e){return CM(n,...e)}function jL(n,e,t){const i=Object.assign(Object.assign({},ote()),{[e]:t});return new Dd("auth","Firebase",i).create(e,{appName:n.name})}function CM(n,...e){if("string"!=typeof n){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return VL.create(n,...e)}function Lt(n,e,...t){if(!n)throw CM(e,...t)}function Rd(n){const e="INTERNAL ASSERTION FAILED: "+n;throw xw(e),new Error(e)}function $h(n,e){n||Rd(e)}function Jy(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function TM(){return"http:"===UL()||"https:"===UL()}function UL(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class eb{constructor(e,t){this.shortDelay=e,this.longDelay=t,$h(t>e,"Short delay should be less than long delay!"),this.isMobile=NI()||XF()}get(){return function ate(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(TM()||LI()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function SM(n,e){$h(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class HL{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Rd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Rd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Rd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cte={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ute=new eb(3e4,6e4);function ao(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function yo(n,e,t,i){return IM.apply(this,arguments)}function IM(){return(IM=Se(function*(n,e,t,i,r={}){return $L(n,r,Se(function*(){let s={},u={};i&&("GET"===e?u=i:s={body:JSON.stringify(i)});const _=z_(Object.assign({key:n.config.apiKey},u)).slice(1),y=yield n._getAdditionalHeaders();return y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode),HL.fetch()(GL(n,n.config.apiHost,t,_),Object.assign({method:e,headers:y,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function $L(n,e,t){return DM.apply(this,arguments)}function DM(){return(DM=Se(function*(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},cte),e);try{const r=new dte(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=yield s.json();if("needConfirmation"in u)throw tb(n,"account-exists-with-different-credential",u);if(s.ok&&!("errorMessage"in u))return u;{const _=s.ok?u.errorMessage:u.error.message,[y,E]=_.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===y)throw tb(n,"credential-already-in-use",u);if("EMAIL_EXISTS"===y)throw tb(n,"email-already-in-use",u);if("USER_DISABLED"===y)throw tb(n,"user-disabled",u);const D=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw jL(n,D,E);sl(n,D)}}catch(r){if(r instanceof Cu)throw r;sl(n,"network-request-failed",{message:String(r)})}})).apply(this,arguments)}function Gh(n,e,t,i){return AM.apply(this,arguments)}function AM(){return(AM=Se(function*(n,e,t,i,r={}){const s=yield yo(n,e,t,i,r);return"mfaPendingCredential"in s&&sl(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function GL(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?SM(n.config,r):`${n.config.apiScheme}://${r}`}class dte{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ol(this.auth,"network-request-failed")),ute.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tb(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Ol(n,e,i);return r.customData._tokenResponse=t,r}function MM(){return(MM=Se(function*(n,e){return yo(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function RM(){return(RM=Se(function*(n,e){return yo(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function nb(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function PM(){return(PM=Se(function*(n,e=!1){const t=Go(n),i=yield t.getIdToken(e),r=yw(i);Lt(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,u=s?.sign_in_provider;return{claims:r,token:i,authTime:nb(OM(r.auth_time)),issuedAtTime:nb(OM(r.iat)),expirationTime:nb(OM(r.exp)),signInProvider:u||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function OM(n){return 1e3*Number(n)}function yw(n){const[e,t,i]=n.split(".");if(void 0===e||void 0===t||void 0===i)return xw("JWT malformed, contained fewer than 3 sections"),null;try{const r=q2(t);return r?JSON.parse(r):(xw("Failed to decode base64 JWT payload"),null)}catch(r){return xw("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Wh(n,e){return FM.apply(this,arguments)}function FM(){return(FM=Se(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(i){throw i instanceof Cu&&function gte({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})).apply(this,arguments)}class xte{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),i}{this.errorBackoff=3e4;const r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(Se(function*(){yield t.iteration()}),i)}iteration(){var e=this;return Se(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class WL{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nb(this.lastLoginAt),this.creationTime=nb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ib(n){return NM.apply(this,arguments)}function NM(){return NM=Se(function*(n){var e;const t=n.auth,i=yield n.getIdToken(),r=yield Wh(n,function pte(n,e){return RM.apply(this,arguments)}(t,{idToken:i}));Lt(r?.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const u=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function vte(n){return n.map(e=>{var{providerId:t}=e,i=Mo(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}(s.providerUserInfo):[],_=function bte(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}(n.providerData,u),D=!!n.isAnonymous&&!(n.email&&s.passwordHash||_?.length),R={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:_,metadata:new WL(s.createdAt,s.lastLoginAt),isAnonymous:D};Object.assign(n,R)}),NM.apply(this,arguments)}function LM(){return(LM=Se(function*(n){const e=Go(n);yield ib(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function BM(){return(BM=Se(function*(n,e){const t=yield $L(n,{},Se(function*(){const i=z_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,u=GL(n,r,"/v1/token",`key=${s}`),_=yield n._getAdditionalHeaders();return _["Content-Type"]="application/x-www-form-urlencoded",HL.fetch()(u,{method:"POST",headers:_,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class rb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Lt(e.idToken,"internal-error"),Lt(typeof e.idToken<"u","internal-error"),Lt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function mte(n){const e=yw(n);return Lt(e,"internal-error"),Lt(typeof e.exp<"u","internal-error"),Lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var i=this;return Se(function*(){return Lt(!i.accessToken||i.refreshToken,e,"user-token-expired"),t||!i.accessToken||i.isExpired?i.refreshToken?(yield i.refresh(e,i.refreshToken),i.accessToken):null:i.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var i=this;return Se(function*(){const{accessToken:r,refreshToken:s,expiresIn:u}=yield function wte(n,e){return BM.apply(this,arguments)}(e,t);i.updateTokensAndExpiration(r,s,Number(u))})()}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,u=new rb;return i&&(Lt("string"==typeof i,"internal-error",{appName:e}),u.refreshToken=i),r&&(Lt("string"==typeof r,"internal-error",{appName:e}),u.accessToken=r),s&&(Lt("number"==typeof s,"internal-error",{appName:e}),u.expirationTime=s),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rb,this.toJSON())}_performRefresh(){return Rd("not implemented")}}function ip(n,e){Lt("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class K_{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Mo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xte(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new WL(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return Se(function*(){const i=yield Wh(t,t.stsTokenManager.getToken(t.auth,e));return Lt(i,t.auth,"internal-error"),t.accessToken!==i&&(t.accessToken=i,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),i})()}getIdTokenResult(e){return function _te(n){return PM.apply(this,arguments)}(this,e)}reload(){return function yte(n){return LM.apply(this,arguments)}(this)}_assign(e){this!==e&&(Lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new K_(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var i=this;return Se(function*(){let r=!1;e.idToken&&e.idToken!==i.stsTokenManager.accessToken&&(i.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ib(i)),yield i.auth._persistUserIfCurrent(i),r&&i.auth._notifyListenersIfCurrent(i)})()}delete(){var e=this;return Se(function*(){const t=yield e.getIdToken();return yield Wh(e,function hte(n,e){return MM.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,u,_,y,E,D;const R=null!==(i=t.displayName)&&void 0!==i?i:void 0,U=null!==(r=t.email)&&void 0!==r?r:void 0,X=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,ie=null!==(u=t.photoURL)&&void 0!==u?u:void 0,xe=null!==(_=t.tenantId)&&void 0!==_?_:void 0,ze=null!==(y=t._redirectEventId)&&void 0!==y?y:void 0,Qe=null!==(E=t.createdAt)&&void 0!==E?E:void 0,Ve=null!==(D=t.lastLoginAt)&&void 0!==D?D:void 0,{uid:Bt,emailVerified:Qt,isAnonymous:Sn,providerData:Wi,stsTokenManager:co}=t;Lt(Bt&&co,e,"internal-error");const Vl=rb.fromJSON(this.name,co);Lt("string"==typeof Bt,e,"internal-error"),ip(R,e.name),ip(U,e.name),Lt("boolean"==typeof Qt,e,"internal-error"),Lt("boolean"==typeof Sn,e,"internal-error"),ip(X,e.name),ip(ie,e.name),ip(xe,e.name),ip(ze,e.name),ip(Qe,e.name),ip(Ve,e.name);const Aa=new K_({uid:Bt,auth:e,email:U,emailVerified:Qt,displayName:R,isAnonymous:Sn,photoURL:ie,phoneNumber:X,tenantId:xe,stsTokenManager:Vl,createdAt:Qe,lastLoginAt:Ve});return Wi&&Array.isArray(Wi)&&(Aa.providerData=Wi.map(Mu=>Object.assign({},Mu))),ze&&(Aa._redirectEventId=ze),Aa}static _fromIdTokenResponse(e,t,i=!1){return Se(function*(){const r=new rb;r.updateFromServerResponse(t);const s=new K_({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield ib(s),s})()}}const qL=new Map;function qh(n){$h(n instanceof Function,"Expected a class definition");let e=qL.get(n);return e?($h(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qL.set(n,e),e)}const ZL=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return Se(function*(){return!0})()}_set(t,i){var r=this;return Se(function*(){r.storage[t]=i})()}_get(t){var i=this;return Se(function*(){const r=i.storage[t];return void 0===r?null:r})()}_remove(t){var i=this;return Se(function*(){delete i.storage[t]})()}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})();function bw(n,e,t){return`firebase:${n}:${e}:${t}`}class wg{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=bw(this.userKey,r.apiKey,s),this.fullPersistenceKey=bw("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return Se(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?K_._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return Se(function*(){if(t.persistence===e)return;const i=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,i?t.setCurrentUser(i):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return Se(function*(){if(!t.length)return new wg(qh(ZL),e,i);const r=(yield Promise.all(t.map(function(){var E=Se(function*(D){if(yield D._isAvailable())return D});return function(D){return E.apply(this,arguments)}}()))).filter(E=>E);let s=r[0]||qh(ZL);const u=bw(i,e.config.apiKey,e.name);let _=null;for(const E of t)try{const D=yield E._get(u);if(D){const R=K_._fromJSON(e,D);E!==s&&(_=R),s=E;break}}catch{}const y=r.filter(E=>E._shouldAllowMigration);return s._shouldAllowMigration&&y.length?(s=y[0],_&&(yield s._set(u,_.toJSON())),yield Promise.all(t.map(function(){var E=Se(function*(D){if(D!==s)try{yield D._remove(u)}catch{}});return function(D){return E.apply(this,arguments)}}())),new wg(s,e,i)):new wg(s,e,i)})()}}function YL(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(e8(e))return"Blackberry";if(t8(e))return"Webos";if(zM(e))return"Safari";if((e.includes("chrome/")||KL(e))&&!e.includes("edge/"))return"Chrome";if(JL(e))return"Android";{const i=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===i?.length)return i[1]}return"Other"}function XL(n=bs()){return/firefox\//i.test(n)}function zM(n=bs()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KL(n=bs()){return/crios\//i.test(n)}function QL(n=bs()){return/iemobile/i.test(n)}function JL(n=bs()){return/android/i.test(n)}function e8(n=bs()){return/blackberry/i.test(n)}function t8(n=bs()){return/webos/i.test(n)}function vw(n=bs()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function n8(n=bs()){return vw(n)||JL(n)||t8(n)||e8(n)||/windows phone/i.test(n)||QL(n)}function r8(n,e=[]){let t;switch(n){case"Browser":t=YL(bs());break;case"Worker":t=`${YL(bs())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$_}/${i}`}function VM(){return(VM=Se(function*(n){return(yield yo(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function o8(n,e){return jM.apply(this,arguments)}function jM(){return(jM=Se(function*(n,e){return yo(n,"GET","/v2/recaptchaConfig",ao(n,e))})).apply(this,arguments)}function s8(n){return void 0!==n&&void 0!==n.getResponse}function a8(n){return void 0!==n&&void 0!==n.enterprise}class l8{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState)}}function UM(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=Ol("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",function Ite(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(i)})}function c8(n){return`__${n}${Math.floor(1e6*Math.random())}`}class u8{constructor(e){this.type="recaptcha-enterprise",this.auth=ws(e)}verify(e="verify",t=!1){var i=this;return Se(function*(){function s(){return s=Se(function*(_){if(!t){if(null==_.tenantId&&null!=_._agentRecaptchaConfig)return _._agentRecaptchaConfig.siteKey;if(null!=_.tenantId&&void 0!==_._tenantRecaptchaConfigs[_.tenantId])return _._tenantRecaptchaConfigs[_.tenantId].siteKey}return new Promise(function(){var y=Se(function*(E,D){o8(_,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(R=>{if(void 0!==R.recaptchaKey){const U=new l8(R);return null==_.tenantId?_._agentRecaptchaConfig=U:_._tenantRecaptchaConfigs[_.tenantId]=U,E(U.siteKey)}D(new Error("recaptcha Enterprise site key undefined"))}).catch(R=>{D(R)})});return function(E,D){return y.apply(this,arguments)}}())}),s.apply(this,arguments)}function u(_,y,E){const D=window.grecaptcha;a8(D)?D.enterprise.ready(()=>{D.enterprise.execute(_,{action:e}).then(R=>{y(R)}).catch(()=>{y("NO_RECAPTCHA")})}):E(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((_,y)=>{(function r(_){return s.apply(this,arguments)})(i.auth).then(E=>{if(!t&&a8(window.grecaptcha))u(E,_,y);else{if(typeof window>"u")return void y(new Error("RecaptchaVerifier is only supported in browser"));UM("https://www.google.com/recaptcha/enterprise.js?render="+E).then(()=>{u(E,_,y)}).catch(D=>{y(D)})}}).catch(E=>{y(E)})})})()}}function rp(n,e,t){return HM.apply(this,arguments)}function HM(){return(HM=Se(function*(n,e,t,i=!1){const r=new u8(n);let s;try{s=yield r.verify(t)}catch{s=yield r.verify(t,!0)}const u=Object.assign({},e);return Object.assign(u,i?{captchaResp:s}:{captchaResponse:s}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u})).apply(this,arguments)}class kte{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((u,_)=>{try{u(e(s))}catch(y){_(y)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return Se(function*(){if(t.auth.currentUser===e)return;const i=[];try{for(const r of t.queue)yield r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const s of i)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})()}}class Rte{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d8(this),this.idTokenSubscription=new d8(this),this.beforeStateQueue=new kte(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var i=this;return t&&(this._popupRedirectResolver=qh(t)),this._initializationPromise=this.queue(Se(function*(){var r,s;if(!i._deleted&&(i.persistenceManager=yield wg.create(i,e),!i._deleted)){if(null!==(r=i._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{yield i._popupRedirectResolver._initialize(i)}catch{}yield i.initializeCurrentUser(t),i.lastNotifiedUid=(null===(s=i.currentUser)||void 0===s?void 0:s.uid)||null,!i._deleted&&(i._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return Se(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return Se(function*(){var i;const r=yield t.assertedPersistence.getCurrentUser();let s=r,u=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const _=null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId,y=s?._redirectEventId,E=yield t.tryRedirectSignIn(e);(!_||_===y)&&E?.user&&(s=E.user,u=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(u)try{yield t.beforeStateQueue.runMiddleware(s)}catch(_){s=r,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(_))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return Lt(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return Se(function*(){let i=null;try{i=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return i})()}reloadAndSetCurrentUserOrClear(e){var t=this;return Se(function*(){try{yield ib(e)}catch(i){if("auth/network-request-failed"!==i?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function lte(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return Se(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return Se(function*(){const i=e?Go(e):null;return i&&Lt(i.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(i&&i._clone(t))})()}_updateCurrentUser(e,t=!1){var i=this;return Se(function*(){if(!i._deleted)return e&&Lt(i.tenantId===e.tenantId,i,"tenant-id-mismatch"),t||(yield i.beforeStateQueue.runMiddleware(e)),i.queue(Se(function*(){yield i.directlySetCurrentUser(e),i.notifyAuthListeners()}))})()}signOut(){var e=this;return Se(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(Se(function*(){yield t.assertedPersistence.setPersistence(qh(e))}))}initializeRecaptchaConfig(){var e=this;return Se(function*(){const t=yield o8(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new l8(t);null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.emailPasswordEnabled&&new u8(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dd("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var i=this;return Se(function*(){const r=yield i.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return Se(function*(){if(!t.redirectPersistenceManager){const i=e&&qh(e)||t._popupRedirectResolver;Lt(i,t,"argument-error"),t.redirectPersistenceManager=yield wg.create(t,[qh(i._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return Se(function*(){var i,r;return t._isInitialized&&(yield t.queue(Se(function*(){}))),(null===(i=t._currentUser)||void 0===i?void 0:i._redirectEventId)===e?t._currentUser:(null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return Se(function*(){if(e===t.currentUser)return t.queue(Se(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),u=this._isInitialized?Promise.resolve():this._initializationPromise;return Lt(u,this,"internal-error"),u.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,i,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return Se(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=r8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return Se(function*(){var t;const i={"X-Client-Version":e.clientVersion};e.app.options.appId&&(i["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();r&&(i["X-Firebase-Client"]=r);const s=yield e._getAppCheckToken();return s&&(i["X-Firebase-AppCheck"]=s),i})()}_getAppCheckToken(){var e=this;return Se(function*(){var t;const i=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return i?.error&&function ste(n,...e){gw.logLevel<=ti.WARN&&gw.warn(`Auth (${$_}): ${n}`,...e)}(`Error while retrieving App Check token: ${i.error}`),i?.token})()}}function ws(n){return Go(n)}class d8{constructor(e){this.auth=e,this.observer=null,this.addObserver=function zY(n,e){const t=new VY(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return Lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function h8(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function f8(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class ww{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rd("not implemented")}_getIdTokenResponse(e){return Rd("not implemented")}_linkToIdToken(e,t){return Rd("not implemented")}_getReauthenticationResolver(e){return Rd("not implemented")}}function _8(n,e){return GM.apply(this,arguments)}function GM(){return(GM=Se(function*(n,e){return yo(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function qM(n,e){return ZM.apply(this,arguments)}function ZM(){return(ZM=Se(function*(n,e){return Gh(n,"POST","/v1/accounts:signInWithPassword",ao(n,e))})).apply(this,arguments)}function n3(){return(n3=Se(function*(n,e){return Gh(n,"POST","/v1/accounts:signInWithEmailLink",ao(n,e))})).apply(this,arguments)}function r3(){return(r3=Se(function*(n,e){return Gh(n,"POST","/v1/accounts:signInWithEmailLink",ao(n,e))})).apply(this,arguments)}class ob extends ww{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ob(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new ob(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return Se(function*(){var i;switch(t.signInMethod){case"password":const r={returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.emailPasswordEnabled){const s=yield rp(e,r,"signInWithPassword");return qM(e,s)}return qM(e,r).catch(function(){var s=Se(function*(u){if("auth/missing-recaptcha-token"===u.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const _=yield rp(e,r,"signInWithPassword");return qM(e,_)}return Promise.reject(u)});return function(u){return s.apply(this,arguments)}}());case"emailLink":return function jte(n,e){return n3.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:sl(e,"internal-error")}})()}_linkToIdToken(e,t){var i=this;return Se(function*(){switch(i.signInMethod){case"password":return _8(e,{idToken:t,returnSecureToken:!0,email:i._email,password:i._password});case"emailLink":return function Ute(n,e){return r3.apply(this,arguments)}(e,{idToken:t,email:i._email,oobCode:i._password});default:sl(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Zh(n,e){return o3.apply(this,arguments)}function o3(){return(o3=Se(function*(n,e){return Gh(n,"POST","/v1/accounts:signInWithIdp",ao(n,e))})).apply(this,arguments)}class Eg extends ww{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=Mo(t,["providerId","signInMethod"]);if(!i||!r)return null;const u=new Eg(i,r);return u.idToken=s.idToken||void 0,u.accessToken=s.accessToken||void 0,u.secret=s.secret,u.nonce=s.nonce,u.pendingToken=s.pendingToken||null,u}_getIdTokenResponse(e){return Zh(e,this.buildRequest())}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Zh(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zh(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=z_(t)}return e}}function s3(){return(s3=Se(function*(n,e){return yo(n,"POST","/v1/accounts:sendVerificationCode",ao(n,e))})).apply(this,arguments)}function a3(){return(a3=Se(function*(n,e){return Gh(n,"POST","/v1/accounts:signInWithPhoneNumber",ao(n,e))})).apply(this,arguments)}function l3(){return(l3=Se(function*(n,e){const t=yield Gh(n,"POST","/v1/accounts:signInWithPhoneNumber",ao(n,e));if(t.temporaryProof)throw tb(n,"account-exists-with-different-credential",t);return t})).apply(this,arguments)}const qte={USER_NOT_FOUND:"user-not-found"};function c3(){return(c3=Se(function*(n,e){return Gh(n,"POST","/v1/accounts:signInWithPhoneNumber",ao(n,Object.assign(Object.assign({},e),{operation:"REAUTH"})),qte)})).apply(this,arguments)}class sb extends ww{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new sb({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new sb({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function Gte(n,e){return a3.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function Wte(n,e){return l3.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function Zte(n,e){return c3.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return i||t||r||s?new sb({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:s}):null}}class ab{constructor(e){var t,i,r,s,u,_;const y=Gy(Wy(e)),E=null!==(t=y.apiKey)&&void 0!==t?t:null,D=null!==(i=y.oobCode)&&void 0!==i?i:null,R=function Yte(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=y.mode)&&void 0!==r?r:null);Lt(E&&D&&R,"argument-error"),this.apiKey=E,this.operation=R,this.code=D,this.continueUrl=null!==(s=y.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(u=y.languageCode)&&void 0!==u?u:null,this.tenantId=null!==(_=y.tenantId)&&void 0!==_?_:null}static parseLink(e){const t=function Xte(n){const e=Gy(Wy(n)).link,t=e?Gy(Wy(e)).deep_link_id:null,i=Gy(Wy(n)).deep_link_id;return(i?Gy(Wy(i)).link:null)||i||t||e||n}(e);try{return new ab(t)}catch{return null}}}let m8=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return ob._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=ab.parseLink(i);return Lt(r,"argument-error"),ob._fromEmailAndCode(t,r.code,r.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class op{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class g8 extends op{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let Kte=(()=>{class n extends g8{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Eg._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();function Tw(n,e){return d3.apply(this,arguments)}function d3(){return(d3=Se(function*(n,e){return Gh(n,"POST","/v1/accounts:signUp",ao(n,e))})).apply(this,arguments)}class Cc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return Se(function*(){const s=yield K_._fromIdTokenResponse(e,i,r),u=x8(i);return new Cc({user:s,providerId:u,_tokenResponse:i,operationType:t})})()}static _forOperation(e,t,i){return Se(function*(){yield e._updateTokensIfNecessary(i,!0);const r=x8(i);return new Cc({user:e,providerId:r,_tokenResponse:i,operationType:t})})()}}function x8(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Sw extends Cu{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Sw.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Sw(e,t,i,r)}}function y8(n,e,t,i){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?Sw._fromErrorAndOperation(n,s,e,i):s})}function _3(){return(_3=Se(function*(n,e,t=!1){const i=yield Wh(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Cc._forOperation(n,"link",i)})).apply(this,arguments)}function g3(){return(g3=Se(function*(n,e,t=!1){const{auth:i}=n,r="reauthenticate";try{const s=yield Wh(n,y8(i,r,e,n),t);Lt(s.idToken,i,"internal-error");const u=yw(s.idToken);Lt(u,i,"internal-error");const{sub:_}=u;return Lt(n.uid===_,i,"user-mismatch"),Cc._forOperation(n,r,s)}catch(s){throw"auth/user-not-found"===s?.code&&sl(i,"user-mismatch"),s}})).apply(this,arguments)}function w8(n,e){return x3.apply(this,arguments)}function x3(){return(x3=Se(function*(n,e,t=!1){const i="signIn",r=yield y8(n,i,e),s=yield Cc._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function y3(n,e){return b3.apply(this,arguments)}function b3(){return(b3=Se(function*(n,e){return w8(ws(n),e)})).apply(this,arguments)}function rne(n,e,t){return P3.apply(this,arguments)}function P3(){return P3=Se(function*(n,e,t){var i;const r=ws(n),s={returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"};let u;if(null!==(i=r._getRecaptchaConfig())&&void 0!==i&&i.emailPasswordEnabled){const E=yield rp(r,s,"signUpPassword");u=Tw(r,E)}else u=Tw(r,s).catch(function(){var E=Se(function*(D){if("auth/missing-recaptcha-token"===D.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const R=yield rp(r,s,"signUpPassword");return Tw(r,R)}return Promise.reject(D)});return function(D){return E.apply(this,arguments)}}());const _=yield u.catch(E=>Promise.reject(E)),y=yield Cc._fromIdTokenResponse(r,"signIn",_);return yield r._updateCurrentUser(y.user),y}),P3.apply(this,arguments)}function one(n,e,t){return y3(Go(n),m8.credential(e,t))}function _ne(n,e,t,i){return Go(n).onAuthStateChanged(e,t,i)}function mne(n){return Go(n).signOut()}const Dw="__sak";class C8{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dw,"1"),this.storage.removeItem(Dw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Cne=(()=>{class n extends C8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function vne(){const n=bs();return zM(n)||vw(n)}()&&function Tte(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=n8(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key)return void this.forAllChangedKeys((_,y,E)=>{this.notifyListeners(_,E)});const r=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _=this.storage.getItem(r);if(t.newValue!==_)null!==t.newValue?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!i)return}const s=()=>{const _=this.storage.getItem(r);!i&&this.localCache[r]===_||this.notifyListeners(r,_)},u=this.storage.getItem(r);!function Cte(){return function RY(){const n=bs();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||u===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,i){var r=()=>super._set,s=this;return Se(function*(){yield r().call(s,t,i),s.localCache[t]=JSON.stringify(i)})()}_get(t){var i=()=>super._get,r=this;return Se(function*(){const s=yield i().call(r,t);return r.localCache[t]=JSON.stringify(s),s})()}_remove(t){var i=()=>super._remove,r=this;return Se(function*(){yield i().call(r,t),delete r.localCache[t]})()}}return n.type="LOCAL",n})(),T8=(()=>{class n extends C8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})();let Sne=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;const r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){var i=this;return Se(function*(){const r=t,{eventId:s,eventType:u,data:_}=r.data,y=i.handlersMap[u];if(!y?.size)return;r.ports[0].postMessage({status:"ack",eventId:s,eventType:u});const E=Array.from(y).map(function(){var R=Se(function*(U){return U(r.origin,_)});return function(U){return R.apply(this,arguments)}}()),D=yield function Tne(n){return Promise.all(n.map(function(){var e=Se(function*(t){try{return{fulfilled:!0,value:yield t}}catch(i){return{fulfilled:!1,reason:i}}});return function(t){return e.apply(this,arguments)}}()))}(E);r.ports[0].postMessage({status:"done",eventId:s,eventType:u,response:D})})()}_subscribe(t,i){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function Aw(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(10*Math.random());return n+t}class Ine{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){var r=this;return Se(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let u,_;return new Promise((y,E)=>{const D=Aw("",20);s.port1.start();const R=setTimeout(()=>{E(new Error("unsupported_event"))},i);_={messageChannel:s,onMessage(U){const X=U;if(X.data.eventId===D)switch(X.data.status){case"ack":clearTimeout(R),u=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(X.data.response);break;default:clearTimeout(R),clearTimeout(u),E(new Error("invalid_response"))}}},r.handlers.add(_),s.port1.addEventListener("message",_.onMessage),r.target.postMessage({eventType:e,eventId:D,data:t},[s.port2])}).finally(()=>{_&&r.removeMessageHandler(_)})})()}}function qo(){return window}function Z3(){return typeof qo().WorkerGlobalScope<"u"&&"function"==typeof qo().importScripts}function Y3(){return(Y3=Se(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const S8="firebaseLocalStorageDb",Mw="firebaseLocalStorage",I8="fbase_key";class cb{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kw(n,e){return n.transaction([Mw],e?"readwrite":"readonly").objectStore(Mw)}function X3(){const n=indexedDB.open(S8,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Mw,{keyPath:I8})}catch(r){t(r)}}),n.addEventListener("success",Se(function*(){const i=n.result;i.objectStoreNames.contains(Mw)?e(i):(i.close(),yield function Pne(){const n=indexedDB.deleteDatabase(S8);return new cb(n).toPromise()}(),e(yield X3()))}))})}function D8(n,e,t){return K3.apply(this,arguments)}function K3(){return(K3=Se(function*(n,e,t){const i=kw(n,!0).put({[I8]:e,value:t});return new cb(i).toPromise()})).apply(this,arguments)}function Q3(){return(Q3=Se(function*(n,e){const t=kw(n,!1).get(e),i=yield new cb(t).toPromise();return void 0===i?null:i.value})).apply(this,arguments)}function A8(n,e){const t=kw(n,!0).delete(e);return new cb(t).toPromise()}const Lne=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return Se(function*(){return t.db||(t.db=yield X3()),t.db})()}_withRetries(t){var i=this;return Se(function*(){let r=0;for(;;)try{const s=yield i._openDb();return yield t(s)}catch(s){if(r++>3)throw s;i.db&&(i.db.close(),i.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return Se(function*(){return Z3()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return Se(function*(){t.receiver=Sne._getInstance(function kne(){return Z3()?self:null}()),t.receiver._subscribe("keyChanged",function(){var i=Se(function*(r,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(r,s){return i.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var i=Se(function*(r,s){return["keyChanged"]});return function(r,s){return i.apply(this,arguments)}}())})()}initializeSender(){var t=this;return Se(function*(){var i,r;if(t.activeServiceWorker=yield function Ane(){return Y3.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new Ine(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(i=s[0])&&void 0!==i&&i.fulfilled&&null!==(r=s[0])&&void 0!==r&&r.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var i=this;return Se(function*(){if(i.sender&&i.activeServiceWorker&&function Mne(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===i.activeServiceWorker)try{yield i.sender._send("keyChanged",{key:t},i.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return Se(function*(){try{if(!indexedDB)return!1;const t=yield X3();return yield D8(t,Dw,"1"),yield A8(t,Dw),!0}catch{}return!1})()}_withPendingWrite(t){var i=this;return Se(function*(){i.pendingWrites++;try{yield t()}finally{i.pendingWrites--}})()}_set(t,i){var r=this;return Se(function*(){return r._withPendingWrite(Se(function*(){return yield r._withRetries(s=>D8(s,t,i)),r.localCache[t]=i,r.notifyServiceWorker(t)}))})()}_get(t){var i=this;return Se(function*(){const r=yield i._withRetries(s=>function One(n,e){return Q3.apply(this,arguments)}(s,t));return i.localCache[t]=r,r})()}_remove(t){var i=this;return Se(function*(){return i._withPendingWrite(Se(function*(){return yield i._withRetries(r=>A8(r,t)),delete i.localCache[t],i.notifyServiceWorker(t)}))})()}_poll(){var t=this;return Se(function*(){const i=yield t._withRetries(u=>{const _=kw(u,!1).getAll();return new cb(_).toPromise()});if(!i)return[];if(0!==t.pendingWrites)return[];const r=[],s=new Set;for(const{fbase_key:u,value:_}of i)s.add(u),JSON.stringify(t.localCache[u])!==JSON.stringify(_)&&(t.notifyListeners(u,_),r.push(u));for(const u of Object.keys(t.localCache))t.localCache[u]&&!s.has(u)&&(t.notifyListeners(u,null),r.push(u));return r})()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(Se(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})(),Rw=1e12;class Hne{constructor(e){this.auth=e,this.counter=Rw,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new $ne(e,this.auth.name,t||{})),this.counter++,i}reset(e){var t;const i=e||Rw;null===(t=this._widgets.get(i))||void 0===t||t.delete(),this._widgets.delete(i)}getResponse(e){var t;return(null===(t=this._widgets.get(e||Rw))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return Se(function*(){var i;return null===(i=t._widgets.get(e||Rw))||void 0===i||i.execute(),""})()}}class $ne{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;Lt(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Gne(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(62*Math.random())));return e.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const J3=c8("rcb"),Wne=new eb(3e4,6e4);class Zne{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(e=qo().grecaptcha)||void 0===e||!e.render)}load(e,t=""){return Lt(function Yne(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&s8(qo().grecaptcha)?Promise.resolve(qo().grecaptcha):new Promise((i,r)=>{const s=qo().setTimeout(()=>{r(Ol(e,"network-request-failed"))},Wne.get());qo()[J3]=()=>{qo().clearTimeout(s),delete qo()[J3];const _=qo().grecaptcha;if(!_||!s8(_))return void r(Ol(e,"internal-error"));const y=_.render;_.render=(E,D)=>{const R=y(E,D);return this.counter++,R},this.hostLanguage=t,i(_)},UM(`https://www.google.com/recaptcha/api.js??${z_({onload:J3,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(s),r(Ol(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!(null===(t=qo().grecaptcha)||void 0===t||!t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xne{load(e){return Se(function*(){return new Hne(e)})()}clearedOneInstance(){}}const M8="recaptcha",Kne={theme:"light",type:"image"};class Qne{constructor(e,t=Object.assign({},Kne),i){this.parameters=t,this.type=M8,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ws(i),this.isInvisible="invisible"===this.parameters.size,Lt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;Lt(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xne:new Zne,this.validateStartingState()}verify(){var e=this;return Se(function*(){e.assertNotDestroyed();const t=yield e.render(),i=e.getAssertedRecaptcha();return i.getResponse(t)||new Promise(s=>{const u=_=>{_&&(e.tokenChangeListeners.delete(u),s(_))};e.tokenChangeListeners.add(u),e.isInvisible&&i.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Lt(!this.parameters.sitekey,this.auth,"argument-error"),Lt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Lt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),"function"==typeof e)e(t);else if("string"==typeof e){const i=qo()[e];"function"==typeof i&&i(t)}}}assertNotDestroyed(){Lt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return Se(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const i=document.createElement("div");t.appendChild(i),t=i}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return Se(function*(){Lt(TM()&&!Z3(),e.auth,"internal-error"),yield function Jne(){let n=null;return new Promise(e=>{"complete"!==document.readyState?(n=()=>e(),window.addEventListener("load",n)):e()}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function Ste(n){return VM.apply(this,arguments)}(e.auth);Lt(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return Lt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class e4{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=sb._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function eie(n,e,t){return t4.apply(this,arguments)}function t4(){return(t4=Se(function*(n,e,t){const i=ws(n),r=yield function o4(n,e,t){return s4.apply(this,arguments)}(i,e,Go(t));return new e4(r,s=>y3(i,s))})).apply(this,arguments)}function s4(){return s4=Se(function*(n,e,t){var i;const r=yield t.verify();try{let s;if(Lt("string"==typeof r,n,"argument-error"),Lt(t.type===M8,n,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const u=s.session;if("phoneNumber"in s)return Lt("enroll"===u.type,n,"internal-error"),(yield function gne(n,e){return yo(n,"POST","/v2/accounts/mfaEnrollment:start",ao(n,e))}(n,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{Lt("signin"===u.type,n,"internal-error");const _=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;return Lt(_,n,"missing-multi-factor-info"),(yield function Bne(n,e){return yo(n,"POST","/v2/accounts/mfaSignIn:start",ao(n,e))}(n,{mfaPendingCredential:u.credential,mfaEnrollmentId:_,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:u}=yield function $te(n,e){return s3.apply(this,arguments)}(n,{phoneNumber:s.phoneNumber,recaptchaToken:r});return u}}finally{t._reset()}}),s4.apply(this,arguments)}function J_(n,e){return e?qh(e):(Lt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class l4 extends ww{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tie(n){return w8(n.auth,new l4(n),n.bypassAuthState)}function nie(n){const{auth:e,user:t}=n;return Lt(t,e,"internal-error"),function v8(n,e){return g3.apply(this,arguments)}(t,new l4(n),n.bypassAuthState)}function iie(n){return c4.apply(this,arguments)}function c4(){return(c4=Se(function*(n){const{auth:e,user:t}=n;return Lt(t,e,"internal-error"),function p3(n,e){return _3.apply(this,arguments)}(t,new l4(n),n.bypassAuthState)})).apply(this,arguments)}class k8{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=Se(function*(i,r){e.pendingPromise={resolve:i,reject:r};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(i,r){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return Se(function*(){const{urlResponse:i,sessionId:r,postBody:s,tenantId:u,error:_,type:y}=e;if(_)return void t.reject(_);const E={auth:t.auth,requestUri:i,sessionId:r,tenantId:u||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(y)(E))}catch(D){t.reject(D)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tie;case"linkViaPopup":case"linkViaRedirect":return iie;case"reauthViaPopup":case"reauthViaRedirect":return nie;default:sl(this.auth,"internal-error")}}resolve(e){$h(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$h(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rie=new eb(2e3,1e4);function oie(n,e,t){return u4.apply(this,arguments)}function u4(){return(u4=Se(function*(n,e,t){const i=ws(n);!function vg(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&sl(n,"argument-error"),jL(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(n,e,op);const r=J_(i,t);return new f4(i,"signInViaPopup",e,r).executeNotNull()})).apply(this,arguments)}let f4=(()=>{class n extends k8{constructor(t,i,r,s,u){super(t,i,s,u),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return Se(function*(){const i=yield t.execute();return Lt(i,t.auth,"internal-error"),i})()}onExecution(){var t=this;return Se(function*(){$h(1===t.filter.length,"Popup operations only handle one event");const i=Aw();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],i),t.authWindow.associatedEvent=i,t.resolver._originValidation(t.auth).catch(r=>{t.reject(r)}),t.resolver._isIframeWebStorageSupported(t.auth,r=>{r||t.reject(Ol(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Ol(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,r;this.pollId=null!==(r=null===(i=this.authWindow)||void 0===i?void 0:i.window)&&void 0!==r&&r.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ol(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,rie.get())};t()}}return n.currentPopupAction=null,n})();const sie="pendingRedirect",ub=new Map;class aie extends k8{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){var e=()=>super.execute,t=this;return Se(function*(){let i=ub.get(t.auth._key());if(!i){try{const s=(yield function lie(n,e){return p4.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;i=()=>Promise.resolve(s)}catch(r){i=()=>Promise.reject(r)}ub.set(t.auth._key(),i)}return t.bypassAuthState||ub.set(t.auth._key(),()=>Promise.resolve(null)),i()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,i=this;return Se(function*(){if("signInViaRedirect"===e.type)return t().call(i,e);if("unknown"!==e.type){if(e.eventId){const r=yield i.auth._redirectUserForId(e.eventId);if(r)return i.user=r,t().call(i,e);i.resolve(null)}}else i.resolve(null)})()}onExecution(){return Se(function*(){})()}cleanUp(){}}function p4(){return(p4=Se(function*(n,e){const t=function P8(n){return bw(sie,n.config.apiKey,n.name)}(e),i=function R8(n){return qh(n._redirectPersistence)}(n);if(!(yield i._isAvailable()))return!1;const r="true"===(yield i._get(t));return yield i._remove(t),r})).apply(this,arguments)}function cie(n,e){ub.set(n._key(),e)}function O8(n,e){return v4.apply(this,arguments)}function v4(){return(v4=Se(function*(n,e,t=!1){const i=ws(n),r=J_(i,e),u=yield new aie(i,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,yield i._persistUserIfCurrent(u.user),yield i._setRedirectUser(null,e)),u})).apply(this,arguments)}class pie{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function _ie(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return L8(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!L8(e)){const r=(null===(i=e.error.code)||void 0===i?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ol(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(N8(e))}saveEventToCache(e){this.cachedEventUids.add(N8(e)),this.lastProcessedEventTime=Date.now()}}function N8(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function L8({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function E4(){return(E4=Se(function*(n,e={}){return yo(n,"GET","/v1/projects",e)})).apply(this,arguments)}const gie=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xie=/^https?/;function C4(){return C4=Se(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function mie(n){return E4.apply(this,arguments)}(n);for(const t of e)try{if(bie(t))return}catch{}sl(n,"unauthorized-domain")}),C4.apply(this,arguments)}function bie(n){const e=Jy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return""===u.hostname&&""===i?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&u.hostname===i}if(!xie.test(t))return!1;if(gie.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const vie=new eb(3e4,6e4);function B8(){const n=qo().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let Pw=null;const Cie=new eb(5e3,15e3),Tie="__/auth/iframe",Sie="emulator/auth/iframe",Iie={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Die=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Aie(n){const e=n.config;Lt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?SM(e,Sie):`https://${n.config.authDomain}/${Tie}`,i={apiKey:e.apiKey,appName:n.name,v:$_},r=Die.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${z_(i).slice(1)}`}function T4(){return T4=Se(function*(n){const e=yield function Eie(n){return Pw=Pw||function wie(n){return new Promise((e,t)=>{var i,r,s;function u(){B8(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B8(),t(Ol(n,"network-request-failed"))},timeout:vie.get()})}if(null!==(r=null===(i=qo().gapi)||void 0===i?void 0:i.iframes)&&void 0!==r&&r.Iframe)e(gapi.iframes.getContext());else{if(null===(s=qo().gapi)||void 0===s||!s.load){const _=c8("iframefcb");return qo()[_]=()=>{gapi.load?u():t(Ol(n,"network-request-failed"))},UM(`https://apis.google.com/js/api.js?onload=${_}`).catch(y=>t(y))}u()}}).catch(e=>{throw Pw=null,e})}(n),Pw}(n),t=qo().gapi;return Lt(t,n,"internal-error"),e.open({where:document.body,url:Aie(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Iie,dontclear:!0},i=>new Promise(function(){var r=Se(function*(s,u){yield i.restyle({setHideOnLeave:!1});const _=Ol(n,"network-request-failed"),y=qo().setTimeout(()=>{u(_)},Cie.get());function E(){qo().clearTimeout(y),s(i)}i.ping(E).then(E,()=>{u(_)})});return function(s,u){return r.apply(this,arguments)}}()))}),T4.apply(this,arguments)}const kie={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class z8{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Bie="__/auth/handler",zie="emulator/auth/handler",Vie=encodeURIComponent("fac");function V8(n,e,t,i,r,s){return S4.apply(this,arguments)}function S4(){return(S4=Se(function*(n,e,t,i,r,s){Lt(n.config.authDomain,n,"auth-domain-config-required"),Lt(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:$_,eventId:r};if(e instanceof op){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",zI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[D,R]of Object.entries(s||{}))u[D]=R}if(e instanceof g8){const D=e.getScopes().filter(R=>""!==R);D.length>0&&(u.scopes=D.join(","))}n.tenantId&&(u.tid=n.tenantId);const _=u;for(const D of Object.keys(_))void 0===_[D]&&delete _[D];const y=yield n._getAppCheckToken(),E=y?`#${Vie}=${encodeURIComponent(y)}`:"";return`${function jie({config:n}){return n.emulator?SM(n,zie):`https://${n.authDomain}/${Bie}`}(n)}?${z_(_).slice(1)}${E}`})).apply(this,arguments)}const I4="webStorageSupport",Hie=class Uie{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T8,this._completeRedirectFn=O8,this._overrideRedirectResult=cie}_openPopup(e,t,i,r){var s=this;return Se(function*(){var u;$h(null===(u=s.eventManagers[e._key()])||void 0===u?void 0:u.manager,"_initialize() not called before _openPopup()");const _=yield V8(e,t,i,Jy(),r);return function Nie(n,e,t,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let _="";const y=Object.assign(Object.assign({},kie),{width:i.toString(),height:r.toString(),top:s,left:u}),E=bs().toLowerCase();t&&(_=KL(E)?"_blank":t),XL(E)&&(e=e||"http://localhost",y.scrollbars="yes");const D=Object.entries(y).reduce((U,[X,ie])=>`${U}${X}=${ie},`,"");if(function Ete(n=bs()){var e;return vw(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(E)&&"_self"!==_)return function Lie(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}(e||"",_),new z8(null);const R=window.open(e||"",_,D);Lt(R,n,"popup-blocked");try{R.focus()}catch{}return new z8(R)}(e,_,Aw())})()}_openRedirect(e,t,i,r){var s=this;return Se(function*(){return yield s._originValidation(e),function Dne(n){qo().location.href=n}(yield V8(e,t,i,Jy(),r)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):($h(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){var t=this;return Se(function*(){const i=yield function Mie(n){return T4.apply(this,arguments)}(e),r=new pie(e);return i.register("authEvent",s=>(Lt(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=i,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(I4,{type:I4},r=>{var s;const u=null===(s=r?.[0])||void 0===s?void 0:s[I4];void 0!==u&&t(!!u),sl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function yie(n){return C4.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return n8()||zM()||vw()}};var H8="@firebase/auth";class $ie{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return Se(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Zie=YF("authIdTokenMaxAge")||300;let G8=null;const Yie=n=>function(){var e=Se(function*(t){const i=t&&(yield t.getIdTokenResult()),r=i&&((new Date).getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>Zie)return;const s=i?.token;G8!==s&&(G8=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function Xie(n=XI()){const e=_g(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function Pte(n,e){const t=_g(n,"auth");if(t.isInitialized()){const r=t.getImmediate();if(K2(t.getOptions(),e??{}))return r;sl(r,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:Hie,persistence:[Lne,Cne,T8]}),i=YF("authTokenSyncURL");if(i){const s=Yie(i);(function pne(n,e,t){Go(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),function fne(n,e,t,i){Go(n).onIdTokenChanged(e,t,i)}(t,u=>s(u))}const r=qF("auth");return r&&function Fte(n,e,t){const i=ws(n);Lt(i._canInitEmulator,i,"emulator-config-failed"),Lt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!t?.disableWarnings,s=h8(e),{host:u,port:_}=function Nte(n){const e=h8(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:f8(i.substr(s.length+1))}}{const[s,u]=i.split(":");return{host:s,port:f8(u)}}}(e);i.config.emulator={url:`${s}//${u}${null===_?"":`:${_}`}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:_,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function Lte(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${r}`),t}!function Wie(n){Ca(new ra("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:u,authDomain:_}=i.options;Lt(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:u,authDomain:_,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:r8(n)},E=new Rte(i,r,s,y);return function Ote(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(qh);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}(E,t),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ca(new ra("auth-internal",e=>{const t=ws(e.getProvider("auth").getImmediate());return new $ie(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),go(H8,"0.23.2",function Gie(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),go(H8,"0.23.2","esm2017")}("Browser");class Fw{constructor(e){return e}}class q8{constructor(){return QA("auth")}}const A4=new vt("angularfire2.auth-instances");function Qie(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new Fw(i)}}const Jie={provide:q8,deps:[[new Gr,A4]]},ere={provide:Fw,useFactory:function Kie(n,e){const t=KA("auth",n,e);return t&&new Fw(t)},deps:[[new Gr,A4],yg]};let tre=(()=>{class n{constructor(){go("angularfire",cw.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({providers:[ere,Jie]}),n})();function nre(n,...e){return{ngModule:tre,providers:[{provide:A4,useFactory:Qie(n),multi:!0,deps:[pi,as,JA,eM,[new Gr,wM],...e]}]}}const ire=Hh(rne,!0),Nw=Hh(Xie,!0),rre=Hh(_ne,!0),ore=Hh(one,!0),sre=Hh(eie,!0),are=Hh(oie,!0),lre=Hh(mne,!0),Z8="@firebase/database";let M4="";class ure{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ds(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:$y(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class dre{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ad(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const X8=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ure(e)}}catch{}return new dre},em=X8("localStorage"),k4=X8("sessionStorage"),Tg=new pg("@firebase/database"),K8=function(){let n=1;return function(){return n++}}(),Q8=function(n){const e=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,Ot(i<n.length,"Surrogate pair missing trail surrogate."),r=65536+(s<<10)+(n.charCodeAt(i)-56320)}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e}(n),t=new BY;t.update(e);const i=t.digest();return G2.encodeByteArray(i)},db=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=db.apply(null,i):e+="object"==typeof i?ds(i):i,e+=" "}return e};let tm=null,J8=!0;const Es=function(...n){if(!0===J8&&(J8=!1,null===tm&&!0===k4.get("logging_enabled")&&function(n,e){Ot(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Tg.logLevel=ti.VERBOSE,tm=Tg.log.bind(Tg),e&&k4.set("logging_enabled",!0)):"function"==typeof n?tm=n:(tm=null,k4.remove("logging_enabled"))}(!0)),tm){const e=db.apply(null,n);tm(e)}},hb=function(n){return function(...e){Es(n,...e)}},R4=function(...n){const e="FIREBASE INTERNAL ERROR: "+db(...n);Tg.error(e)},Pd=function(...n){const e=`FIREBASE FATAL ERROR: ${db(...n)}`;throw Tg.error(e),new Error(e)},oa=function(...n){const e="FIREBASE WARNING: "+db(...n);Tg.warn(e)},Lw=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},sp="[MIN_NAME]",Yh="[MAX_NAME]",nm=function(n,e){if(n===e)return 0;if(n===sp||e===Yh)return-1;if(e===sp||n===Yh)return 1;{const t=r6(n),i=r6(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},pre=function(n,e){return n===e?0:n<e?-1:1},fb=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ds(e))},P4=function(n){if("object"!=typeof n||null===n)return ds(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=ds(e[i]),t+=":",t+=P4(n[e[i]]);return t+="}",t},t6=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Cs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const n6=function(n){Ot(!Lw(n),"Invalid JSON number");const i=1023;let r,s,u,_,y;0===n?(s=0,u=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(_=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=_+i,u=Math.round(n*Math.pow(2,52-_)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const E=[];for(y=52;y;y-=1)E.push(u%2?1:0),u=Math.floor(u/2);for(y=11;y;y-=1)E.push(s%2?1:0),s=Math.floor(s/2);E.push(r?1:0),E.reverse();const D=E.join("");let R="";for(y=0;y<64;y+=8){let U=parseInt(D.substr(y,8),2).toString(16);1===U.length&&(U="0"+U),R+=U}return R.toLowerCase()},xre=new RegExp("^-?(0*)\\d{1,10}$"),r6=function(n){if(xre.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Sg=function(n){try{n()}catch(e){setTimeout(()=>{throw oa("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},pb=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class wre{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){oa(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ere{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Es("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',oa(e)}}let _b=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const c6=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,h6="websocket",f6="long_polling";class F4{constructor(e,t,i,r,s=!1,u="",_=!1,y=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=_,this.isUsingEmulator=y,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=em.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&em.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function p6(n,e,t){let i;if(Ot("string"==typeof e,"typeof type must == string"),Ot("object"==typeof t,"typeof params must == object"),e===h6)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==f6)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Cre(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Cs(t,(s,u)=>{r.push(s+"="+u)}),i+r.join("&")}class Tre{constructor(){this.counters_={}}incrementCounter(e,t=1){Ad(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return EY(this.counters_)}}const N4={},L4={};function B4(n){const e=n.toString();return N4[e]||(N4[e]=new Tre),N4[e]}class Ire{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Sg(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ap{constructor(e,t,i,r,s,u,_){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=u,this.lastSessionId=_,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hb(e),this.stats_=B4(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),p6(t,f6,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ire(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new z4((...s)=>{const[u,_,y,E,D]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=_,this.password=y;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);_?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(_,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,_]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,_)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&c6.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ap.forceAllow_=!0}static forceDisallow(){ap.forceDisallow_=!0}static isAvailable(){return!(!ap.forceAllow_&&(ap.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ds(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=GF(t),r=t6(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ds(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class z4{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=K8(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=z4.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(_){Es("frame writing exception"),_.stack&&Es(_.stack),Es(_)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Es("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const u=this.pendingSegs.shift();i=i+"&seg"+r+"="+u.seg+"&ts"+r+"="+u.ts+"&d"+r+"="+u.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Es("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let zw=null;typeof MozWebSocket<"u"?zw=MozWebSocket:typeof WebSocket<"u"&&(zw=WebSocket);let Ig=(()=>{class n{constructor(t,i,r,s,u,_,y){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hb(this.connId),this.stats_=B4(i),this.connURL=n.connectionURL_(i,_,y,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,u){const _={v:"5"};return typeof location<"u"&&location.hostname&&c6.test(location.hostname)&&(_.r="f"),i&&(_.s=i),r&&(_.ls=r),s&&(_.ac=s),u&&(_.p=u),p6(t,h6,_)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,em.set("previous_websocket_failure",!0);try{let r;0,this.mySock=new zw(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==zw&&!n.forceDisallow_}static previouslyFailed(){return em.isInMemoryStorage||!0===em.get("previous_websocket_failure")}markConnectionHealthy(){em.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=$y(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Ot(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=ds(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=t6(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),v6=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ap,Ig]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=Ig&&Ig.isAvailable();let r=i&&!Ig.previouslyFailed();if(t.webSocketOnly&&(i||oa("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ig];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class D6{constructor(e,t,i,r,s,u,_,y,E,D){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=u,this.onReady_=_,this.onDisconnect_=y,this.onKill_=E,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hb("c:"+this.id+":"),this.transportManager_=new v6(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=pb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=fb("t",e),i=fb("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=fb("t",e),i=fb("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=fb("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?R4("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):R4("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&oa("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),pb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(em.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class A6{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class M6{constructor(e){this.allowedEvents_=e,this.listeners_={},Ot(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){Ot(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Vw extends M6{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!NI()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Vw}getInitialEvent(e){return Ot("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class or{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Qi(){return new or("")}function yi(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function lp(n){return n.pieces_.length-n.pieceNum_}function vr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new or(n.pieces_,e)}function j4(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function mb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function P6(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new or(e,0)}function io(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof or)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new or(t,0)}function bi(n){return n.pieceNum_>=n.pieces_.length}function Sa(n,e){const t=yi(n),i=yi(e);if(null===t)return e;if(t===i)return Sa(vr(n),vr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function U4(n,e){if(lp(n)!==lp(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Tc(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(lp(n)>lp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Xre{constructor(e,t){this.errorPrefix_=t,this.parts_=mb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Q2(this.parts_[i]);O6(this)}}function O6(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+im(n))}function im(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class H4 extends M6{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new H4}getInitialEvent(e){return Ot("visible"===e,"Unknown event type: "+e),[this.visible_]}}const gb=1e3;let Uw,rm=(()=>{class n extends A6{constructor(t,i,r,s,u,_,y,E){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=_,this.appCheckTokenProvider_=y,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=hb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");H4.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Vw.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,u={r:s,a:t,b:i};this.log_(ds(u)),Ot(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new L_,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:_=>{const y=_.d;"ok"===_.s?i.resolve(y):i.reject(y)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const u=t._queryIdentifier,_=t._path.toString();this.log_("Listen called for "+_+" "+u),this.listens.has(_)||this.listens.set(_,new Map),Ot(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ot(!this.listens.get(_).has(u),"listen() called twice for same path/queryId.");const y={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(_).set(u,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const u={p:r};t.tag&&(u.q=i._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,y=>{const E=y.d,D=y.s;n.warnOnListenWarnings_(E,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",y),"ok"!==D&&this.removeListen_(r,s),t.onComplete&&t.onComplete(D,E))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&Ad(t,"w")){const r=fg(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();oa(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=Y2(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=function(n){const t=Y2(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const u=s.s,_=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,_))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ot(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const u={p:t};s&&(u.q=r,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const u={p:i,d:r};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,_=>{s&&setTimeout(()=>{s(_.s,_.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,u){this.initConnection_();const _={p:i,d:r};void 0!==u&&(_.h=u),this.outstandingPuts_.push({action:t,request:_,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ds(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):R4("Unrecognized action received from server: "+ds(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Ot(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=gb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=gb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return Se(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,_=t.lastSessionId;let y=!1,E=null;const D=function(){E?E.close():(y=!0,s())};t.realtime_={close:D,sendRequest:function(X){Ot(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(X)}};const U=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[X,ie]=yield Promise.all([t.authTokenProvider_.getToken(U),t.appCheckTokenProvider_.getToken(U)]);y?Es("getToken() completed but was canceled"):(Es("getToken() completed. Creating connection."),t.authToken_=X&&X.accessToken,t.appCheckToken_=ie&&ie.token,E=new D6(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,xe=>{oa(xe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},_))}catch(X){t.log_("Failed to get token: "+X),y||(t.repoInfo_.nodeAdmin&&oa(X),D())}}})()}interrupt(t){Es("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Es("Resuming connection for reason: "+t),delete this.interruptReasons_[t],zI(this.interruptReasons_)&&(this.reconnectDelay_=gb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(u=>P4(u)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new or(t).toString();let s;if(this.listens.has(r)){const u=this.listens.get(r);s=u.get(i),u.delete(i),0===u.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Es("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Es("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+M4.replace(/\./g,"-")]=1,NI()?t["framework.cordova"]=1:XF()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Vw.getInstance().currentlyOnline();return zI(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Si{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Si(e,t)}}class jw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Si(sp,e),r=new Si(sp,t);return 0!==this.compare(i,r)}minPost(){return Si.MIN}}class L6 extends jw{static get __EMPTY_NODE(){return Uw}static set __EMPTY_NODE(e){Uw=e}compare(e,t){return nm(e.name,t.name)}isDefinedOn(e){throw hg("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Si.MIN}maxPost(){return new Si(Yh,Uw)}makePost(e,t){return Ot("string"==typeof e,"KeyIndex indexValue must always be a string."),new Si(e,Uw)}toString(){return".key"}}const Od=new L6;class Hw{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,r&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let G4,Tu=(()=>{class n{constructor(t,i,r,s,u){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??al.EMPTY_NODE,this.right=u??al.EMPTY_NODE}copy(t,i,r,s,u){return new n(t??this.key,i??this.value,r??this.color,s??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const u=r(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===u?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return al.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return al.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class al{constructor(e,t=al.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new al(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Tu.BLACK,null,null))}remove(e){return new al(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Tu.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Hw(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Hw(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Hw(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Hw(this.root_,null,this.comparator_,!0,e)}}function roe(n,e){return nm(n.name,e.name)}function $4(n,e){return nm(n,e)}al.EMPTY_NODE=new class ioe{copy(e,t,i,r,s){return this}insert(e,t,i){return new Tu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const B6=function(n){return"number"==typeof n?"number:"+n6(n):"string:"+n},z6=function(n){if(n.isLeafNode()){const e=n.val();Ot("string"==typeof e||"number"==typeof e||"object"==typeof e&&Ad(e,".sv"),"Priority must be a string or number.")}else Ot(n===G4||n.isEmpty(),"priority of unexpected type.");Ot(n===G4||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let V6,j6,U6,Dg=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,Ot(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),z6(this.priorityNode_)}static set __childrenNodeConstructor(t){V6=t}static get __childrenNodeConstructor(){return V6}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return bi(t)?this:".priority"===yi(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=yi(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:(Ot(".priority"!==r||1===lp(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(vr(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+B6(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?n6(this.value_):this.value_,this.lazyHash_=Q8(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(Ot(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),u=n.VALUE_TYPE_ORDER.indexOf(r);return Ot(s>=0,"Unknown leaf type: "+i),Ot(u>=0,"Unknown leaf type: "+r),s===u?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Fr=new class loe extends jw{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?nm(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Si.MIN}maxPost(){return new Si(Yh,new Dg("[PRIORITY-POST]",U6))}makePost(e,t){const i=j6(e);return new Si(t,new Dg("[PRIORITY-POST]",i))}toString(){return".priority"}},coe=Math.log(2);class uoe{constructor(e){this.count=parseInt(Math.log(e+1)/coe,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $w=function(n,e,t,i){n.sort(e);const r=function(y,E){const D=E-y;let R,U;if(0===D)return null;if(1===D)return R=n[y],U=t?t(R):R,new Tu(U,R.node,Tu.BLACK,null,null);{const X=parseInt(D/2,10)+y,ie=r(y,X),xe=r(X+1,E);return R=n[X],U=t?t(R):R,new Tu(U,R.node,Tu.BLACK,ie,xe)}},_=function(y){let E=null,D=null,R=n.length;const U=function(ie,xe){const ze=R-ie,Qe=R;R-=ie;const Ve=r(ze+1,Qe),Bt=n[ze],Qt=t?t(Bt):Bt;X(new Tu(Qt,Bt.node,xe,null,Ve))},X=function(ie){E?(E.left=ie,E=ie):(D=ie,E=ie)};for(let ie=0;ie<y.count;++ie){const xe=y.nextBitIsOne(),ze=Math.pow(2,y.count-(ie+1));xe?U(ze,Tu.BLACK):(U(ze,Tu.BLACK),U(ze,Tu.RED))}return D}(new uoe(n.length));return new al(i||e,_)};let W4;const Ag={};class Xh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Ot(Ag&&Fr,"ChildrenNode.ts has not been loaded"),W4=W4||new Xh({".priority":Ag},{".priority":Fr}),W4}get(e){const t=fg(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof al?t:null}hasIndex(e){return Ad(this.indexSet_,e.toString())}addIndex(e,t){Ot(e!==Od,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Si.Wrap);let _,u=s.getNext();for(;u;)r=r||e.isDefinedOn(u.node),i.push(u),u=s.getNext();_=r?$w(i,e.getCompare()):Ag;const y=e.toString(),E=Object.assign({},this.indexSet_);E[y]=e;const D=Object.assign({},this.indexes_);return D[y]=_,new Xh(D,E)}addToIndexes(e,t){const i=X2(this.indexes_,(r,s)=>{const u=fg(this.indexSet_,s);if(Ot(u,"Missing index implementation for "+s),r===Ag){if(u.isDefinedOn(e.node)){const _=[],y=t.getIterator(Si.Wrap);let E=y.getNext();for(;E;)E.name!==e.name&&_.push(E),E=y.getNext();return _.push(e),$w(_,u.getCompare())}return Ag}{const _=t.get(e.name);let y=r;return _&&(y=y.remove(new Si(e.name,_))),y.insert(e,e.node)}});return new Xh(i,this.indexSet_)}removeFromIndexes(e,t){const i=X2(this.indexes_,r=>{if(r===Ag)return r;{const s=t.get(e.name);return s?r.remove(new Si(e.name,s)):r}});return new Xh(i,this.indexSet_)}}let xb,ni=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&z6(this.priorityNode_),this.children_.isEmpty()&&Ot(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xb||(xb=new n(new al($4),null,Xh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?xb:i}}getChild(t){const i=yi(t);return null===i?this:this.getImmediateChild(i).getChild(vr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if(Ot(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Si(t,i);let s,u;i.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),u=this.indexMap_.addToIndexes(r,this.children_));const _=s.isEmpty()?xb:this.priorityNode_;return new n(s,_,u)}}updateChild(t,i){const r=yi(t);if(null===r)return i;{Ot(".priority"!==yi(t)||1===lp(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(vr(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,u=!0;if(this.forEachChild(Fr,(_,y)=>{i[_]=y.val(t),r++,u&&n.INTEGER_REGEXP_.test(_)?s=Math.max(s,Number(_)):u=!1}),!t&&u&&s<2*r){const _=[];for(const y in i)_[y]=i[y];return _}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+B6(this.getPriority().val())+":"),this.forEachChild(Fr,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":Q8(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const u=s.getPredecessorKey(new Si(t,i));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Si(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Si(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Si.Wrap);let u=s.peek();for(;null!=u&&i.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Si.Wrap);let u=s.peek();for(;null!=u&&i.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===yb?-1:0}withIndex(t){if(t===Od||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Od||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Fr),s=i.getIterator(Fr);let u=r.getNext(),_=s.getNext();for(;u&&_;){if(u.name!==_.name||!u.node.equals(_.node))return!1;u=r.getNext(),_=s.getNext()}return null===u&&null===_}return!1}return!1}}resolveIndex_(t){return t===Od?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const yb=new class doe extends ni{constructor(){super(new al($4),ni.EMPTY_NODE,Xh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ni.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Si,{MIN:{value:new Si(sp,ni.EMPTY_NODE)},MAX:{value:new Si(Yh,yb)}}),L6.__EMPTY_NODE=ni.EMPTY_NODE,Dg.__childrenNodeConstructor=ni,function ooe(n){G4=n}(yb),function aoe(n){U6=n}(yb);const hoe=!0;function lo(n,e=null){if(null===n)return ni.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),Ot(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Dg(n,lo(e));if(n instanceof Array||!hoe){let t=ni.EMPTY_NODE;return Cs(n,(i,r)=>{if(Ad(n,i)&&"."!==i.substring(0,1)){const s=lo(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(lo(e))}{const t=[];let i=!1;if(Cs(n,(u,_)=>{if("."!==u.substring(0,1)){const y=lo(_);y.isEmpty()||(i=i||!y.getPriority().isEmpty(),t.push(new Si(u,y)))}}),0===t.length)return ni.EMPTY_NODE;const s=$w(t,roe,u=>u.name,$4);if(i){const u=$w(t,Fr.getCompare());return new ni(s,lo(e),new Xh({".priority":u},{".priority":Fr}))}return new ni(s,lo(e),Xh.Default)}}!function soe(n){j6=n}(lo);class q4 extends jw{constructor(e){super(),this.indexPath_=e,Ot(!bi(e)&&".priority"!==yi(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?nm(e.name,t.name):s}makePost(e,t){const i=lo(e),r=ni.EMPTY_NODE.updateChild(this.indexPath_,i);return new Si(t,r)}maxPost(){const e=ni.EMPTY_NODE.updateChild(this.indexPath_,yb);return new Si(Yh,e)}toString(){return mb(this.indexPath_,0).join("/")}}const Z4=new class foe extends jw{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?nm(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Si.MIN}maxPost(){return Si.MAX}makePost(e,t){const i=lo(e);return new Si(t,i)}toString(){return".value"}};function H6(n){return{type:"value",snapshotNode:n}}function Mg(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function bb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function vb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Y4{constructor(e){this.index_=e}updateChild(e,t,i,r,s,u){Ot(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const _=e.getImmediateChild(t);return _.getChild(r).equals(i.getChild(r))&&_.isEmpty()===i.isEmpty()||(null!=u&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(bb(t,_)):Ot(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):_.isEmpty()?u.trackChildChange(Mg(t,i)):u.trackChildChange(vb(t,i,_))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(Fr,(r,s)=>{t.hasChild(r)||i.trackChildChange(bb(r,s))}),t.isLeafNode()||t.forEachChild(Fr,(r,s)=>{if(e.hasChild(r)){const u=e.getImmediateChild(r);u.equals(s)||i.trackChildChange(vb(r,s,u))}else i.trackChildChange(Mg(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ni.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class wb{constructor(e){this.indexedFilter_=new Y4(e.getIndex()),this.index_=e.getIndex(),this.startPost_=wb.getStartPost_(e),this.endPost_=wb.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,u){return this.matches(new Si(t,i))||(i=ni.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=ni.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(ni.EMPTY_NODE);const s=this;return t.forEachChild(Fr,(u,_)=>{s.matches(new Si(u,_))||(r=r.updateImmediateChild(u,ni.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class _oe{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new wb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,u){return this.rangedFilter_.matches(new Si(t,i))||(i=ni.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,u):this.fullLimitUpdateChild_(e,t,i,s,u)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=ni.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=ni.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const _=s.getNext();if(this.withinDirectionalStart(_)){if(!this.withinDirectionalEnd(_))break;r=r.updateImmediateChild(_.name,_.node),u++}}}else{let s;r=t.withIndex(this.index_),r=r.updatePriority(ni.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let u=0;for(;s.hasNext();){const _=s.getNext();u<this.limit_&&this.withinDirectionalStart(_)&&this.withinDirectionalEnd(_)?u++:r=r.updateImmediateChild(_.name,ni.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let u;if(this.reverse_){const R=this.index_.getCompare();u=(U,X)=>R(X,U)}else u=this.index_.getCompare();const _=e;Ot(_.numChildren()===this.limit_,"");const y=new Si(t,i),E=this.reverse_?_.getFirstChild(this.index_):_.getLastChild(this.index_),D=this.rangedFilter_.matches(y);if(_.hasChild(t)){const R=_.getImmediateChild(t);let U=r.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=U&&(U.name===t||_.hasChild(U.name));)U=r.getChildAfterChild(this.index_,U,this.reverse_);const X=null==U?1:u(U,y);if(D&&!i.isEmpty()&&X>=0)return s?.trackChildChange(vb(t,i,R)),_.updateImmediateChild(t,i);{s?.trackChildChange(bb(t,R));const xe=_.updateImmediateChild(t,ni.EMPTY_NODE);return null!=U&&this.rangedFilter_.matches(U)?(s?.trackChildChange(Mg(U.name,U.node)),xe.updateImmediateChild(U.name,U.node)):xe}}return i.isEmpty()?e:D&&u(E,y)>=0?(null!=s&&(s.trackChildChange(bb(E.name,E.node)),s.trackChildChange(Mg(t,i))),_.updateImmediateChild(t,i).updateImmediateChild(E.name,ni.EMPTY_NODE)):e}}class X4{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ot(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ot(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:sp}hasEnd(){return this.endSet_}getIndexEndValue(){return Ot(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ot(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ot(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fr}copy(){const e=new X4;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $6(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Fr?t="$priority":n.index_===Z4?t="$value":n.index_===Od?t="$key":(Ot(n.index_ instanceof q4,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ds(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=ds(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+ds(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=ds(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+ds(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function G6(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Fr&&(e.i=n.index_.toString()),e}class Ww extends A6{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=hb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ot(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=Ww.getListenId_(e,i),_={};this.listens_[u]=_;const y=$6(e._queryParams);this.restRequest_(s+".json",y,(E,D)=>{let R=D;if(404===E&&(R=null,E=null),null===E&&this.onDataUpdate_(s,R,!1,i),fg(this.listens_,u)===_){let U;U=E?401===E?"permission_denied":"rest_error:"+E:"ok",r(U,null)}})}unlisten(e,t){const i=Ww.getListenId_(e,t);delete this.listens_[i]}get(e){const t=$6(e._queryParams),i=e._path.toString(),r=new L_;return this.restRequest_(i+".json",t,(s,u)=>{let _=u;404===s&&(_=null,s=null),null===s?(this.onDataUpdate_(i,_,!1,null),r.resolve(_)):r.reject(new Error(_))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+z_(t);this.log_("Sending REST request for "+u);const _=new XMLHttpRequest;_.onreadystatechange=()=>{if(i&&4===_.readyState){this.log_("REST Response for "+u+" received. status:",_.status,"response:",_.responseText);let y=null;if(_.status>=200&&_.status<300){try{y=$y(_.responseText)}catch{oa("Failed to parse JSON response for "+u+": "+_.responseText)}i(null,y)}else 401!==_.status&&404!==_.status&&oa("Got unsuccessful REST response for "+u+" Status: "+_.status),i(_.status);i=null}},_.open("GET",u,!0),_.send()})}}class voe{constructor(){this.rootNode_=ni.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function qw(){return{value:null,children:new Map}}function kg(n,e,t){if(bi(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=yi(e);n.children.has(i)||n.children.set(i,qw()),kg(n.children.get(i),e=vr(e),t)}}function ek(n,e,t){null!==n.value?t(e,n.value):function woe(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{ek(r,new or(e.toString()+"/"+i),t)})}class Eoe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Cs(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class Soe{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Eoe(e);const i=1e4+2e4*Math.random();pb(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Cs(e,(r,s)=>{s>0&&Ad(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),pb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Zo=(()=>((Zo=Zo||{})[Zo.OVERWRITE=0]="OVERWRITE",Zo[Zo.MERGE=1]="MERGE",Zo[Zo.ACK_USER_WRITE=2]="ACK_USER_WRITE",Zo[Zo.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Zo))();function ik(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Zw{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Zo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(bi(this.path)){if(null!=this.affectedTree.value)return Ot(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new or(e));return new Zw(Qi(),t,this.revert)}}return Ot(yi(this.path)===e,"operationForChild called for unrelated child."),new Zw(vr(this.path),this.affectedTree,this.revert)}}class Eb{constructor(e,t){this.source=e,this.path=t,this.type=Zo.LISTEN_COMPLETE}operationForChild(e){return bi(this.path)?new Eb(this.source,Qi()):new Eb(this.source,vr(this.path))}}class om{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Zo.OVERWRITE}operationForChild(e){return bi(this.path)?new om(this.source,Qi(),this.snap.getImmediateChild(e)):new om(this.source,vr(this.path),this.snap)}}class Rg{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Zo.MERGE}operationForChild(e){if(bi(this.path)){const t=this.children.subtree(new or(e));return t.isEmpty()?null:t.value?new om(this.source,Qi(),t.value):new Rg(this.source,Qi(),t)}return Ot(yi(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Rg(this.source,vr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class cp{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(bi(e))return this.isFullyInitialized()&&!this.filtered_;const t=yi(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Ioe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Cb(n,e,t,i,r,s){const u=i.filter(_=>_.type===t);u.sort((_,y)=>function Moe(n,e,t){if(null==e.childName||null==t.childName)throw hg("Should only compare child_ events.");const i=new Si(e.childName,e.snapshotNode),r=new Si(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,_,y)),u.forEach(_=>{const y=function Aoe(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,_,s);r.forEach(E=>{E.respondsTo(_.type)&&e.push(E.createEvent(y,n.query_))})})}function Yw(n,e){return{eventCache:n,serverCache:e}}function Tb(n,e,t,i){return Yw(new cp(e,t,i),n.serverCache)}function q6(n,e,t,i){return Yw(n.eventCache,new cp(e,t,i))}function Xw(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function sm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let rk;class Nr{constructor(e,t=(()=>(rk||(rk=new al(pre)),rk))()){this.value=e,this.children=t}static fromObject(e){let t=new Nr(null);return Cs(e,(i,r)=>{t=t.set(new or(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Qi(),value:this.value};if(bi(e))return null;{const i=yi(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(vr(e),t);return null!=s?{path:io(new or(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(bi(e))return this;{const t=yi(e),i=this.children.get(t);return null!==i?i.subtree(vr(e)):new Nr(null)}}set(e,t){if(bi(e))return new Nr(t,this.children);{const i=yi(e),s=(this.children.get(i)||new Nr(null)).set(vr(e),t),u=this.children.insert(i,s);return new Nr(this.value,u)}}remove(e){if(bi(e))return this.children.isEmpty()?new Nr(null):new Nr(null,this.children);{const t=yi(e),i=this.children.get(t);if(i){const r=i.remove(vr(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new Nr(null):new Nr(this.value,s)}return this}}get(e){if(bi(e))return this.value;{const t=yi(e),i=this.children.get(t);return i?i.get(vr(e)):null}}setTree(e,t){if(bi(e))return t;{const i=yi(e),s=(this.children.get(i)||new Nr(null)).setTree(vr(e),t);let u;return u=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Nr(this.value,u)}}fold(e){return this.fold_(Qi(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(io(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Qi(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(bi(e))return null;{const s=yi(e),u=this.children.get(s);return u?u.findOnPath_(vr(e),io(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Qi(),t)}foreachOnPath_(e,t,i){if(bi(e))return this;{this.value&&i(t,this.value);const r=yi(e),s=this.children.get(r);return s?s.foreachOnPath_(vr(e),io(t,r),i):new Nr(null)}}foreach(e){this.foreach_(Qi(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(io(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Su{constructor(e){this.writeTree_=e}static empty(){return new Su(new Nr(null))}}function Sb(n,e,t){if(bi(e))return new Su(new Nr(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const u=Sa(r,e);return s=s.updateChild(u,t),new Su(n.writeTree_.set(r,s))}{const r=new Nr(t),s=n.writeTree_.setTree(e,r);return new Su(s)}}}function ok(n,e,t){let i=n;return Cs(t,(r,s)=>{i=Sb(i,io(e,r),s)}),i}function Z6(n,e){if(bi(e))return Su.empty();{const t=n.writeTree_.setTree(e,new Nr(null));return new Su(t)}}function sk(n,e){return null!=am(n,e)}function am(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Sa(t.path,e)):null}function Y6(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Fr,(i,r)=>{e.push(new Si(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Si(i,r.value))}),e}function up(n,e){if(bi(e))return n;{const t=am(n,e);return new Su(null!=t?new Nr(t):n.writeTree_.subtree(e))}}function ak(n){return n.writeTree_.isEmpty()}function Pg(n,e){return X6(Qi(),n.writeTree_,e)}function X6(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?(Ot(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=X6(io(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(io(n,".priority"),i)),t}}function Kw(n,e){return t9(e,n)}function Noe(n,e){if(n.snap)return Tc(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Tc(io(n.path,t),e))return!0;return!1}function Boe(n){return n.visible}function K6(n,e,t){let i=Su.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const u=s.path;let _;if(s.snap)Tc(t,u)?(_=Sa(t,u),i=Sb(i,_,s.snap)):Tc(u,t)&&(_=Sa(u,t),i=Sb(i,Qi(),s.snap.getChild(_)));else{if(!s.children)throw hg("WriteRecord should have .snap or .children");if(Tc(t,u))_=Sa(t,u),i=ok(i,_,s.children);else if(Tc(u,t))if(_=Sa(u,t),bi(_))i=ok(i,Qi(),s.children);else{const y=fg(s.children,yi(_));if(y){const E=y.getChild(vr(_));i=Sb(i,Qi(),E)}}}}}return i}function Q6(n,e,t,i,r){if(i||r){const s=up(n.visibleWrites,e);return!r&&ak(s)?t:r||null!=t||sk(s,Qi())?Pg(K6(n.allWrites,function(E){return(E.visible||r)&&(!i||!~i.indexOf(E.writeId))&&(Tc(E.path,e)||Tc(e,E.path))},e),t||ni.EMPTY_NODE):null}{const s=am(n.visibleWrites,e);if(null!=s)return s;{const u=up(n.visibleWrites,e);return ak(u)?t:null!=t||sk(u,Qi())?Pg(u,t||ni.EMPTY_NODE):null}}}function Qw(n,e,t,i){return Q6(n.writeTree,n.treePath,e,t,i)}function lk(n,e){return function zoe(n,e,t){let i=ni.EMPTY_NODE;const r=am(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Fr,(s,u)=>{i=i.updateImmediateChild(s,u)}),i;if(t){const s=up(n.visibleWrites,e);return t.forEachChild(Fr,(u,_)=>{const y=Pg(up(s,new or(u)),_);i=i.updateImmediateChild(u,y)}),Y6(s).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}return Y6(up(n.visibleWrites,e)).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}(n.writeTree,n.treePath,e)}function J6(n,e,t,i){return function Voe(n,e,t,i,r){Ot(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=io(e,t);if(sk(n.visibleWrites,s))return null;{const u=up(n.visibleWrites,s);return ak(u)?r.getChild(t):Pg(u,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function Jw(n,e){return function Uoe(n,e){return am(n.visibleWrites,e)}(n.writeTree,io(n.treePath,e))}function ck(n,e,t){return function joe(n,e,t,i){const r=io(e,t),s=am(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?Pg(up(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function e9(n,e){return t9(io(n.treePath,e),n.writeTree)}function t9(n,e){return{treePath:n,writeTree:e}}class Woe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;Ot("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ot(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,vb(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,bb(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,Mg(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw hg("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,vb(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const n9=new class qoe{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class uk{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new cp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ck(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sm(this.viewCache_),s=function Goe(n,e,t,i,r,s){return function Hoe(n,e,t,i,r,s,u){let _;const y=up(n.visibleWrites,e),E=am(y,Qi());if(null!=E)_=E;else{if(null==t)return[];_=Pg(y,t)}if(_=_.withIndex(u),_.isEmpty()||_.isLeafNode())return[];{const D=[],R=u.getCompare(),U=s?_.getReverseIteratorFrom(i,u):_.getIteratorFrom(i,u);let X=U.getNext();for(;X&&D.length<r;)0!==R(X,i)&&D.push(X),X=U.getNext();return D}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function r9(n,e,t,i,r,s){const u=e.eventCache;if(null!=Jw(i,t))return e;{let _,y;if(bi(t))if(Ot(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=sm(e),R=lk(i,E instanceof ni?E:ni.EMPTY_NODE);_=n.filter.updateFullNode(e.eventCache.getNode(),R,s)}else{const E=Qw(i,sm(e));_=n.filter.updateFullNode(e.eventCache.getNode(),E,s)}else{const E=yi(t);if(".priority"===E){Ot(1===lp(t),"Can't have a priority with additional path components");const D=u.getNode();y=e.serverCache.getNode();const R=J6(i,t,D,y);_=null!=R?n.filter.updatePriority(D,R):u.getNode()}else{const D=vr(t);let R;if(u.isCompleteForChild(E)){y=e.serverCache.getNode();const U=J6(i,t,u.getNode(),y);R=null!=U?u.getNode().getImmediateChild(E).updateChild(D,U):u.getNode().getImmediateChild(E)}else R=ck(i,E,e.serverCache);_=null!=R?n.filter.updateChild(u.getNode(),E,R,D,r,s):u.getNode()}}return Tb(e,_,u.isFullyInitialized()||bi(t),n.filter.filtersNodes())}}function eE(n,e,t,i,r,s,u,_){const y=e.serverCache;let E;const D=u?n.filter:n.filter.getIndexedFilter();if(bi(t))E=D.updateFullNode(y.getNode(),i,null);else if(D.filtersNodes()&&!y.isFiltered()){const X=y.getNode().updateChild(t,i);E=D.updateFullNode(y.getNode(),X,null)}else{const X=yi(t);if(!y.isCompleteForPath(t)&&lp(t)>1)return e;const ie=vr(t),ze=y.getNode().getImmediateChild(X).updateChild(ie,i);E=".priority"===X?D.updatePriority(y.getNode(),ze):D.updateChild(y.getNode(),X,ze,ie,n9,null)}const R=q6(e,E,y.isFullyInitialized()||bi(t),D.filtersNodes());return r9(n,R,t,r,new uk(r,R,s),_)}function dk(n,e,t,i,r,s,u){const _=e.eventCache;let y,E;const D=new uk(r,e,s);if(bi(t))E=n.filter.updateFullNode(e.eventCache.getNode(),i,u),y=Tb(e,E,!0,n.filter.filtersNodes());else{const R=yi(t);if(".priority"===R)E=n.filter.updatePriority(e.eventCache.getNode(),i),y=Tb(e,E,_.isFullyInitialized(),_.isFiltered());else{const U=vr(t),X=_.getNode().getImmediateChild(R);let ie;if(bi(U))ie=i;else{const xe=D.getCompleteChild(R);ie=null!=xe?".priority"===j4(U)&&xe.getChild(P6(U)).isEmpty()?xe:xe.updateChild(U,i):ni.EMPTY_NODE}y=X.equals(ie)?e:Tb(e,n.filter.updateChild(_.getNode(),R,ie,U,D,u),_.isFullyInitialized(),n.filter.filtersNodes())}}return y}function o9(n,e){return n.eventCache.isCompleteForChild(e)}function s9(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function hk(n,e,t,i,r,s,u,_){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,y=e;E=bi(t)?i:new Nr(null).setTree(t,i);const D=e.serverCache.getNode();return E.children.inorderTraversal((R,U)=>{if(D.hasChild(R)){const ie=s9(0,e.serverCache.getNode().getImmediateChild(R),U);y=eE(n,y,new or(R),ie,r,s,u,_)}}),E.children.inorderTraversal((R,U)=>{const X=!e.serverCache.isCompleteForChild(R)&&null===U.value;if(!D.hasChild(R)&&!X){const xe=s9(0,e.serverCache.getNode().getImmediateChild(R),U);y=eE(n,y,new or(R),xe,r,s,u,_)}}),y}class nse{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Y4(i.getIndex()),s=function moe(n){return n.loadsAllData()?new Y4(n.getIndex()):n.hasLimit()?new _oe(n):new wb(n)}(i);this.processor_=function Zoe(n){return{filter:n}}(s);const u=t.serverCache,_=t.eventCache,y=r.updateFullNode(ni.EMPTY_NODE,u.getNode(),null),E=s.updateFullNode(ni.EMPTY_NODE,_.getNode(),null),D=new cp(y,u.isFullyInitialized(),r.filtersNodes()),R=new cp(E,_.isFullyInitialized(),s.filtersNodes());this.viewCache_=Yw(R,D),this.eventGenerator_=new Ioe(this.query_)}get query(){return this.query_}}function ose(n,e){const t=sm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!bi(e)&&!t.getImmediateChild(yi(e)).isEmpty())?t.getChild(e):null}function a9(n){return 0===n.eventRegistrations_.length}function l9(n,e,t){const i=[];if(t){Ot(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(t,r);u&&i.push(u)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(u)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function c9(n,e,t,i){e.type===Zo.MERGE&&null!==e.source.queryId&&(Ot(sm(n.viewCache_),"We should always have a full cache before handling merges"),Ot(Xw(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function Xoe(n,e,t,i,r){const s=new Woe;let u,_;if(t.type===Zo.OVERWRITE){const E=t;E.source.fromUser?u=dk(n,e,E.path,E.snap,i,r,s):(Ot(E.source.fromServer,"Unknown source."),_=E.source.tagged||e.serverCache.isFiltered()&&!bi(E.path),u=eE(n,e,E.path,E.snap,i,r,_,s))}else if(t.type===Zo.MERGE){const E=t;E.source.fromUser?u=function Qoe(n,e,t,i,r,s,u){let _=e;return i.foreach((y,E)=>{const D=io(t,y);o9(e,yi(D))&&(_=dk(n,_,D,E,r,s,u))}),i.foreach((y,E)=>{const D=io(t,y);o9(e,yi(D))||(_=dk(n,_,D,E,r,s,u))}),_}(n,e,E.path,E.children,i,r,s):(Ot(E.source.fromServer,"Unknown source."),_=E.source.tagged||e.serverCache.isFiltered(),u=hk(n,e,E.path,E.children,i,r,_,s))}else if(t.type===Zo.ACK_USER_WRITE){const E=t;u=E.revert?function tse(n,e,t,i,r,s){let u;if(null!=Jw(i,t))return e;{const _=new uk(i,e,r),y=e.eventCache.getNode();let E;if(bi(t)||".priority"===yi(t)){let D;if(e.serverCache.isFullyInitialized())D=Qw(i,sm(e));else{const R=e.serverCache.getNode();Ot(R instanceof ni,"serverChildren would be complete if leaf node"),D=lk(i,R)}E=n.filter.updateFullNode(y,D,s)}else{const D=yi(t);let R=ck(i,D,e.serverCache);null==R&&e.serverCache.isCompleteForChild(D)&&(R=y.getImmediateChild(D)),E=null!=R?n.filter.updateChild(y,D,R,vr(t),_,s):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(y,D,ni.EMPTY_NODE,vr(t),_,s):y,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Qw(i,sm(e)),u.isLeafNode()&&(E=n.filter.updateFullNode(E,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=Jw(i,Qi()),Tb(e,E,u,n.filter.filtersNodes())}}(n,e,E.path,i,r,s):function Joe(n,e,t,i,r,s,u){if(null!=Jw(r,t))return e;const _=e.serverCache.isFiltered(),y=e.serverCache;if(null!=i.value){if(bi(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return eE(n,e,t,y.getNode().getChild(t),r,s,_,u);if(bi(t)){let E=new Nr(null);return y.getNode().forEachChild(Od,(D,R)=>{E=E.set(new or(D),R)}),hk(n,e,t,E,r,s,_,u)}return e}{let E=new Nr(null);return i.foreach((D,R)=>{const U=io(t,D);y.isCompleteForPath(U)&&(E=E.set(D,y.getNode().getChild(U)))}),hk(n,e,t,E,r,s,_,u)}}(n,e,E.path,E.affectedTree,i,r,s)}else{if(t.type!==Zo.LISTEN_COMPLETE)throw hg("Unknown operation type: "+t.type);u=function ese(n,e,t,i,r){const s=e.serverCache;return r9(n,q6(e,s.getNode(),s.isFullyInitialized()||bi(t),s.isFiltered()),t,i,n9,r)}(n,e,t.path,i,s)}const y=s.getChanges();return function Koe(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Xw(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(H6(Xw(e)))}}(e,u,y),{viewCache:u,changes:y}}(n.processor_,r,e,t,i);return function Yoe(n,e){Ot(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Ot(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),Ot(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,u9(n,s.changes,s.viewCache.eventCache.getNode(),null)}function u9(n,e,t,i){return function Doe(n,e,t,i){const r=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function poe(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Cb(n,r,"child_removed",e,i,t),Cb(n,r,"child_added",e,i,t),Cb(n,r,"child_moved",s,i,t),Cb(n,r,"child_changed",e,i,t),Cb(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let tE,iE;class d9{constructor(){this.views=new Map}}function fk(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return Ot(null!=s,"SyncTree gave us an op for an invalid query."),c9(s,e,t,i)}{let s=[];for(const u of n.views.values())s=s.concat(c9(u,e,t,i));return s}}function h9(n,e,t,i,r){const u=n.views.get(e._queryIdentifier);if(!u){let _=Qw(t,r?i:null),y=!1;_?y=!0:i instanceof ni?(_=lk(t,i),y=!1):(_=ni.EMPTY_NODE,y=!1);const E=Yw(new cp(_,y,!1),new cp(i,r,!1));return new nse(e,E)}return u}function f9(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function dp(n,e){let t=null;for(const i of n.views.values())t=t||ose(i,e);return t}function p9(n,e){return e._queryParams.loadsAllData()?nE(n):n.views.get(e._queryIdentifier)}function _9(n,e){return null!=p9(n,e)}function hp(n){return null!=nE(n)}function nE(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let _se=1;class m9{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Nr(null),this.pendingWriteTree_=function $oe(){return{visibleWrites:Su.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pk(n,e,t,i,r){return function Roe(n,e,t,i,r){Ot(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Sb(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?Og(n,new om({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function fp(n,e,t=!1){const i=function Ooe(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function Foe(n,e){const t=n.allWrites.findIndex(_=>_.writeId===e);Ot(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,u=n.allWrites.length-1;for(;r&&u>=0;){const _=n.allWrites[u];_.visible&&(u>=t&&Noe(_,i.path)?r=!1:Tc(i.path,_.path)&&(s=!0)),u--}return!!r&&(s?(function Loe(n){n.visibleWrites=K6(n.allWrites,Boe,Qi()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=Z6(n.visibleWrites,i.path):Cs(i.children,y=>{n.visibleWrites=Z6(n.visibleWrites,io(i.path,y))}),!0))}(n.pendingWriteTree_,e)){let s=new Nr(null);return null!=i.snap?s=s.set(Qi(),!0):Cs(i.children,u=>{s=s.set(new or(u),!0)}),Og(n,new Zw(i.path,s,t))}return[]}function Ib(n,e,t){return Og(n,new om({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function rE(n,e,t,i,r=!1){const s=e._path,u=n.syncPointTree_.get(s);let _=[];if(u&&("default"===e._queryIdentifier||_9(u,e))){const y=function hse(n,e,t,i){const r=e._queryIdentifier,s=[];let u=[];const _=hp(n);if("default"===r)for(const[y,E]of n.views.entries())u=u.concat(l9(E,t,i)),a9(E)&&(n.views.delete(y),E.query._queryParams.loadsAllData()||s.push(E.query));else{const y=n.views.get(r);y&&(u=u.concat(l9(y,t,i)),a9(y)&&(n.views.delete(r),y.query._queryParams.loadsAllData()||s.push(y.query)))}return _&&!hp(n)&&s.push(new(function cse(){return Ot(tE,"Reference.ts has not been loaded"),tE}())(e._repo,e._path)),{removed:s,events:u}}(u,e,t,i);(function use(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const E=y.removed;if(_=y.events,!r){const D=-1!==E.findIndex(U=>U._queryParams.loadsAllData()),R=n.syncPointTree_.findOnPath(s,(U,X)=>hp(X));if(D&&!R){const U=n.syncPointTree_.subtree(s);if(!U.isEmpty()){const X=function wse(n){return n.fold((e,t,i)=>{if(t&&hp(t))return[nE(t)];{let r=[];return t&&(r=f9(t)),Cs(i,(s,u)=>{r=r.concat(u)}),r}})}(U);for(let ie=0;ie<X.length;++ie){const xe=X[ie],ze=xe.query,Qe=b9(n,xe);n.listenProvider_.startListening(Ab(ze),Db(n,ze),Qe.hashFn,Qe.onComplete)}}}!R&&E.length>0&&!i&&(D?n.listenProvider_.stopListening(Ab(e),null):E.forEach(U=>{const X=n.queryToTagMap.get(sE(U));n.listenProvider_.stopListening(Ab(U),X)}))}!function Ese(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=sE(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,E)}return _}function g9(n,e,t,i){const r=mk(n,i);if(null!=r){const s=gk(r),u=s.path,_=s.queryId,y=Sa(u,e);return xk(n,u,new om(ik(_),y,t))}return[]}function _k(n,e,t,i=!1){const r=e._path;let s=null,u=!1;n.syncPointTree_.foreachOnPath(r,(U,X)=>{const ie=Sa(U,r);s=s||dp(X,ie),u=u||hp(X)});let y,_=n.syncPointTree_.get(r);_?(u=u||hp(_),s=s||dp(_,Qi())):(_=new d9,n.syncPointTree_=n.syncPointTree_.set(r,_)),null!=s?y=!0:(y=!1,s=ni.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((X,ie)=>{const xe=dp(ie,Qi());xe&&(s=s.updateImmediateChild(X,xe))}));const E=_9(_,e);if(!E&&!e._queryParams.loadsAllData()){const U=sE(e);Ot(!n.queryToTagMap.has(U),"View does not exist, but we have a tag");const X=function Cse(){return _se++}();n.queryToTagMap.set(U,X),n.tagToQueryMap.set(X,U)}let R=function dse(n,e,t,i,r,s){const u=h9(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function sse(n,e){n.eventRegistrations_.push(e)}(u,t),function ase(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Fr,(s,u)=>{i.push(Mg(s,u))}),t.isFullyInitialized()&&i.push(H6(t.getNode())),u9(n,i,t.getNode(),e)}(u,t)}(_,e,t,Kw(n.pendingWriteTree_,r),s,y);if(!E&&!u&&!i){const U=p9(_,e);R=R.concat(function Tse(n,e,t){const i=e._path,r=Db(n,e),s=b9(n,t),u=n.listenProvider_.startListening(Ab(e),r,s.hashFn,s.onComplete),_=n.syncPointTree_.subtree(i);if(r)Ot(!hp(_.value),"If we're adding a query, it shouldn't be shadowed");else{const y=_.fold((E,D,R)=>{if(!bi(E)&&D&&hp(D))return[nE(D).query];{let U=[];return D&&(U=U.concat(f9(D).map(X=>X.query))),Cs(R,(X,ie)=>{U=U.concat(ie)}),U}});for(let E=0;E<y.length;++E){const D=y[E];n.listenProvider_.stopListening(Ab(D),Db(n,D))}}return u}(n,e,U))}return R}function oE(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,_)=>{const E=dp(_,Sa(u,e));if(E)return E});return Q6(r,e,s,t,!0)}function Og(n,e){return x9(e,n.syncPointTree_,null,Kw(n.pendingWriteTree_,Qi()))}function x9(n,e,t,i){if(bi(n.path))return y9(n,e,t,i);{const r=e.get(Qi());null==t&&null!=r&&(t=dp(r,Qi()));let s=[];const u=yi(n.path),_=n.operationForChild(u),y=e.children.get(u);if(y&&_){const E=t?t.getImmediateChild(u):null,D=e9(i,u);s=s.concat(x9(_,y,E,D))}return r&&(s=s.concat(fk(r,n,i,t))),s}}function y9(n,e,t,i){const r=e.get(Qi());null==t&&null!=r&&(t=dp(r,Qi()));let s=[];return e.children.inorderTraversal((u,_)=>{const y=t?t.getImmediateChild(u):null,E=e9(i,u),D=n.operationForChild(u);D&&(s=s.concat(y9(D,_,y,E)))}),r&&(s=s.concat(fk(r,n,i,t))),s}function b9(n,e){const t=e.query,i=Db(n,t);return{hashFn:()=>(function ise(n){return n.viewCache_.serverCache.getNode()}(e)||ni.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function yse(n,e,t){const i=mk(n,t);if(i){const r=gk(i),s=r.path,u=r.queryId,_=Sa(s,e);return xk(n,s,new Eb(ik(u),_))}return[]}(n,t._path,i):function xse(n,e){return Og(n,new Eb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function gre(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return rE(n,t,null,s)}}}}function Db(n,e){const t=sE(e);return n.queryToTagMap.get(t)}function sE(n){return n._path.toString()+"$"+n._queryIdentifier}function mk(n,e){return n.tagToQueryMap.get(e)}function gk(n){const e=n.indexOf("$");return Ot(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new or(n.substr(0,e))}}function xk(n,e,t){const i=n.syncPointTree_.get(e);return Ot(i,"Missing sync point for query tag that we're tracking"),fk(i,t,Kw(n.pendingWriteTree_,e),null)}function Ab(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function pse(){return Ot(iE,"Reference.ts has not been loaded"),iE}())(n._repo,n._path):n}class yk{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new yk(t)}node(){return this.node_}}class bk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=io(this.path_,e);return new bk(this.syncTree_,t)}node(){return oE(this.syncTree_,this.path_)}}const Sse=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},v9=function(n,e,t){return n&&"object"==typeof n?(Ot(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ise(n[".sv"],e,t):"object"==typeof n[".sv"]?Dse(n[".sv"],e):void Ot(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ise=function(n,e,t){if("timestamp"===n)return t.timestamp;Ot(!1,"Unexpected server value: "+n)},Dse=function(n,e,t){n.hasOwnProperty("increment")||Ot(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&Ot(!1,"Unexpected increment value: "+i);const r=e.node();if(Ot(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const u=r.getValue();return"number"!=typeof u?i:u+i},w9=function(n,e,t,i){return wk(e,new bk(t,n),i)},vk=function(n,e,t){return wk(n,new yk(e),t)};function wk(n,e,t){const i=n.getPriority().val(),r=v9(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,_=v9(u.getValue(),e,t);return _!==u.getValue()||r!==u.getPriority().val()?new Dg(_,lo(r)):n}{const u=n;return s=u,r!==u.getPriority().val()&&(s=s.updatePriority(new Dg(r))),u.forEachChild(Fr,(_,y)=>{const E=wk(y,e.getImmediateChild(_),t);E!==y&&(s=s.updateImmediateChild(_,E))}),s}}class Ek{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function aE(n,e){let t=e instanceof or?e:new or(e),i=n,r=yi(t);for(;null!==r;){const s=fg(i.node.children,r)||{children:{},childCount:0};i=new Ek(r,i,s),t=vr(t),r=yi(t)}return i}function lm(n){return n.node.value}function Ck(n,e){n.node.value=e,Tk(n)}function E9(n){return n.node.childCount>0}function lE(n,e){Cs(n.node.children,(t,i)=>{e(new Ek(t,n,i))})}function C9(n,e,t,i){t&&!i&&e(n),lE(n,r=>{C9(r,e,!0,i)}),t&&i&&e(n)}function Mb(n){return new or(null===n.parent?n.name:Mb(n.parent)+"/"+n.name)}function Tk(n){null!==n.parent&&function kse(n,e,t){const i=function Ase(n){return void 0===lm(n)&&!E9(n)}(t),r=Ad(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,Tk(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,Tk(n))}(n.parent,n.name,n)}const Rse=/[\[\].#$\/\u0000-\u001F\u007F]/,Pse=/[\[\].#$\u0000-\u001F\u007F]/,Sk=10485760,cE=function(n){return"string"==typeof n&&0!==n.length&&!Rse.test(n)},T9=function(n){return"string"==typeof n&&0!==n.length&&!Pse.test(n)},kb=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Lw(n)||n&&"object"==typeof n&&Ad(n,".sv")},Fd=function(n,e,t,i){i&&void 0===e||Rb(V_(n,"value"),e,t)},Rb=function(n,e,t){const i=t instanceof or?new Xre(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+im(i));if("function"==typeof e)throw new Error(n+"contains a function "+im(i)+" with contents = "+e.toString());if(Lw(e))throw new Error(n+"contains "+e.toString()+" "+im(i));if("string"==typeof e&&e.length>Sk/3&&Q2(e)>Sk)throw new Error(n+"contains a string greater than "+Sk+" utf8 bytes "+im(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Cs(e,(u,_)=>{if(".value"===u)r=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!cE(u)))throw new Error(n+" contains an invalid key ("+u+") "+im(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Kre(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Q2(e),O6(n)})(i,u),Rb(n,_,i),function Qre(n){const e=n.parts_.pop();n.byteLength_-=Q2(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+im(i)+" in addition to actual children.")}},Dk=function(n,e,t,i){if(!(i&&void 0===t||T9(t)))throw new Error(V_(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Nse=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Dk(n,e,t,i)},Nd=function(n,e){if(".info"===yi(e))throw new Error(n+" failed = Can't modify data under /.info/")};class Lse{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function uE(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!U4(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function D9(n,e,t){uE(n,t),A9(n,i=>U4(i,e))}function Fl(n,e,t){uE(n,t),A9(n,i=>Tc(i,e)||Tc(e,i))}function A9(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(Bse(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Bse(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();tm&&Es("event: "+t.toString()),Sg(i)}}}const zse=25;class Vse{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Lse,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qw(),this.transactionQueueTree_=new Ek,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function k9(n){const t=n.infoData_.getNode(new or(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ob(n){return Sse({timestamp:k9(n)})}function R9(n,e,t,i,r){n.dataUpdateCount++;const s=new or(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(r)if(i){const y=X2(t,E=>lo(E));u=function bse(n,e,t,i){const r=mk(n,i);if(r){const s=gk(r),u=s.path,_=s.queryId,y=Sa(u,e),E=Nr.fromObject(t);return xk(n,u,new Rg(ik(_),y,E))}return[]}(n.serverSyncTree_,s,y,r)}else{const y=lo(t);u=g9(n.serverSyncTree_,s,y,r)}else if(i){const y=X2(t,E=>lo(E));u=function gse(n,e,t){const i=Nr.fromObject(t);return Og(n,new Rg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,y)}else{const y=lo(t);u=Ib(n.serverSyncTree_,s,y)}let _=s;u.length>0&&(_=Ng(n,s)),Fl(n.eventQueue_,_,u)}function P9(n,e){Ak(n,"connected",e),!1===e&&function Gse(n){Fg(n,"onDisconnectEvents");const e=Ob(n),t=qw();ek(n.onDisconnect_,Qi(),(r,s)=>{const u=w9(r,s,n.serverSyncTree_,e);kg(t,r,u)});let i=[];ek(t,Qi(),(r,s)=>{i=i.concat(Ib(n.serverSyncTree_,r,s));const u=Pk(n,r);Ng(n,u)}),n.onDisconnect_=qw(),Fl(n.eventQueue_,Qi(),i)}(n)}function Ak(n,e,t){const i=new or("/.info/"+e),r=lo(t);n.infoData_.updateSnapshot(i,r);const s=Ib(n.infoSyncTree_,i,r);Fl(n.eventQueue_,i,s)}function dE(n){return n.nextWriteId_++}function Mk(n,e,t,i,r){Fg(n,"set",{path:e.toString(),value:t,priority:i});const s=Ob(n),u=lo(t,i),_=oE(n.serverSyncTree_,e),y=vk(u,_,s),E=dE(n),D=pk(n.serverSyncTree_,e,y,E,!0);uE(n.eventQueue_,D),n.server_.put(e.toString(),u.val(!0),(U,X)=>{const ie="ok"===U;ie||oa("set at "+e+" failed: "+U);const xe=fp(n.serverSyncTree_,E,!ie);Fl(n.eventQueue_,e,xe),function pp(n,e,t,i){e&&Sg(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const u=new Error(s);u.code=r,e(u)}})}(0,r,U,X)});const R=Pk(n,e);Ng(n,R),Fl(n.eventQueue_,R,[])}function kk(n,e,t){let i;i=".info"===yi(e._path)?rE(n.infoSyncTree_,e,t):rE(n.serverSyncTree_,e,t),D9(n.eventQueue_,e._path,i)}function Fg(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Es(t,...e)}function Rk(n,e,t){return oE(n.serverSyncTree_,e,t)||ni.EMPTY_NODE}function hE(n,e=n.transactionQueueTree_){if(e||fE(n,e),lm(e)){const t=L9(n,e);Ot(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function Qse(n,e,t){const i=t.map(E=>E.currentWriteId),r=Rk(n,e,i);let s=r;const u=r.hash();for(let E=0;E<t.length;E++){const D=t[E];Ot(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const R=Sa(e,D.path);s=s.updateChild(R,D.currentOutputSnapshotRaw)}const _=s.val(!0),y=e;n.server_.put(y.toString(),_,E=>{Fg(n,"transaction put response",{path:y.toString(),status:E});let D=[];if("ok"===E){const R=[];for(let U=0;U<t.length;U++)t[U].status=2,D=D.concat(fp(n.serverSyncTree_,t[U].currentWriteId)),t[U].onComplete&&R.push(()=>t[U].onComplete(null,!0,t[U].currentOutputSnapshotResolved)),t[U].unwatcher();fE(n,aE(n.transactionQueueTree_,e)),hE(n,n.transactionQueueTree_),Fl(n.eventQueue_,e,D);for(let U=0;U<R.length;U++)Sg(R[U])}else{if("datastale"===E)for(let R=0;R<t.length;R++)t[R].status=3===t[R].status?4:0;else{oa("transaction at "+y.toString()+" failed: "+E);for(let R=0;R<t.length;R++)t[R].status=4,t[R].abortReason=E}Ng(n,e)}},u)}(n,Mb(e),t)}else E9(e)&&lE(e,t=>{hE(n,t)})}function Ng(n,e){const t=N9(n,e),i=Mb(t);return function Jse(n,e,t){if(0===e.length)return;const i=[];let r=[];const u=e.filter(_=>0===_.status).map(_=>_.currentWriteId);for(let _=0;_<e.length;_++){const y=e[_],E=Sa(t,y.path);let R,D=!1;if(Ot(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)D=!0,R=y.abortReason,r=r.concat(fp(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=zse)D=!0,R="maxretry",r=r.concat(fp(n.serverSyncTree_,y.currentWriteId,!0));else{const U=Rk(n,y.path,u);y.currentInputSnapshot=U;const X=e[_].update(U.val());if(void 0!==X){Rb("transaction failed: Data returned ",X,y.path);let ie=lo(X);"object"==typeof X&&null!=X&&Ad(X,".priority")||(ie=ie.updatePriority(U.getPriority()));const ze=y.currentWriteId,Qe=Ob(n),Ve=vk(ie,U,Qe);y.currentOutputSnapshotRaw=ie,y.currentOutputSnapshotResolved=Ve,y.currentWriteId=dE(n),u.splice(u.indexOf(ze),1),r=r.concat(pk(n.serverSyncTree_,y.path,Ve,y.currentWriteId,y.applyLocally)),r=r.concat(fp(n.serverSyncTree_,ze,!0))}else D=!0,R="nodata",r=r.concat(fp(n.serverSyncTree_,y.currentWriteId,!0))}Fl(n.eventQueue_,t,r),r=[],D&&(e[_].status=2,setTimeout(e[_].unwatcher,Math.floor(0)),e[_].onComplete&&i.push("nodata"===R?()=>e[_].onComplete(null,!1,e[_].currentInputSnapshot):()=>e[_].onComplete(new Error(R),!1,null)))}fE(n,n.transactionQueueTree_);for(let _=0;_<i.length;_++)Sg(i[_]);hE(n,n.transactionQueueTree_)}(n,L9(n,t),i),i}function N9(n,e){let t,i=n.transactionQueueTree_;for(t=yi(e);null!==t&&void 0===lm(i);)i=aE(i,t),t=yi(e=vr(e));return i}function L9(n,e){const t=[];return B9(n,e,t),t.sort((i,r)=>i.order-r.order),t}function B9(n,e,t){const i=lm(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);lE(e,r=>{B9(n,r,t)})}function fE(n,e){const t=lm(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,Ck(e,t.length>0?t:void 0)}lE(e,i=>{fE(n,i)})}function Pk(n,e){const t=Mb(N9(n,e)),i=aE(n.transactionQueueTree_,e);return function Mse(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{Ok(n,r)}),Ok(n,i),C9(i,r=>{Ok(n,r)}),t}function Ok(n,e){const t=lm(e);if(t){const i=[];let r=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?(Ot(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):(Ot(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),r=r.concat(fp(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Ck(e,void 0):t.length=s+1,Fl(n.eventQueue_,Mb(e),r);for(let u=0;u<i.length;u++)Sg(i[u])}}const Fk=function(n,e){const t=nae(n),i=t.namespace;return"firebase.com"===t.domain&&Pd(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Pd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&oa("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new F4(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new or(t.pathString)}},nae=function(n){let e="",t="",i="",r="",s="",u=!0,_="https",y=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(_=n.substring(0,E-1),n=n.substring(E+2));let D=n.indexOf("/");-1===D&&(D=n.length);let R=n.indexOf("?");-1===R&&(R=n.length),e=n.substring(0,Math.min(D,R)),D<R&&(r=function eae(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(D,R)));const U=function tae(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):oa(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,R)));E=e.indexOf(":"),E>=0?(u="https"===_||"wss"===_,y=parseInt(e.substring(E+1),10)):E=e.length;const X=e.slice(0,E);if("localhost"===X.toLowerCase())t="localhost";else if(X.split(".").length<=2)t=X;else{const ie=e.indexOf(".");i=e.substring(0,ie).toLowerCase(),t=e.substring(ie+1),s=i}"ns"in U&&(s=U.ns)}return{host:e,port:y,domain:t,subdomain:i,secure:u,scheme:_,pathString:r,namespace:s}},z9="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",iae=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=z9.charAt(t%64),t=Math.floor(t/64);Ot(0===t,"Cannot push at time == 0");let u=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)u+=z9.charAt(e[r]);return Ot(20===u.length,"nextPushId: Length should be 20."),u}}();class V9{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ds(this.snapshot.exportVal())}}class j9{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Nk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ot(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Nl{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return bi(this._path)?null:j4(this._path)}get ref(){return new Iu(this._repo,this._path)}get _queryIdentifier(){const e=G6(this._queryParams),t=P4(e);return"{}"===t?"default":t}get _queryObject(){return G6(this._queryParams)}isEqual(e){if(!((e=Go(e))instanceof Nl))return!1;const t=this._repo===e._repo,i=U4(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Zre(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function _p(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Od){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==sp)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Yh)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===Fr){if(null!=e&&!kb(e)||null!=t&&!kb(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ot(n.getIndex()instanceof q4||n.getIndex()===Z4,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function _E(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Iu extends Nl{constructor(e,t){super(e,t,new X4,!1)}get parent(){const e=P6(this._path);return null===e?null:new Iu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class cm{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new or(e),i=Lg(this.ref,e);return new cm(this._node.getChild(t),i,Fr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new cm(r,Lg(this.ref,i),Fr)))}hasChild(e){const t=new or(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Lk(n,e){return(n=Go(n))._checkNotDeleted("ref"),void 0!==e?Lg(n._root,e):n._root}function Lg(n,e){return null===yi((n=Go(n))._path)?Nse("child","path",e,!1):Dk("child","path",e,!1),new Iu(n._repo,io(n._path,e))}function sae(n){n=Go(n);const e=new Nk(()=>{}),t=new Fb(e);return function Hse(n,e,t){const i=function vse(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(E,D)=>{const R=Sa(E,t);i=i||dp(D,R)});let r=n.syncPointTree_.get(t);r?i=i||dp(r,Qi()):(r=new d9,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,u=s?new cp(i,!0,!1):null;return function rse(n){return Xw(n.viewCache_)}(h9(r,e,Kw(n.pendingWriteTree_,e._path),s?u.getNode():ni.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const s=lo(r).withIndex(e._queryParams.getIndex());let u;if(_k(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=Ib(n.serverSyncTree_,e._path,s);else{const _=Db(n.serverSyncTree_,e);u=g9(n.serverSyncTree_,e._path,s,_)}return Fl(n.eventQueue_,e._path,u),rE(n.serverSyncTree_,e,t,null,!0),s},r=>(Fg(n,"get for query "+ds(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new cm(i,new Iu(n._repo,n._path),n._queryParams.getIndex()))}class Fb{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new V9("value",this,new cm(e.snapshotNode,new Iu(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new j9(this,e,t):null}matches(e){return e instanceof Fb&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class mE{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new j9(this,e,t):null}createEvent(e,t){Ot(null!=e.childName,"Child events should have a childName.");const i=Lg(new Iu(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new V9(e.type,this,new cm(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof mE&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function H9(n,e,t,i){return function Nb(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const y=t,E=(D,R)=>{kk(n._repo,n,_),y(D,R)};E.userCallback=t.userCallback,E.context=t.context,t=E}const u=new Nk(t,s||void 0),_="value"===e?new Fb(u):new mE(e,u);return function Yse(n,e,t){let i;i=".info"===yi(e._path)?_k(n.infoSyncTree_,e,t):_k(n.serverSyncTree_,e,t),D9(n.eventQueue_,e._path,i)}(n._repo,n,_),()=>kk(n._repo,n,_)}(n,"value",e,t,i)}class gE{}class $9 extends gE{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fd("endAt",this._value,e._path,!0);const t=function Q4(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}(e._queryParams,this._value,this._key);if(_E(t),_p(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Nl(e._repo,e._path,t,e._orderByCalled)}}class G9 extends gE{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fd("startAt",this._value,e._path,!0);const t=function K4(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}(e._queryParams,this._value,this._key);if(_E(t),_p(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Nl(e._repo,e._path,t,e._orderByCalled)}}class dae extends gE{constructor(e){super(),this._path=e}_apply(e){!function pE(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}(e,"orderByChild");const t=new or(this._path);if(bi(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new q4(t),r=function Gw(n,e){const t=n.copy();return t.index_=e,t}(e._queryParams,i);return _p(r),new Nl(e._repo,e._path,r,!0)}}class mae extends gE{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Fd("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new $9(this._value,this._key)._apply(new G9(this._value,this._key)._apply(e))}}(function lse(n){Ot(!tE,"__referenceConstructor has already been defined"),tE=n})(Iu),function fse(n){Ot(!iE,"__referenceConstructor has already been defined"),iE=n}(Iu);const Bk={};function vae(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Pd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Es("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,E,u=Fk(s,r),_=u.repoInfo;typeof process<"u"&&process.env&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(y=!0,s=`http://${E}?ns=${_.namespace}`,u=Fk(s,r),_=u.repoInfo):y=!u.repoInfo.secure;const D=r&&y?new _b(_b.OWNER):new Ere(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!cE(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),T9(n)}(t))throw new Error(V_(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",u),bi(u.path)||Pd("Database URL must point to the root of a Firebase Database (not including a child path).");const R=function Eae(n,e,t,i){let r=Bk[e.name];r||(r={},Bk[e.name]=r);let s=r[n.toURLString()];return s&&Pd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Vse(n,false,t,i),r[n.toURLString()]=s,s}(_,n,D,new wre(n.name,t));return new Tae(R,n)}class Tae{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function jse(n,e,t){if(n.stats_=B4(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Ww(n.repoInfo_,(i,r,s,u)=>{R9(n,i,r,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>P9(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ds(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new rm(n.repoInfo_,e,(i,r,s,u)=>{R9(n,i,r,s,u)},i=>{P9(n,i)},i=>{!function Use(n,e){Cs(e,(t,i)=>{Ak(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Sre(n,e){const t=n.toString();return L4[t]||(L4[t]=e()),L4[t]}(n.repoInfo_,()=>new Soe(n.stats_,n.server_)),n.infoData_=new voe,n.infoSyncTree_=new m9({startListening:(i,r,s,u)=>{let _=[];const y=n.infoData_.getNode(i._path);return y.isEmpty()||(_=Ib(n.infoSyncTree_,i._path,y),setTimeout(()=>{u("ok")},0)),_},stopListening:()=>{}}),Ak(n,"connected",!1),n.serverSyncTree_=new m9({startListening:(i,r,s,u)=>(n.server_.listen(i,s,r,(_,y)=>{const E=u(_,y);Fl(n.eventQueue_,i._path,E)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Iu(this._repo,Qi())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function wae(n,e){const t=Bk[e];(!t||t[n.key]!==n)&&Pd(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function F9(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Pd("Cannot call "+e+" on a deleted database.")}}function zk(n=XI(),e){const t=_g(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=(n=>{const e=qF("database");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),i]:[e.substring(0,t),i]})();i&&function Sae(n,e,t,i={}){(n=Go(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Pd("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Pd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new _b(_b.OWNER);else if(i.mockUserToken){const u="string"==typeof i.mockUserToken?i.mockUserToken:function MY(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[W2(JSON.stringify({alg:"none",type:"JWT"})),W2(JSON.stringify(u)),""].join(".")}(i.mockUserToken,n.app.options.projectId);s=new _b(u)}!function bae(n,e,t,i){n.repoInfo_=new F4(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(t,...i)}return t}rm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},rm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Iae(n){(function cre(n){M4=n})($_),Ca(new ra("database",(e,{instanceIdentifier:t})=>vae(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),go(Z8,"0.14.4",n),go(Z8,"0.14.4","esm2017")}();var Mae=_i(519),Vk=_i.n(Mae);let Lb=(()=>{class n{constructor(t){this.auth=t,this.confirmationResult=null,this.db=zk(),this.confirmationResult=null}guardarCita(t){var i=this;return Se(function*(){const r=Lk(i.db,"citas");if(!t.hora)throw new Error("La cita debe tener una fecha y hora");const s=function xae(n,...e){let t=Go(n);for(const i of e)t=i._apply(t);return t}(r,function hae(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Dk("orderByChild","path",n,!1),new dae(n)}("hora"),function gae(n,e){return function(n,e,t,i){if(!(i&&void 0===t||cE(t)))throw new Error(V_(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}("equalTo","key",e,!0),new mae(n,e)}(t.hora));try{if((yield sae(s)).exists())throw Vk().fire({icon:"error",title:"Error",text:"Fecha y hora no disponibles"}),new Error("La cita ya existe");return function oae(n,e){n=Go(n),Nd("push",n._path),Fd("push",e,n._path,!0);const t=k9(n._repo),i=iae(t),r=Lg(n,i),s=Lg(n,i);let u;return u=null!=e?function U9(n,e){n=Go(n),Nd("set",n._path),Fd("set",e,n._path,!1);const t=new L_;return Mk(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}(s,e).then(()=>s):Promise.resolve(s),r.then=u.then.bind(u),r.catch=u.then.bind(u,void 0),r}(r,t)}catch(u){throw console.error("Error al guardar la cita",u),u}})()}registrar({email:t,password:i}){return ire(this.auth,t,i)}login({email:t,password:i}){return ore(this.auth,t,i)}loginWithGoogle(){return are(this.auth,new Kte)}enviarCodigoSMS(t,i){return sre(this.auth,t,i).then(r=>{this.confirmationResult=r}).catch(r=>{console.error("Error al enviar el c\xf3digo SMS",r)})}verificarCodigoSMS(t){return this.confirmationResult?this.confirmationResult.confirm(t).then(i=>i.user).catch(i=>{console.error("Error al verificar el c\xf3digo SMS",i)}):(console.error("No se ha enviado ning\xfan c\xf3digo de verificaci\xf3n SMS"),Promise.reject("No se ha enviado ning\xfan c\xf3digo de verificaci\xf3n SMS"))}logout(){return lre(this.auth)}}return n.\u0275fac=function(t){return new(t||n)(lt(Fw))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const{isArray:Rae}=Array,{getPrototypeOf:Pae,prototype:Oae,keys:Fae}=Object;function Z9(n){if(1===n.length){const e=n[0];if(Rae(e))return{args:e,keys:null};if(function Nae(n){return n&&"object"==typeof n&&Pae(n)===Oae}(e)){const t=Fae(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:Lae}=Array;function jk(n){return Gt(e=>function Bae(n,e){return Lae(e)?n(...e):n(e)}(n,e))}function Y9(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function xE(...n){const e=Po(n),t=vi(n),{args:i,keys:r}=Z9(n);if(0===i.length)return mt([],e);const s=new bn(function zae(n,e,t=In){return i=>{X9(e,()=>{const{length:r}=n,s=new Array(r);let u=r,_=r;for(let y=0;y<r;y++)X9(e,()=>{const E=mt(n[y],e);let D=!1;E.subscribe(Qn(i,R=>{s[y]=R,D||(D=!0,_--),_||i.next(t(s.slice()))},()=>{--u||i.complete()}))},i)},i)}}(i,e,r?u=>Y9(r,u):In));return t?s.pipe(jk(t)):s}function X9(n,e,t){n?ut(t,n,e):e()}const yE=Un(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Bg(...n){return function Vae(){return xt(1)}()(mt(n,Po(n)))}function bE(n){return new bn(e=>{ue(n()).subscribe(e)})}function um(n,e){const t=zt(n)?n:()=>n,i=r=>r.error(t());return new bn(e?r=>e.schedule(i,0,r):i)}function Uk(){return mi((n,e)=>{let t=null;n._refCount++;const i=Qn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class Hk extends bn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ho(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Le;const t=this.getSubject();e.add(this.source.subscribe(Qn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Le.EMPTY)}return e}refCount(){return Uk()(this)}}function sa(n){return n<=0?()=>Zt:mi((e,t)=>{let i=0;e.subscribe(Qn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function $k(...n){const e=Po(n);return mi((t,i)=>{(e?Bg(n,t,e):Bg(n,t)).subscribe(i)})}function Ts(n,e){return mi((t,i)=>{let r=0;t.subscribe(Qn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function vE(n){return mi((e,t)=>{let i=!1;e.subscribe(Qn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function K9(n=jae){return mi((e,t)=>{let i=!1;e.subscribe(Qn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function jae(){return new yE}function dm(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ts((r,s)=>n(r,s,i)):In,sa(1),t?vE(e):K9(()=>new yE))}function zg(n,e){return zt(e)?Pt(n,e,1):Pt(n,1)}function mp(n){return mi((e,t)=>{let s,i=null,r=!1;i=e.subscribe(Qn(t,void 0,void 0,u=>{s=ue(n(u,mp(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Gk(n){return n<=0?()=>Zt:mi((e,t)=>{let i=[];e.subscribe(Qn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Q9(n){return Gt(()=>n)}function wE(n){return mi((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const si="primary",Bb=Symbol("RouteTitle");class Gae{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Vg(n){return new Gae(n)}function Wae(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const u=i[s],_=n[s];if(u.startsWith(":"))r[u.substring(1)]=_;else if(u!==_.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ld(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!J9(n[r],e[r]))return!1;return!0}function J9(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function eB(n){return n.length>0?n[n.length-1]:null}function gp(n){return function kae(n){return!!n&&(n instanceof bn||zt(n.lift)&&zt(n.subscribe))}(n)?n:Ty(n)?mt(Promise.resolve(n)):Ct(n)}const Zae={exact:function iB(n,e,t){if(!hm(n.segments,e.segments)||!EE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!iB(n.children[i],e.children[i],t))return!1;return!0},subset:rB},tB={exact:function Yae(n,e){return Ld(n,e)},subset:function Xae(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>J9(n[t],e[t]))},ignored:()=>!0};function nB(n,e,t){return Zae[t.paths](n.root,e.root,t.matrixParams)&&tB[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function rB(n,e,t){return oB(n,e,e.segments,t)}function oB(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!hm(r,t)||e.hasChildren()||!EE(r,t,i))}if(n.segments.length===t.length){if(!hm(n.segments,t)||!EE(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!rB(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(hm(n.segments,r)&&EE(n.segments,r,i)&&n.children[si])&&oB(n.children[si],e,s,i)}}function EE(n,e,t){return e.every((i,r)=>tB[t](n[r].parameters,i.parameters))}class jg{constructor(e=new hr([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vg(this.queryParams)),this._queryParamMap}toString(){return Jae.serialize(this)}}class hr{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return CE(this)}}class zb{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Vg(this.parameters)),this._parameterMap}toString(){return lB(this)}}function hm(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Vb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:function(){return new Wk},providedIn:"root"}),n})();class Wk{parse(e){const t=new ule(e);return new jg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${jb(e.root,!0)}`,i=function nle(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${TE(t)}=${TE(r)}`).join("&"):`${TE(t)}=${TE(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function ele(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Jae=new Wk;function CE(n){return n.segments.map(e=>lB(e)).join("/")}function jb(n,e){if(!n.hasChildren())return CE(n);if(e){const t=n.children[si]?jb(n.children[si],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==si&&i.push(`${r}:${jb(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Qae(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===si&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==si&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===si?[jb(n.children[si],!1)]:[`${r}:${jb(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[si]?`${CE(n)}/${t[0]}`:`${CE(n)}/(${t.join("//")})`}}function sB(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function TE(n){return sB(n).replace(/%3B/gi,";")}function qk(n){return sB(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function SE(n){return decodeURIComponent(n)}function aB(n){return SE(n.replace(/\+/g,"%20"))}function lB(n){return`${qk(n.path)}${function tle(n){return Object.keys(n).map(e=>`;${qk(e)}=${qk(n[e])}`).join("")}(n.parameters)}`}const ile=/^[^\/()?;#]+/;function Zk(n){const e=n.match(ile);return e?e[0]:""}const rle=/^[^\/()?;=#]+/,sle=/^[^=?&#]+/,lle=/^[^&#]+/;class ule{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hr([],{}):new hr([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[si]=new hr(e,t)),i}parseSegment(){const e=Zk(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Xe(4009,!1);return this.capture(e),new zb(SE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function ole(n){const e=n.match(rle);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Zk(this.remaining);r&&(i=r,this.capture(i))}e[SE(t)]=SE(i)}parseQueryParam(e){const t=function ale(n){const e=n.match(sle);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const u=function cle(n){const e=n.match(lle);return e?e[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const r=aB(t),s=aB(i);if(e.hasOwnProperty(r)){let u=e[r];Array.isArray(u)||(u=[u],e[r]=u),u.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Zk(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Xe(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=si);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[si]:new hr([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Xe(4011,!1)}}function cB(n){return n.segments.length>0?new hr([],{[si]:n}):n}function uB(n){const e={};for(const i of Object.keys(n.children)){const s=uB(n.children[i]);if(i===si&&0===s.segments.length&&s.hasChildren())for(const[u,_]of Object.entries(s.children))e[u]=_;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function dle(n){if(1===n.numberOfChildren&&n.children[si]){const e=n.children[si];return new hr(n.segments.concat(e.segments),e.children)}return n}(new hr(n.segments,e))}function fm(n){return n instanceof jg}function dB(n){let e;const r=cB(function t(s){const u={};for(const y of s.children){const E=t(y);u[y.outlet]=E}const _=new hr(s.url,u);return s===n&&(e=_),_}(n.root));return e??r}function hB(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return Yk(r,r,r,t,i);const s=function fle(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new pB(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const _={};return Object.entries(s.outlets).forEach(([y,E])=>{_[y]="string"==typeof E?E.split("/"):E}),[...r,{outlets:_}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===u?(s.split("/").forEach((_,y)=>{0==y&&"."===_||(0==y&&""===_?t=!0:".."===_?e++:""!=_&&r.push(_))}),r):[...r,s]},[]);return new pB(t,e,i)}(e);if(s.toRoot())return Yk(r,r,new hr([],{}),t,i);const u=function ple(n,e,t){if(n.isAbsolute)return new DE(e,!0,0);if(!t)return new DE(e,!1,NaN);if(null===t.parent)return new DE(t,!0,0);const i=IE(n.commands[0])?0:1;return function _le(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Xe(4005,!1);r=i.segments.length}return new DE(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),_=u.processChildren?Hb(u.segmentGroup,u.index,s.commands):_B(u.segmentGroup,u.index,s.commands);return Yk(r,u.segmentGroup,_,t,i)}function IE(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ub(n){return"object"==typeof n&&null!=n&&n.outlets}function Yk(n,e,t,i,r){let u,s={};i&&Object.entries(i).forEach(([y,E])=>{s[y]=Array.isArray(E)?E.map(D=>`${D}`):`${E}`}),u=n===e?t:fB(n,e,t);const _=cB(uB(u));return new jg(_,s,r)}function fB(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:fB(s,e,t)}),new hr(n.segments,i)}class pB{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&IE(i[0]))throw new Xe(4003,!1);const r=i.find(Ub);if(r&&r!==eB(i))throw new Xe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class DE{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function _B(n,e,t){if(n||(n=new hr([],{})),0===n.segments.length&&n.hasChildren())return Hb(n,e,t);const i=function gle(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const u=n.segments[r],_=t[i];if(Ub(_))break;const y=`${_}`,E=i<t.length-1?t[i+1]:null;if(r>0&&void 0===y)break;if(y&&E&&"object"==typeof E&&void 0===E.outlets){if(!gB(y,E,u))return s;i+=2}else{if(!gB(y,{},u))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new hr(n.segments.slice(0,i.pathIndex),{});return s.children[si]=new hr(n.segments.slice(i.pathIndex),n.children),Hb(s,0,r)}return i.match&&0===r.length?new hr(n.segments,{}):i.match&&!n.hasChildren()?Xk(n,e,t):i.match?Hb(n,0,r):Xk(n,e,t)}function Hb(n,e,t){if(0===t.length)return new hr(n.segments,{});{const i=function mle(n){return Ub(n[0])?n[0].outlets:{[si]:n}}(t),r={};if(!i[si]&&n.children[si]&&1===n.numberOfChildren&&0===n.children[si].segments.length){const s=Hb(n.children[si],e,t);return new hr(n.segments,s.children)}return Object.entries(i).forEach(([s,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(r[s]=_B(n.children[s],e,u))}),Object.entries(n.children).forEach(([s,u])=>{void 0===i[s]&&(r[s]=u)}),new hr(n.segments,r)}}function Xk(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Ub(s)){const y=xle(s.outlets);return new hr(i,y)}if(0===r&&IE(t[0])){i.push(new zb(n.segments[e].path,mB(t[0]))),r++;continue}const u=Ub(s)?s.outlets[si]:`${s}`,_=r<t.length-1?t[r+1]:null;u&&_&&IE(_)?(i.push(new zb(u,mB(_))),r+=2):(i.push(new zb(u,{})),r++)}return new hr(i,{})}function xle(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=Xk(new hr([],{}),0,i))}),e}function mB(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function gB(n,e,t){return n==t.path&&Ld(e,t.parameters)}const $b="imperative";class Bd{constructor(e,t){this.id=e,this.url=t}}class Kk extends Bd{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pm extends Bd{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class AE extends Bd{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Gb extends Bd{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class Qk extends Bd{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yle extends Bd{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ble extends Bd{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vle extends Bd{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wle extends Bd{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ele extends Bd{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cle{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Tle{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sle{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ile{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dle{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ale{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xB{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Mle{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Wb,this.attachRef=null}}let Wb=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Mle,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class yB{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Jk(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Jk(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=e5(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return e5(e,this._root).map(t=>t.value)}}function Jk(n,e){if(n===e.value)return e;for(const t of e.children){const i=Jk(n,t);if(i)return i}return null}function e5(n,e){if(n===e.value)return[e];for(const t of e.children){const i=e5(n,t);if(i.length)return i.unshift(e),i}return[]}class Kh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ug(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class bB extends yB{constructor(e,t){super(e),this.snapshot=t,t5(this,e)}toString(){return this.snapshot.toString()}}function vB(n,e){const t=function kle(n,e){const u=new ME([],{},{},"",{},si,e,null,{});return new EB("",new Kh(u,[]))}(0,e),i=new Yi([new zb("",{})]),r=new Yi({}),s=new Yi({}),u=new Yi({}),_=new Yi(""),y=new _m(i,r,u,_,s,si,e,t.root);return y.snapshot=t.root,new bB(new Kh(y,[]),t)}class _m{constructor(e,t,i,r,s,u,_,y){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=u,this.component=_,this._futureSnapshot=y,this.title=this.dataSubject?.pipe(Gt(E=>E[Bb]))??Ct(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Gt(e=>Vg(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Gt(e=>Vg(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wB(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Rle(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class ME{get title(){return this.data?.[Bb]}constructor(e,t,i,r,s,u,_,y,E){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=u,this.component=_,this.routeConfig=y,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class EB extends yB{constructor(e,t){super(t),this.url=e,t5(this,t)}toString(){return CB(this._root)}}function t5(n,e){e.value._routerState=n,e.children.forEach(t=>t5(n,t))}function CB(n){const e=n.children.length>0?` { ${n.children.map(CB).join(", ")} } `:"";return`${n.value}${e}`}function n5(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ld(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ld(e.params,t.params)||n.paramsSubject.next(t.params),function qae(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ld(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ld(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function r5(n,e){const t=Ld(n.params,e.params)&&function Kae(n,e){return hm(n,e)&&n.every((t,i)=>Ld(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||r5(n.parent,e.parent))}let kE=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=si,this.activateEvents=new Pr,this.deactivateEvents=new Pr,this.attachEvents=new Pr,this.detachEvents=new Pr,this.parentContexts=Ht(Wb),this.location=Ht(bu),this.changeDetector=Ht(Ly),this.environmentInjector=Ht(mc),this.inputBinder=Ht(RE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Xe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Xe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Xe(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Xe(4013,!1);this._activatedRoute=t;const r=this.location,u=t.snapshot.component,_=this.parentContexts.getOrCreateContext(this.name).children,y=new Ple(t,_,r.injector);this.activated=r.createComponent(u,{index:r.length,injector:y,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=xn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[B]}),n})();class Ple{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===_m?this.route:e===Wb?this.childContexts:this.parent.get(e,t)}}const RE=new vt("");let TB=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=xE([i.queryParams,i.params,i.data]).pipe(dn(([s,u,_],y)=>(_={...s,...u,..._},0===y?Ct(_):Promise.resolve(_)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const u=function QW(n){const e=Kn(n);if(!e)return null;const t=new M_(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(u)for(const{templateName:_}of u.inputs)t.activatedComponentRef.setInput(_,s[_]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();function qb(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Fle(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return qb(n,i,r);return qb(n,i)})}(n,e,t);return new Kh(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(_=>qb(n,_)),u}}const i=function Nle(n){return new _m(new Yi(n.url),new Yi(n.params),new Yi(n.queryParams),new Yi(n.fragment),new Yi(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>qb(n,s));return new Kh(i,r)}}const o5="ngNavigationCancelingError";function SB(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=fm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=IB(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function IB(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[o5]=!0,i.cancellationCode=e,t&&(i.url=t),i}function DB(n){return AB(n)&&fm(n.url)}function AB(n){return n&&n[o5]}let MB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=zr({type:n,selectors:[["ng-component"]],standalone:!0,features:[SS],decls:1,vars:0,template:function(t,i){1&t&&Xt(0,"router-outlet")},dependencies:[kE],encapsulation:2}),n})();function s5(n){const e=n.children&&n.children.map(s5),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==si&&(t.component=MB),t}function Du(n){return n.outlet||si}function Zb(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Hle{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),n5(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Ug(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,r[u],i),delete r[u]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const u=i.getContext(r.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ug(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],r);if(i&&i.outlet){const u=i.outlet.detach(),_=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:_})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ug(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Ug(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Ale(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Ile(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(n5(r),r===s)if(r.component){const u=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const u=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const _=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),u.children.onOutletReAttached(_.contexts),u.attachRef=_.componentRef,u.route=_.route.value,u.outlet&&u.outlet.attach(_.componentRef,_.route.value),n5(_.route.value),this.activateChildRoutes(e,null,u.children)}else{const _=Zb(r.snapshot);u.attachRef=null,u.route=r,u.injector=_,u.outlet&&u.outlet.activateWith(r,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,i)}}class kB{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class PE{constructor(e,t){this.component=e,this.route=t}}function $le(n,e,t){const i=n._root;return Yb(i,e?e._root:null,t,[i.value])}function Hg(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function Bc(n){return null!==Eo(n)}(n)?e.get(n):n:i}function Yb(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ug(e);return n.children.forEach(u=>{(function Wle(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,_=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const y=function qle(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!hm(n.url,e.url);case"pathParamsOrQueryParamsChange":return!hm(n.url,e.url)||!Ld(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!r5(n,e)||!Ld(n.queryParams,e.queryParams);default:return!r5(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);y?r.canActivateChecks.push(new kB(i)):(s.data=u.data,s._resolvedData=u._resolvedData),Yb(n,e,s.component?_?_.children:null:t,i,r),y&&_&&_.outlet&&_.outlet.isActivated&&r.canDeactivateChecks.push(new PE(_.outlet.component,u))}else u&&Xb(e,_,r),r.canActivateChecks.push(new kB(i)),Yb(n,null,s.component?_?_.children:null:t,i,r)})(u,s[u.value.outlet],t,i.concat([u.value]),r),delete s[u.value.outlet]}),Object.entries(s).forEach(([u,_])=>Xb(_,t.getContext(u),r)),r}function Xb(n,e,t){const i=Ug(n),r=n.value;Object.entries(i).forEach(([s,u])=>{Xb(u,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new PE(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Kb(n){return"function"==typeof n}function RB(n){return n instanceof yE||"EmptyError"===n?.name}const OE=Symbol("INITIAL_VALUE");function $g(){return dn(n=>xE(n.map(e=>e.pipe(sa(1),$k(OE)))).pipe(Gt(e=>{for(const t of e)if(!0!==t){if(t===OE)return OE;if(!1===t||t instanceof jg)return t}return!0}),Ts(e=>e!==OE),sa(1)))}function PB(n){return function Xo(...n){return Vs(n)}(Wo(e=>{if(fm(e))throw SB(0,e)}),Gt(e=>!0===e))}class FE{constructor(e){this.segmentGroup=e||null}}class OB{constructor(e){this.urlTree=e}}function Gg(n){return um(new FE(n))}function FB(n){return um(new OB(n))}class fce{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new Xe(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ct(i);if(r.numberOfChildren>1||!r.children[si])return um(new Xe(4e3,!1));r=r.children[si]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new jg(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const _=s.substring(1);i[r]=t[_]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let u={};return Object.entries(t.children).forEach(([_,y])=>{u[_]=this.createSegmentGroup(e,y,i,r)}),new hr(s,u)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Xe(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const a5={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pce(n,e,t,i,r){const s=l5(n,e,t);return s.matched?(i=function Lle(n,e){return n.providers&&!n._injector&&(n._injector=TS(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function uce(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Ct(r.map(u=>{const _=Hg(u,n);return gp(function Jle(n){return n&&Kb(n.canMatch)}(_)?_.canMatch(e,t):n.runInContext(()=>_(e,t)))})).pipe($g(),PB()):Ct(!0)}(i,e,t).pipe(Gt(u=>!0===u?s:{...a5}))):Ct(s)}function l5(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...a5}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Wae)(t,n,e);if(!r)return{...a5};const s={};Object.entries(r.posParams??{}).forEach(([_,y])=>{s[_]=y.path});const u=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:u,positionalParamSegments:r.posParams??{}}}function NB(n,e,t,i){return t.length>0&&function gce(n,e,t){return t.some(i=>NE(n,e,i)&&Du(i)!==si)}(n,t,i)?{segmentGroup:new hr(e,mce(i,new hr(t,n.children))),slicedSegments:[]}:0===t.length&&function xce(n,e,t){return t.some(i=>NE(n,e,i))}(n,t,i)?{segmentGroup:new hr(n.segments,_ce(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new hr(n.segments,n.children),slicedSegments:t}}function _ce(n,e,t,i,r){const s={};for(const u of i)if(NE(n,t,u)&&!r[Du(u)]){const _=new hr([],{});s[Du(u)]=_}return{...r,...s}}function mce(n,e){const t={};t[si]=e;for(const i of n)if(""===i.path&&Du(i)!==si){const r=new hr([],{});t[Du(i)]=r}return t}function NE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class wce{constructor(e,t,i,r,s,u,_){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=u,this.urlSerializer=_,this.allowRedirects=!0,this.applyRedirects=new fce(this.urlSerializer,this.urlTree)}noMatchError(e){return new Xe(4002,!1)}recognize(){const e=NB(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,si).pipe(mp(t=>{if(t instanceof OB)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof FE?this.noMatchError(t):t}),Gt(t=>{const i=new ME([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},si,this.rootComponentType,null,{}),r=new Kh(i,t),s=new EB("",r),u=function hle(n,e,t=null,i=null){return hB(dB(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(s._root),{state:s,tree:u}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,si).pipe(mp(i=>{throw i instanceof FE?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=wB(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return mt(r).pipe(zg(s=>{const u=i.children[s],_=function jle(n,e){const t=n.filter(i=>Du(i)===e);return t.push(...n.filter(i=>Du(i)!==e)),t}(t,s);return this.processSegmentGroup(e,_,u,s)}),function Hae(n,e){return mi(function Uae(n,e,t,i,r){return(s,u)=>{let _=t,y=e,E=0;s.subscribe(Qn(u,D=>{const R=E++;y=_?n(y,D,R):(_=!0,D),i&&u.next(y)},r&&(()=>{_&&u.next(y),u.complete()})))}}(n,e,arguments.length>=2,!0))}((s,u)=>(s.push(...u),s)),vE(null),function $ae(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ts((r,s)=>n(r,s,i)):In,Gk(1),t?vE(e):K9(()=>new yE))}(),Pt(s=>{if(null===s)return Gg(i);const u=LB(s);return function Ece(n){n.sort((e,t)=>e.value.outlet===si?-1:t.value.outlet===si?1:e.value.outlet.localeCompare(t.value.outlet))}(u),Ct(u)}))}processSegment(e,t,i,r,s,u){return mt(t).pipe(zg(_=>this.processSegmentAgainstRoute(_._injector??e,t,_,i,r,s,u).pipe(mp(y=>{if(y instanceof FE)return Ct(null);throw y}))),dm(_=>!!_),mp(_=>{if(RB(_))return function bce(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?Ct([]):Gg(i);throw _}))}processSegmentAgainstRoute(e,t,i,r,s,u,_){return function yce(n,e,t,i){return!!(Du(n)===i||i!==si&&NE(e,t,n))&&("**"===n.path||l5(e,n,t).matched)}(i,r,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,u,_):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,u):Gg(r):Gg(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,u){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?FB(s):this.applyRedirects.lineralizeSegments(i,s).pipe(Pt(u=>{const _=new hr(u,{});return this.processSegment(e,t,_,u,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,u){const{matched:_,consumedSegments:y,remainingSegments:E,positionalParamSegments:D}=l5(t,r,s);if(!_)return Gg(t);const R=this.applyRedirects.applyRedirectCommands(y,r.redirectTo,D);return r.redirectTo.startsWith("/")?FB(R):this.applyRedirects.lineralizeSegments(r,R).pipe(Pt(U=>this.processSegment(e,i,t,U.concat(E),u,!1)))}matchSegmentAgainstRoute(e,t,i,r,s,u){let _;if("**"===i.path){const y=r.length>0?eB(r).parameters:{};_=Ct({snapshot:new ME(r,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,BB(i),Du(i),i.component??i._loadedComponent??null,i,zB(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else _=pce(t,i,r,e).pipe(Gt(({matched:y,consumedSegments:E,remainingSegments:D,parameters:R})=>y?{snapshot:new ME(E,R,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,BB(i),Du(i),i.component??i._loadedComponent??null,i,zB(i)),consumedSegments:E,remainingSegments:D}:null));return _.pipe(dn(y=>null===y?Gg(t):this.getChildConfig(e=i._injector??e,i,r).pipe(dn(({routes:E})=>{const D=i._loadedInjector??e,{snapshot:R,consumedSegments:U,remainingSegments:X}=y,{segmentGroup:ie,slicedSegments:xe}=NB(t,U,X,E);if(0===xe.length&&ie.hasChildren())return this.processChildren(D,E,ie).pipe(Gt(Qe=>null===Qe?null:[new Kh(R,Qe)]));if(0===E.length&&0===xe.length)return Ct([new Kh(R,[])]);const ze=Du(i)===s;return this.processSegment(D,E,ie,xe,ze?si:s,!0).pipe(Gt(Qe=>[new Kh(R,Qe)]))}))))}getChildConfig(e,t,i){return t.children?Ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function cce(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Ct(!0):Ct(r.map(u=>{const _=Hg(u,n);return gp(function Yle(n){return n&&Kb(n.canLoad)}(_)?_.canLoad(e,t):n.runInContext(()=>_(e,t)))})).pipe($g(),PB())}(e,t,i).pipe(Pt(r=>r?this.configLoader.loadChildren(e,t).pipe(Wo(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function hce(n){return um(IB(!1,3))}())):Ct({routes:[],injector:e})}}function Cce(n){const e=n.value.routeConfig;return e&&""===e.path}function LB(n){const e=[],t=new Set;for(const i of n){if(!Cce(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=LB(i.children);e.push(new Kh(i.value,r))}return e.filter(i=>!t.has(i))}function BB(n){return n.data||{}}function zB(n){return n.resolve||{}}function VB(n){return"string"==typeof n.title||null===n.title}function c5(n){return dn(e=>{const t=n(e);return t?mt(t).pipe(Gt(()=>e)):Ct(e)})}const Wg=new vt("ROUTES");let u5=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ht(f7)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=gp(t.loadComponent()).pipe(Gt(jB),Wo(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),wE(()=>{this.componentLoaders.delete(t)})),r=new Hk(i,()=>new Gn).pipe(Uk());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ct({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(Gt(_=>{this.onLoadEndListener&&this.onLoadEndListener(i);let y,E;return Array.isArray(_)?E=_:(y=_.create(t).injector,E=y.get(Wg,[],gn.Self|gn.Optional).flat()),{routes:E.map(s5),injector:y}}),wE(()=>{this.childrenLoaders.delete(i)})),u=new Hk(s,()=>new Gn).pipe(Uk());return this.childrenLoaders.set(i,u),u}loadModuleFactoryOrRoutes(t){return gp(t()).pipe(Gt(jB),Pt(i=>i instanceof xO||Array.isArray(i)?Ct(i):mt(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jB(n){return function kce(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let LE=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Gn,this.configLoader=Ht(u5),this.environmentInjector=Ht(mc),this.urlSerializer=Ht(Vb),this.rootContexts=Ht(Wb),this.inputBindingEnabled=null!==Ht(RE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ct(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Tle(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Cle(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new Yi({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:$b,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ts(i=>0!==i.id),Gt(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),dn(i=>{let r=!1,s=!1;return Ct(i).pipe(Wo(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),dn(u=>{const _=t.browserUrlTree.toString(),y=!t.navigated||u.extractedUrl.toString()!==_||_!==t.currentUrlTree.toString();if(!y&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const D="";return this.events.next(new Gb(u.id,t.serializeUrl(i.rawUrl),D,0)),t.rawUrlTree=u.rawUrl,u.resolve(null),Zt}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return UB(u.source)&&(t.browserUrlTree=u.extractedUrl),Ct(u).pipe(dn(D=>{const R=this.transitions?.getValue();return this.events.next(new Kk(D.id,this.urlSerializer.serialize(D.extractedUrl),D.source,D.restoredState)),R!==this.transitions?.getValue()?Zt:Promise.resolve(D)}),function Tce(n,e,t,i,r,s){return Pt(u=>function vce(n,e,t,i,r,s,u="emptyOnly"){return new wce(n,e,t,i,r,u,s).recognize()}(n,e,t,i,u.extractedUrl,r,s).pipe(Gt(({state:_,tree:y})=>({...u,targetSnapshot:_,urlAfterRedirects:y}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Wo(D=>{if(i.targetSnapshot=D.targetSnapshot,i.urlAfterRedirects=D.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!D.extras.skipLocationChange){const U=t.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);t.setBrowserUrl(U,D)}t.browserUrlTree=D.urlAfterRedirects}const R=new yle(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(R)}));if(y&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:D,extractedUrl:R,source:U,restoredState:X,extras:ie}=u,xe=new Kk(D,this.urlSerializer.serialize(R),U,X);this.events.next(xe);const ze=vB(0,this.rootComponentType).snapshot;return Ct(i={...u,targetSnapshot:ze,urlAfterRedirects:R,extras:{...ie,skipLocationChange:!1,replaceUrl:!1}})}{const D="";return this.events.next(new Gb(u.id,t.serializeUrl(i.extractedUrl),D,1)),t.rawUrlTree=u.rawUrl,u.resolve(null),Zt}}),Wo(u=>{const _=new ble(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(_)}),Gt(u=>i={...u,guards:$le(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),function tce(n,e){return Pt(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?Ct({...t,guardsResult:!0}):function nce(n,e,t,i){return mt(n).pipe(Pt(r=>function lce(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ct(s.map(_=>{const y=Zb(e)??r,E=Hg(_,y);return gp(function Qle(n){return n&&Kb(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,i):y.runInContext(()=>E(n,e,t,i))).pipe(dm())})).pipe($g()):Ct(!0)}(r.component,r.route,t,e,i)),dm(r=>!0!==r,!0))}(u,i,r,n).pipe(Pt(_=>_&&function Zle(n){return"boolean"==typeof n}(_)?function ice(n,e,t,i){return mt(e).pipe(zg(r=>Bg(function oce(n,e){return null!==n&&e&&e(new Sle(n)),Ct(!0)}(r.route.parent,i),function rce(n,e){return null!==n&&e&&e(new Dle(n)),Ct(!0)}(r.route,i),function ace(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function Gle(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>bE(()=>Ct(u.guards.map(y=>{const E=Zb(u.node)??t,D=Hg(y,E);return gp(function Kle(n){return n&&Kb(n.canActivateChild)}(D)?D.canActivateChild(i,n):E.runInContext(()=>D(i,n))).pipe(dm())})).pipe($g())));return Ct(s).pipe($g())}(n,r.path,t),function sce(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ct(!0);const r=i.map(s=>bE(()=>{const u=Zb(e)??t,_=Hg(s,u);return gp(function Xle(n){return n&&Kb(n.canActivate)}(_)?_.canActivate(e,n):u.runInContext(()=>_(e,n))).pipe(dm())}));return Ct(r).pipe($g())}(n,r.route,t))),dm(r=>!0!==r,!0))}(i,s,n,e):Ct(_)),Gt(_=>({...t,guardsResult:_})))})}(this.environmentInjector,u=>this.events.next(u)),Wo(u=>{if(i.guardsResult=u.guardsResult,fm(u.guardsResult))throw SB(0,u.guardsResult);const _=new vle(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(_)}),Ts(u=>!!u.guardsResult||(t.restoreHistory(u),this.cancelNavigationTransition(u,"",3),!1)),c5(u=>{if(u.guards.canActivateChecks.length)return Ct(u).pipe(Wo(_=>{const y=new wle(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(y)}),dn(_=>{let y=!1;return Ct(_).pipe(function Sce(n,e){return Pt(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ct(t);let s=0;return mt(r).pipe(zg(u=>function Ice(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!VB(r)&&(s[Bb]=r.title),function Dce(n,e,t,i){const r=function Ace(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Ct({});const s={};return mt(r).pipe(Pt(u=>function Mce(n,e,t,i){const r=Zb(e)??i,s=Hg(n,r);return gp(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[u],e,t,i).pipe(dm(),Wo(_=>{s[u]=_}))),Gk(1),Q9(s),mp(u=>RB(u)?Zt:um(u)))}(s,n,e,i).pipe(Gt(u=>(n._resolvedData=u,n.data=wB(n,t).resolve,r&&VB(r)&&(n.data[Bb]=r.title),null)))}(u.route,i,n,e)),Wo(()=>s++),Gk(1),Pt(u=>s===r.length?Ct(t):Zt))})}(t.paramsInheritanceStrategy,this.environmentInjector),Wo({next:()=>y=!0,complete:()=>{y||(t.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),Wo(_=>{const y=new Ele(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(y)}))}),c5(u=>{const _=y=>{const E=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(y.routeConfig).pipe(Wo(D=>{y.component=D}),Gt(()=>{})));for(const D of y.children)E.push(..._(D));return E};return xE(_(u.targetSnapshot.root)).pipe(vE(),sa(1))}),c5(()=>this.afterPreactivation()),Gt(u=>{const _=function Ole(n,e,t){const i=qb(n,e._root,t?t._root:void 0);return new bB(i,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return i={...u,targetRouterState:_}}),Wo(u=>{t.currentUrlTree=u.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),t.routerState=u.targetRouterState,"deferred"===t.urlUpdateStrategy&&(u.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,u),t.browserUrlTree=u.urlAfterRedirects)}),((n,e,t,i)=>Gt(r=>(new Hle(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),sa(1),Wo({next:u=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new pm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{r=!0}}),wE(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),mp(u=>{if(s=!0,AB(u)){DB(u)||(t.navigated=!0,t.restoreHistory(i,!0));const _=new AE(i.id,this.urlSerializer.serialize(i.extractedUrl),u.message,u.cancellationCode);if(this.events.next(_),DB(u)){const y=t.urlHandlingStrategy.merge(u.url,t.rawUrlTree),E={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||UB(i.source)};t.scheduleNavigation(y,$b,null,E,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const _=new Qk(i.id,this.urlSerializer.serialize(i.extractedUrl),u,i.targetSnapshot??void 0);this.events.next(_);try{i.resolve(t.errorHandler(u))}catch(y){i.reject(y)}}return Zt}))}))}cancelNavigationTransition(t,i,r){const s=new AE(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function UB(n){return n!==$b}let HB=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===si);return i}getResolvedTitleForRoute(t){return t.data[Bb]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:function(){return Ht(Rce)},providedIn:"root"}),n})(),Rce=(()=>{class n extends HB{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(lt(LF))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:function(){return Ht(Fce)},providedIn:"root"}),n})();class Oce{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Fce=(()=>{class n extends Oce{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zo(n)))(i||n)}}(),n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const BE=new vt("",{providedIn:"root",factory:()=>({})});let Nce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:function(){return Ht(Lce)},providedIn:"root"}),n})(),Lce=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ll=(()=>((Ll=Ll||{})[Ll.COMPLETE=0]="COMPLETE",Ll[Ll.FAILED=1]="FAILED",Ll[Ll.REDIRECTING=2]="REDIRECTING",Ll))();function $B(n,e){n.events.pipe(Ts(t=>t instanceof pm||t instanceof AE||t instanceof Qk||t instanceof Gb),Gt(t=>t instanceof pm||t instanceof Gb?Ll.COMPLETE:t instanceof AE&&(0===t.code||1===t.code)?Ll.REDIRECTING:Ll.FAILED),Ts(t=>t!==Ll.REDIRECTING),sa(1)).subscribe(()=>{e()})}function Bce(n){throw n}function zce(n,e,t){return e.parse("/")}const Vce={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jce={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let aa=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ht(d7),this.isNgZoneEnabled=!1,this.options=Ht(BE,{optional:!0})||{},this.pendingTasks=Ht(h7),this.errorHandler=this.options.errorHandler||Bce,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||zce,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ht(Nce),this.routeReuseStrategy=Ht(Pce),this.titleStrategy=Ht(HB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ht(Wg,{optional:!0})?.flat()??[],this.navigationTransitions=Ht(LE),this.urlSerializer=Ht(Vb),this.location=Ht(D2),this.componentInputBindingEnabled=!!Ht(RE,{optional:!0}),this.isNgZoneEnabled=Ht(pi)instanceof pi&&pi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new jg,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vB(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),$b,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},u=r?.navigationId?r:null;if(r){const y={...r};delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(s.state=y)}const _=this.parseUrl(t);this.scheduleNavigation(_,i,u,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(s5),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:u,queryParamsHandling:_,preserveFragment:y}=i,E=y?this.currentUrlTree.fragment:u;let R,D=null;switch(_){case"merge":D={...this.currentUrlTree.queryParams,...s};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}null!==D&&(D=this.removeEmptyProps(D));try{R=dB(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),R=this.currentUrlTree.root}return hB(R,t,D,E??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=fm(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,$b,null,i)}navigate(t,i={skipLocationChange:!1}){return function Uce(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new Xe(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...Vce}:!1===i?{...jce}:i,fm(t))return nB(this.currentUrlTree,t,r);const s=this.parseUrl(t);return nB(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,u){if(this.disposed)return Promise.resolve(!1);let _,y,E;u?(_=u.resolve,y=u.reject,E=u.promise):E=new Promise((R,U)=>{_=R,y=U});const D=this.pendingTasks.add();return $B(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:_,reject:y,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(R=>Promise.reject(R))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const u={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",u)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,(this.browserPageId??0)+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qg=(()=>{class n{constructor(t,i,r,s,u,_){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=u,this.locationStrategy=_,this.href=null,this.commands=null,this.onChanges=new Gn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const y=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===y||"area"===y,this.isAnchorElement?this.subscription=t.events.subscribe(E=>{E instanceof pm&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,s,u){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||s||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function C0(n,e,t){return function qx(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?E0:gd}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(nt(aa),nt(_m),function Km(n){return function Yp(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(Wc(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Pi(),n)}("tabindex"),nt(fu),nt(to),nt(N_))},n.\u0275dir=xn({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,i){1&t&&_n("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&gu("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",ug],skipLocationChange:["skipLocationChange","skipLocationChange",ug],replaceUrl:["replaceUrl","replaceUrl",ug],routerLink:"routerLink"},standalone:!0,features:[PR,B]}),n})();class GB{}let Gce=(()=>{class n{constructor(t,i,r,s,u){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Ts(t=>t instanceof pm),zg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=TS(s.providers,t,`Route: ${s.path}`));const u=s._injector??t,_=s._loadedInjector??u;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(u,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(_,s.children??s._loadedRoutes))}return mt(r).pipe(xt())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Ct(null);const s=r.pipe(Pt(u=>null===u?Ct(void 0):(i._loadedRoutes=u.routes,i._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));return i.loadComponent&&!i._loadedComponent?mt([s,this.loader.loadComponent(i)]).pipe(xt()):s})}}return n.\u0275fac=function(t){return new(t||n)(lt(aa),lt(f7),lt(mc),lt(GB),lt(u5))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const d5=new vt("");let WB=(()=>{class n{constructor(t,i,r,s,u={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Kk?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof pm?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Gb&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xB&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xB(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function $0(){throw new Error("invalid")}()},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();function Qh(n,e){return{\u0275kind:n,\u0275providers:e}}function ZB(){const n=Ht(as);return e=>{const t=n.get(Fh);if(e!==t.components[0])return;const i=n.get(aa),r=n.get(YB);1===n.get(h5)&&i.initialNavigation(),n.get(XB,null,gn.Optional)?.setUpPreloading(),n.get(d5,null,gn.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const YB=new vt("",{factory:()=>new Gn}),h5=new vt("",{providedIn:"root",factory:()=>1}),XB=new vt("");function Yce(n){return Qh(0,[{provide:XB,useExisting:Gce},{provide:GB,useExisting:n}])}const KB=new vt("ROUTER_FORROOT_GUARD"),Kce=[D2,{provide:Vb,useClass:Wk},aa,Wb,{provide:_m,useFactory:function qB(n){return n.routerState.root},deps:[aa]},u5,[]];function Qce(){return new C7("Router",aa)}let QB=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[Kce,[],{provide:Wg,multi:!0,useValue:t},{provide:KB,useFactory:nue,deps:[[aa,new Gr,new hd]]},{provide:BE,useValue:i||{}},i?.useHash?{provide:N_,useClass:iq}:{provide:N_,useClass:Q7},{provide:d5,useFactory:()=>{const n=Ht(bZ),e=Ht(pi),t=Ht(BE),i=Ht(LE),r=Ht(Vb);return t.scrollOffset&&n.setOffset(t.scrollOffset),new WB(r,i,n,e,t)}},i?.preloadingStrategy?Yce(i.preloadingStrategy).\u0275providers:[],{provide:C7,multi:!0,useFactory:Qce},i?.initialNavigation?iue(i):[],i?.bindToComponentInputs?Qh(8,[TB,{provide:RE,useExisting:TB}]).\u0275providers:[],[{provide:JB,useFactory:ZB},{provide:QS,multi:!0,useExisting:JB}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Wg,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(lt(KB,8))},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({}),n})();function nue(n){return"guarded"}function iue(n){return["disabled"===n.initialNavigation?Qh(3,[{provide:v2,multi:!0,useFactory:()=>{const e=Ht(aa);return()=>{e.setUpLocationChangeListener()}}},{provide:h5,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Qh(2,[{provide:h5,useValue:0},{provide:v2,multi:!0,deps:[as],useFactory:e=>{const t=e.get(tq,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(aa),s=e.get(YB);$B(r,()=>{i(!0)}),e.get(LE).afterPreactivation=()=>(i(!0),s.closed?Ct(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const JB=new vt(""),oue=function(n){return{"background-color":n}};let sue=(()=>{class n{constructor(t,i){this.UserService=t,this.router=i,this.esAdmin=!1,this.auth=Nw(),this.usuario=this.auth.currentUser,this.backgroundColor="#FFF5E4",this.prevBackgroundColor="",this.color="",this.searchTerm="",this.filteredItems=[],this.items=[{name:"item 1",description:"This is item 1"},{name:"item 2",description:"This is item 2"},{name:"item 3",description:"This is item 3"},{name:"item 4",description:"This is item 4"},{name:"item 5",description:"This is item 5"}]}changeColor(){"#FFF5E4"===this.backgroundColor?(this.prevBackgroundColor=this.backgroundColor,this.backgroundColor="#850E35"):this.backgroundColor=this.prevBackgroundColor,this.color="primary"===this.color?"accent":"primary"}validarusuario(){rre(this.auth,t=>{t&&console.log(...Zg("8b9702ab_0","Usuario autenticado:",this.usuario)),t||console.log(...Zg("8b9702ab_1","Usuario no identificado"))}),this.validarusuario()}ngOnInit(){const t=Nw();this.usuario=t.currentUser,this.usuario?(console.log(...Zg("8b9702ab_2","Usuario autenticado:",this.usuario)),this.esAdmin="admin"===this.usuario.uid):console.log(...Zg("8b9702ab_3","Usuario no autenticado"))}onClick(){this.UserService.logout().then(()=>{this.router.navigate(["/login"])}).catch(t=>{console.log(...Zg("8b9702ab_4",t))})}}return n.\u0275fac=function(t){return new(t||n)(nt(Lb),nt(aa))},n.\u0275cmp=zr({type:n,selectors:[["app-header"]],decls:33,vars:3,consts:[[3,"ngStyle"],[1,"header"],[1,"flex"],["routerLink","/",1,"logo"],["id","menu-btn",1,"fas","fa-bars"],[1,"navbar"],["routerLink","/"],["routerLink","login"],[1,"btn","btn-info",3,"click"],["routerLink","about"],["routerLink","registro"],["routerLink","contact"],["routerLink","questions"],["routerLink","galeria"],["routerLink","reservaciones"],["routerLink","habitacion-list"],["href","#ACC"],["src","../../assets/icons/accesibilidad.png","width","40px","height","40px","alt",""],[1,"example-button-row"],["mat-raised-button","","type","submit",1,"btn","btn-primary",3,"click"]],template:function(t,i){1&t&&(ve(0,"div",0)(1,"section",1)(2,"div",2)(3,"a",3),Pe(4,"Axolotl Palace"),Ce(),Xt(5,"div",4),Ce(),ve(6,"nav",5)(7,"a",6),Pe(8,"Axolotl"),Ce(),ve(9,"a",7),Pe(10,"Iniciar Sesion"),Ce(),ve(11,"button",8),_n("click",function(){return i.onClick()}),Pe(12,"Cerrar Sesi\xf3n"),Ce(),ve(13,"a",9),Pe(14,"Sobre Nosotros"),Ce(),ve(15,"a",10),Pe(16,"Reserva"),Ce(),ve(17,"a",11),Pe(18,"Contactanos"),Ce(),ve(19,"a",12),Pe(20,"Preguntas frecuentes"),Ce(),ve(21,"a",13),Pe(22,"Galeria"),Ce(),ve(23,"a",14),Pe(24,"Reservaciones"),Ce(),ve(25,"a",15),Pe(26,"Habitacion"),Ce(),ve(27,"a",16),Xt(28,"img",17),Ce(),ve(29,"div",18)(30,"button",19),_n("click",function(){return i.changeColor()}),Pe(31,"Cambiar color"),Ce()()()(),Xt(32,"router-outlet"),Ce()),2&t&&Ui("ngStyle",x2(1,oue,i.backgroundColor))},dependencies:[_F,kE,qg],styles:["button.active[_ngcontent-%COMP%] {\n   -shadowcsshost-no-combinator.active {\n  background-color: green;\n}\n }\n .example-label[_ngcontent-%COMP%] {\n  display: table-cell;\n  font-size: 14px;\n  margin-left: 8px;\n  min-width: 120px;\n}\n\n.example-button-row[_ngcontent-%COMP%] {\n  display: table-cell;\n  max-width: 600px;\n}\n\n.example-button-row[_ngcontent-%COMP%]   .mat-mdc-button-base[_ngcontent-%COMP%] {\n  margin: 8px 8px 8px 0;\n}\n\n.example-flex-container[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n}\n\n.example-button-container[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  width: 120px;\n}\n.btn-primary[_ngcontent-%COMP%] {\n\t\t\tbackground-color: #850E35;\n\t\t\tborder-color: #850E35;\n\t\t\tfont-weight: bold;\n\t\t}\n\t\t\n\t\t.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus {\n\t\t\tbackground-color: #EE6983;\n\t\t\tborder-color: #EE6983;\n\t\t}"]}),n})();function Zg(n,...e){try{(function zE(){try{return(0,eval)("globalThis._console_ninja")||(0,eval)("/* https://github.com/wallabyjs/console-ninja#how-does-it-work */'use strict';function _0x4cb1(_0x4f848e,_0x9f6681){var _0x382e6d=_0x382e();return _0x4cb1=function(_0x4cb1d,_0x385ce4){_0x4cb1d=_0x4cb1d-0x104;var _0x258f0e=_0x382e6d[_0x4cb1d];return _0x258f0e;},_0x4cb1(_0x4f848e,_0x9f6681);}var _0x5c041f=_0x4cb1;(function(_0x41f6bb,_0x590643){var _0x32cf76=_0x4cb1,_0x349fd4=_0x41f6bb();while(!![]){try{var _0x587f11=parseInt(_0x32cf76(0x1b2))/0x1+parseInt(_0x32cf76(0x16e))/0x2+parseInt(_0x32cf76(0x170))/0x3+-parseInt(_0x32cf76(0x1b4))/0x4*(parseInt(_0x32cf76(0x1a0))/0x5)+parseInt(_0x32cf76(0x1a8))/0x6*(parseInt(_0x32cf76(0x194))/0x7)+parseInt(_0x32cf76(0x136))/0x8+-parseInt(_0x32cf76(0x179))/0x9;if(_0x587f11===_0x590643)break;else _0x349fd4['push'](_0x349fd4['shift']());}catch(_0x3419a0){_0x349fd4['push'](_0x349fd4['shift']());}}}(_0x382e,0x92987));var ue=Object['create'],te=Object['defineProperty'],he=Object[_0x5c041f(0x142)],le=Object[_0x5c041f(0x15c)],fe=Object['getPrototypeOf'],_e=Object[_0x5c041f(0x14f)][_0x5c041f(0x1a2)],pe=(_0x4a860d,_0x2991b2,_0x244fb2,_0x1ae054)=>{var _0x5076d7=_0x5c041f;if(_0x2991b2&&typeof _0x2991b2==_0x5076d7(0x1d1)||typeof _0x2991b2==_0x5076d7(0x1c5)){for(let _0x3968f6 of le(_0x2991b2))!_e[_0x5076d7(0x197)](_0x4a860d,_0x3968f6)&&_0x3968f6!==_0x244fb2&&te(_0x4a860d,_0x3968f6,{'get':()=>_0x2991b2[_0x3968f6],'enumerable':!(_0x1ae054=he(_0x2991b2,_0x3968f6))||_0x1ae054[_0x5076d7(0x1d3)]});}return _0x4a860d;},ne=(_0x2d78ff,_0x2bde4e,_0xe92645)=>(_0xe92645=_0x2d78ff!=null?ue(fe(_0x2d78ff)):{},pe(_0x2bde4e||!_0x2d78ff||!_0x2d78ff[_0x5c041f(0x191)]?te(_0xe92645,_0x5c041f(0x1c6),{'value':_0x2d78ff,'enumerable':!0x0}):_0xe92645,_0x2d78ff)),Q=class{constructor(_0x187a81,_0x47eeea,_0xfb14bc,_0x112373){var _0x4ccd8d=_0x5c041f;this[_0x4ccd8d(0x143)]=_0x187a81,this['host']=_0x47eeea,this['port']=_0xfb14bc,this[_0x4ccd8d(0x113)]=_0x112373,this[_0x4ccd8d(0x1b9)]=!0x0,this[_0x4ccd8d(0x1cd)]=!0x0,this[_0x4ccd8d(0x17c)]=!0x1,this[_0x4ccd8d(0x107)]=!0x1,this['_inBrowser']=!!this[_0x4ccd8d(0x143)][_0x4ccd8d(0x181)],this[_0x4ccd8d(0x186)]=null,this[_0x4ccd8d(0x112)]=0x0,this[_0x4ccd8d(0x1b1)]=0x14,this['_sendErrorMessage']=this[_0x4ccd8d(0x146)]?_0x4ccd8d(0x19c):_0x4ccd8d(0x121);}async[_0x5c041f(0x130)](){var _0x1b0d94=_0x5c041f;if(this['_WebSocketClass'])return this[_0x1b0d94(0x186)];let _0x4389b0;if(this[_0x1b0d94(0x146)])_0x4389b0=this[_0x1b0d94(0x143)][_0x1b0d94(0x181)];else{if(this[_0x1b0d94(0x143)][_0x1b0d94(0x1a3)]?.['_WebSocket'])_0x4389b0=this[_0x1b0d94(0x143)]['process']?.[_0x1b0d94(0x1bd)];else try{let _0x51e77f=await import(_0x1b0d94(0x1df));_0x4389b0=(await import((await import(_0x1b0d94(0x138)))[_0x1b0d94(0x10c)](_0x51e77f[_0x1b0d94(0x153)](this['nodeModules'],'ws/index.js'))['toString']()))[_0x1b0d94(0x1c6)];}catch{try{_0x4389b0=require(require('path')['join'](this[_0x1b0d94(0x113)],'ws'));}catch{throw new Error(_0x1b0d94(0x128));}}}return this[_0x1b0d94(0x186)]=_0x4389b0,_0x4389b0;}[_0x5c041f(0x1b5)](){var _0x1be63c=_0x5c041f;this['_connecting']||this['_connected']||this['_connectAttemptCount']>=this[_0x1be63c(0x1b1)]||(this[_0x1be63c(0x1cd)]=!0x1,this['_connecting']=!0x0,this[_0x1be63c(0x112)]++,this['_ws']=new Promise((_0x34a063,_0x5b7758)=>{var _0x560b0e=_0x1be63c;this[_0x560b0e(0x130)]()['then'](_0x2eca62=>{var _0x4fd847=_0x560b0e;let _0x2ba1af=new _0x2eca62(_0x4fd847(0x185)+this['host']+':'+this[_0x4fd847(0x17e)]);_0x2ba1af['onerror']=()=>{var _0x2b225e=_0x4fd847;this[_0x2b225e(0x1b9)]=!0x1,this[_0x2b225e(0x135)](_0x2ba1af),this[_0x2b225e(0x175)](),_0x5b7758(new Error('logger\\x20websocket\\x20error'));},_0x2ba1af[_0x4fd847(0x15f)]=()=>{var _0x5e4efc=_0x4fd847;this['_inBrowser']||_0x2ba1af[_0x5e4efc(0x119)]&&_0x2ba1af[_0x5e4efc(0x119)][_0x5e4efc(0x1c8)]&&_0x2ba1af['_socket'][_0x5e4efc(0x1c8)](),_0x34a063(_0x2ba1af);},_0x2ba1af[_0x4fd847(0x12f)]=()=>{var _0x587a15=_0x4fd847;this['_allowedToConnectOnSend']=!0x0,this[_0x587a15(0x135)](_0x2ba1af),this['_attemptToReconnectShortly']();},_0x2ba1af[_0x4fd847(0x176)]=_0x5c46e0=>{var _0x166b3f=_0x4fd847;try{_0x5c46e0&&_0x5c46e0[_0x166b3f(0x1af)]&&this[_0x166b3f(0x146)]&&JSON[_0x166b3f(0x1d2)](_0x5c46e0[_0x166b3f(0x1af)])[_0x166b3f(0x11c)]===_0x166b3f(0x1a7)&&this[_0x166b3f(0x143)][_0x166b3f(0x180)][_0x166b3f(0x1a7)]();}catch{}};})['then'](_0x2a47ca=>(this[_0x560b0e(0x17c)]=!0x0,this[_0x560b0e(0x107)]=!0x1,this['_allowedToConnectOnSend']=!0x1,this[_0x560b0e(0x1b9)]=!0x0,this[_0x560b0e(0x112)]=0x0,_0x2a47ca))[_0x560b0e(0x13f)](_0x449b17=>(this['_connected']=!0x1,this[_0x560b0e(0x107)]=!0x1,_0x5b7758(new Error(_0x560b0e(0x1ce)+(_0x449b17&&_0x449b17[_0x560b0e(0x155)])))));}));}[_0x5c041f(0x135)](_0x11dfe2){var _0x35b03a=_0x5c041f;this[_0x35b03a(0x17c)]=!0x1,this['_connecting']=!0x1;try{_0x11dfe2['onclose']=null,_0x11dfe2[_0x35b03a(0x1c9)]=null,_0x11dfe2['onopen']=null;}catch{}try{_0x11dfe2[_0x35b03a(0x15d)]<0x2&&_0x11dfe2[_0x35b03a(0x13c)]();}catch{}}[_0x5c041f(0x175)](){var _0x31aeaf=_0x5c041f;clearTimeout(this[_0x31aeaf(0x1d0)]),!(this[_0x31aeaf(0x112)]>=this[_0x31aeaf(0x1b1)])&&(this[_0x31aeaf(0x1d0)]=setTimeout(()=>{var _0x395757=_0x31aeaf;this[_0x395757(0x17c)]||this['_connecting']||(this['_connectToHostNow'](),this[_0x395757(0x156)]?.[_0x395757(0x13f)](()=>this['_attemptToReconnectShortly']()));},0x1f4),this[_0x31aeaf(0x1d0)][_0x31aeaf(0x1c8)]&&this[_0x31aeaf(0x1d0)][_0x31aeaf(0x1c8)]());}async['send'](_0x353d6f){var _0x36feac=_0x5c041f;try{if(!this[_0x36feac(0x1b9)])return;this[_0x36feac(0x1cd)]&&this[_0x36feac(0x1b5)](),(await this[_0x36feac(0x156)])['send'](JSON[_0x36feac(0x183)](_0x353d6f));}catch(_0xea0863){console[_0x36feac(0x137)](this[_0x36feac(0x159)]+':\\x20'+(_0xea0863&&_0xea0863[_0x36feac(0x155)])),this[_0x36feac(0x1b9)]=!0x1,this[_0x36feac(0x175)]();}}};function V(_0x316ec2,_0x37b6b9,_0x242e78,_0x2a8d2f,_0x23fccf){var _0x12a29b=_0x5c041f;let _0xd77357=_0x242e78[_0x12a29b(0x1cc)](',')['map'](_0xe82dc7=>{var _0x319735=_0x12a29b;try{_0x316ec2[_0x319735(0x1d6)]||((_0x23fccf===_0x319735(0x140)||_0x23fccf===_0x319735(0x1cf)||_0x23fccf===_0x319735(0x1dd))&&(_0x23fccf+=_0x316ec2['process']?.[_0x319735(0x168)]?.['node']?_0x319735(0x1a1):_0x319735(0x150)),_0x316ec2[_0x319735(0x1d6)]={'id':+new Date(),'tool':_0x23fccf});let _0x16f072=new Q(_0x316ec2,_0x37b6b9,_0xe82dc7,_0x2a8d2f);return _0x16f072[_0x319735(0x1b0)]['bind'](_0x16f072);}catch(_0x5c7fa8){return console[_0x319735(0x137)](_0x319735(0x10a),_0x5c7fa8&&_0x5c7fa8[_0x319735(0x155)]),()=>{};}});return _0x502d2e=>_0xd77357[_0x12a29b(0x1ab)](_0x43bc6b=>_0x43bc6b(_0x502d2e));}function H(_0x5af7b2){var _0x44da05=_0x5c041f;let _0x4d0c7c=function(_0x2df01d,_0x18687f){return _0x18687f-_0x2df01d;},_0x5b3ffd;if(_0x5af7b2['performance'])_0x5b3ffd=function(){var _0x18cc82=_0x4cb1;return _0x5af7b2[_0x18cc82(0x187)][_0x18cc82(0x1b8)]();};else{if(_0x5af7b2[_0x44da05(0x1a3)]&&_0x5af7b2[_0x44da05(0x1a3)]['hrtime'])_0x5b3ffd=function(){var _0x36a33e=_0x44da05;return _0x5af7b2['process'][_0x36a33e(0x104)]();},_0x4d0c7c=function(_0x17a6ca,_0x1ffd49){return 0x3e8*(_0x1ffd49[0x0]-_0x17a6ca[0x0])+(_0x1ffd49[0x1]-_0x17a6ca[0x1])/0xf4240;};else try{let {performance:_0x280329}=require('perf_hooks');_0x5b3ffd=function(){return _0x280329['now']();};}catch{_0x5b3ffd=function(){return+new Date();};}}return{'elapsed':_0x4d0c7c,'timeStamp':_0x5b3ffd,'now':()=>Date['now']()};}function X(_0x12e8bd,_0x14d6a9,_0xacee0b){var _0x30debf=_0x5c041f;if(_0x12e8bd[_0x30debf(0x14a)]!==void 0x0)return _0x12e8bd[_0x30debf(0x14a)];let _0x3a35d6=_0x12e8bd[_0x30debf(0x1a3)]?.[_0x30debf(0x168)]?.[_0x30debf(0x1da)];return _0x3a35d6&&_0xacee0b===_0x30debf(0x147)?_0x12e8bd['_consoleNinjaAllowedToStart']=!0x1:_0x12e8bd[_0x30debf(0x14a)]=_0x3a35d6||!_0x14d6a9||_0x12e8bd[_0x30debf(0x180)]?.[_0x30debf(0x13b)]&&_0x14d6a9[_0x30debf(0x18d)](_0x12e8bd[_0x30debf(0x180)][_0x30debf(0x13b)]),_0x12e8bd[_0x30debf(0x14a)];}function _0x382e(){var _0x3f78a3=['_setNodeExpressionPath','location','WebSocket','bigint','stringify','substr','ws://','_WebSocketClass','performance','stackTraceLimit','type','1.0.0','_console_ninja','_isUndefined','includes','[object\\x20BigInt]','autoExpandMaxDepth','timeEnd','__es'+'Module','parent','_type','635201aILuEg','Map','_setNodeQueryPath','call',[\"localhost\",\"127.0.0.1\",\"example.cypress.io\",\"AspireA15-43\",\"192.168.56.1\",\"192.168.1.73\"],'NEGATIVE_INFINITY','_undefined','webpack','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20refreshing\\x20the\\x20page\\x20may\\x20help','disabledLog','reduceLimits','_getOwnPropertyNames','280CWoCPm','\\x20server','hasOwnProperty','process','HTMLAllCollection','[object\\x20Set]','console','reload','54LRIPsv','argumentResolutionError','value','forEach','push','_property','_treeNodePropertiesAfterFullValue','data','send','_maxConnectAttemptCount','935776dwgaDu','sortProps','64072xQAqIr','_connectToHostNow','log','autoExpand','now','_allowedToSend','slice','count','negativeInfinity','_WebSocket','constructor','hits','_getOwnPropertyDescriptor','date','_isPrimitiveType','_addFunctionsNode','root_exp','function','default','valueOf','unref','onerror','cappedElements','number','split','_allowedToConnectOnSend','failed\\x20to\\x20connect\\x20to\\x20host:\\x20','remix','_reconnectTimeout','object','parse','enumerable','_cleanNode','_quotedRegExp','_console_ninja_session','','_capIfString','Set','node','[object\\x20Map]','_isPrimitiveWrapperType','astro','replace','path','elements','concat','[object\\x20Array]','undefined','_blacklistedProperty','match','root_exp_id','_isNegativeZero','hrtime','String','_numberRegExp','_connecting','current','_keyStrRegExp','logger\\x20failed\\x20to\\x20connect\\x20to\\x20host','_setNodeId','pathToFileURL','level','Number','autoExpandPreviousObjects','name','serialize','_connectAttemptCount','nodeModules','RegExp','_propertyName','trace','expressionsToEvaluate','...','_socket','indexOf','_addLoadNode','method','autoExpandPropertyCount','unshift','props','_p_length','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20restarting\\x20the\\x20process\\x20may\\x20help','capped','length','127.0.0.1','pop','array','_treeNodePropertiesBeforeFullValue','failed\\x20to\\x20find\\x20and\\x20load\\x20WebSocket','isExpressionToEvaluate','_addProperty','error','totalStrLength','autoExpandLimit','negativeZero','onclose','getWebSocketClass','_regExpToString','isArray',':logPointId:','_setNodePermissions','_disposeWebsocket','7576168RoOoLU','warn','url','getOwnPropertySymbols','_hasSetOnItsPath','hostname','close','_additionalMetadata','strLength','catch','next.js','rootExpression','getOwnPropertyDescriptor','global','symbol','boolean','_inBrowser','nuxt','time','[object\\x20Date]','_consoleNinjaAllowedToStart','depth','Error','positiveInfinity','string','prototype','\\x20browser','_addObjectProperty','_p_','join','_sortProps','message','_ws','_isMap','noFunctions','_sendErrorMessage','_Symbol','_setNodeExpandableState','getOwnPropertyNames','readyState','_objectToString','onopen','61934','_hasMapOnItsPath','elapsed','index','nan','resolveGetters','test','_HTMLAllCollection','versions','_setNodeLabel','null','toLowerCase','_isSet','_dateToString','1039862BHuYnR','disabledTrace','1272669ZnImvB','expId','_isArray','unknown',\"c:\\\\Users\\\\Donov\\\\.vscode\\\\extensions\\\\wallabyjs.console-ninja-0.0.154\\\\node_modules\",'_attemptToReconnectShortly','onmessage','Symbol','toString','19315575hkRJHr','_processTreeNodeResult','allStrLength','_connected','1687236147317','port'];_0x382e=function(){return _0x3f78a3;};return _0x382e();}((_0x5b4790,_0x458f21,_0x149466,_0x506ad4,_0x4f07aa,_0x3fd8d0,_0x20a513,_0x2e806b,_0x2df5e3)=>{var _0x27b5f4=_0x5c041f;if(_0x5b4790['_console_ninja'])return _0x5b4790['_console_ninja'];if(!X(_0x5b4790,_0x2e806b,_0x4f07aa))return _0x5b4790[_0x27b5f4(0x18b)]={'consoleLog':()=>{},'consoleTrace':()=>{},'consoleTime':()=>{},'consoleTimeEnd':()=>{},'autoLog':()=>{},'autoTrace':()=>{},'autoTime':()=>{},'autoTimeEnd':()=>{}},_0x5b4790[_0x27b5f4(0x18b)];let _0x538d0c={'props':0x64,'elements':0x64,'strLength':0x400*0x32,'totalStrLength':0x400*0x32,'autoExpandLimit':0x1388,'autoExpandMaxDepth':0xa},_0x5df0c1={'props':0x5,'elements':0x5,'strLength':0x100,'totalStrLength':0x100*0x3,'autoExpandLimit':0x1e,'autoExpandMaxDepth':0x2},_0xe984aa=H(_0x5b4790),_0x272fdc=_0xe984aa[_0x27b5f4(0x162)],_0x4d049a=_0xe984aa['timeStamp'],_0x2f3f4d=_0xe984aa['now'],_0xe1c80c={'hits':{},'ts':{}},_0x3d77ad=_0x1f3b96=>{_0xe1c80c['ts'][_0x1f3b96]=_0x4d049a();},_0xe06796=(_0x13f02a,_0x2be50f)=>{let _0x40e934=_0xe1c80c['ts'][_0x2be50f];if(delete _0xe1c80c['ts'][_0x2be50f],_0x40e934){let _0x5274bc=_0x272fdc(_0x40e934,_0x4d049a());_0x4b1f73(_0x4ef4d5('time',_0x13f02a,_0x2f3f4d(),_0x5ef367,[_0x5274bc],_0x2be50f));}},_0x47ca51=_0x35ae2c=>_0x568830=>{var _0x5cbfae=_0x27b5f4;try{_0x3d77ad(_0x568830),_0x35ae2c(_0x568830);}finally{_0x5b4790[_0x5cbfae(0x1a6)]['time']=_0x35ae2c;}},_0x34454b=_0x46ef29=>_0x2cac3c=>{var _0x4e0ff3=_0x27b5f4;try{let [_0x38e816,_0xa70aed]=_0x2cac3c[_0x4e0ff3(0x1cc)](_0x4e0ff3(0x133));_0xe06796(_0xa70aed,_0x38e816),_0x46ef29(_0x38e816);}finally{_0x5b4790['console'][_0x4e0ff3(0x190)]=_0x46ef29;}};_0x5b4790['_console_ninja']={'consoleLog':(_0xbf4b2a,_0x4ee11d)=>{var _0x27c615=_0x27b5f4;_0x5b4790[_0x27c615(0x1a6)][_0x27c615(0x1b6)][_0x27c615(0x110)]!==_0x27c615(0x19d)&&_0x4b1f73(_0x4ef4d5(_0x27c615(0x1b6),_0xbf4b2a,_0x2f3f4d(),_0x5ef367,_0x4ee11d));},'consoleTrace':(_0x380929,_0x5c69db)=>{var _0x2e9541=_0x27b5f4;_0x5b4790[_0x2e9541(0x1a6)][_0x2e9541(0x1b6)][_0x2e9541(0x110)]!==_0x2e9541(0x16f)&&_0x4b1f73(_0x4ef4d5(_0x2e9541(0x116),_0x380929,_0x2f3f4d(),_0x5ef367,_0x5c69db));},'consoleTime':()=>{var _0xac082f=_0x27b5f4;_0x5b4790[_0xac082f(0x1a6)][_0xac082f(0x148)]=_0x47ca51(_0x5b4790[_0xac082f(0x1a6)][_0xac082f(0x148)]);},'consoleTimeEnd':()=>{var _0x3a096b=_0x27b5f4;_0x5b4790['console'][_0x3a096b(0x190)]=_0x34454b(_0x5b4790[_0x3a096b(0x1a6)][_0x3a096b(0x190)]);},'autoLog':(_0x400d6e,_0x1ef64c)=>{_0x4b1f73(_0x4ef4d5('log',_0x1ef64c,_0x2f3f4d(),_0x5ef367,[_0x400d6e]));},'autoTrace':(_0x5e343b,_0x2b5d86)=>{var _0x53ff97=_0x27b5f4;_0x4b1f73(_0x4ef4d5(_0x53ff97(0x116),_0x2b5d86,_0x2f3f4d(),_0x5ef367,[_0x5e343b]));},'autoTime':(_0x555514,_0x466fce,_0x7d1fbf)=>{_0x3d77ad(_0x7d1fbf);},'autoTimeEnd':(_0x596063,_0x24d50a,_0x257617)=>{_0xe06796(_0x24d50a,_0x257617);}};let _0x4b1f73=V(_0x5b4790,_0x458f21,_0x149466,_0x506ad4,_0x4f07aa),_0x5ef367=_0x5b4790['_console_ninja_session'];class _0x7302f2{constructor(){var _0x2530cf=_0x27b5f4;this[_0x2530cf(0x109)]=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/,this[_0x2530cf(0x106)]=/^(0|[1-9][0-9]*)$/,this[_0x2530cf(0x1d5)]=/'([^\\\\']|\\\\')*'/,this[_0x2530cf(0x19a)]=_0x5b4790[_0x2530cf(0x1e3)],this[_0x2530cf(0x167)]=_0x5b4790[_0x2530cf(0x1a4)],this[_0x2530cf(0x1c0)]=Object[_0x2530cf(0x142)],this[_0x2530cf(0x19f)]=Object['getOwnPropertyNames'],this[_0x2530cf(0x15a)]=_0x5b4790[_0x2530cf(0x177)],this[_0x2530cf(0x131)]=RegExp[_0x2530cf(0x14f)][_0x2530cf(0x178)],this['_dateToString']=Date['prototype'][_0x2530cf(0x178)];}[_0x27b5f4(0x111)](_0x4c4a88,_0x2bf3b0,_0x363f5d,_0x49674b){var _0x377020=_0x27b5f4,_0x277dde=this,_0x2bc8b0=_0x363f5d['autoExpand'];function _0x41b795(_0x639564,_0x42158d,_0x6a91ba){var _0x49c916=_0x4cb1;_0x42158d[_0x49c916(0x189)]=_0x49c916(0x173),_0x42158d[_0x49c916(0x12b)]=_0x639564['message'],_0x15be58=_0x6a91ba['node'][_0x49c916(0x108)],_0x6a91ba[_0x49c916(0x1da)][_0x49c916(0x108)]=_0x42158d,_0x277dde[_0x49c916(0x127)](_0x42158d,_0x6a91ba);}if(_0x2bf3b0&&_0x2bf3b0[_0x377020(0x1a9)])_0x41b795(_0x2bf3b0,_0x4c4a88,_0x363f5d);else try{_0x363f5d[_0x377020(0x10d)]++,_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d[_0x377020(0x10f)]['push'](_0x2bf3b0);var _0x18fcbd,_0x433fb1,_0x474096,_0x5d1925,_0x4376b6=[],_0x410b80=[],_0x1c2cde,_0x4e4ecd=this[_0x377020(0x193)](_0x2bf3b0),_0x4ab547=_0x4e4ecd==='array',_0x1715f4=!0x1,_0x2b510e=_0x4e4ecd==='function',_0x33450e=this[_0x377020(0x1c2)](_0x4e4ecd),_0x1a4f47=this[_0x377020(0x1dc)](_0x4e4ecd),_0x51c872=_0x33450e||_0x1a4f47,_0x5bab85={},_0xeee57b=0x0,_0x3447ef=!0x1,_0x15be58,_0x2144f8=/^(([1-9]{1}[0-9]*)|0)$/;if(_0x363f5d[_0x377020(0x14b)]){if(_0x4ab547){if(_0x433fb1=_0x2bf3b0[_0x377020(0x123)],_0x433fb1>_0x363f5d['elements']){for(_0x474096=0x0,_0x5d1925=_0x363f5d[_0x377020(0x1e0)],_0x18fcbd=_0x474096;_0x18fcbd<_0x5d1925;_0x18fcbd++)_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x12a)](_0x4376b6,_0x2bf3b0,_0x4e4ecd,_0x18fcbd,_0x363f5d));_0x4c4a88[_0x377020(0x1ca)]=!0x0;}else{for(_0x474096=0x0,_0x5d1925=_0x433fb1,_0x18fcbd=_0x474096;_0x18fcbd<_0x5d1925;_0x18fcbd++)_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x12a)](_0x4376b6,_0x2bf3b0,_0x4e4ecd,_0x18fcbd,_0x363f5d));}_0x363f5d[_0x377020(0x11d)]+=_0x410b80[_0x377020(0x123)];}if(!(_0x4e4ecd===_0x377020(0x16a)||_0x4e4ecd===_0x377020(0x1e3))&&!_0x33450e&&_0x4e4ecd!==_0x377020(0x105)&&_0x4e4ecd!=='Buffer'&&_0x4e4ecd!==_0x377020(0x182)){var _0x42c5c6=_0x49674b[_0x377020(0x11f)]||_0x363f5d[_0x377020(0x11f)];if(this[_0x377020(0x16c)](_0x2bf3b0)?(_0x18fcbd=0x0,_0x2bf3b0[_0x377020(0x1ab)](function(_0x387777){var _0x5be22f=_0x377020;if(_0xeee57b++,_0x363f5d[_0x5be22f(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;return;}if(!_0x363f5d[_0x5be22f(0x129)]&&_0x363f5d[_0x5be22f(0x1b7)]&&_0x363f5d[_0x5be22f(0x11d)]>_0x363f5d[_0x5be22f(0x12d)]){_0x3447ef=!0x0;return;}_0x410b80[_0x5be22f(0x1ac)](_0x277dde[_0x5be22f(0x12a)](_0x4376b6,_0x2bf3b0,_0x5be22f(0x1d9),_0x18fcbd++,_0x363f5d,function(_0x2a9834){return function(){return _0x2a9834;};}(_0x387777)));})):this['_isMap'](_0x2bf3b0)&&_0x2bf3b0[_0x377020(0x1ab)](function(_0x316b01,_0x47e14e){var _0x48f2d9=_0x377020;if(_0xeee57b++,_0x363f5d[_0x48f2d9(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;return;}if(!_0x363f5d[_0x48f2d9(0x129)]&&_0x363f5d[_0x48f2d9(0x1b7)]&&_0x363f5d[_0x48f2d9(0x11d)]>_0x363f5d[_0x48f2d9(0x12d)]){_0x3447ef=!0x0;return;}var _0x3e2f2f=_0x47e14e[_0x48f2d9(0x178)]();_0x3e2f2f[_0x48f2d9(0x123)]>0x64&&(_0x3e2f2f=_0x3e2f2f[_0x48f2d9(0x1ba)](0x0,0x64)+_0x48f2d9(0x118)),_0x410b80[_0x48f2d9(0x1ac)](_0x277dde[_0x48f2d9(0x12a)](_0x4376b6,_0x2bf3b0,_0x48f2d9(0x195),_0x3e2f2f,_0x363f5d,function(_0x2f0290){return function(){return _0x2f0290;};}(_0x316b01)));}),!_0x1715f4){try{for(_0x1c2cde in _0x2bf3b0)if(!(_0x4ab547&&_0x2144f8[_0x377020(0x166)](_0x1c2cde))&&!this[_0x377020(0x1e4)](_0x2bf3b0,_0x1c2cde,_0x363f5d)){if(_0xeee57b++,_0x363f5d[_0x377020(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;break;}if(!_0x363f5d['isExpressionToEvaluate']&&_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d['autoExpandPropertyCount']>_0x363f5d[_0x377020(0x12d)]){_0x3447ef=!0x0;break;}_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x151)](_0x4376b6,_0x5bab85,_0x2bf3b0,_0x4e4ecd,_0x1c2cde,_0x363f5d));}}catch{}if(_0x5bab85[_0x377020(0x120)]=!0x0,_0x2b510e&&(_0x5bab85['_p_name']=!0x0),!_0x3447ef){var _0x591c0f=[][_0x377020(0x1e1)](this[_0x377020(0x19f)](_0x2bf3b0))['concat'](this['_getOwnPropertySymbols'](_0x2bf3b0));for(_0x18fcbd=0x0,_0x433fb1=_0x591c0f['length'];_0x18fcbd<_0x433fb1;_0x18fcbd++)if(_0x1c2cde=_0x591c0f[_0x18fcbd],!(_0x4ab547&&_0x2144f8[_0x377020(0x166)](_0x1c2cde[_0x377020(0x178)]()))&&!this['_blacklistedProperty'](_0x2bf3b0,_0x1c2cde,_0x363f5d)&&!_0x5bab85['_p_'+_0x1c2cde[_0x377020(0x178)]()]){if(_0xeee57b++,_0x363f5d[_0x377020(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;break;}if(!_0x363f5d[_0x377020(0x129)]&&_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d[_0x377020(0x11d)]>_0x363f5d[_0x377020(0x12d)]){_0x3447ef=!0x0;break;}_0x410b80[_0x377020(0x1ac)](_0x277dde['_addObjectProperty'](_0x4376b6,_0x5bab85,_0x2bf3b0,_0x4e4ecd,_0x1c2cde,_0x363f5d));}}}}}if(_0x4c4a88[_0x377020(0x189)]=_0x4e4ecd,_0x51c872?(_0x4c4a88[_0x377020(0x1aa)]=_0x2bf3b0[_0x377020(0x1c7)](),this[_0x377020(0x1d8)](_0x4e4ecd,_0x4c4a88,_0x363f5d,_0x49674b)):_0x4e4ecd===_0x377020(0x1c1)?_0x4c4a88[_0x377020(0x1aa)]=this[_0x377020(0x16d)][_0x377020(0x197)](_0x2bf3b0):_0x4e4ecd==='bigint'?_0x4c4a88[_0x377020(0x1aa)]=_0x2bf3b0[_0x377020(0x178)]():_0x4e4ecd===_0x377020(0x114)?_0x4c4a88['value']=this['_regExpToString'][_0x377020(0x197)](_0x2bf3b0):_0x4e4ecd===_0x377020(0x144)&&this['_Symbol']?_0x4c4a88[_0x377020(0x1aa)]=this[_0x377020(0x15a)][_0x377020(0x14f)]['toString']['call'](_0x2bf3b0):!_0x363f5d[_0x377020(0x14b)]&&!(_0x4e4ecd===_0x377020(0x16a)||_0x4e4ecd===_0x377020(0x1e3))&&(delete _0x4c4a88[_0x377020(0x1aa)],_0x4c4a88[_0x377020(0x122)]=!0x0),_0x3447ef&&(_0x4c4a88['cappedProps']=!0x0),_0x15be58=_0x363f5d[_0x377020(0x1da)][_0x377020(0x108)],_0x363f5d['node'][_0x377020(0x108)]=_0x4c4a88,this['_treeNodePropertiesBeforeFullValue'](_0x4c4a88,_0x363f5d),_0x410b80[_0x377020(0x123)]){for(_0x18fcbd=0x0,_0x433fb1=_0x410b80[_0x377020(0x123)];_0x18fcbd<_0x433fb1;_0x18fcbd++)_0x410b80[_0x18fcbd](_0x18fcbd);}_0x4376b6[_0x377020(0x123)]&&(_0x4c4a88['props']=_0x4376b6);}catch(_0x1fa9b2){_0x41b795(_0x1fa9b2,_0x4c4a88,_0x363f5d);}return this[_0x377020(0x13d)](_0x2bf3b0,_0x4c4a88),this[_0x377020(0x1ae)](_0x4c4a88,_0x363f5d),_0x363f5d[_0x377020(0x1da)]['current']=_0x15be58,_0x363f5d['level']--,_0x363f5d[_0x377020(0x1b7)]=_0x2bc8b0,_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d['autoExpandPreviousObjects'][_0x377020(0x125)](),_0x4c4a88;}['_getOwnPropertySymbols'](_0xb5846){var _0x52041f=_0x27b5f4;return Object['getOwnPropertySymbols']?Object[_0x52041f(0x139)](_0xb5846):[];}[_0x27b5f4(0x16c)](_0x5282f4){var _0x3228cc=_0x27b5f4;return!!(_0x5282f4&&_0x5b4790[_0x3228cc(0x1d9)]&&this[_0x3228cc(0x15e)](_0x5282f4)===_0x3228cc(0x1a5)&&_0x5282f4[_0x3228cc(0x1ab)]);}['_blacklistedProperty'](_0x3e1e02,_0x19f7da,_0x2ed27d){var _0x3d5f32=_0x27b5f4;return _0x2ed27d[_0x3d5f32(0x158)]?typeof _0x3e1e02[_0x19f7da]==_0x3d5f32(0x1c5):!0x1;}[_0x27b5f4(0x193)](_0x1d8bce){var _0xf22702=_0x27b5f4,_0x8f3c98='';return _0x8f3c98=typeof _0x1d8bce,_0x8f3c98==='object'?this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x1e2)?_0x8f3c98=_0xf22702(0x126):this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x149)?_0x8f3c98=_0xf22702(0x1c1):this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x18e)?_0x8f3c98='bigint':_0x1d8bce===null?_0x8f3c98=_0xf22702(0x16a):_0x1d8bce['constructor']&&(_0x8f3c98=_0x1d8bce[_0xf22702(0x1be)][_0xf22702(0x110)]||_0x8f3c98):_0x8f3c98===_0xf22702(0x1e3)&&this['_HTMLAllCollection']&&_0x1d8bce instanceof this['_HTMLAllCollection']&&(_0x8f3c98='HTMLAllCollection'),_0x8f3c98;}['_objectToString'](_0x362d66){var _0x3c798c=_0x27b5f4;return Object[_0x3c798c(0x14f)][_0x3c798c(0x178)][_0x3c798c(0x197)](_0x362d66);}['_isPrimitiveType'](_0x291f7d){var _0x5359d4=_0x27b5f4;return _0x291f7d===_0x5359d4(0x145)||_0x291f7d===_0x5359d4(0x14e)||_0x291f7d==='number';}[_0x27b5f4(0x1dc)](_0x4cbff7){var _0x3ee85a=_0x27b5f4;return _0x4cbff7==='Boolean'||_0x4cbff7===_0x3ee85a(0x105)||_0x4cbff7===_0x3ee85a(0x10e);}['_addProperty'](_0x2378df,_0x35fcbe,_0x1b181f,_0xaf562b,_0xd53cb8,_0x399f00){var _0x452e20=this;return function(_0x144d49){var _0x201876=_0x4cb1,_0x46a7c6=_0xd53cb8[_0x201876(0x1da)][_0x201876(0x108)],_0x3d1f64=_0xd53cb8[_0x201876(0x1da)][_0x201876(0x163)],_0x411984=_0xd53cb8['node'][_0x201876(0x192)];_0xd53cb8[_0x201876(0x1da)][_0x201876(0x192)]=_0x46a7c6,_0xd53cb8['node'][_0x201876(0x163)]=typeof _0xaf562b==_0x201876(0x1cb)?_0xaf562b:_0x144d49,_0x2378df['push'](_0x452e20['_property'](_0x35fcbe,_0x1b181f,_0xaf562b,_0xd53cb8,_0x399f00)),_0xd53cb8[_0x201876(0x1da)][_0x201876(0x192)]=_0x411984,_0xd53cb8['node'][_0x201876(0x163)]=_0x3d1f64;};}[_0x27b5f4(0x151)](_0x447828,_0x14c2cb,_0x2514be,_0x499052,_0x3ac241,_0x50d530,_0x5931a7){var _0x5d6f85=_0x27b5f4,_0x22fac8=this;return _0x14c2cb[_0x5d6f85(0x152)+_0x3ac241[_0x5d6f85(0x178)]()]=!0x0,function(_0x2163ab){var _0x46ef79=_0x5d6f85,_0x4e6994=_0x50d530['node'][_0x46ef79(0x108)],_0x379fad=_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x163)],_0x4648ab=_0x50d530[_0x46ef79(0x1da)]['parent'];_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x192)]=_0x4e6994,_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x163)]=_0x2163ab,_0x447828[_0x46ef79(0x1ac)](_0x22fac8[_0x46ef79(0x1ad)](_0x2514be,_0x499052,_0x3ac241,_0x50d530,_0x5931a7)),_0x50d530[_0x46ef79(0x1da)]['parent']=_0x4648ab,_0x50d530['node']['index']=_0x379fad;};}[_0x27b5f4(0x1ad)](_0x11ba45,_0x2c8472,_0x75afa4,_0xef2682,_0x2e97cf){var _0x5d139e=_0x27b5f4,_0x2f2ead=this;_0x2e97cf||(_0x2e97cf=function(_0x2f3675,_0x36e0f8){return _0x2f3675[_0x36e0f8];});var _0x1d0670=_0x75afa4['toString'](),_0x127b27=_0xef2682['expressionsToEvaluate']||{},_0x3818ef=_0xef2682[_0x5d139e(0x14b)],_0x501535=_0xef2682[_0x5d139e(0x129)];try{var _0x1654e3=this[_0x5d139e(0x157)](_0x11ba45),_0x22d9d0=_0x1d0670;_0x1654e3&&_0x22d9d0[0x0]==='\\x27'&&(_0x22d9d0=_0x22d9d0[_0x5d139e(0x184)](0x1,_0x22d9d0[_0x5d139e(0x123)]-0x2));var _0x10bfe0=_0xef2682[_0x5d139e(0x117)]=_0x127b27[_0x5d139e(0x152)+_0x22d9d0];_0x10bfe0&&(_0xef2682[_0x5d139e(0x14b)]=_0xef2682['depth']+0x1),_0xef2682[_0x5d139e(0x129)]=!!_0x10bfe0;var _0x108f45=typeof _0x75afa4==_0x5d139e(0x144),_0x289b97={'name':_0x108f45||_0x1654e3?_0x1d0670:this[_0x5d139e(0x115)](_0x1d0670)};if(_0x108f45&&(_0x289b97[_0x5d139e(0x144)]=!0x0),!(_0x2c8472===_0x5d139e(0x126)||_0x2c8472===_0x5d139e(0x14c))){var _0x2bf7ad=this[_0x5d139e(0x1c0)](_0x11ba45,_0x75afa4);if(_0x2bf7ad&&(_0x2bf7ad['set']&&(_0x289b97['setter']=!0x0),_0x2bf7ad['get']&&!_0x10bfe0&&!_0xef2682[_0x5d139e(0x165)]))return _0x289b97['getter']=!0x0,this[_0x5d139e(0x17a)](_0x289b97,_0xef2682),_0x289b97;}var _0x1f14f8;try{_0x1f14f8=_0x2e97cf(_0x11ba45,_0x75afa4);}catch(_0x309f6f){return _0x289b97={'name':_0x1d0670,'type':_0x5d139e(0x173),'error':_0x309f6f[_0x5d139e(0x155)]},this['_processTreeNodeResult'](_0x289b97,_0xef2682),_0x289b97;}var _0x19f7d6=this[_0x5d139e(0x193)](_0x1f14f8),_0x21be7b=this[_0x5d139e(0x1c2)](_0x19f7d6);if(_0x289b97[_0x5d139e(0x189)]=_0x19f7d6,_0x21be7b)this['_processTreeNodeResult'](_0x289b97,_0xef2682,_0x1f14f8,function(){var _0x24bfe4=_0x5d139e;_0x289b97[_0x24bfe4(0x1aa)]=_0x1f14f8[_0x24bfe4(0x1c7)](),!_0x10bfe0&&_0x2f2ead[_0x24bfe4(0x1d8)](_0x19f7d6,_0x289b97,_0xef2682,{});});else{var _0x24f667=_0xef2682['autoExpand']&&_0xef2682['level']<_0xef2682[_0x5d139e(0x18f)]&&_0xef2682[_0x5d139e(0x10f)][_0x5d139e(0x11a)](_0x1f14f8)<0x0&&_0x19f7d6!==_0x5d139e(0x1c5)&&_0xef2682[_0x5d139e(0x11d)]<_0xef2682['autoExpandLimit'];_0x24f667||_0xef2682['level']<_0x3818ef||_0x10bfe0?(this[_0x5d139e(0x111)](_0x289b97,_0x1f14f8,_0xef2682,_0x10bfe0||{}),this[_0x5d139e(0x13d)](_0x1f14f8,_0x289b97)):this['_processTreeNodeResult'](_0x289b97,_0xef2682,_0x1f14f8,function(){var _0x55b27e=_0x5d139e;_0x19f7d6===_0x55b27e(0x16a)||_0x19f7d6==='undefined'||(delete _0x289b97[_0x55b27e(0x1aa)],_0x289b97['capped']=!0x0);});}return _0x289b97;}finally{_0xef2682[_0x5d139e(0x117)]=_0x127b27,_0xef2682[_0x5d139e(0x14b)]=_0x3818ef,_0xef2682[_0x5d139e(0x129)]=_0x501535;}}[_0x27b5f4(0x1d8)](_0x345b2b,_0x37826c,_0x493a0b,_0x5bbe39){var _0x41c5d3=_0x27b5f4,_0x4e7ce2=_0x5bbe39[_0x41c5d3(0x13e)]||_0x493a0b[_0x41c5d3(0x13e)];if((_0x345b2b==='string'||_0x345b2b==='String')&&_0x37826c[_0x41c5d3(0x1aa)]){let _0x58e7f0=_0x37826c['value'][_0x41c5d3(0x123)];_0x493a0b[_0x41c5d3(0x17b)]+=_0x58e7f0,_0x493a0b[_0x41c5d3(0x17b)]>_0x493a0b['totalStrLength']?(_0x37826c[_0x41c5d3(0x122)]='',delete _0x37826c[_0x41c5d3(0x1aa)]):_0x58e7f0>_0x4e7ce2&&(_0x37826c[_0x41c5d3(0x122)]=_0x37826c[_0x41c5d3(0x1aa)][_0x41c5d3(0x184)](0x0,_0x4e7ce2),delete _0x37826c[_0x41c5d3(0x1aa)]);}}[_0x27b5f4(0x157)](_0x27e462){var _0x52af29=_0x27b5f4;return!!(_0x27e462&&_0x5b4790[_0x52af29(0x195)]&&this[_0x52af29(0x15e)](_0x27e462)===_0x52af29(0x1db)&&_0x27e462[_0x52af29(0x1ab)]);}['_propertyName'](_0x4009b0){var _0xaac64b=_0x27b5f4;if(_0x4009b0[_0xaac64b(0x1e5)](/^\\d+$/))return _0x4009b0;var _0x3df4b1;try{_0x3df4b1=JSON[_0xaac64b(0x183)](''+_0x4009b0);}catch{_0x3df4b1='\\x22'+this[_0xaac64b(0x15e)](_0x4009b0)+'\\x22';}return _0x3df4b1[_0xaac64b(0x1e5)](/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?_0x3df4b1=_0x3df4b1['substr'](0x1,_0x3df4b1[_0xaac64b(0x123)]-0x2):_0x3df4b1=_0x3df4b1[_0xaac64b(0x1de)](/'/g,'\\x5c\\x27')[_0xaac64b(0x1de)](/\\\\\"/g,'\\x22')[_0xaac64b(0x1de)](/(^\"|\"$)/g,'\\x27'),_0x3df4b1;}['_processTreeNodeResult'](_0x19824d,_0x5c5e8f,_0x1680fa,_0x5b0779){var _0x3d2550=_0x27b5f4;this['_treeNodePropertiesBeforeFullValue'](_0x19824d,_0x5c5e8f),_0x5b0779&&_0x5b0779(),this[_0x3d2550(0x13d)](_0x1680fa,_0x19824d),this[_0x3d2550(0x1ae)](_0x19824d,_0x5c5e8f);}[_0x27b5f4(0x127)](_0x5aff2e,_0x47d2f7){var _0x5cd962=_0x27b5f4;this[_0x5cd962(0x10b)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x196)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x17f)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x134)](_0x5aff2e,_0x47d2f7);}['_setNodeId'](_0x452ae7,_0x297f1b){}[_0x27b5f4(0x196)](_0xece9cb,_0x4e0399){}['_setNodeLabel'](_0x2c0a1b,_0x23ac11){}[_0x27b5f4(0x18c)](_0x41f0d5){var _0x5db41b=_0x27b5f4;return _0x41f0d5===this[_0x5db41b(0x19a)];}[_0x27b5f4(0x1ae)](_0x327dda,_0x2ed747){var _0x28aea0=_0x27b5f4;this['_setNodeLabel'](_0x327dda,_0x2ed747),this[_0x28aea0(0x15b)](_0x327dda),_0x2ed747['sortProps']&&this[_0x28aea0(0x154)](_0x327dda),this[_0x28aea0(0x1c3)](_0x327dda,_0x2ed747),this[_0x28aea0(0x11b)](_0x327dda,_0x2ed747),this[_0x28aea0(0x1d4)](_0x327dda);}[_0x27b5f4(0x13d)](_0x28ed57,_0x2f9ad0){var _0x2f2aa2=_0x27b5f4;try{_0x28ed57&&typeof _0x28ed57[_0x2f2aa2(0x123)]==_0x2f2aa2(0x1cb)&&(_0x2f9ad0[_0x2f2aa2(0x123)]=_0x28ed57[_0x2f2aa2(0x123)]);}catch{}if(_0x2f9ad0[_0x2f2aa2(0x189)]===_0x2f2aa2(0x1cb)||_0x2f9ad0['type']==='Number'){if(isNaN(_0x2f9ad0['value']))_0x2f9ad0[_0x2f2aa2(0x164)]=!0x0,delete _0x2f9ad0['value'];else switch(_0x2f9ad0[_0x2f2aa2(0x1aa)]){case Number['POSITIVE_INFINITY']:_0x2f9ad0[_0x2f2aa2(0x14d)]=!0x0,delete _0x2f9ad0[_0x2f2aa2(0x1aa)];break;case Number[_0x2f2aa2(0x199)]:_0x2f9ad0[_0x2f2aa2(0x1bc)]=!0x0,delete _0x2f9ad0[_0x2f2aa2(0x1aa)];break;case 0x0:this[_0x2f2aa2(0x1e7)](_0x2f9ad0[_0x2f2aa2(0x1aa)])&&(_0x2f9ad0[_0x2f2aa2(0x12e)]=!0x0);break;}}else _0x2f9ad0[_0x2f2aa2(0x189)]===_0x2f2aa2(0x1c5)&&typeof _0x28ed57[_0x2f2aa2(0x110)]=='string'&&_0x28ed57[_0x2f2aa2(0x110)]&&_0x2f9ad0[_0x2f2aa2(0x110)]&&_0x28ed57[_0x2f2aa2(0x110)]!==_0x2f9ad0['name']&&(_0x2f9ad0['funcName']=_0x28ed57[_0x2f2aa2(0x110)]);}[_0x27b5f4(0x1e7)](_0x2ebacd){return 0x1/_0x2ebacd===Number['NEGATIVE_INFINITY'];}[_0x27b5f4(0x154)](_0x33f55f){var _0x2880b5=_0x27b5f4;!_0x33f55f[_0x2880b5(0x11f)]||!_0x33f55f['props'][_0x2880b5(0x123)]||_0x33f55f[_0x2880b5(0x189)]==='array'||_0x33f55f[_0x2880b5(0x189)]===_0x2880b5(0x195)||_0x33f55f[_0x2880b5(0x189)]===_0x2880b5(0x1d9)||_0x33f55f[_0x2880b5(0x11f)]['sort'](function(_0xeb1d3d,_0x1e5ad8){var _0x465665=_0x2880b5,_0x228711=_0xeb1d3d[_0x465665(0x110)][_0x465665(0x16b)](),_0x4a8d2e=_0x1e5ad8[_0x465665(0x110)][_0x465665(0x16b)]();return _0x228711<_0x4a8d2e?-0x1:_0x228711>_0x4a8d2e?0x1:0x0;});}['_addFunctionsNode'](_0x44bb25,_0x246ec6){var _0x22ee2b=_0x27b5f4;if(!(_0x246ec6['noFunctions']||!_0x44bb25[_0x22ee2b(0x11f)]||!_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x123)])){for(var _0xdec3bc=[],_0x3df253=[],_0x3979be=0x0,_0x45594a=_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x123)];_0x3979be<_0x45594a;_0x3979be++){var _0x5162e2=_0x44bb25[_0x22ee2b(0x11f)][_0x3979be];_0x5162e2[_0x22ee2b(0x189)]==='function'?_0xdec3bc[_0x22ee2b(0x1ac)](_0x5162e2):_0x3df253[_0x22ee2b(0x1ac)](_0x5162e2);}if(!(!_0x3df253[_0x22ee2b(0x123)]||_0xdec3bc['length']<=0x1)){_0x44bb25[_0x22ee2b(0x11f)]=_0x3df253;var _0x21a1e2={'functionsNode':!0x0,'props':_0xdec3bc};this[_0x22ee2b(0x10b)](_0x21a1e2,_0x246ec6),this[_0x22ee2b(0x169)](_0x21a1e2,_0x246ec6),this[_0x22ee2b(0x15b)](_0x21a1e2),this[_0x22ee2b(0x134)](_0x21a1e2,_0x246ec6),_0x21a1e2['id']+='\\x20f',_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x11e)](_0x21a1e2);}}}[_0x27b5f4(0x11b)](_0x4447de,_0x39bc80){}[_0x27b5f4(0x15b)](_0x2ad7d8){}[_0x27b5f4(0x172)](_0x21c674){var _0x201530=_0x27b5f4;return Array[_0x201530(0x132)](_0x21c674)||typeof _0x21c674==_0x201530(0x1d1)&&this[_0x201530(0x15e)](_0x21c674)===_0x201530(0x1e2);}['_setNodePermissions'](_0x2c4127,_0x25c7dc){}[_0x27b5f4(0x1d4)](_0x368d9f){var _0x1076c1=_0x27b5f4;delete _0x368d9f['_hasSymbolPropertyOnItsPath'],delete _0x368d9f[_0x1076c1(0x13a)],delete _0x368d9f[_0x1076c1(0x161)];}[_0x27b5f4(0x17f)](_0x3b452d,_0x210ca2){}['_propertyAccessor'](_0x40ae2e){var _0x9d2342=_0x27b5f4;return _0x40ae2e?_0x40ae2e[_0x9d2342(0x1e5)](this[_0x9d2342(0x106)])?'['+_0x40ae2e+']':_0x40ae2e[_0x9d2342(0x1e5)](this['_keyStrRegExp'])?'.'+_0x40ae2e:_0x40ae2e[_0x9d2342(0x1e5)](this['_quotedRegExp'])?'['+_0x40ae2e+']':'[\\x27'+_0x40ae2e+'\\x27]':'';}}let _0x103982=new _0x7302f2();function _0x4ef4d5(_0x447b63,_0x2ac7e6,_0x1a6859,_0x160f8a,_0x430090,_0x134fa9){var _0x27e421=_0x27b5f4;let _0x16431e,_0x4089ff;try{_0x4089ff=_0x4d049a(),_0x16431e=_0xe1c80c[_0x2ac7e6],!_0x16431e||_0x4089ff-_0x16431e['ts']>0x1f4&&_0x16431e[_0x27e421(0x1bb)]&&_0x16431e[_0x27e421(0x148)]/_0x16431e['count']<0x64?(_0xe1c80c[_0x2ac7e6]=_0x16431e={'count':0x0,'time':0x0,'ts':_0x4089ff},_0xe1c80c['hits']={}):_0x4089ff-_0xe1c80c[_0x27e421(0x1bf)]['ts']>0x32&&_0xe1c80c[_0x27e421(0x1bf)]['count']&&_0xe1c80c['hits'][_0x27e421(0x148)]/_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]<0x64&&(_0xe1c80c[_0x27e421(0x1bf)]={});let _0x2f24ca=[],_0x2739a9=_0x16431e[_0x27e421(0x19e)]||_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x19e)]?_0x5df0c1:_0x538d0c,_0x147472=_0x372ec9=>{var _0x4a7838=_0x27e421;let _0x5c2b64={};return _0x5c2b64[_0x4a7838(0x11f)]=_0x372ec9['props'],_0x5c2b64[_0x4a7838(0x1e0)]=_0x372ec9[_0x4a7838(0x1e0)],_0x5c2b64[_0x4a7838(0x13e)]=_0x372ec9[_0x4a7838(0x13e)],_0x5c2b64[_0x4a7838(0x12c)]=_0x372ec9[_0x4a7838(0x12c)],_0x5c2b64[_0x4a7838(0x12d)]=_0x372ec9['autoExpandLimit'],_0x5c2b64['autoExpandMaxDepth']=_0x372ec9[_0x4a7838(0x18f)],_0x5c2b64[_0x4a7838(0x1b3)]=!0x1,_0x5c2b64[_0x4a7838(0x158)]=!_0x2df5e3,_0x5c2b64[_0x4a7838(0x14b)]=0x1,_0x5c2b64[_0x4a7838(0x10d)]=0x0,_0x5c2b64[_0x4a7838(0x171)]=_0x4a7838(0x1e6),_0x5c2b64[_0x4a7838(0x141)]=_0x4a7838(0x1c4),_0x5c2b64['autoExpand']=!0x0,_0x5c2b64['autoExpandPreviousObjects']=[],_0x5c2b64[_0x4a7838(0x11d)]=0x0,_0x5c2b64['resolveGetters']=!0x0,_0x5c2b64[_0x4a7838(0x17b)]=0x0,_0x5c2b64[_0x4a7838(0x1da)]={'current':void 0x0,'parent':void 0x0,'index':0x0},_0x5c2b64;};for(var _0x1e1001=0x0;_0x1e1001<_0x430090[_0x27e421(0x123)];_0x1e1001++)_0x2f24ca[_0x27e421(0x1ac)](_0x103982['serialize']({'timeNode':_0x447b63===_0x27e421(0x148)||void 0x0},_0x430090[_0x1e1001],_0x147472(_0x2739a9),{}));if(_0x447b63==='trace'){let _0x58fe7f=Error['stackTraceLimit'];try{Error['stackTraceLimit']=0x1/0x0,_0x2f24ca[_0x27e421(0x1ac)](_0x103982[_0x27e421(0x111)]({'stackNode':!0x0},new Error()['stack'],_0x147472(_0x2739a9),{'strLength':0x1/0x0}));}finally{Error[_0x27e421(0x188)]=_0x58fe7f;}}return{'method':_0x27e421(0x1b6),'version':_0x3fd8d0,'args':[{'ts':_0x1a6859,'session':_0x160f8a,'args':_0x2f24ca,'id':_0x2ac7e6,'context':_0x134fa9}]};}catch(_0xe8878a){return{'method':_0x27e421(0x1b6),'version':_0x3fd8d0,'args':[{'ts':_0x1a6859,'session':_0x160f8a,'args':[{'type':'unknown','error':_0xe8878a&&_0xe8878a[_0x27e421(0x155)]}],'id':_0x2ac7e6,'context':_0x134fa9}]};}finally{try{if(_0x16431e&&_0x4089ff){let _0x956241=_0x4d049a();_0x16431e[_0x27e421(0x1bb)]++,_0x16431e[_0x27e421(0x148)]+=_0x272fdc(_0x4089ff,_0x956241),_0x16431e['ts']=_0x956241,_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]++,_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x148)]+=_0x272fdc(_0x4089ff,_0x956241),_0xe1c80c['hits']['ts']=_0x956241,(_0x16431e[_0x27e421(0x1bb)]>0x32||_0x16431e['time']>0x64)&&(_0x16431e[_0x27e421(0x19e)]=!0x0),(_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]>0x3e8||_0xe1c80c['hits'][_0x27e421(0x148)]>0x12c)&&(_0xe1c80c[_0x27e421(0x1bf)]['reduceLimits']=!0x0);}}catch{}}}return _0x5b4790[_0x27b5f4(0x18b)];})(globalThis,_0x5c041f(0x124),_0x5c041f(0x160),_0x5c041f(0x174),_0x5c041f(0x19b),_0x5c041f(0x18a),_0x5c041f(0x17d),_0x5c041f(0x198),_0x5c041f(0x1d7));")}catch{}})().consoleLog(n,e)}catch{}return e}let uue=(()=>{class n{constructor(){this.title="Reservaciones",this.comments=[],this.isActive=!1}onNewCommentAdded(t){console.log(...function ez(n,...e){try{(function VE(){try{return(0,eval)("globalThis._console_ninja")||(0,eval)("/* https://github.com/wallabyjs/console-ninja#how-does-it-work */'use strict';function _0x4cb1(_0x4f848e,_0x9f6681){var _0x382e6d=_0x382e();return _0x4cb1=function(_0x4cb1d,_0x385ce4){_0x4cb1d=_0x4cb1d-0x104;var _0x258f0e=_0x382e6d[_0x4cb1d];return _0x258f0e;},_0x4cb1(_0x4f848e,_0x9f6681);}var _0x5c041f=_0x4cb1;(function(_0x41f6bb,_0x590643){var _0x32cf76=_0x4cb1,_0x349fd4=_0x41f6bb();while(!![]){try{var _0x587f11=parseInt(_0x32cf76(0x1b2))/0x1+parseInt(_0x32cf76(0x16e))/0x2+parseInt(_0x32cf76(0x170))/0x3+-parseInt(_0x32cf76(0x1b4))/0x4*(parseInt(_0x32cf76(0x1a0))/0x5)+parseInt(_0x32cf76(0x1a8))/0x6*(parseInt(_0x32cf76(0x194))/0x7)+parseInt(_0x32cf76(0x136))/0x8+-parseInt(_0x32cf76(0x179))/0x9;if(_0x587f11===_0x590643)break;else _0x349fd4['push'](_0x349fd4['shift']());}catch(_0x3419a0){_0x349fd4['push'](_0x349fd4['shift']());}}}(_0x382e,0x92987));var ue=Object['create'],te=Object['defineProperty'],he=Object[_0x5c041f(0x142)],le=Object[_0x5c041f(0x15c)],fe=Object['getPrototypeOf'],_e=Object[_0x5c041f(0x14f)][_0x5c041f(0x1a2)],pe=(_0x4a860d,_0x2991b2,_0x244fb2,_0x1ae054)=>{var _0x5076d7=_0x5c041f;if(_0x2991b2&&typeof _0x2991b2==_0x5076d7(0x1d1)||typeof _0x2991b2==_0x5076d7(0x1c5)){for(let _0x3968f6 of le(_0x2991b2))!_e[_0x5076d7(0x197)](_0x4a860d,_0x3968f6)&&_0x3968f6!==_0x244fb2&&te(_0x4a860d,_0x3968f6,{'get':()=>_0x2991b2[_0x3968f6],'enumerable':!(_0x1ae054=he(_0x2991b2,_0x3968f6))||_0x1ae054[_0x5076d7(0x1d3)]});}return _0x4a860d;},ne=(_0x2d78ff,_0x2bde4e,_0xe92645)=>(_0xe92645=_0x2d78ff!=null?ue(fe(_0x2d78ff)):{},pe(_0x2bde4e||!_0x2d78ff||!_0x2d78ff[_0x5c041f(0x191)]?te(_0xe92645,_0x5c041f(0x1c6),{'value':_0x2d78ff,'enumerable':!0x0}):_0xe92645,_0x2d78ff)),Q=class{constructor(_0x187a81,_0x47eeea,_0xfb14bc,_0x112373){var _0x4ccd8d=_0x5c041f;this[_0x4ccd8d(0x143)]=_0x187a81,this['host']=_0x47eeea,this['port']=_0xfb14bc,this[_0x4ccd8d(0x113)]=_0x112373,this[_0x4ccd8d(0x1b9)]=!0x0,this[_0x4ccd8d(0x1cd)]=!0x0,this[_0x4ccd8d(0x17c)]=!0x1,this[_0x4ccd8d(0x107)]=!0x1,this['_inBrowser']=!!this[_0x4ccd8d(0x143)][_0x4ccd8d(0x181)],this[_0x4ccd8d(0x186)]=null,this[_0x4ccd8d(0x112)]=0x0,this[_0x4ccd8d(0x1b1)]=0x14,this['_sendErrorMessage']=this[_0x4ccd8d(0x146)]?_0x4ccd8d(0x19c):_0x4ccd8d(0x121);}async[_0x5c041f(0x130)](){var _0x1b0d94=_0x5c041f;if(this['_WebSocketClass'])return this[_0x1b0d94(0x186)];let _0x4389b0;if(this[_0x1b0d94(0x146)])_0x4389b0=this[_0x1b0d94(0x143)][_0x1b0d94(0x181)];else{if(this[_0x1b0d94(0x143)][_0x1b0d94(0x1a3)]?.['_WebSocket'])_0x4389b0=this[_0x1b0d94(0x143)]['process']?.[_0x1b0d94(0x1bd)];else try{let _0x51e77f=await import(_0x1b0d94(0x1df));_0x4389b0=(await import((await import(_0x1b0d94(0x138)))[_0x1b0d94(0x10c)](_0x51e77f[_0x1b0d94(0x153)](this['nodeModules'],'ws/index.js'))['toString']()))[_0x1b0d94(0x1c6)];}catch{try{_0x4389b0=require(require('path')['join'](this[_0x1b0d94(0x113)],'ws'));}catch{throw new Error(_0x1b0d94(0x128));}}}return this[_0x1b0d94(0x186)]=_0x4389b0,_0x4389b0;}[_0x5c041f(0x1b5)](){var _0x1be63c=_0x5c041f;this['_connecting']||this['_connected']||this['_connectAttemptCount']>=this[_0x1be63c(0x1b1)]||(this[_0x1be63c(0x1cd)]=!0x1,this['_connecting']=!0x0,this[_0x1be63c(0x112)]++,this['_ws']=new Promise((_0x34a063,_0x5b7758)=>{var _0x560b0e=_0x1be63c;this[_0x560b0e(0x130)]()['then'](_0x2eca62=>{var _0x4fd847=_0x560b0e;let _0x2ba1af=new _0x2eca62(_0x4fd847(0x185)+this['host']+':'+this[_0x4fd847(0x17e)]);_0x2ba1af['onerror']=()=>{var _0x2b225e=_0x4fd847;this[_0x2b225e(0x1b9)]=!0x1,this[_0x2b225e(0x135)](_0x2ba1af),this[_0x2b225e(0x175)](),_0x5b7758(new Error('logger\\x20websocket\\x20error'));},_0x2ba1af[_0x4fd847(0x15f)]=()=>{var _0x5e4efc=_0x4fd847;this['_inBrowser']||_0x2ba1af[_0x5e4efc(0x119)]&&_0x2ba1af[_0x5e4efc(0x119)][_0x5e4efc(0x1c8)]&&_0x2ba1af['_socket'][_0x5e4efc(0x1c8)](),_0x34a063(_0x2ba1af);},_0x2ba1af[_0x4fd847(0x12f)]=()=>{var _0x587a15=_0x4fd847;this['_allowedToConnectOnSend']=!0x0,this[_0x587a15(0x135)](_0x2ba1af),this['_attemptToReconnectShortly']();},_0x2ba1af[_0x4fd847(0x176)]=_0x5c46e0=>{var _0x166b3f=_0x4fd847;try{_0x5c46e0&&_0x5c46e0[_0x166b3f(0x1af)]&&this[_0x166b3f(0x146)]&&JSON[_0x166b3f(0x1d2)](_0x5c46e0[_0x166b3f(0x1af)])[_0x166b3f(0x11c)]===_0x166b3f(0x1a7)&&this[_0x166b3f(0x143)][_0x166b3f(0x180)][_0x166b3f(0x1a7)]();}catch{}};})['then'](_0x2a47ca=>(this[_0x560b0e(0x17c)]=!0x0,this[_0x560b0e(0x107)]=!0x1,this['_allowedToConnectOnSend']=!0x1,this[_0x560b0e(0x1b9)]=!0x0,this[_0x560b0e(0x112)]=0x0,_0x2a47ca))[_0x560b0e(0x13f)](_0x449b17=>(this['_connected']=!0x1,this[_0x560b0e(0x107)]=!0x1,_0x5b7758(new Error(_0x560b0e(0x1ce)+(_0x449b17&&_0x449b17[_0x560b0e(0x155)])))));}));}[_0x5c041f(0x135)](_0x11dfe2){var _0x35b03a=_0x5c041f;this[_0x35b03a(0x17c)]=!0x1,this['_connecting']=!0x1;try{_0x11dfe2['onclose']=null,_0x11dfe2[_0x35b03a(0x1c9)]=null,_0x11dfe2['onopen']=null;}catch{}try{_0x11dfe2[_0x35b03a(0x15d)]<0x2&&_0x11dfe2[_0x35b03a(0x13c)]();}catch{}}[_0x5c041f(0x175)](){var _0x31aeaf=_0x5c041f;clearTimeout(this[_0x31aeaf(0x1d0)]),!(this[_0x31aeaf(0x112)]>=this[_0x31aeaf(0x1b1)])&&(this[_0x31aeaf(0x1d0)]=setTimeout(()=>{var _0x395757=_0x31aeaf;this[_0x395757(0x17c)]||this['_connecting']||(this['_connectToHostNow'](),this[_0x395757(0x156)]?.[_0x395757(0x13f)](()=>this['_attemptToReconnectShortly']()));},0x1f4),this[_0x31aeaf(0x1d0)][_0x31aeaf(0x1c8)]&&this[_0x31aeaf(0x1d0)][_0x31aeaf(0x1c8)]());}async['send'](_0x353d6f){var _0x36feac=_0x5c041f;try{if(!this[_0x36feac(0x1b9)])return;this[_0x36feac(0x1cd)]&&this[_0x36feac(0x1b5)](),(await this[_0x36feac(0x156)])['send'](JSON[_0x36feac(0x183)](_0x353d6f));}catch(_0xea0863){console[_0x36feac(0x137)](this[_0x36feac(0x159)]+':\\x20'+(_0xea0863&&_0xea0863[_0x36feac(0x155)])),this[_0x36feac(0x1b9)]=!0x1,this[_0x36feac(0x175)]();}}};function V(_0x316ec2,_0x37b6b9,_0x242e78,_0x2a8d2f,_0x23fccf){var _0x12a29b=_0x5c041f;let _0xd77357=_0x242e78[_0x12a29b(0x1cc)](',')['map'](_0xe82dc7=>{var _0x319735=_0x12a29b;try{_0x316ec2[_0x319735(0x1d6)]||((_0x23fccf===_0x319735(0x140)||_0x23fccf===_0x319735(0x1cf)||_0x23fccf===_0x319735(0x1dd))&&(_0x23fccf+=_0x316ec2['process']?.[_0x319735(0x168)]?.['node']?_0x319735(0x1a1):_0x319735(0x150)),_0x316ec2[_0x319735(0x1d6)]={'id':+new Date(),'tool':_0x23fccf});let _0x16f072=new Q(_0x316ec2,_0x37b6b9,_0xe82dc7,_0x2a8d2f);return _0x16f072[_0x319735(0x1b0)]['bind'](_0x16f072);}catch(_0x5c7fa8){return console[_0x319735(0x137)](_0x319735(0x10a),_0x5c7fa8&&_0x5c7fa8[_0x319735(0x155)]),()=>{};}});return _0x502d2e=>_0xd77357[_0x12a29b(0x1ab)](_0x43bc6b=>_0x43bc6b(_0x502d2e));}function H(_0x5af7b2){var _0x44da05=_0x5c041f;let _0x4d0c7c=function(_0x2df01d,_0x18687f){return _0x18687f-_0x2df01d;},_0x5b3ffd;if(_0x5af7b2['performance'])_0x5b3ffd=function(){var _0x18cc82=_0x4cb1;return _0x5af7b2[_0x18cc82(0x187)][_0x18cc82(0x1b8)]();};else{if(_0x5af7b2[_0x44da05(0x1a3)]&&_0x5af7b2[_0x44da05(0x1a3)]['hrtime'])_0x5b3ffd=function(){var _0x36a33e=_0x44da05;return _0x5af7b2['process'][_0x36a33e(0x104)]();},_0x4d0c7c=function(_0x17a6ca,_0x1ffd49){return 0x3e8*(_0x1ffd49[0x0]-_0x17a6ca[0x0])+(_0x1ffd49[0x1]-_0x17a6ca[0x1])/0xf4240;};else try{let {performance:_0x280329}=require('perf_hooks');_0x5b3ffd=function(){return _0x280329['now']();};}catch{_0x5b3ffd=function(){return+new Date();};}}return{'elapsed':_0x4d0c7c,'timeStamp':_0x5b3ffd,'now':()=>Date['now']()};}function X(_0x12e8bd,_0x14d6a9,_0xacee0b){var _0x30debf=_0x5c041f;if(_0x12e8bd[_0x30debf(0x14a)]!==void 0x0)return _0x12e8bd[_0x30debf(0x14a)];let _0x3a35d6=_0x12e8bd[_0x30debf(0x1a3)]?.[_0x30debf(0x168)]?.[_0x30debf(0x1da)];return _0x3a35d6&&_0xacee0b===_0x30debf(0x147)?_0x12e8bd['_consoleNinjaAllowedToStart']=!0x1:_0x12e8bd[_0x30debf(0x14a)]=_0x3a35d6||!_0x14d6a9||_0x12e8bd[_0x30debf(0x180)]?.[_0x30debf(0x13b)]&&_0x14d6a9[_0x30debf(0x18d)](_0x12e8bd[_0x30debf(0x180)][_0x30debf(0x13b)]),_0x12e8bd[_0x30debf(0x14a)];}function _0x382e(){var _0x3f78a3=['_setNodeExpressionPath','location','WebSocket','bigint','stringify','substr','ws://','_WebSocketClass','performance','stackTraceLimit','type','1.0.0','_console_ninja','_isUndefined','includes','[object\\x20BigInt]','autoExpandMaxDepth','timeEnd','__es'+'Module','parent','_type','635201aILuEg','Map','_setNodeQueryPath','call',[\"localhost\",\"127.0.0.1\",\"example.cypress.io\",\"AspireA15-43\",\"192.168.56.1\",\"192.168.1.73\"],'NEGATIVE_INFINITY','_undefined','webpack','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20refreshing\\x20the\\x20page\\x20may\\x20help','disabledLog','reduceLimits','_getOwnPropertyNames','280CWoCPm','\\x20server','hasOwnProperty','process','HTMLAllCollection','[object\\x20Set]','console','reload','54LRIPsv','argumentResolutionError','value','forEach','push','_property','_treeNodePropertiesAfterFullValue','data','send','_maxConnectAttemptCount','935776dwgaDu','sortProps','64072xQAqIr','_connectToHostNow','log','autoExpand','now','_allowedToSend','slice','count','negativeInfinity','_WebSocket','constructor','hits','_getOwnPropertyDescriptor','date','_isPrimitiveType','_addFunctionsNode','root_exp','function','default','valueOf','unref','onerror','cappedElements','number','split','_allowedToConnectOnSend','failed\\x20to\\x20connect\\x20to\\x20host:\\x20','remix','_reconnectTimeout','object','parse','enumerable','_cleanNode','_quotedRegExp','_console_ninja_session','','_capIfString','Set','node','[object\\x20Map]','_isPrimitiveWrapperType','astro','replace','path','elements','concat','[object\\x20Array]','undefined','_blacklistedProperty','match','root_exp_id','_isNegativeZero','hrtime','String','_numberRegExp','_connecting','current','_keyStrRegExp','logger\\x20failed\\x20to\\x20connect\\x20to\\x20host','_setNodeId','pathToFileURL','level','Number','autoExpandPreviousObjects','name','serialize','_connectAttemptCount','nodeModules','RegExp','_propertyName','trace','expressionsToEvaluate','...','_socket','indexOf','_addLoadNode','method','autoExpandPropertyCount','unshift','props','_p_length','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20restarting\\x20the\\x20process\\x20may\\x20help','capped','length','127.0.0.1','pop','array','_treeNodePropertiesBeforeFullValue','failed\\x20to\\x20find\\x20and\\x20load\\x20WebSocket','isExpressionToEvaluate','_addProperty','error','totalStrLength','autoExpandLimit','negativeZero','onclose','getWebSocketClass','_regExpToString','isArray',':logPointId:','_setNodePermissions','_disposeWebsocket','7576168RoOoLU','warn','url','getOwnPropertySymbols','_hasSetOnItsPath','hostname','close','_additionalMetadata','strLength','catch','next.js','rootExpression','getOwnPropertyDescriptor','global','symbol','boolean','_inBrowser','nuxt','time','[object\\x20Date]','_consoleNinjaAllowedToStart','depth','Error','positiveInfinity','string','prototype','\\x20browser','_addObjectProperty','_p_','join','_sortProps','message','_ws','_isMap','noFunctions','_sendErrorMessage','_Symbol','_setNodeExpandableState','getOwnPropertyNames','readyState','_objectToString','onopen','61934','_hasMapOnItsPath','elapsed','index','nan','resolveGetters','test','_HTMLAllCollection','versions','_setNodeLabel','null','toLowerCase','_isSet','_dateToString','1039862BHuYnR','disabledTrace','1272669ZnImvB','expId','_isArray','unknown',\"c:\\\\Users\\\\Donov\\\\.vscode\\\\extensions\\\\wallabyjs.console-ninja-0.0.154\\\\node_modules\",'_attemptToReconnectShortly','onmessage','Symbol','toString','19315575hkRJHr','_processTreeNodeResult','allStrLength','_connected','1687236147317','port'];_0x382e=function(){return _0x3f78a3;};return _0x382e();}((_0x5b4790,_0x458f21,_0x149466,_0x506ad4,_0x4f07aa,_0x3fd8d0,_0x20a513,_0x2e806b,_0x2df5e3)=>{var _0x27b5f4=_0x5c041f;if(_0x5b4790['_console_ninja'])return _0x5b4790['_console_ninja'];if(!X(_0x5b4790,_0x2e806b,_0x4f07aa))return _0x5b4790[_0x27b5f4(0x18b)]={'consoleLog':()=>{},'consoleTrace':()=>{},'consoleTime':()=>{},'consoleTimeEnd':()=>{},'autoLog':()=>{},'autoTrace':()=>{},'autoTime':()=>{},'autoTimeEnd':()=>{}},_0x5b4790[_0x27b5f4(0x18b)];let _0x538d0c={'props':0x64,'elements':0x64,'strLength':0x400*0x32,'totalStrLength':0x400*0x32,'autoExpandLimit':0x1388,'autoExpandMaxDepth':0xa},_0x5df0c1={'props':0x5,'elements':0x5,'strLength':0x100,'totalStrLength':0x100*0x3,'autoExpandLimit':0x1e,'autoExpandMaxDepth':0x2},_0xe984aa=H(_0x5b4790),_0x272fdc=_0xe984aa[_0x27b5f4(0x162)],_0x4d049a=_0xe984aa['timeStamp'],_0x2f3f4d=_0xe984aa['now'],_0xe1c80c={'hits':{},'ts':{}},_0x3d77ad=_0x1f3b96=>{_0xe1c80c['ts'][_0x1f3b96]=_0x4d049a();},_0xe06796=(_0x13f02a,_0x2be50f)=>{let _0x40e934=_0xe1c80c['ts'][_0x2be50f];if(delete _0xe1c80c['ts'][_0x2be50f],_0x40e934){let _0x5274bc=_0x272fdc(_0x40e934,_0x4d049a());_0x4b1f73(_0x4ef4d5('time',_0x13f02a,_0x2f3f4d(),_0x5ef367,[_0x5274bc],_0x2be50f));}},_0x47ca51=_0x35ae2c=>_0x568830=>{var _0x5cbfae=_0x27b5f4;try{_0x3d77ad(_0x568830),_0x35ae2c(_0x568830);}finally{_0x5b4790[_0x5cbfae(0x1a6)]['time']=_0x35ae2c;}},_0x34454b=_0x46ef29=>_0x2cac3c=>{var _0x4e0ff3=_0x27b5f4;try{let [_0x38e816,_0xa70aed]=_0x2cac3c[_0x4e0ff3(0x1cc)](_0x4e0ff3(0x133));_0xe06796(_0xa70aed,_0x38e816),_0x46ef29(_0x38e816);}finally{_0x5b4790['console'][_0x4e0ff3(0x190)]=_0x46ef29;}};_0x5b4790['_console_ninja']={'consoleLog':(_0xbf4b2a,_0x4ee11d)=>{var _0x27c615=_0x27b5f4;_0x5b4790[_0x27c615(0x1a6)][_0x27c615(0x1b6)][_0x27c615(0x110)]!==_0x27c615(0x19d)&&_0x4b1f73(_0x4ef4d5(_0x27c615(0x1b6),_0xbf4b2a,_0x2f3f4d(),_0x5ef367,_0x4ee11d));},'consoleTrace':(_0x380929,_0x5c69db)=>{var _0x2e9541=_0x27b5f4;_0x5b4790[_0x2e9541(0x1a6)][_0x2e9541(0x1b6)][_0x2e9541(0x110)]!==_0x2e9541(0x16f)&&_0x4b1f73(_0x4ef4d5(_0x2e9541(0x116),_0x380929,_0x2f3f4d(),_0x5ef367,_0x5c69db));},'consoleTime':()=>{var _0xac082f=_0x27b5f4;_0x5b4790[_0xac082f(0x1a6)][_0xac082f(0x148)]=_0x47ca51(_0x5b4790[_0xac082f(0x1a6)][_0xac082f(0x148)]);},'consoleTimeEnd':()=>{var _0x3a096b=_0x27b5f4;_0x5b4790['console'][_0x3a096b(0x190)]=_0x34454b(_0x5b4790[_0x3a096b(0x1a6)][_0x3a096b(0x190)]);},'autoLog':(_0x400d6e,_0x1ef64c)=>{_0x4b1f73(_0x4ef4d5('log',_0x1ef64c,_0x2f3f4d(),_0x5ef367,[_0x400d6e]));},'autoTrace':(_0x5e343b,_0x2b5d86)=>{var _0x53ff97=_0x27b5f4;_0x4b1f73(_0x4ef4d5(_0x53ff97(0x116),_0x2b5d86,_0x2f3f4d(),_0x5ef367,[_0x5e343b]));},'autoTime':(_0x555514,_0x466fce,_0x7d1fbf)=>{_0x3d77ad(_0x7d1fbf);},'autoTimeEnd':(_0x596063,_0x24d50a,_0x257617)=>{_0xe06796(_0x24d50a,_0x257617);}};let _0x4b1f73=V(_0x5b4790,_0x458f21,_0x149466,_0x506ad4,_0x4f07aa),_0x5ef367=_0x5b4790['_console_ninja_session'];class _0x7302f2{constructor(){var _0x2530cf=_0x27b5f4;this[_0x2530cf(0x109)]=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/,this[_0x2530cf(0x106)]=/^(0|[1-9][0-9]*)$/,this[_0x2530cf(0x1d5)]=/'([^\\\\']|\\\\')*'/,this[_0x2530cf(0x19a)]=_0x5b4790[_0x2530cf(0x1e3)],this[_0x2530cf(0x167)]=_0x5b4790[_0x2530cf(0x1a4)],this[_0x2530cf(0x1c0)]=Object[_0x2530cf(0x142)],this[_0x2530cf(0x19f)]=Object['getOwnPropertyNames'],this[_0x2530cf(0x15a)]=_0x5b4790[_0x2530cf(0x177)],this[_0x2530cf(0x131)]=RegExp[_0x2530cf(0x14f)][_0x2530cf(0x178)],this['_dateToString']=Date['prototype'][_0x2530cf(0x178)];}[_0x27b5f4(0x111)](_0x4c4a88,_0x2bf3b0,_0x363f5d,_0x49674b){var _0x377020=_0x27b5f4,_0x277dde=this,_0x2bc8b0=_0x363f5d['autoExpand'];function _0x41b795(_0x639564,_0x42158d,_0x6a91ba){var _0x49c916=_0x4cb1;_0x42158d[_0x49c916(0x189)]=_0x49c916(0x173),_0x42158d[_0x49c916(0x12b)]=_0x639564['message'],_0x15be58=_0x6a91ba['node'][_0x49c916(0x108)],_0x6a91ba[_0x49c916(0x1da)][_0x49c916(0x108)]=_0x42158d,_0x277dde[_0x49c916(0x127)](_0x42158d,_0x6a91ba);}if(_0x2bf3b0&&_0x2bf3b0[_0x377020(0x1a9)])_0x41b795(_0x2bf3b0,_0x4c4a88,_0x363f5d);else try{_0x363f5d[_0x377020(0x10d)]++,_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d[_0x377020(0x10f)]['push'](_0x2bf3b0);var _0x18fcbd,_0x433fb1,_0x474096,_0x5d1925,_0x4376b6=[],_0x410b80=[],_0x1c2cde,_0x4e4ecd=this[_0x377020(0x193)](_0x2bf3b0),_0x4ab547=_0x4e4ecd==='array',_0x1715f4=!0x1,_0x2b510e=_0x4e4ecd==='function',_0x33450e=this[_0x377020(0x1c2)](_0x4e4ecd),_0x1a4f47=this[_0x377020(0x1dc)](_0x4e4ecd),_0x51c872=_0x33450e||_0x1a4f47,_0x5bab85={},_0xeee57b=0x0,_0x3447ef=!0x1,_0x15be58,_0x2144f8=/^(([1-9]{1}[0-9]*)|0)$/;if(_0x363f5d[_0x377020(0x14b)]){if(_0x4ab547){if(_0x433fb1=_0x2bf3b0[_0x377020(0x123)],_0x433fb1>_0x363f5d['elements']){for(_0x474096=0x0,_0x5d1925=_0x363f5d[_0x377020(0x1e0)],_0x18fcbd=_0x474096;_0x18fcbd<_0x5d1925;_0x18fcbd++)_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x12a)](_0x4376b6,_0x2bf3b0,_0x4e4ecd,_0x18fcbd,_0x363f5d));_0x4c4a88[_0x377020(0x1ca)]=!0x0;}else{for(_0x474096=0x0,_0x5d1925=_0x433fb1,_0x18fcbd=_0x474096;_0x18fcbd<_0x5d1925;_0x18fcbd++)_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x12a)](_0x4376b6,_0x2bf3b0,_0x4e4ecd,_0x18fcbd,_0x363f5d));}_0x363f5d[_0x377020(0x11d)]+=_0x410b80[_0x377020(0x123)];}if(!(_0x4e4ecd===_0x377020(0x16a)||_0x4e4ecd===_0x377020(0x1e3))&&!_0x33450e&&_0x4e4ecd!==_0x377020(0x105)&&_0x4e4ecd!=='Buffer'&&_0x4e4ecd!==_0x377020(0x182)){var _0x42c5c6=_0x49674b[_0x377020(0x11f)]||_0x363f5d[_0x377020(0x11f)];if(this[_0x377020(0x16c)](_0x2bf3b0)?(_0x18fcbd=0x0,_0x2bf3b0[_0x377020(0x1ab)](function(_0x387777){var _0x5be22f=_0x377020;if(_0xeee57b++,_0x363f5d[_0x5be22f(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;return;}if(!_0x363f5d[_0x5be22f(0x129)]&&_0x363f5d[_0x5be22f(0x1b7)]&&_0x363f5d[_0x5be22f(0x11d)]>_0x363f5d[_0x5be22f(0x12d)]){_0x3447ef=!0x0;return;}_0x410b80[_0x5be22f(0x1ac)](_0x277dde[_0x5be22f(0x12a)](_0x4376b6,_0x2bf3b0,_0x5be22f(0x1d9),_0x18fcbd++,_0x363f5d,function(_0x2a9834){return function(){return _0x2a9834;};}(_0x387777)));})):this['_isMap'](_0x2bf3b0)&&_0x2bf3b0[_0x377020(0x1ab)](function(_0x316b01,_0x47e14e){var _0x48f2d9=_0x377020;if(_0xeee57b++,_0x363f5d[_0x48f2d9(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;return;}if(!_0x363f5d[_0x48f2d9(0x129)]&&_0x363f5d[_0x48f2d9(0x1b7)]&&_0x363f5d[_0x48f2d9(0x11d)]>_0x363f5d[_0x48f2d9(0x12d)]){_0x3447ef=!0x0;return;}var _0x3e2f2f=_0x47e14e[_0x48f2d9(0x178)]();_0x3e2f2f[_0x48f2d9(0x123)]>0x64&&(_0x3e2f2f=_0x3e2f2f[_0x48f2d9(0x1ba)](0x0,0x64)+_0x48f2d9(0x118)),_0x410b80[_0x48f2d9(0x1ac)](_0x277dde[_0x48f2d9(0x12a)](_0x4376b6,_0x2bf3b0,_0x48f2d9(0x195),_0x3e2f2f,_0x363f5d,function(_0x2f0290){return function(){return _0x2f0290;};}(_0x316b01)));}),!_0x1715f4){try{for(_0x1c2cde in _0x2bf3b0)if(!(_0x4ab547&&_0x2144f8[_0x377020(0x166)](_0x1c2cde))&&!this[_0x377020(0x1e4)](_0x2bf3b0,_0x1c2cde,_0x363f5d)){if(_0xeee57b++,_0x363f5d[_0x377020(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;break;}if(!_0x363f5d['isExpressionToEvaluate']&&_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d['autoExpandPropertyCount']>_0x363f5d[_0x377020(0x12d)]){_0x3447ef=!0x0;break;}_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x151)](_0x4376b6,_0x5bab85,_0x2bf3b0,_0x4e4ecd,_0x1c2cde,_0x363f5d));}}catch{}if(_0x5bab85[_0x377020(0x120)]=!0x0,_0x2b510e&&(_0x5bab85['_p_name']=!0x0),!_0x3447ef){var _0x591c0f=[][_0x377020(0x1e1)](this[_0x377020(0x19f)](_0x2bf3b0))['concat'](this['_getOwnPropertySymbols'](_0x2bf3b0));for(_0x18fcbd=0x0,_0x433fb1=_0x591c0f['length'];_0x18fcbd<_0x433fb1;_0x18fcbd++)if(_0x1c2cde=_0x591c0f[_0x18fcbd],!(_0x4ab547&&_0x2144f8[_0x377020(0x166)](_0x1c2cde[_0x377020(0x178)]()))&&!this['_blacklistedProperty'](_0x2bf3b0,_0x1c2cde,_0x363f5d)&&!_0x5bab85['_p_'+_0x1c2cde[_0x377020(0x178)]()]){if(_0xeee57b++,_0x363f5d[_0x377020(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;break;}if(!_0x363f5d[_0x377020(0x129)]&&_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d[_0x377020(0x11d)]>_0x363f5d[_0x377020(0x12d)]){_0x3447ef=!0x0;break;}_0x410b80[_0x377020(0x1ac)](_0x277dde['_addObjectProperty'](_0x4376b6,_0x5bab85,_0x2bf3b0,_0x4e4ecd,_0x1c2cde,_0x363f5d));}}}}}if(_0x4c4a88[_0x377020(0x189)]=_0x4e4ecd,_0x51c872?(_0x4c4a88[_0x377020(0x1aa)]=_0x2bf3b0[_0x377020(0x1c7)](),this[_0x377020(0x1d8)](_0x4e4ecd,_0x4c4a88,_0x363f5d,_0x49674b)):_0x4e4ecd===_0x377020(0x1c1)?_0x4c4a88[_0x377020(0x1aa)]=this[_0x377020(0x16d)][_0x377020(0x197)](_0x2bf3b0):_0x4e4ecd==='bigint'?_0x4c4a88[_0x377020(0x1aa)]=_0x2bf3b0[_0x377020(0x178)]():_0x4e4ecd===_0x377020(0x114)?_0x4c4a88['value']=this['_regExpToString'][_0x377020(0x197)](_0x2bf3b0):_0x4e4ecd===_0x377020(0x144)&&this['_Symbol']?_0x4c4a88[_0x377020(0x1aa)]=this[_0x377020(0x15a)][_0x377020(0x14f)]['toString']['call'](_0x2bf3b0):!_0x363f5d[_0x377020(0x14b)]&&!(_0x4e4ecd===_0x377020(0x16a)||_0x4e4ecd===_0x377020(0x1e3))&&(delete _0x4c4a88[_0x377020(0x1aa)],_0x4c4a88[_0x377020(0x122)]=!0x0),_0x3447ef&&(_0x4c4a88['cappedProps']=!0x0),_0x15be58=_0x363f5d[_0x377020(0x1da)][_0x377020(0x108)],_0x363f5d['node'][_0x377020(0x108)]=_0x4c4a88,this['_treeNodePropertiesBeforeFullValue'](_0x4c4a88,_0x363f5d),_0x410b80[_0x377020(0x123)]){for(_0x18fcbd=0x0,_0x433fb1=_0x410b80[_0x377020(0x123)];_0x18fcbd<_0x433fb1;_0x18fcbd++)_0x410b80[_0x18fcbd](_0x18fcbd);}_0x4376b6[_0x377020(0x123)]&&(_0x4c4a88['props']=_0x4376b6);}catch(_0x1fa9b2){_0x41b795(_0x1fa9b2,_0x4c4a88,_0x363f5d);}return this[_0x377020(0x13d)](_0x2bf3b0,_0x4c4a88),this[_0x377020(0x1ae)](_0x4c4a88,_0x363f5d),_0x363f5d[_0x377020(0x1da)]['current']=_0x15be58,_0x363f5d['level']--,_0x363f5d[_0x377020(0x1b7)]=_0x2bc8b0,_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d['autoExpandPreviousObjects'][_0x377020(0x125)](),_0x4c4a88;}['_getOwnPropertySymbols'](_0xb5846){var _0x52041f=_0x27b5f4;return Object['getOwnPropertySymbols']?Object[_0x52041f(0x139)](_0xb5846):[];}[_0x27b5f4(0x16c)](_0x5282f4){var _0x3228cc=_0x27b5f4;return!!(_0x5282f4&&_0x5b4790[_0x3228cc(0x1d9)]&&this[_0x3228cc(0x15e)](_0x5282f4)===_0x3228cc(0x1a5)&&_0x5282f4[_0x3228cc(0x1ab)]);}['_blacklistedProperty'](_0x3e1e02,_0x19f7da,_0x2ed27d){var _0x3d5f32=_0x27b5f4;return _0x2ed27d[_0x3d5f32(0x158)]?typeof _0x3e1e02[_0x19f7da]==_0x3d5f32(0x1c5):!0x1;}[_0x27b5f4(0x193)](_0x1d8bce){var _0xf22702=_0x27b5f4,_0x8f3c98='';return _0x8f3c98=typeof _0x1d8bce,_0x8f3c98==='object'?this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x1e2)?_0x8f3c98=_0xf22702(0x126):this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x149)?_0x8f3c98=_0xf22702(0x1c1):this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x18e)?_0x8f3c98='bigint':_0x1d8bce===null?_0x8f3c98=_0xf22702(0x16a):_0x1d8bce['constructor']&&(_0x8f3c98=_0x1d8bce[_0xf22702(0x1be)][_0xf22702(0x110)]||_0x8f3c98):_0x8f3c98===_0xf22702(0x1e3)&&this['_HTMLAllCollection']&&_0x1d8bce instanceof this['_HTMLAllCollection']&&(_0x8f3c98='HTMLAllCollection'),_0x8f3c98;}['_objectToString'](_0x362d66){var _0x3c798c=_0x27b5f4;return Object[_0x3c798c(0x14f)][_0x3c798c(0x178)][_0x3c798c(0x197)](_0x362d66);}['_isPrimitiveType'](_0x291f7d){var _0x5359d4=_0x27b5f4;return _0x291f7d===_0x5359d4(0x145)||_0x291f7d===_0x5359d4(0x14e)||_0x291f7d==='number';}[_0x27b5f4(0x1dc)](_0x4cbff7){var _0x3ee85a=_0x27b5f4;return _0x4cbff7==='Boolean'||_0x4cbff7===_0x3ee85a(0x105)||_0x4cbff7===_0x3ee85a(0x10e);}['_addProperty'](_0x2378df,_0x35fcbe,_0x1b181f,_0xaf562b,_0xd53cb8,_0x399f00){var _0x452e20=this;return function(_0x144d49){var _0x201876=_0x4cb1,_0x46a7c6=_0xd53cb8[_0x201876(0x1da)][_0x201876(0x108)],_0x3d1f64=_0xd53cb8[_0x201876(0x1da)][_0x201876(0x163)],_0x411984=_0xd53cb8['node'][_0x201876(0x192)];_0xd53cb8[_0x201876(0x1da)][_0x201876(0x192)]=_0x46a7c6,_0xd53cb8['node'][_0x201876(0x163)]=typeof _0xaf562b==_0x201876(0x1cb)?_0xaf562b:_0x144d49,_0x2378df['push'](_0x452e20['_property'](_0x35fcbe,_0x1b181f,_0xaf562b,_0xd53cb8,_0x399f00)),_0xd53cb8[_0x201876(0x1da)][_0x201876(0x192)]=_0x411984,_0xd53cb8['node'][_0x201876(0x163)]=_0x3d1f64;};}[_0x27b5f4(0x151)](_0x447828,_0x14c2cb,_0x2514be,_0x499052,_0x3ac241,_0x50d530,_0x5931a7){var _0x5d6f85=_0x27b5f4,_0x22fac8=this;return _0x14c2cb[_0x5d6f85(0x152)+_0x3ac241[_0x5d6f85(0x178)]()]=!0x0,function(_0x2163ab){var _0x46ef79=_0x5d6f85,_0x4e6994=_0x50d530['node'][_0x46ef79(0x108)],_0x379fad=_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x163)],_0x4648ab=_0x50d530[_0x46ef79(0x1da)]['parent'];_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x192)]=_0x4e6994,_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x163)]=_0x2163ab,_0x447828[_0x46ef79(0x1ac)](_0x22fac8[_0x46ef79(0x1ad)](_0x2514be,_0x499052,_0x3ac241,_0x50d530,_0x5931a7)),_0x50d530[_0x46ef79(0x1da)]['parent']=_0x4648ab,_0x50d530['node']['index']=_0x379fad;};}[_0x27b5f4(0x1ad)](_0x11ba45,_0x2c8472,_0x75afa4,_0xef2682,_0x2e97cf){var _0x5d139e=_0x27b5f4,_0x2f2ead=this;_0x2e97cf||(_0x2e97cf=function(_0x2f3675,_0x36e0f8){return _0x2f3675[_0x36e0f8];});var _0x1d0670=_0x75afa4['toString'](),_0x127b27=_0xef2682['expressionsToEvaluate']||{},_0x3818ef=_0xef2682[_0x5d139e(0x14b)],_0x501535=_0xef2682[_0x5d139e(0x129)];try{var _0x1654e3=this[_0x5d139e(0x157)](_0x11ba45),_0x22d9d0=_0x1d0670;_0x1654e3&&_0x22d9d0[0x0]==='\\x27'&&(_0x22d9d0=_0x22d9d0[_0x5d139e(0x184)](0x1,_0x22d9d0[_0x5d139e(0x123)]-0x2));var _0x10bfe0=_0xef2682[_0x5d139e(0x117)]=_0x127b27[_0x5d139e(0x152)+_0x22d9d0];_0x10bfe0&&(_0xef2682[_0x5d139e(0x14b)]=_0xef2682['depth']+0x1),_0xef2682[_0x5d139e(0x129)]=!!_0x10bfe0;var _0x108f45=typeof _0x75afa4==_0x5d139e(0x144),_0x289b97={'name':_0x108f45||_0x1654e3?_0x1d0670:this[_0x5d139e(0x115)](_0x1d0670)};if(_0x108f45&&(_0x289b97[_0x5d139e(0x144)]=!0x0),!(_0x2c8472===_0x5d139e(0x126)||_0x2c8472===_0x5d139e(0x14c))){var _0x2bf7ad=this[_0x5d139e(0x1c0)](_0x11ba45,_0x75afa4);if(_0x2bf7ad&&(_0x2bf7ad['set']&&(_0x289b97['setter']=!0x0),_0x2bf7ad['get']&&!_0x10bfe0&&!_0xef2682[_0x5d139e(0x165)]))return _0x289b97['getter']=!0x0,this[_0x5d139e(0x17a)](_0x289b97,_0xef2682),_0x289b97;}var _0x1f14f8;try{_0x1f14f8=_0x2e97cf(_0x11ba45,_0x75afa4);}catch(_0x309f6f){return _0x289b97={'name':_0x1d0670,'type':_0x5d139e(0x173),'error':_0x309f6f[_0x5d139e(0x155)]},this['_processTreeNodeResult'](_0x289b97,_0xef2682),_0x289b97;}var _0x19f7d6=this[_0x5d139e(0x193)](_0x1f14f8),_0x21be7b=this[_0x5d139e(0x1c2)](_0x19f7d6);if(_0x289b97[_0x5d139e(0x189)]=_0x19f7d6,_0x21be7b)this['_processTreeNodeResult'](_0x289b97,_0xef2682,_0x1f14f8,function(){var _0x24bfe4=_0x5d139e;_0x289b97[_0x24bfe4(0x1aa)]=_0x1f14f8[_0x24bfe4(0x1c7)](),!_0x10bfe0&&_0x2f2ead[_0x24bfe4(0x1d8)](_0x19f7d6,_0x289b97,_0xef2682,{});});else{var _0x24f667=_0xef2682['autoExpand']&&_0xef2682['level']<_0xef2682[_0x5d139e(0x18f)]&&_0xef2682[_0x5d139e(0x10f)][_0x5d139e(0x11a)](_0x1f14f8)<0x0&&_0x19f7d6!==_0x5d139e(0x1c5)&&_0xef2682[_0x5d139e(0x11d)]<_0xef2682['autoExpandLimit'];_0x24f667||_0xef2682['level']<_0x3818ef||_0x10bfe0?(this[_0x5d139e(0x111)](_0x289b97,_0x1f14f8,_0xef2682,_0x10bfe0||{}),this[_0x5d139e(0x13d)](_0x1f14f8,_0x289b97)):this['_processTreeNodeResult'](_0x289b97,_0xef2682,_0x1f14f8,function(){var _0x55b27e=_0x5d139e;_0x19f7d6===_0x55b27e(0x16a)||_0x19f7d6==='undefined'||(delete _0x289b97[_0x55b27e(0x1aa)],_0x289b97['capped']=!0x0);});}return _0x289b97;}finally{_0xef2682[_0x5d139e(0x117)]=_0x127b27,_0xef2682[_0x5d139e(0x14b)]=_0x3818ef,_0xef2682[_0x5d139e(0x129)]=_0x501535;}}[_0x27b5f4(0x1d8)](_0x345b2b,_0x37826c,_0x493a0b,_0x5bbe39){var _0x41c5d3=_0x27b5f4,_0x4e7ce2=_0x5bbe39[_0x41c5d3(0x13e)]||_0x493a0b[_0x41c5d3(0x13e)];if((_0x345b2b==='string'||_0x345b2b==='String')&&_0x37826c[_0x41c5d3(0x1aa)]){let _0x58e7f0=_0x37826c['value'][_0x41c5d3(0x123)];_0x493a0b[_0x41c5d3(0x17b)]+=_0x58e7f0,_0x493a0b[_0x41c5d3(0x17b)]>_0x493a0b['totalStrLength']?(_0x37826c[_0x41c5d3(0x122)]='',delete _0x37826c[_0x41c5d3(0x1aa)]):_0x58e7f0>_0x4e7ce2&&(_0x37826c[_0x41c5d3(0x122)]=_0x37826c[_0x41c5d3(0x1aa)][_0x41c5d3(0x184)](0x0,_0x4e7ce2),delete _0x37826c[_0x41c5d3(0x1aa)]);}}[_0x27b5f4(0x157)](_0x27e462){var _0x52af29=_0x27b5f4;return!!(_0x27e462&&_0x5b4790[_0x52af29(0x195)]&&this[_0x52af29(0x15e)](_0x27e462)===_0x52af29(0x1db)&&_0x27e462[_0x52af29(0x1ab)]);}['_propertyName'](_0x4009b0){var _0xaac64b=_0x27b5f4;if(_0x4009b0[_0xaac64b(0x1e5)](/^\\d+$/))return _0x4009b0;var _0x3df4b1;try{_0x3df4b1=JSON[_0xaac64b(0x183)](''+_0x4009b0);}catch{_0x3df4b1='\\x22'+this[_0xaac64b(0x15e)](_0x4009b0)+'\\x22';}return _0x3df4b1[_0xaac64b(0x1e5)](/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?_0x3df4b1=_0x3df4b1['substr'](0x1,_0x3df4b1[_0xaac64b(0x123)]-0x2):_0x3df4b1=_0x3df4b1[_0xaac64b(0x1de)](/'/g,'\\x5c\\x27')[_0xaac64b(0x1de)](/\\\\\"/g,'\\x22')[_0xaac64b(0x1de)](/(^\"|\"$)/g,'\\x27'),_0x3df4b1;}['_processTreeNodeResult'](_0x19824d,_0x5c5e8f,_0x1680fa,_0x5b0779){var _0x3d2550=_0x27b5f4;this['_treeNodePropertiesBeforeFullValue'](_0x19824d,_0x5c5e8f),_0x5b0779&&_0x5b0779(),this[_0x3d2550(0x13d)](_0x1680fa,_0x19824d),this[_0x3d2550(0x1ae)](_0x19824d,_0x5c5e8f);}[_0x27b5f4(0x127)](_0x5aff2e,_0x47d2f7){var _0x5cd962=_0x27b5f4;this[_0x5cd962(0x10b)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x196)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x17f)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x134)](_0x5aff2e,_0x47d2f7);}['_setNodeId'](_0x452ae7,_0x297f1b){}[_0x27b5f4(0x196)](_0xece9cb,_0x4e0399){}['_setNodeLabel'](_0x2c0a1b,_0x23ac11){}[_0x27b5f4(0x18c)](_0x41f0d5){var _0x5db41b=_0x27b5f4;return _0x41f0d5===this[_0x5db41b(0x19a)];}[_0x27b5f4(0x1ae)](_0x327dda,_0x2ed747){var _0x28aea0=_0x27b5f4;this['_setNodeLabel'](_0x327dda,_0x2ed747),this[_0x28aea0(0x15b)](_0x327dda),_0x2ed747['sortProps']&&this[_0x28aea0(0x154)](_0x327dda),this[_0x28aea0(0x1c3)](_0x327dda,_0x2ed747),this[_0x28aea0(0x11b)](_0x327dda,_0x2ed747),this[_0x28aea0(0x1d4)](_0x327dda);}[_0x27b5f4(0x13d)](_0x28ed57,_0x2f9ad0){var _0x2f2aa2=_0x27b5f4;try{_0x28ed57&&typeof _0x28ed57[_0x2f2aa2(0x123)]==_0x2f2aa2(0x1cb)&&(_0x2f9ad0[_0x2f2aa2(0x123)]=_0x28ed57[_0x2f2aa2(0x123)]);}catch{}if(_0x2f9ad0[_0x2f2aa2(0x189)]===_0x2f2aa2(0x1cb)||_0x2f9ad0['type']==='Number'){if(isNaN(_0x2f9ad0['value']))_0x2f9ad0[_0x2f2aa2(0x164)]=!0x0,delete _0x2f9ad0['value'];else switch(_0x2f9ad0[_0x2f2aa2(0x1aa)]){case Number['POSITIVE_INFINITY']:_0x2f9ad0[_0x2f2aa2(0x14d)]=!0x0,delete _0x2f9ad0[_0x2f2aa2(0x1aa)];break;case Number[_0x2f2aa2(0x199)]:_0x2f9ad0[_0x2f2aa2(0x1bc)]=!0x0,delete _0x2f9ad0[_0x2f2aa2(0x1aa)];break;case 0x0:this[_0x2f2aa2(0x1e7)](_0x2f9ad0[_0x2f2aa2(0x1aa)])&&(_0x2f9ad0[_0x2f2aa2(0x12e)]=!0x0);break;}}else _0x2f9ad0[_0x2f2aa2(0x189)]===_0x2f2aa2(0x1c5)&&typeof _0x28ed57[_0x2f2aa2(0x110)]=='string'&&_0x28ed57[_0x2f2aa2(0x110)]&&_0x2f9ad0[_0x2f2aa2(0x110)]&&_0x28ed57[_0x2f2aa2(0x110)]!==_0x2f9ad0['name']&&(_0x2f9ad0['funcName']=_0x28ed57[_0x2f2aa2(0x110)]);}[_0x27b5f4(0x1e7)](_0x2ebacd){return 0x1/_0x2ebacd===Number['NEGATIVE_INFINITY'];}[_0x27b5f4(0x154)](_0x33f55f){var _0x2880b5=_0x27b5f4;!_0x33f55f[_0x2880b5(0x11f)]||!_0x33f55f['props'][_0x2880b5(0x123)]||_0x33f55f[_0x2880b5(0x189)]==='array'||_0x33f55f[_0x2880b5(0x189)]===_0x2880b5(0x195)||_0x33f55f[_0x2880b5(0x189)]===_0x2880b5(0x1d9)||_0x33f55f[_0x2880b5(0x11f)]['sort'](function(_0xeb1d3d,_0x1e5ad8){var _0x465665=_0x2880b5,_0x228711=_0xeb1d3d[_0x465665(0x110)][_0x465665(0x16b)](),_0x4a8d2e=_0x1e5ad8[_0x465665(0x110)][_0x465665(0x16b)]();return _0x228711<_0x4a8d2e?-0x1:_0x228711>_0x4a8d2e?0x1:0x0;});}['_addFunctionsNode'](_0x44bb25,_0x246ec6){var _0x22ee2b=_0x27b5f4;if(!(_0x246ec6['noFunctions']||!_0x44bb25[_0x22ee2b(0x11f)]||!_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x123)])){for(var _0xdec3bc=[],_0x3df253=[],_0x3979be=0x0,_0x45594a=_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x123)];_0x3979be<_0x45594a;_0x3979be++){var _0x5162e2=_0x44bb25[_0x22ee2b(0x11f)][_0x3979be];_0x5162e2[_0x22ee2b(0x189)]==='function'?_0xdec3bc[_0x22ee2b(0x1ac)](_0x5162e2):_0x3df253[_0x22ee2b(0x1ac)](_0x5162e2);}if(!(!_0x3df253[_0x22ee2b(0x123)]||_0xdec3bc['length']<=0x1)){_0x44bb25[_0x22ee2b(0x11f)]=_0x3df253;var _0x21a1e2={'functionsNode':!0x0,'props':_0xdec3bc};this[_0x22ee2b(0x10b)](_0x21a1e2,_0x246ec6),this[_0x22ee2b(0x169)](_0x21a1e2,_0x246ec6),this[_0x22ee2b(0x15b)](_0x21a1e2),this[_0x22ee2b(0x134)](_0x21a1e2,_0x246ec6),_0x21a1e2['id']+='\\x20f',_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x11e)](_0x21a1e2);}}}[_0x27b5f4(0x11b)](_0x4447de,_0x39bc80){}[_0x27b5f4(0x15b)](_0x2ad7d8){}[_0x27b5f4(0x172)](_0x21c674){var _0x201530=_0x27b5f4;return Array[_0x201530(0x132)](_0x21c674)||typeof _0x21c674==_0x201530(0x1d1)&&this[_0x201530(0x15e)](_0x21c674)===_0x201530(0x1e2);}['_setNodePermissions'](_0x2c4127,_0x25c7dc){}[_0x27b5f4(0x1d4)](_0x368d9f){var _0x1076c1=_0x27b5f4;delete _0x368d9f['_hasSymbolPropertyOnItsPath'],delete _0x368d9f[_0x1076c1(0x13a)],delete _0x368d9f[_0x1076c1(0x161)];}[_0x27b5f4(0x17f)](_0x3b452d,_0x210ca2){}['_propertyAccessor'](_0x40ae2e){var _0x9d2342=_0x27b5f4;return _0x40ae2e?_0x40ae2e[_0x9d2342(0x1e5)](this[_0x9d2342(0x106)])?'['+_0x40ae2e+']':_0x40ae2e[_0x9d2342(0x1e5)](this['_keyStrRegExp'])?'.'+_0x40ae2e:_0x40ae2e[_0x9d2342(0x1e5)](this['_quotedRegExp'])?'['+_0x40ae2e+']':'[\\x27'+_0x40ae2e+'\\x27]':'';}}let _0x103982=new _0x7302f2();function _0x4ef4d5(_0x447b63,_0x2ac7e6,_0x1a6859,_0x160f8a,_0x430090,_0x134fa9){var _0x27e421=_0x27b5f4;let _0x16431e,_0x4089ff;try{_0x4089ff=_0x4d049a(),_0x16431e=_0xe1c80c[_0x2ac7e6],!_0x16431e||_0x4089ff-_0x16431e['ts']>0x1f4&&_0x16431e[_0x27e421(0x1bb)]&&_0x16431e[_0x27e421(0x148)]/_0x16431e['count']<0x64?(_0xe1c80c[_0x2ac7e6]=_0x16431e={'count':0x0,'time':0x0,'ts':_0x4089ff},_0xe1c80c['hits']={}):_0x4089ff-_0xe1c80c[_0x27e421(0x1bf)]['ts']>0x32&&_0xe1c80c[_0x27e421(0x1bf)]['count']&&_0xe1c80c['hits'][_0x27e421(0x148)]/_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]<0x64&&(_0xe1c80c[_0x27e421(0x1bf)]={});let _0x2f24ca=[],_0x2739a9=_0x16431e[_0x27e421(0x19e)]||_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x19e)]?_0x5df0c1:_0x538d0c,_0x147472=_0x372ec9=>{var _0x4a7838=_0x27e421;let _0x5c2b64={};return _0x5c2b64[_0x4a7838(0x11f)]=_0x372ec9['props'],_0x5c2b64[_0x4a7838(0x1e0)]=_0x372ec9[_0x4a7838(0x1e0)],_0x5c2b64[_0x4a7838(0x13e)]=_0x372ec9[_0x4a7838(0x13e)],_0x5c2b64[_0x4a7838(0x12c)]=_0x372ec9[_0x4a7838(0x12c)],_0x5c2b64[_0x4a7838(0x12d)]=_0x372ec9['autoExpandLimit'],_0x5c2b64['autoExpandMaxDepth']=_0x372ec9[_0x4a7838(0x18f)],_0x5c2b64[_0x4a7838(0x1b3)]=!0x1,_0x5c2b64[_0x4a7838(0x158)]=!_0x2df5e3,_0x5c2b64[_0x4a7838(0x14b)]=0x1,_0x5c2b64[_0x4a7838(0x10d)]=0x0,_0x5c2b64[_0x4a7838(0x171)]=_0x4a7838(0x1e6),_0x5c2b64[_0x4a7838(0x141)]=_0x4a7838(0x1c4),_0x5c2b64['autoExpand']=!0x0,_0x5c2b64['autoExpandPreviousObjects']=[],_0x5c2b64[_0x4a7838(0x11d)]=0x0,_0x5c2b64['resolveGetters']=!0x0,_0x5c2b64[_0x4a7838(0x17b)]=0x0,_0x5c2b64[_0x4a7838(0x1da)]={'current':void 0x0,'parent':void 0x0,'index':0x0},_0x5c2b64;};for(var _0x1e1001=0x0;_0x1e1001<_0x430090[_0x27e421(0x123)];_0x1e1001++)_0x2f24ca[_0x27e421(0x1ac)](_0x103982['serialize']({'timeNode':_0x447b63===_0x27e421(0x148)||void 0x0},_0x430090[_0x1e1001],_0x147472(_0x2739a9),{}));if(_0x447b63==='trace'){let _0x58fe7f=Error['stackTraceLimit'];try{Error['stackTraceLimit']=0x1/0x0,_0x2f24ca[_0x27e421(0x1ac)](_0x103982[_0x27e421(0x111)]({'stackNode':!0x0},new Error()['stack'],_0x147472(_0x2739a9),{'strLength':0x1/0x0}));}finally{Error[_0x27e421(0x188)]=_0x58fe7f;}}return{'method':_0x27e421(0x1b6),'version':_0x3fd8d0,'args':[{'ts':_0x1a6859,'session':_0x160f8a,'args':_0x2f24ca,'id':_0x2ac7e6,'context':_0x134fa9}]};}catch(_0xe8878a){return{'method':_0x27e421(0x1b6),'version':_0x3fd8d0,'args':[{'ts':_0x1a6859,'session':_0x160f8a,'args':[{'type':'unknown','error':_0xe8878a&&_0xe8878a[_0x27e421(0x155)]}],'id':_0x2ac7e6,'context':_0x134fa9}]};}finally{try{if(_0x16431e&&_0x4089ff){let _0x956241=_0x4d049a();_0x16431e[_0x27e421(0x1bb)]++,_0x16431e[_0x27e421(0x148)]+=_0x272fdc(_0x4089ff,_0x956241),_0x16431e['ts']=_0x956241,_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]++,_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x148)]+=_0x272fdc(_0x4089ff,_0x956241),_0xe1c80c['hits']['ts']=_0x956241,(_0x16431e[_0x27e421(0x1bb)]>0x32||_0x16431e['time']>0x64)&&(_0x16431e[_0x27e421(0x19e)]=!0x0),(_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]>0x3e8||_0xe1c80c['hits'][_0x27e421(0x148)]>0x12c)&&(_0xe1c80c[_0x27e421(0x1bf)]['reduceLimits']=!0x0);}}catch{}}}return _0x5b4790[_0x27b5f4(0x18b)];})(globalThis,_0x5c041f(0x124),_0x5c041f(0x160),_0x5c041f(0x174),_0x5c041f(0x19b),_0x5c041f(0x18a),_0x5c041f(0x17d),_0x5c041f(0x198),_0x5c041f(0x1d7));")}catch{}})().consoleLog(n,e)}catch{}return e}("993e9323_0","Nuevo comentario agregado:",t))}ngOnInit(){$2().accessToken=UF_mapbox_accessToken,new($2().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[-74.5,40],zoom:9})}changeBackgroundColor(){this.isActive=!this.isActive}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=zr({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&Xt(0,"app-header")},dependencies:[sue],encapsulation:2}),n})();let pue=(()=>{class n{Hablar(){const t=document.getElementById("1")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(t));const i=document.getElementById("2")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(i));const r=document.getElementById("3")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(r));const s=document.getElementById("4")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(s));const u=document.getElementById("5")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(u));const _=document.getElementById("6")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(_));const y=document.getElementById("7")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(y))}Pausar(){speechSynthesis.pause()}Resumen(){speechSynthesis.resume()}EnlacesB(){const t=document.getElementById("4"),i=document.getElementById("5"),r=document.getElementById("6"),s=document.getElementById("7");t.style.backgroundColor="black",t.style.color="yellow",i.style.backgroundColor="black",i.style.color="yellow",r.style.backgroundColor="black",r.style.color="yellow",s.style.backgroundColor="black",s.style.color="yellow"}EnlacesA(){const t=document.getElementById("4"),i=document.getElementById("5"),r=document.getElementById("6"),s=document.getElementById("7");t.style.backgroundColor="white",t.style.color="blue",i.style.backgroundColor="white",i.style.color="blue",r.style.backgroundColor="white",r.style.color="blue",s.style.backgroundColor="white",s.style.color="blue"}ContrasteA(){const t=document.getElementById("home");t.style.backgroundColor="black",t.style.color="yellow"}ContrasteB(){const t=document.getElementById("home");t.style.backgroundColor="white",t.style.color="black"}ZoomMas(){var i=new Array("xx-small","x-small","small","medium","large","x-large","xx-large");document.getElementById("home").style.fontSize=i[5]}ZoomMenos(){var i=new Array("xx-small","x-small","small","medium","large","x-large","xx-large");document.getElementById("home").style.fontSize=i[1]}ZoomNormal(){var i=new Array("xx-small","x-small","small","medium","large","x-large","xx-large");document.getElementById("home").style.fontSize=i[3]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=zr({type:n,selectors:[["app-home"]],decls:88,vars:0,consts:[["id","home",1,"home"],[1,"swiper","home-slider"],[1,"swiper-wrapper"],[1,"box","swiper-slide"],["src","./assets/images/home-img-1.jpg","alt",""],[1,"flex"],["id","1"],["src","/assets/images/home-img-2.jpg","alt",""],["id","2"],["src","../assets/images/home-img-3.jpg","alt",""],["id","3"],[1,"footer"],[1,"box-container"],[1,"box"],["href",""],[1,"fas","fa-phone"],["href","mailto:axolotl@paradise.com"],[1,"fas","fa-envelope"],["href","#","id","4"],[1,"fab","fa-facebook-f"],["href","#","id","5"],[1,"fab","fa-twitter"],["href","#","id","6"],[1,"fab","fa-instagram"],["href","#","id","7"],[1,"fab","fa-linkedin"],["id","ACC",2,"text-align","center","color","#850E35"],["type","button",2,"width","100px","margin","2px",3,"click"],["type","button",2,"width","150px","margin","2px",3,"click"],["type","button",2,"margin","2px",3,"click"],["href","#","type","button"]],template:function(t,i){1&t&&(ve(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),Xt(4,"img",4),ve(5,"div",5)(6,"h3",6),Pe(7,"Habitaciones de lujo"),Ce()()(),ve(8,"div",3),Xt(9,"img",7),ve(10,"div",5)(11,"h3",8),Pe(12,"Entretenimiento"),Ce()()(),ve(13,"div",3),Xt(14,"img",9),ve(15,"div",5)(16,"h3",10),Pe(17,"Lujosas instalaciones"),Ce()()()()()(),ve(18,"section",11)(19,"div",12)(20,"div",13)(21,"a",14),Xt(22,"i",15),Pe(23," +123-456-7890"),Ce(),ve(24,"a",14),Xt(25,"i",15),Pe(26," +111-222-3333"),Ce(),ve(27,"a",16),Xt(28,"i",17),Pe(29," Axolotl@paradise.com"),Ce()(),ve(30,"div",13)(31,"a",18),Pe(32," facebook "),Xt(33,"i",19),Ce(),ve(34,"a",20),Pe(35," twitter "),Xt(36,"i",21),Ce(),ve(37,"a",22),Pe(38," instagram "),Xt(39,"i",23),Ce(),ve(40,"a",24),Pe(41," linkedin "),Xt(42,"i",25),Ce()()()(),Xt(43,"br")(44,"br"),ve(45,"h5",26)(46,"h4"),Pe(47," - Accesibilidad - "),Ce(),Xt(48,"br"),ve(49,"li")(50,"h6"),Pe(51,"OPCIONES DE LECTOR DE VOZ:"),Ce(),ve(52,"button",27),_n("click",function(){return i.Hablar()}),Pe(53," Activar "),Ce(),ve(54,"button",27),_n("click",function(){return i.Pausar()}),Pe(55," Pausar "),Ce(),ve(56,"button",27),_n("click",function(){return i.Resumen()}),Pe(57," Continuar "),Ce()(),Xt(58,"br"),ve(59,"li")(60,"h6"),Pe(61,"OPCIONES DE ZOOM:"),Ce(),ve(62,"button",27),_n("click",function(){return i.ZoomMas()}),Pe(63," Zoom (+) "),Ce(),ve(64,"button",27),_n("click",function(){return i.ZoomNormal()}),Pe(65," Sin Zoom "),Ce(),ve(66,"button",27),_n("click",function(){return i.ZoomMenos()}),Pe(67," Zoom (-) "),Ce()(),Xt(68,"br"),ve(69,"li")(70,"h6"),Pe(71,"OPCIONES DE ENLACES:"),Ce(),ve(72,"button",27),_n("click",function(){return i.EnlacesB()}),Pe(73," Resaltar Enlaces "),Ce(),ve(74,"button",27),_n("click",function(){return i.EnlacesA()}),Pe(75," Enlaces Normales "),Ce()(),Xt(76,"br"),ve(77,"li")(78,"h6"),Pe(79,"OPCIONES DE CONTRASTE:"),Ce(),ve(80,"button",28),_n("click",function(){return i.ContrasteA()}),Pe(81," Contraste Alto "),Ce(),ve(82,"button",29),_n("click",function(){return i.ContrasteB()}),Pe(83," Contraste Normal "),Ce()(),Xt(84,"br"),ve(85,"li")(86,"a",30),Pe(87,"Volver a Inicio"),Ce()()())},encapsulation:2}),n})(),_ue=(()=>{class n{ngOnInit(){$2().accessToken=UF_mapbox_accessToken,new($2().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[-74.5,40],zoom:9})}Hablar(){const t=document.getElementById("1")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(t));const i=document.getElementById("2")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(i));const r=document.getElementById("3")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(r));const s=document.getElementById("4")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(s));const u=document.getElementById("5")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(u));const _=document.getElementById("6")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(_));const y=document.getElementById("7")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(y));const E=document.getElementById("8")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(E));const D=document.getElementById("9")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(D));const R=document.getElementById("10")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(R));const U=document.getElementById("11")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(U));const X=document.getElementById("12")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(X));const ie=document.getElementById("13")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(ie))}Pausar(){speechSynthesis.pause()}Resumen(){speechSynthesis.resume()}EnlacesB(){const t=document.getElementById("A1");t.style.backgroundColor="black",t.style.color="yellow"}EnlacesA(){const t=document.getElementById("A1");t.style.backgroundColor="white",t.style.color="blue"}ContrasteA(){const t=document.getElementById("Cuerpo");t.style.backgroundColor="black",t.style.color="yellow"}ContrasteB(){const t=document.getElementById("Cuerpo");t.style.backgroundColor="white",t.style.color="black"}ZoomMas(){var i=new Array("xx-small","x-small","small","medium","large","x-large","xx-large");document.getElementById("Cuerpo").style.fontSize=i[5]}ZoomMenos(){var i=new Array("xx-small","x-small","small","medium","large","x-large","xx-large");document.getElementById("Cuerpo").style.fontSize=i[1]}ZoomNormal(){var i=new Array("xx-small","x-small","small","medium","large","x-large","xx-large");document.getElementById("Cuerpo").style.fontSize=i[3]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=zr({type:n,selectors:[["app-about"]],decls:134,vars:0,consts:[["id","Cuerpo",2,"margin","0","padding","0","font-family","Arial, sans-serif","background-color","#FFF5E4"],[1,"services"],[1,"box-container"],[1,"box"],["src","./assets/images/icon-1.png","alt",""],["id","1"],["id","2"],["src","./assets/images/icon-2.png","alt",""],["id","3"],["id","4"],["src","./assets/images/icon-3.png","alt",""],["id","5"],["id","6"],["src","../../assets/images/icon-4.png","alt",""],["id","7"],["id","8"],["src","../../assets/images/icon-5.png","alt",""],["id","9"],["id","10"],["src","../../assets/images/icon-6.png","alt",""],["id","11"],["id","12"],["id","13",2,"text-align","center","color","#850E35"],[1,"container"],[1,"imagen-container"],["src","../../assets/images/Axolotl.jpeg","alt","Logo UAA",1,"imagen"],[2,"text-align","center","color","#850E35"],[1,"persona"],[1,"imagen",2,"background-image","url('../../assets/images/Carlos.jpeg')","height","300px"],[1,"info"],[1,"nombre"],[1,"apellido"],[1,"grado"],[1,"grupo"],[1,"carrera"],[1,"imagen",2,"background-image","url('../../assets/images/Daniel.jpeg')","height","300px"],[1,"imagen",2,"background-image","url('../../assets/images/Leo.jpeg')","height","300px"],["id","map",2,"width","400px","height","300px","margin","auto"],["type","button",2,"width","100px","margin","2px",3,"click"],["type","button",2,"width","150px","margin","2px",3,"click"],["type","button",2,"margin","2px",3,"click"],["href","#","type","button","id","A1"]],template:function(t,i){1&t&&(ve(0,"body",0)(1,"section",1)(2,"div",2)(3,"div",3),Xt(4,"img",4),ve(5,"h3",5),Pe(6,"Buffet y Barra libre"),Ce(),ve(7,"p",6),Pe(8,"Todas las noches son de barra libre y buffet"),Ce()(),ve(9,"div",3),Xt(10,"img",7),ve(11,"h3",8),Pe(12,"Experiencia privada"),Ce(),ve(13,"p",9),Pe(14,"Nuestro staff puede llevarte comida a donde lo solicites"),Ce()(),ve(15,"div",3),Xt(16,"img",10),ve(17,"h3",11),Pe(18,"Vista a la playa"),Ce(),ve(19,"p",12),Pe(20,"Nuestra posicion privilegiada porporciona las mejores vistas"),Ce()(),ve(21,"div",3),Xt(22,"img",13),ve(23,"h3",14),Pe(24,"Fiesta tematica"),Ce(),ve(25,"p",15),Pe(26,"Reserva para hacer tus eventos aun mas especiales "),Ce()(),ve(27,"div",3),Xt(28,"img",16),ve(29,"h3",17),Pe(30,"Alberca"),Ce(),ve(31,"p",18),Pe(32,"Actividades y alberca disponile las 24 hrs"),Ce()(),ve(33,"div",3),Xt(34,"img",19),ve(35,"h3",20),Pe(36,"Resort privado"),Ce(),ve(37,"p",21),Pe(38,"COontamos con zona exclusiva en la playa"),Ce()()()(),ve(39,"h1",22),Pe(40,"En Axolotl Palace, nuestra prioridad eres t\xfa: Vive como la realeza"),Ce(),ve(41,"div",23)(42,"div",24),Xt(43,"img",25),Ce()(),ve(44,"h2",26),Pe(45,"PROYECTO UNIVERITARIO DE LA UAA"),Ce(),ve(46,"div",23)(47,"div",27),Xt(48,"div",28),ve(49,"div",29)(50,"div",30),Pe(51,"Carlos Alberto"),Ce(),ve(52,"div",31),Pe(53,"Zaragoza Cano"),Ce(),ve(54,"div",32),Pe(55,"6to"),Ce(),ve(56,"div",33),Pe(57,"C"),Ce(),ve(58,"div",34),Pe(59,"Ingenier\xeda en Sistemas"),Ce()()(),ve(60,"div",27),Xt(61,"div",35),ve(62,"div",29)(63,"div",30),Pe(64,"Carlos Daniel"),Ce(),ve(65,"div",31),Pe(66,"De Lira Salas"),Ce(),ve(67,"div",32),Pe(68,"6to"),Ce(),ve(69,"div",33),Pe(70,"C"),Ce(),ve(71,"div",34),Pe(72,"Ingenier\xeda en Sistemas"),Ce()()(),ve(73,"div",27),Xt(74,"div",36),ve(75,"div",29)(76,"div",30),Pe(77,"Cochi "),Ce(),ve(78,"div",31),Pe(79,"Loco"),Ce(),ve(80,"div",32),Pe(81,"6to"),Ce(),ve(82,"div",33),Pe(83,"C"),Ce(),ve(84,"div",34),Pe(85,"Ingenier\xeda en Sistemas"),Ce()()()(),ve(86,"h2",26),Pe(87,"Nos ubicamos en:"),Ce(),Xt(88,"div",37)(89,"br")(90,"br"),ve(91,"h5",26)(92,"h4"),Pe(93," - Accesibilidad - "),Ce(),Xt(94,"br"),ve(95,"li")(96,"h6"),Pe(97,"OPCIONES DE LECTOR DE VOZ:"),Ce(),ve(98,"button",38),_n("click",function(){return i.Hablar()}),Pe(99,"Activar"),Ce(),ve(100,"button",38),_n("click",function(){return i.Pausar()}),Pe(101,"Pausar"),Ce(),ve(102,"button",38),_n("click",function(){return i.Resumen()}),Pe(103,"Continuar"),Ce()(),Xt(104,"br"),ve(105,"li")(106,"h6"),Pe(107,"OPCIONES DE ZOOM:"),Ce(),ve(108,"button",38),_n("click",function(){return i.ZoomMas()}),Pe(109," Zoom (+) "),Ce(),ve(110,"button",38),_n("click",function(){return i.ZoomNormal()}),Pe(111," Sin Zoom "),Ce(),ve(112,"button",38),_n("click",function(){return i.ZoomMenos()}),Pe(113," Zoom (-) "),Ce()(),Xt(114,"br"),ve(115,"li")(116,"h6"),Pe(117,"OPCIONES DE ENLACES:"),Ce(),ve(118,"button",38),_n("click",function(){return i.EnlacesB()}),Pe(119," Resaltar Enlaces "),Ce(),ve(120,"button",38),_n("click",function(){return i.EnlacesA()}),Pe(121," Enlaces Normales "),Ce()(),Xt(122,"br"),ve(123,"li")(124,"h6"),Pe(125,"OPCIONES DE CONTRASTE:"),Ce(),ve(126,"button",39),_n("click",function(){return i.ContrasteA()}),Pe(127," Contraste Alto "),Ce(),ve(128,"button",40),_n("click",function(){return i.ContrasteB()}),Pe(129," Contraste Normal "),Ce()(),Xt(130,"br"),ve(131,"li")(132,"a",41),Pe(133,"Volver a Inicio"),Ce()()()())},styles:[".container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;align-items:center;padding:30px}.imagen-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.persona[_ngcontent-%COMP%]{flex-basis:calc(33.33% - 20px);margin:10px;border-radius:5px;background-size:cover;background-position:center;color:#000}.persona[_ngcontent-%COMP%]{background-color:#ffc4c4}.imagen[_ngcontent-%COMP%]{width:100%;height:200px;border-top-left-radius:5px;border-top-right-radius:5px;background-size:cover;background-position:center;align-content:center}.info[_ngcontent-%COMP%]{padding:10px;text-align:center}.nombre[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-top:10px;margin-bottom:5px}.apellido[_ngcontent-%COMP%]{font-size:16px;margin-top:5px;margin-bottom:5px}.grado[_ngcontent-%COMP%], .grupo[_ngcontent-%COMP%], .carrera[_ngcontent-%COMP%]{font-size:14px;margin-top:5px;margin-bottom:5px}"]}),n})(),mue=(()=>{class n{constructor(t){this.domSanitizer=t}transform(t,i){return this.domSanitizer.bypassSecurityTrustResourceUrl(i+t)}}return n.\u0275fac=function(t){return new(t||n)(nt(H2,16))},n.\u0275pipe=sr({name:"video",type:n,pure:!0}),n})(),gue=(()=>{class n{constructor(){this.video="4K6Sh1tsAW4"}Hablar(){const t=document.getElementById("1")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(t));const i=document.getElementById("2")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(i));const r=document.getElementById("3")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(r));const s=document.getElementById("4")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(s));const u=document.getElementById("5")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(u));const _=document.getElementById("6")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(_));const y=document.getElementById("7")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(y));const E=document.getElementById("8")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(E));const D=document.getElementById("9")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(D));const R=document.getElementById("10")?.innerHTML;speechSynthesis.speak(new SpeechSynthesisUtterance(R))}Pausar(){speechSynthesis.pause()}Resumen(){speechSynthesis.resume()}EnlacesB(){const t=document.getElementById("Enlace"),i=document.getElementById("Enlace2"),r=document.getElementById("Enlace3");t.style.backgroundColor="black",t.style.color="yellow",i.style.backgroundColor="black",i.style.color="yellow",r.style.backgroundColor="black",r.style.color="yellow"}EnlacesA(){const t=document.getElementById("Enlace"),i=document.getElementById("Enlace2"),r=document.getElementById("Enlace3");t.style.backgroundColor="white",t.style.color="blue",i.style.backgroundColor="white",i.style.color="blue",r.style.backgroundColor="white",r.style.color="blue"}ContrasteA(){const t=document.getElementById("Cuerpo");t.style.backgroundColor="black",t.style.color="yellow"}ContrasteB(){const t=document.getElementById("Cuerpo");t.style.backgroundColor="white",t.style.color="black"}ZoomMas(){var i=new Array("xx-small","x-small","small","medium","large","x-large","xx-large");document.getElementById("Cuerpo").style.fontSize=i[5]}ZoomMenos(){var i=new Array("xx-small","x-small","small","medium","large","x-large","xx-large");document.getElementById("Cuerpo").style.fontSize=i[1]}ZoomNormal(){var i=new Array("xx-small","x-small","small","medium","large","x-large","xx-large");document.getElementById("Cuerpo").style.fontSize=i[3]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=zr({type:n,selectors:[["app-galeria"]],decls:115,vars:4,consts:[[1,"container","text-center"],[2,"color","#EE6983","font-size","24px","font-weight","bold"],["id","gallery",1,"gallery"],["width","560","height","315","frameborder","0","allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",1,"swiper-slide",3,"src"],["id","Cuerpo",1,"container","text-center"],["id","1",2,"color","#EE6983","font-size","24px","font-weight","bold"],["id","childern"],[1,"card-columns"],[1,"card"],["src","https://www.yavas.com/images/upload/EM_hoteles/LosCabos-hotel-barato.jpg","alt","...",1,"card-img-top"],[1,"card-body"],["id","2",1,"card-title"],["src","https://www.qhotels.es/wp-content/uploads/2022/12/pano-hotel_1500-e1672331060671.jpg","alt","...",1,"card-img-top"],["id","3",1,"card-title"],["src","https://es.israel21c.org/wp-content/uploads/2022/07/setai-main-1168x657.png","alt","...",1,"card-img"],[1,"card","bg-primary","text-white","text-center","p-3"],[1,"blockquote","mb-0"],[1,"blockquote-footer","text-white"],["title","Source Title","id","4"],[1,"card","text-center"],["id","5",1,"card-title"],["src","https://e00-expansion.uecdn.es/assets/multimedia/imagenes/2022/02/08/16443177167892.jpg","alt","...",1,"card-img"],["src","https://neextt.com/wp-content/uploads/2021/02/nuevos-hoteles-abriran-mexico-2021-1.jpg","alt","...",1,"card-img"],[1,"card","p-3","text-right"],["src","https://static1.eskypartners.com/travelguide/vancouver-hotels.jpg","alt","...",1,"card-img"],["src","https://www.oaxaca-mio.com/oaxaca/wp-content/uploads/2020/04/FOTO_CASADEADOBE.jpg","alt","...",1,"card-img"],["id","6",1,"card-title"],[1,"card-text"],["id","7",1,"text-muted"],["src","https://booked.mx/data/Photos/380x200/7250/725056/725056252/Casa-Marlene-Hotel-Valladolid-Exterior.JPEG","alt","...",1,"card-img"],["title","Source Title","id","8"],["src","https://casablancasayulita.com/wp-content/uploads/2022/04/Jacuzzi-de-asotea-en-sayulita.jpg","alt","...",1,"card-img"],["title","Source Title","id","9"],["src","https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/900/450/75/vision-dam/digital/parks-platform/parks-global-assets/disneyland/resorts/disneys-grand-californian-hotel-and-spa/spa/Relaxation-Lounge-16x9.jpg?2021-11-01T16:41:40+00:00","alt","...",1,"card-img"],["title","Source Title","id","10"],[2,"text-align","center","color","#850E35"],["type","button",2,"width","100px","margin","2px",3,"click"],["type","button",2,"width","150px","margin","2px",3,"click"],["type","button",2,"margin","2px",3,"click"],["href","#","type","button"]],template:function(t,i){1&t&&(ve(0,"div",0)(1,"h3",1),Pe(2,"Video Axolotl Palace"),Ce(),ve(3,"section",2),Xt(4,"iframe",3),function kO(n,e){const t=nn();let i;const r=n+wn;t.firstCreatePass?(i=function dG(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=rc(i.type)),u=Sr(nt);try{const _=Ks(!1),y=s();return Ks(_),function GU(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Je(),r,y),y}finally{Sr(u)}}(5,"video"),Ce()(),ve(6,"div",4)(7,"h3",5),Pe(8,"Galeria Axolotl Palace"),Ce(),ve(9,"div",6)(10,"div",7)(11,"div",8),Xt(12,"img",9),ve(13,"div",10)(14,"h5",11),Pe(15,"Una de nuestras habitaciones"),Ce()()(),ve(16,"div",8),Xt(17,"img",12),ve(18,"div",10)(19,"h5",13),Pe(20,"Disfruta nuestro hotel"),Ce()()(),ve(21,"div",8),Xt(22,"img",14),Ce(),ve(23,"div",15)(24,"blockquote",16)(25,"footer",17)(26,"small")(27,"cite",18),Pe(28,"Te vas a relajar"),Ce()()()()(),ve(29,"div",19)(30,"div",10)(31,"h5",20),Pe(32,"Habitacion"),Ce(),Xt(33,"img",21),Ce()(),ve(34,"div",8),Xt(35,"img",22),Ce(),ve(36,"div",23),Xt(37,"img",24),Ce(),ve(38,"div",8)(39,"div",10),Xt(40,"img",25),ve(41,"h5",26),Pe(42,"Uno de nuestros mejores lugares"),Ce(),ve(43,"p",27)(44,"small",28),Pe(45,"La mas comoda"),Ce()()()(),ve(46,"div",8),Xt(47,"img",29),Ce(),ve(48,"div",15)(49,"blockquote",16)(50,"footer",17)(51,"small")(52,"cite",30),Pe(53,"No hay problemas "),Ce()()()()(),ve(54,"div",8),Xt(55,"img",31),Ce(),ve(56,"div",15)(57,"blockquote",16)(58,"footer",17)(59,"small")(60,"cite",32),Pe(61,"Aqui no te vas a estresar"),Ce()()()()(),ve(62,"div",8),Xt(63,"img",33),Ce(),ve(64,"div",15)(65,"blockquote",16)(66,"footer",17)(67,"small")(68,"cite",34),Pe(69,"Te vas a relajar"),Ce()()()()()()()(),Xt(70,"br")(71,"br"),ve(72,"h5",35)(73,"h4"),Pe(74," - Accesibilidad - "),Ce(),Xt(75,"br"),ve(76,"li")(77,"h6"),Pe(78,"OPCIONES DE LECTOR DE VOZ:"),Ce(),ve(79,"button",36),_n("click",function(){return i.Hablar()}),Pe(80,"Activar"),Ce(),ve(81,"button",36),_n("click",function(){return i.Pausar()}),Pe(82,"Pausar"),Ce(),ve(83,"button",36),_n("click",function(){return i.Resumen()}),Pe(84,"Continuar"),Ce()(),Xt(85,"br"),ve(86,"li")(87,"h6"),Pe(88,"OPCIONES DE ZOOM:"),Ce(),ve(89,"button",36),_n("click",function(){return i.ZoomMas()}),Pe(90," Zoom (+) "),Ce(),ve(91,"button",36),_n("click",function(){return i.ZoomNormal()}),Pe(92," Sin Zoom "),Ce(),ve(93,"button",36),_n("click",function(){return i.ZoomMenos()}),Pe(94," Zoom (-) "),Ce()(),Xt(95,"br"),ve(96,"li")(97,"h6"),Pe(98,"OPCIONES DE ENLACES:"),Ce(),ve(99,"button",36),_n("click",function(){return i.EnlacesB()}),Pe(100," Resaltar Enlaces "),Ce(),ve(101,"button",36),_n("click",function(){return i.EnlacesA()}),Pe(102," Enlaces Normales "),Ce()(),Xt(103,"br"),ve(104,"li")(105,"h6"),Pe(106,"OPCIONES DE CONTRASTE:"),Ce(),ve(107,"button",37),_n("click",function(){return i.ContrasteA()}),Pe(108," Contraste Alto "),Ce(),ve(109,"button",38),_n("click",function(){return i.ContrasteB()}),Pe(110," Contraste Normal "),Ce()(),Xt(111,"br"),ve(112,"li")(113,"a",39),Pe(114,"Volver a Inicio"),Ce()()()),2&t&&(oi(4),Ui("src",RO(5,1,i.video,"https://www.youtube.com/embed/"),E0))},dependencies:[mue],styles:["@media (min-width: 576px){.card-columns[_ngcontent-%COMP%]{column-count:2}}@media (min-width: 768px){.card-columns[_ngcontent-%COMP%]{column-count:3}}@media (min-width: 992px){.card-columns[_ngcontent-%COMP%]{column-count:4}}@media (min-width: 1200px){.card-columns[_ngcontent-%COMP%]{column-count:5}}",".grid[_ngcontent-%COMP%] {\n  width: 100%;\n  display: grid;\n  grid-gap: 20px;\n\n  .custom-heading {\n      color: #EE6983;\n      font-size: 24px;\n      font-weight: bold;\n    }\n}\n\n@media (min-width: 768px) {\n  .grid[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(5, 1fr);\n  }\n}"]}),n})(),tz=(()=>{class n{constructor(){this.habitaciones=[{id:1,nombre:"Habitaci\xf3n individual",tipo:"Individual",precio:500,descripcion:"Habitaci\xf3n para una persona",imagen:"https://bufondearenillashotel.es/wp-content/uploads/2015/02/habitacion-individual.jpg"},{id:2,nombre:"Habitaci\xf3n doble",tipo:"Doble",precio:800,descripcion:"Habitaci\xf3n para dos personas",imagen:"https://hotelmalinallihuamantla.com/wp-content/uploads/2019/12/habitacion-doble-malinalli-1.jpg"},{id:3,nombre:"Habitaci\xf3n triple",tipo:"Triple",precio:1100,descripcion:"Habitaci\xf3n para tres personas",imagen:"https://hotelflamingoinn.com.mx/wp-content/uploads/2021/05/habitacion-ejecuiva-triple.jpg"},{id:4,nombre:"Suite",tipo:"Suite",precio:1500,descripcion:"Habitaci\xf3n de lujo para dos personas",imagen:"https://s3.us-east-1.amazonaws.com/comercial-production-gx-cms-content-bucket/hxm/rooms/suites/ocean-front-family/ocean-front-fam-005.jpg"},{id:5,nombre:"Habitaci\xf3n familiar",tipo:"Familiar",precio:1200,descripcion:"Habitaci\xf3n para cuatro personas",imagen:"https://as01.epimg.net/diarioas/imagenes/2022/05/06/actualidad/1651826263_229801_1651826454_noticia_normal_recorte1.jpg"}]}getHabitaciones(){return Ct(this.habitaciones)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();let iz=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(nt(fu),nt(to))},n.\u0275dir=xn({type:n}),n})(),mm=(()=>{class n extends iz{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zo(n)))(i||n)}}(),n.\u0275dir=xn({type:n,features:[Ki]}),n})();const Au=new vt("NgValueAccessor"),yue={provide:Au,useExisting:ki(()=>xp),multi:!0},vue=new vt("CompositionEventMode");let xp=(()=>{class n extends iz{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function bue(){const n=Qf()?Qf().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(nt(fu),nt(to),nt(vue,8))},n.\u0275dir=xn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&_n("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Rr([yue]),Ki]}),n})();function yp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function oz(n){return null!=n&&"number"==typeof n.length}const Bs=new vt("NgValidators"),bp=new vt("NgAsyncValidators"),wue=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Yg{static min(e){return function sz(n){return e=>{if(yp(e.value)||yp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function az(n){return e=>{if(yp(e.value)||yp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return lz(e)}static requiredTrue(e){return function cz(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function uz(n){return yp(n.value)||wue.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function dz(n){return e=>yp(e.value)||!oz(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function hz(n){return e=>oz(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function fz(n){if(!n)return jE;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(yp(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return yz(e)}static composeAsync(e){return bz(e)}}function lz(n){return yp(n.value)?{required:!0}:null}function jE(n){return null}function pz(n){return null!=n}function _z(n){return Ty(n)?mt(n):n}function mz(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function gz(n,e){return e.map(t=>t(n))}function xz(n){return n.map(e=>function Eue(n){return!n.validate}(e)?e:t=>e.validate(t))}function yz(n){if(!n)return null;const e=n.filter(pz);return 0==e.length?null:function(t){return mz(gz(t,e))}}function f5(n){return null!=n?yz(xz(n)):null}function bz(n){if(!n)return null;const e=n.filter(pz);return 0==e.length?null:function(t){return function nz(...n){const e=vi(n),{args:t,keys:i}=Z9(n),r=new bn(s=>{const{length:u}=t;if(!u)return void s.complete();const _=new Array(u);let y=u,E=u;for(let D=0;D<u;D++){let R=!1;ue(t[D]).subscribe(Qn(s,U=>{R||(R=!0,E--),_[D]=U},()=>y--,void 0,()=>{(!y||!R)&&(E||s.next(i?Y9(i,_):_),s.complete())}))}});return e?r.pipe(jk(e)):r}(gz(t,e).map(_z)).pipe(Gt(mz))}}function p5(n){return null!=n?bz(xz(n)):null}function vz(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wz(n){return n._rawValidators}function Ez(n){return n._rawAsyncValidators}function _5(n){return n?Array.isArray(n)?n:[n]:[]}function UE(n,e){return Array.isArray(n)?n.includes(e):n===e}function Cz(n,e){const t=_5(e);return _5(n).forEach(r=>{UE(t,r)||t.push(r)}),t}function Tz(n,e){return _5(e).filter(t=>!UE(n,t))}class Sz{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=f5(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=p5(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ia extends Sz{get formDirective(){return null}get path(){return null}}class vp extends Sz{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Iz{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Xg=(()=>{class n extends Iz{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(nt(vp,2))},n.\u0275dir=xn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Sy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ki]}),n})(),HE=(()=>{class n extends Iz{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(nt(Ia,10))},n.\u0275dir=xn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&Sy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ki]}),n})();const Qb="VALID",GE="INVALID",Kg="PENDING",Jb="DISABLED";function x5(n){return(WE(n)?n.validators:n)||null}function y5(n,e){return(WE(e)?e.asyncValidators:n)||null}function WE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class kz{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Qb}get invalid(){return this.status===GE}get pending(){return this.status==Kg}get disabled(){return this.status===Jb}get enabled(){return this.status!==Jb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Cz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Cz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Tz(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Tz(e,this._rawAsyncValidators))}hasValidator(e){return UE(this._rawValidators,e)}hasAsyncValidator(e){return UE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Kg,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Jb,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Qb,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qb||this.status===Kg)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jb:Qb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Kg,this._hasOwnPendingAsyncValidator=!0;const t=_z(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Pr,this.statusChanges=new Pr}_calculateStatus(){return this._allControlsDisabled()?Jb:this.errors?GE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Kg)?Kg:this._anyControlsHaveStatus(GE)?GE:Qb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){WE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Iue(n){return Array.isArray(n)?f5(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Due(n){return Array.isArray(n)?p5(n):n||null}(this._rawAsyncValidators)}}class ev extends kz{constructor(e,t,i){super(x5(t),y5(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Mz(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new Xe(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function Az(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new Xe(1e3,"");if(!i[t])throw new Xe(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const gm=new vt("CallSetDisabledState",{providedIn:"root",factory:()=>tv}),tv="always";function qE(n,e){return[...e.path,n]}function nv(n,e,t=tv){b5(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function kue(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Rz(n,e)})}(n,e),function Pue(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Rue(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Rz(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Mue(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ZE(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),XE(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function YE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function b5(n,e){const t=wz(n);null!==e.validator?n.setValidators(vz(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=Ez(n);null!==e.asyncValidator?n.setAsyncValidators(vz(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();YE(e._rawValidators,r),YE(e._rawAsyncValidators,r)}function XE(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=wz(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(u=>u!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=Ez(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(u=>u!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return YE(e._rawValidators,i),YE(e._rawAsyncValidators,i),t}function Rz(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Pz(n,e){b5(n,e)}function w5(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Oz(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function E5(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===xp?t=s:function Nue(n){return Object.getPrototypeOf(n.constructor)===mm}(s)?i=s:r=s}),r||i||t||null}const Bue={provide:Ia,useExisting:ki(()=>KE)},iv=(()=>Promise.resolve())();let KE=(()=>{class n extends Ia{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Pr,this.form=new ev({},f5(t),p5(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){iv.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),nv(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){iv.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){iv.then(()=>{const i=this._findContainer(t.path),r=new ev({});Pz(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){iv.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){iv.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Oz(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(nt(Bs,10),nt(bp,10),nt(gm,8))},n.\u0275dir=xn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&_n("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Rr([Bue]),Ki]}),n})();function Fz(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Nz(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const xm=class extends kz{constructor(e=null,t,i){super(x5(t),y5(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),WE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Nz(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Fz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Fz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Nz(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},jue={provide:vp,useExisting:ki(()=>rv)},zz=(()=>Promise.resolve())();let rv=(()=>{class n extends vp{constructor(t,i,r,s,u,_){super(),this._changeDetectorRef=u,this.callSetDisabledState=_,this.control=new xm,this._registered=!1,this.name="",this.update=new Pr,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=E5(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),w5(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){nv(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){zz.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&ug(i);zz.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?qE(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(nt(Ia,9),nt(Bs,10),nt(bp,10),nt(Au,10),nt(Ly,8),nt(gm,8))},n.\u0275dir=xn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Rr([jue]),Ki,B]}),n})(),QE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=xn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),jz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({}),n})();const C5=new vt("NgModelWithFormControlWarning"),que={provide:Ia,useExisting:ki(()=>ov)};let ov=(()=>{class n extends Ia{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Pr,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(XE(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return nv(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){ZE(t.control||null,t,!1),function Lue(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,Oz(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(ZE(i||null,t),(n=>n instanceof xm)(r)&&(nv(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);Pz(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function Oue(n,e){return XE(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){b5(this.form,this),this._oldForm&&XE(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(nt(Bs,10),nt(bp,10),nt(gm,8))},n.\u0275dir=xn({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&_n("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Rr([que]),Ki,B]}),n})();const Xue={provide:vp,useExisting:ki(()=>JE)};let JE=(()=>{class n extends vp{set isDisabled(t){}constructor(t,i,r,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.name=null,this.update=new Pr,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=E5(0,s)}ngOnChanges(t){this._added||this._setUpControl(),w5(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return qE(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(nt(Ia,13),nt(Bs,10),nt(bp,10),nt(Au,10),nt(C5,8))},n.\u0275dir=xn({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Rr([Xue]),Ki,B]}),n})();const Kue={provide:Au,useExisting:ki(()=>eC),multi:!0};function Wz(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let eC=(()=>{class n extends mm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=Wz(this._getOptionId(t),t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function Que(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zo(n)))(i||n)}}(),n.\u0275dir=xn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,i){1&t&&_n("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Rr([Kue]),Ki]}),n})(),qz=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Wz(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(nt(to),nt(fu),nt(eC,9))},n.\u0275dir=xn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Jue={provide:Au,useExisting:ki(()=>I5),multi:!0};function Zz(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let I5=(()=>{class n extends mm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const r=t.map(s=>this._getOptionId(s));i=(s,u)=>{s._setSelected(r.indexOf(u.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const u=s;for(let _=0;_<u.length;_++){const E=this._getOptionValue(u[_].value);r.push(E)}}else{const u=i.options;for(let _=0;_<u.length;_++){const y=u[_];if(y.selected){const E=this._getOptionValue(y.value);r.push(E)}}}this.value=r,t(r)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function ede(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zo(n)))(i||n)}}(),n.\u0275dir=xn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,i){1&t&&_n("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Rr([Jue]),Ki]}),n})(),Yz=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Zz(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Zz(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(nt(to),nt(fu),nt(I5,9))},n.\u0275dir=xn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),ym=(()=>{class n{constructor(){this._validator=jE}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):jE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=xn({type:n,features:[B]}),n})();const ide={provide:Bs,useExisting:ki(()=>tC),multi:!0};let tC=(()=>{class n extends ym{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ug,this.createValidator=t=>lz}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zo(n)))(i||n)}}(),n.\u0275dir=xn({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&gu("required",i._enabled?"":null)},inputs:{required:"required"},features:[Rr([ide]),Ki]}),n})(),oV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[jz]}),n})(),ude=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:gm,useValue:t.callSetDisabledState??tv}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[oV]}),n})(),dde=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:C5,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:gm,useValue:t.callSetDisabledState??tv}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[oV]}),n})();function hde(n,e){if(1&n&&(ve(0,"li"),Pe(1),Ce()),2&n){const t=e.$implicit;oi(1),Ph(t)}}let fde=(()=>{class n{constructor(){this.comments=[],this.newCommentAdded=new Pr,this.newComment=""}addComment(){this.newComment&&(this.comments.push(this.newComment),this.newCommentAdded.emit(this.newComment),this.newComment="")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=zr({type:n,selectors:[["app-comments"]],inputs:{comments:"comments"},outputs:{newCommentAdded:"newCommentAdded"},decls:8,vars:2,consts:[[4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"]],template:function(t,i){1&t&&(ve(0,"div")(1,"h3"),Pe(2,"Comentarios"),Ce(),ve(3,"ul"),Pl(4,hde,2,1,"li",0),Ce(),ve(5,"textarea",1),_n("ngModelChange",function(s){return i.newComment=s}),Ce(),ve(6,"button",2),_n("click",function(){return i.addComment()}),Pe(7,"Agregar comentario"),Ce()()),2&t&&(oi(4),Ui("ngForOf",i.comments),oi(1),Ui("ngModel",i.newComment))},dependencies:[B2,xp,Xg,rv],styles:[".btn-primary[_ngcontent-%COMP%]{background-color:#850e35;border-color:#850e35;font-weight:700}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#ee6983;border-color:#ee6983}"]}),n})();function pde(n,e){if(1&n&&(ve(0,"li"),Xt(1,"img",12),ve(2,"h5",13),Pe(3),Ce(),ve(4,"p",14),Pe(5),Ce(),ve(6,"p",14),Pe(7),Ce(),ve(8,"p",14),Pe(9),Ce()()),2&n){const t=e.$implicit;oi(1),d2("src",t.imagen,gd),d2("alt",t.nombre),oi(2),Ph(t.nombre),oi(2),Ph(t.descripcion),oi(2),Dy("Tipo: ",t.tipo,""),oi(2),Dy("Precio: $",t.precio,"")}}let _de=(()=>{class n{constructor(t){this.habitacionService=t,this.comments=[],this.habitaciones=[]}ngOnInit(){this.getHabitaciones()}getHabitaciones(){this.habitacionService.getHabitaciones().subscribe(t=>this.habitaciones=t)}onNewCommentAdded(t){this.comments.push(t)}}return n.\u0275fac=function(t){return new(t||n)(nt(tz))},n.\u0275cmp=zr({type:n,selectors:[["app-habitacion-list"]],decls:18,vars:1,consts:[["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1"],["rel","stylesheet","href","https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"],[2,"text-align","center","width","80%","margin","0 auto"],[4,"ngFor","ngForOf"],[2,"text-align","center","width","90%","margin","0 auto","padding","5%"],[3,"newCommentAdded"],["routerLink","/habitacion/individual"],["routerLink","/habitacion/doble"],["routerLink","/habitacion/triple"],["routerLink","/habitacion/familiar"],["routerLink","/habitacion/suite"],["width","150","height","150",3,"src","alt"],[1,"card-title"],[1,"card-text"]],template:function(t,i){1&t&&(Xt(0,"meta",0)(1,"meta",1)(2,"link",2),ve(3,"ul",3),Pl(4,pde,10,6,"li",4),ve(5,"div",5)(6,"app-comments",6),_n("newCommentAdded",function(s){return i.onNewCommentAdded(s)}),Ce()(),ve(7,"button",7),Pe(8,"Habitaci\xf3n Individual"),Ce(),ve(9,"button",8),Pe(10,"Habitaci\xf3n Doble"),Ce(),ve(11,"button",9),Pe(12,"Habitaci\xf3n Triple"),Ce(),ve(13,"button",10),Pe(14,"Habitaci\xf3n Familiar"),Ce(),ve(15,"button",11),Pe(16,"Habitaci\xf3n Suite"),Ce(),Xt(17,"router-outlet"),Ce()),2&t&&(oi(4),Ui("ngForOf",i.habitaciones))},dependencies:[B2,kE,qg,fde],styles:["*[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;background-color:#ffc4c4;font-weight:700}li[_ngcontent-%COMP%]{padding:20px}img[_ngcontent-%COMP%]{border-radius:15px}h5[_ngcontent-%COMP%]{padding-top:45px}ul[_ngcontent-%COMP%]{padding:30}li[_ngcontent-%COMP%]{padding-left:90px}.room-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.room-card[_ngcontent-%COMP%]{width:300px;padding:20px;margin:10px;border:1px solid #ccc;border-radius:5px;background-color:#fff5e4;box-shadow:0 2px 4px #0000001a}.room-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:10px}.room-description[_ngcontent-%COMP%]{margin-bottom:10px}.room-price[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#850e35}.individual-style[_ngcontent-%COMP%]{background-color:#fff5e4}.triple-style[_ngcontent-%COMP%]{background-color:#ffc4c4}.double-style[_ngcontent-%COMP%]{background-color:#ffc2cf}.suite-style[_ngcontent-%COMP%]{background-color:#f5a6c0}.family-style[_ngcontent-%COMP%]{background-color:#ffdbdb}"]}),n})();function mde(n,e){1&n&&(ve(0,"div",3)(1,"h2",4),Pe(2,"Habitaci\xf3n Individual"),Ce(),ve(3,"p",5),Pe(4," Disponible por 500 pesos, es un espacio acogedor y funcional que ofrece comodidad a un precio asequible. Aunque es una habitaci\xf3n de tama\xf1o moderado, est\xe1 dise\xf1ada de manera eficiente para maximizar el espacio disponible. "),Ce(),ve(5,"p",6),Pe(6,"$500 por noche"),Ce()()),2&n&&Ui("ngClass","individual-style")}function gde(n,e){1&n&&(ve(0,"div",3)(1,"h2",4),Pe(2,"Habitaci\xf3n Triple"),Ce(),ve(3,"p",5),Pe(4," La habitaci\xf3n triple es un espacio amplio y vers\xe1til que puede alojar a tres personas c\xf3modamente. Normalmente cuenta con tres camas individuales o una combinaci\xf3n de camas individuales y camas matrimoniales, todas ellas con ropa de cama de calidad. Tambi\xe9n incluye mesitas de noche, l\xe1mparas individuales y armarios o espacios de almacenamiento suficientes para cada hu\xe9sped. "),Ce(),ve(5,"p",6),Pe(6,"$1100 por noche"),Ce()()),2&n&&Ui("ngClass","triple-style")}function xde(n,e){1&n&&(ve(0,"div",3)(1,"h2",4),Pe(2,"Habitaci\xf3n Doble"),Ce(),ve(3,"p",5),Pe(4," La habitaci\xf3n doble es un espacio dise\xf1ado para alojar a dos personas. Por lo general, cuenta con una cama matrimonial o dos camas individuales con ropa de cama c\xf3moda y suave. Al igual que en la habitaci\xf3n triple, encontrar\xe1s mesitas de noche con l\xe1mparas, armarios o espacios de almacenamiento y, dependiendo del lugar, un ba\xf1o privado o compartido. "),Ce(),ve(5,"p",6),Pe(6,"$800 por noche"),Ce()()),2&n&&Ui("ngClass","double-style")}function yde(n,e){1&n&&(ve(0,"div",3)(1,"h2",4),Pe(2,"Habitaci\xf3n Suite"),Ce(),ve(3,"p",5),Pe(4," La habitaci\xf3n suite es un espacio de alojamiento m\xe1s lujoso y amplio, dise\xf1ado para ofrecer una experiencia de hospedaje de mayor categor\xeda. Suele contar con una zona de dormitorio separada y una sala de estar o \xe1rea de estar adicional. La habitaci\xf3n suite puede incluir una cama matrimonial o una combinaci\xf3n de camas individuales y matrimoniales, todas ellas con ropa de cama de alta calidad. "),Ce(),ve(5,"p",6),Pe(6,"$1500 por noche"),Ce()()),2&n&&Ui("ngClass","suite-style")}function bde(n,e){1&n&&(ve(0,"div",3)(1,"h2",4),Pe(2,"Habitaci\xf3n Familiar"),Ce(),ve(3,"p",5),Pe(4," La habitaci\xf3n familiar es una opci\xf3n ideal para familias o grupos m\xe1s grandes que desean alojarse juntos. Suele contar con camas matrimoniales y camas individuales en una combinaci\xf3n adecuada para acomodar a varios miembros de la familia o grupo. Al igual que en las otras habitaciones, se proporciona ropa de cama de calidad y comodidades b\xe1sicas como mesitas de noche, l\xe1mparas, armarios o espacios de almacenamiento y ba\xf1o privado o compartido. Adem\xe1s, la habitaci\xf3n familiar puede contar con espacio adicional, como una sala de estar o un \xe1rea de juegos, para que todos los miembros de la familia puedan disfrutar de su estancia juntos. "),Ce(),ve(5,"p",6),Pe(6,"$1200 por noche"),Ce()()),2&n&&Ui("ngClass","family-style")}let vde=(()=>{class n{constructor(t){this.route=t,this.habitacion=""}ngOnInit(){this.route.paramMap.subscribe(t=>{this.habitacion=t.get("habitacion")??""})}}return n.\u0275fac=function(t){return new(t||n)(nt(_m))},n.\u0275cmp=zr({type:n,selectors:[["app-habitaciones"]],decls:7,vars:6,consts:[[1,"room-container"],[1,"room-card",3,"ngSwitch"],[3,"ngClass",4,"ngSwitchCase"],[3,"ngClass"],[1,"room-title"],[1,"room-description"],[1,"room-price"]],template:function(t,i){1&t&&(ve(0,"div",0)(1,"div",1),Pl(2,mde,7,1,"div",2),Pl(3,gde,7,1,"div",2),Pl(4,xde,7,1,"div",2),Pl(5,yde,7,1,"div",2),Pl(6,bde,7,1,"div",2),Ce()()),2&t&&(oi(1),Ui("ngSwitch",i.habitacion),oi(1),Ui("ngSwitchCase","individual"),oi(1),Ui("ngSwitchCase","triple"),oi(1),Ui("ngSwitchCase","doble"),oi(1),Ui("ngSwitchCase","suite"),oi(1),Ui("ngSwitchCase","familiar"))},dependencies:[yI,z2,fF],styles:[".room-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.room-card[_ngcontent-%COMP%]{width:300px;padding:20px;margin:10px;border:1px solid #ccc;border-radius:5px;background-color:#fff5e4;box-shadow:0 2px 4px #0000001a}.room-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:10px}.room-description[_ngcontent-%COMP%]{margin-bottom:10px}.room-price[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#850e35}.individual-style[_ngcontent-%COMP%]{background-color:#fff5e4}.triple-style[_ngcontent-%COMP%]{background-color:#ffc4c4}.double-style[_ngcontent-%COMP%]{background-color:#ffc2cf}.suite-style[_ngcontent-%COMP%]{background-color:#f5a6c0}.family-style[_ngcontent-%COMP%]{background-color:#ffdbdb}"]}),n})();class D5{}class Jh{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),u=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Jh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Jh;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Jh?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let u=this.headers.get(t);if(!u)return;u=u.filter(_=>-1===s.indexOf(_)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class wde{encodeKey(e){return sV(e)}encodeValue(e){return sV(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Cde=/%(\d[a-f0-9])/gi,Tde={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sV(n){return encodeURIComponent(n).replace(Cde,(e,t)=>Tde[t]??e)}function nC(n){return`${n}`}class wp{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new wde,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ede(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[u,_]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],y=t.get(u)||[];y.push(_),t.set(u,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(nC):[nC(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new wp({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(nC(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(nC(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Sde{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function aV(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function lV(n){return typeof Blob<"u"&&n instanceof Blob}function cV(n){return typeof FormData<"u"&&n instanceof FormData}class sv{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Ide(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Jh),this.context||(this.context=new Sde),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const _=t.indexOf("?");this.urlWithParams=t+(-1===_?"?":_<t.length-1?"&":"")+u}}else this.params=new wp,this.urlWithParams=t}serializeBody(){return null===this.body?null:aV(this.body)||lV(this.body)||cV(this.body)||function Dde(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof wp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||cV(this.body)?null:lV(this.body)?this.body.type||null:aV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof wp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,E=e.params||this.params;const D=e.context??this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((R,U)=>R.set(U,e.setHeaders[U]),y)),e.setParams&&(E=Object.keys(e.setParams).reduce((R,U)=>R.set(U,e.setParams[U]),E)),new sv(t,i,s,{params:E,headers:y,context:D,reportProgress:_,responseType:r,withCredentials:u})}}var zs=(()=>((zs=zs||{})[zs.Sent=0]="Sent",zs[zs.UploadProgress=1]="UploadProgress",zs[zs.ResponseHeader=2]="ResponseHeader",zs[zs.DownloadProgress=3]="DownloadProgress",zs[zs.Response=4]="Response",zs[zs.User=5]="User",zs))();class Ade{constructor(e,t=200,i="OK"){this.headers=e.headers||new Jh,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class av extends Ade{constructor(e={}){super(e),this.type=zs.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new av({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function M5(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let iC=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof sv)s=t;else{let y,E;y=r.headers instanceof Jh?r.headers:new Jh(r.headers),r.params&&(E=r.params instanceof wp?r.params:new wp({fromObject:r.params})),s=new sv(t,i,void 0!==r.body?r.body:null,{headers:y,context:r.context,params:E,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const u=Ct(s).pipe(zg(y=>this.handler.handle(y)));if(t instanceof sv||"events"===r.observe)return u;const _=u.pipe(Ts(y=>y instanceof av));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return _.pipe(Gt(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return _.pipe(Gt(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return _.pipe(Gt(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return _.pipe(Gt(y=>y.body))}case"response":return _;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new wp).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,M5(r,i))}post(t,i,r={}){return this.request("POST",t,M5(r,i))}put(t,i,r={}){return this.request("PUT",t,M5(r,i))}}return n.\u0275fac=function(t){return new(t||n)(lt(D5))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();function Yde(n,e){1&n&&(ve(0,"div",15),Pe(1," El nombre es necesario "),Ce())}function Xde(n,e){1&n&&(ve(0,"div",15),Pe(1," Ingresa por lo menos 3 caracteres "),Ce())}function Kde(n,e){1&n&&(ve(0,"div",15),Pe(1," Correo obligatorio "),Ce())}function Qde(n,e){1&n&&(ve(0,"div",15),Pe(1," El correo no tiene el formato correcto "),Ce())}const yV=function(n){return{"is-invalid":n}};let Jde=(()=>{class n{constructor(t){this.http=t,this.usuario={nombre:"",apellido:"",correo:""},this.forma=new ev({nombre:new xm(this.usuario.nombre,[Yg.required,Yg.minLength(3)]),apellido:new xm(this.usuario.apellido,Yg.required),correo:new xm(this.usuario.correo,[Yg.required,Yg.email])})}guardarCambios(){console.log(...wm("7fc99d6c_0","metodo guardarCambios")),console.log(...wm("7fc99d6c_1",this.forma)),console.log(...wm("7fc99d6c_2",this.forma.value)),this.http.post("http://localhost:3000/reservaciones",{name:"FormSubmit",message:"I'm from Devro LABS"}).subscribe(i=>{console.log(...wm("7fc99d6c_3",i)),console.log(...wm("7fc99d6c_4","Todo sali\xf3 bien"))},i=>{console.error(i),console.log(...wm("7fc99d6c_5","Hubo un error en la comunicaci\xf3n"))})}}return n.\u0275fac=function(t){return new(t||n)(nt(iC))},n.\u0275cmp=zr({type:n,selectors:[["app-contact"]],decls:38,vars:12,consts:[["id","contact",1,"contact"],[1,"row"],["method","post","novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"container"],[1,"form-group","row"],[1,"col-2","col-form-label"],[1,"col-8"],["type","text","placeholder","Nombre","formControlName","nombre",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Apellido","formControlName","apellido",1,"form-control"],["type","text","placeholder","Correo electronico","formControlName","correo",1,"form-control",3,"ngClass"],[1,"input-group","col-md-8"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"],[1,"faq"],["src","../../assets/images/Ajolotecontacto.jpeg","alt","",2,"width","70%","margin-left","60px"],[1,"invalid-feedback"]],template:function(t,i){if(1&t&&(ve(0,"section",0)(1,"div",1)(2,"form",2),_n("ngSubmit",function(){return i.guardarCambios()}),ve(3,"h3"),Pe(4,"Contactanos"),Ce(),ve(5,"div",3)(6,"div",4)(7,"label",5),Pe(8,"Nombre"),Ce(),ve(9,"div",6),Xt(10,"input",7),Pl(11,Yde,2,0,"div",8),Pl(12,Xde,2,0,"div",8),Ce()(),Xt(13,"br")(14,"br"),ve(15,"div",4)(16,"label",5),Pe(17,"Apellido"),Ce(),ve(18,"div",6),Xt(19,"input",9),Ce()(),Xt(20,"br")(21,"br"),ve(22,"div",4)(23,"label",5),Pe(24,"Correo"),Ce(),ve(25,"div",6),Xt(26,"input",10),Pl(27,Kde,2,0,"div",8),Pl(28,Qde,2,0,"div",8),Ce()(),Xt(29,"br"),ve(30,"div",4)(31,"label",5),Pe(32,"\xa0"),Ce(),ve(33,"div",11)(34,"button",12),Pe(35,"Enviar"),Ce()()()()(),ve(36,"div",13),Xt(37,"img",14),Ce()()()),2&t){let r,s;oi(2),Ui("formGroup",i.forma),oi(8),Ui("ngClass",x2(8,yV,!(null!=(r=i.forma.get("nombre"))&&r.valid))),oi(1),Ui("ngIf",null==i.forma.controls.nombre.errors?null:i.forma.controls.nombre.errors.required),oi(1),Ui("ngIf",null==i.forma.controls.nombre.errors?null:i.forma.controls.nombre.errors.minlength),oi(14),Ui("ngClass",x2(10,yV,!(null!=(s=i.forma.get("correo"))&&s.valid))),oi(1),Ui("ngIf",null==i.forma.controls.correo.errors?null:i.forma.controls.correo.errors.required),oi(1),Ui("ngIf",null==i.forma.controls.correo.errors?null:i.forma.controls.correo.errors.email),oi(6),Ui("disabled",i.forma.invalid)}},dependencies:[yI,dF,QE,xp,Xg,HE,ov,JE],styles:["form[_ngcontent-%COMP%]{height:550px;font-size:18px}label[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-size:15px}"]}),n})();function wm(n,...e){try{(function sC(){try{return(0,eval)("globalThis._console_ninja")||(0,eval)("/* https://github.com/wallabyjs/console-ninja#how-does-it-work */'use strict';function _0x4cb1(_0x4f848e,_0x9f6681){var _0x382e6d=_0x382e();return _0x4cb1=function(_0x4cb1d,_0x385ce4){_0x4cb1d=_0x4cb1d-0x104;var _0x258f0e=_0x382e6d[_0x4cb1d];return _0x258f0e;},_0x4cb1(_0x4f848e,_0x9f6681);}var _0x5c041f=_0x4cb1;(function(_0x41f6bb,_0x590643){var _0x32cf76=_0x4cb1,_0x349fd4=_0x41f6bb();while(!![]){try{var _0x587f11=parseInt(_0x32cf76(0x1b2))/0x1+parseInt(_0x32cf76(0x16e))/0x2+parseInt(_0x32cf76(0x170))/0x3+-parseInt(_0x32cf76(0x1b4))/0x4*(parseInt(_0x32cf76(0x1a0))/0x5)+parseInt(_0x32cf76(0x1a8))/0x6*(parseInt(_0x32cf76(0x194))/0x7)+parseInt(_0x32cf76(0x136))/0x8+-parseInt(_0x32cf76(0x179))/0x9;if(_0x587f11===_0x590643)break;else _0x349fd4['push'](_0x349fd4['shift']());}catch(_0x3419a0){_0x349fd4['push'](_0x349fd4['shift']());}}}(_0x382e,0x92987));var ue=Object['create'],te=Object['defineProperty'],he=Object[_0x5c041f(0x142)],le=Object[_0x5c041f(0x15c)],fe=Object['getPrototypeOf'],_e=Object[_0x5c041f(0x14f)][_0x5c041f(0x1a2)],pe=(_0x4a860d,_0x2991b2,_0x244fb2,_0x1ae054)=>{var _0x5076d7=_0x5c041f;if(_0x2991b2&&typeof _0x2991b2==_0x5076d7(0x1d1)||typeof _0x2991b2==_0x5076d7(0x1c5)){for(let _0x3968f6 of le(_0x2991b2))!_e[_0x5076d7(0x197)](_0x4a860d,_0x3968f6)&&_0x3968f6!==_0x244fb2&&te(_0x4a860d,_0x3968f6,{'get':()=>_0x2991b2[_0x3968f6],'enumerable':!(_0x1ae054=he(_0x2991b2,_0x3968f6))||_0x1ae054[_0x5076d7(0x1d3)]});}return _0x4a860d;},ne=(_0x2d78ff,_0x2bde4e,_0xe92645)=>(_0xe92645=_0x2d78ff!=null?ue(fe(_0x2d78ff)):{},pe(_0x2bde4e||!_0x2d78ff||!_0x2d78ff[_0x5c041f(0x191)]?te(_0xe92645,_0x5c041f(0x1c6),{'value':_0x2d78ff,'enumerable':!0x0}):_0xe92645,_0x2d78ff)),Q=class{constructor(_0x187a81,_0x47eeea,_0xfb14bc,_0x112373){var _0x4ccd8d=_0x5c041f;this[_0x4ccd8d(0x143)]=_0x187a81,this['host']=_0x47eeea,this['port']=_0xfb14bc,this[_0x4ccd8d(0x113)]=_0x112373,this[_0x4ccd8d(0x1b9)]=!0x0,this[_0x4ccd8d(0x1cd)]=!0x0,this[_0x4ccd8d(0x17c)]=!0x1,this[_0x4ccd8d(0x107)]=!0x1,this['_inBrowser']=!!this[_0x4ccd8d(0x143)][_0x4ccd8d(0x181)],this[_0x4ccd8d(0x186)]=null,this[_0x4ccd8d(0x112)]=0x0,this[_0x4ccd8d(0x1b1)]=0x14,this['_sendErrorMessage']=this[_0x4ccd8d(0x146)]?_0x4ccd8d(0x19c):_0x4ccd8d(0x121);}async[_0x5c041f(0x130)](){var _0x1b0d94=_0x5c041f;if(this['_WebSocketClass'])return this[_0x1b0d94(0x186)];let _0x4389b0;if(this[_0x1b0d94(0x146)])_0x4389b0=this[_0x1b0d94(0x143)][_0x1b0d94(0x181)];else{if(this[_0x1b0d94(0x143)][_0x1b0d94(0x1a3)]?.['_WebSocket'])_0x4389b0=this[_0x1b0d94(0x143)]['process']?.[_0x1b0d94(0x1bd)];else try{let _0x51e77f=await import(_0x1b0d94(0x1df));_0x4389b0=(await import((await import(_0x1b0d94(0x138)))[_0x1b0d94(0x10c)](_0x51e77f[_0x1b0d94(0x153)](this['nodeModules'],'ws/index.js'))['toString']()))[_0x1b0d94(0x1c6)];}catch{try{_0x4389b0=require(require('path')['join'](this[_0x1b0d94(0x113)],'ws'));}catch{throw new Error(_0x1b0d94(0x128));}}}return this[_0x1b0d94(0x186)]=_0x4389b0,_0x4389b0;}[_0x5c041f(0x1b5)](){var _0x1be63c=_0x5c041f;this['_connecting']||this['_connected']||this['_connectAttemptCount']>=this[_0x1be63c(0x1b1)]||(this[_0x1be63c(0x1cd)]=!0x1,this['_connecting']=!0x0,this[_0x1be63c(0x112)]++,this['_ws']=new Promise((_0x34a063,_0x5b7758)=>{var _0x560b0e=_0x1be63c;this[_0x560b0e(0x130)]()['then'](_0x2eca62=>{var _0x4fd847=_0x560b0e;let _0x2ba1af=new _0x2eca62(_0x4fd847(0x185)+this['host']+':'+this[_0x4fd847(0x17e)]);_0x2ba1af['onerror']=()=>{var _0x2b225e=_0x4fd847;this[_0x2b225e(0x1b9)]=!0x1,this[_0x2b225e(0x135)](_0x2ba1af),this[_0x2b225e(0x175)](),_0x5b7758(new Error('logger\\x20websocket\\x20error'));},_0x2ba1af[_0x4fd847(0x15f)]=()=>{var _0x5e4efc=_0x4fd847;this['_inBrowser']||_0x2ba1af[_0x5e4efc(0x119)]&&_0x2ba1af[_0x5e4efc(0x119)][_0x5e4efc(0x1c8)]&&_0x2ba1af['_socket'][_0x5e4efc(0x1c8)](),_0x34a063(_0x2ba1af);},_0x2ba1af[_0x4fd847(0x12f)]=()=>{var _0x587a15=_0x4fd847;this['_allowedToConnectOnSend']=!0x0,this[_0x587a15(0x135)](_0x2ba1af),this['_attemptToReconnectShortly']();},_0x2ba1af[_0x4fd847(0x176)]=_0x5c46e0=>{var _0x166b3f=_0x4fd847;try{_0x5c46e0&&_0x5c46e0[_0x166b3f(0x1af)]&&this[_0x166b3f(0x146)]&&JSON[_0x166b3f(0x1d2)](_0x5c46e0[_0x166b3f(0x1af)])[_0x166b3f(0x11c)]===_0x166b3f(0x1a7)&&this[_0x166b3f(0x143)][_0x166b3f(0x180)][_0x166b3f(0x1a7)]();}catch{}};})['then'](_0x2a47ca=>(this[_0x560b0e(0x17c)]=!0x0,this[_0x560b0e(0x107)]=!0x1,this['_allowedToConnectOnSend']=!0x1,this[_0x560b0e(0x1b9)]=!0x0,this[_0x560b0e(0x112)]=0x0,_0x2a47ca))[_0x560b0e(0x13f)](_0x449b17=>(this['_connected']=!0x1,this[_0x560b0e(0x107)]=!0x1,_0x5b7758(new Error(_0x560b0e(0x1ce)+(_0x449b17&&_0x449b17[_0x560b0e(0x155)])))));}));}[_0x5c041f(0x135)](_0x11dfe2){var _0x35b03a=_0x5c041f;this[_0x35b03a(0x17c)]=!0x1,this['_connecting']=!0x1;try{_0x11dfe2['onclose']=null,_0x11dfe2[_0x35b03a(0x1c9)]=null,_0x11dfe2['onopen']=null;}catch{}try{_0x11dfe2[_0x35b03a(0x15d)]<0x2&&_0x11dfe2[_0x35b03a(0x13c)]();}catch{}}[_0x5c041f(0x175)](){var _0x31aeaf=_0x5c041f;clearTimeout(this[_0x31aeaf(0x1d0)]),!(this[_0x31aeaf(0x112)]>=this[_0x31aeaf(0x1b1)])&&(this[_0x31aeaf(0x1d0)]=setTimeout(()=>{var _0x395757=_0x31aeaf;this[_0x395757(0x17c)]||this['_connecting']||(this['_connectToHostNow'](),this[_0x395757(0x156)]?.[_0x395757(0x13f)](()=>this['_attemptToReconnectShortly']()));},0x1f4),this[_0x31aeaf(0x1d0)][_0x31aeaf(0x1c8)]&&this[_0x31aeaf(0x1d0)][_0x31aeaf(0x1c8)]());}async['send'](_0x353d6f){var _0x36feac=_0x5c041f;try{if(!this[_0x36feac(0x1b9)])return;this[_0x36feac(0x1cd)]&&this[_0x36feac(0x1b5)](),(await this[_0x36feac(0x156)])['send'](JSON[_0x36feac(0x183)](_0x353d6f));}catch(_0xea0863){console[_0x36feac(0x137)](this[_0x36feac(0x159)]+':\\x20'+(_0xea0863&&_0xea0863[_0x36feac(0x155)])),this[_0x36feac(0x1b9)]=!0x1,this[_0x36feac(0x175)]();}}};function V(_0x316ec2,_0x37b6b9,_0x242e78,_0x2a8d2f,_0x23fccf){var _0x12a29b=_0x5c041f;let _0xd77357=_0x242e78[_0x12a29b(0x1cc)](',')['map'](_0xe82dc7=>{var _0x319735=_0x12a29b;try{_0x316ec2[_0x319735(0x1d6)]||((_0x23fccf===_0x319735(0x140)||_0x23fccf===_0x319735(0x1cf)||_0x23fccf===_0x319735(0x1dd))&&(_0x23fccf+=_0x316ec2['process']?.[_0x319735(0x168)]?.['node']?_0x319735(0x1a1):_0x319735(0x150)),_0x316ec2[_0x319735(0x1d6)]={'id':+new Date(),'tool':_0x23fccf});let _0x16f072=new Q(_0x316ec2,_0x37b6b9,_0xe82dc7,_0x2a8d2f);return _0x16f072[_0x319735(0x1b0)]['bind'](_0x16f072);}catch(_0x5c7fa8){return console[_0x319735(0x137)](_0x319735(0x10a),_0x5c7fa8&&_0x5c7fa8[_0x319735(0x155)]),()=>{};}});return _0x502d2e=>_0xd77357[_0x12a29b(0x1ab)](_0x43bc6b=>_0x43bc6b(_0x502d2e));}function H(_0x5af7b2){var _0x44da05=_0x5c041f;let _0x4d0c7c=function(_0x2df01d,_0x18687f){return _0x18687f-_0x2df01d;},_0x5b3ffd;if(_0x5af7b2['performance'])_0x5b3ffd=function(){var _0x18cc82=_0x4cb1;return _0x5af7b2[_0x18cc82(0x187)][_0x18cc82(0x1b8)]();};else{if(_0x5af7b2[_0x44da05(0x1a3)]&&_0x5af7b2[_0x44da05(0x1a3)]['hrtime'])_0x5b3ffd=function(){var _0x36a33e=_0x44da05;return _0x5af7b2['process'][_0x36a33e(0x104)]();},_0x4d0c7c=function(_0x17a6ca,_0x1ffd49){return 0x3e8*(_0x1ffd49[0x0]-_0x17a6ca[0x0])+(_0x1ffd49[0x1]-_0x17a6ca[0x1])/0xf4240;};else try{let {performance:_0x280329}=require('perf_hooks');_0x5b3ffd=function(){return _0x280329['now']();};}catch{_0x5b3ffd=function(){return+new Date();};}}return{'elapsed':_0x4d0c7c,'timeStamp':_0x5b3ffd,'now':()=>Date['now']()};}function X(_0x12e8bd,_0x14d6a9,_0xacee0b){var _0x30debf=_0x5c041f;if(_0x12e8bd[_0x30debf(0x14a)]!==void 0x0)return _0x12e8bd[_0x30debf(0x14a)];let _0x3a35d6=_0x12e8bd[_0x30debf(0x1a3)]?.[_0x30debf(0x168)]?.[_0x30debf(0x1da)];return _0x3a35d6&&_0xacee0b===_0x30debf(0x147)?_0x12e8bd['_consoleNinjaAllowedToStart']=!0x1:_0x12e8bd[_0x30debf(0x14a)]=_0x3a35d6||!_0x14d6a9||_0x12e8bd[_0x30debf(0x180)]?.[_0x30debf(0x13b)]&&_0x14d6a9[_0x30debf(0x18d)](_0x12e8bd[_0x30debf(0x180)][_0x30debf(0x13b)]),_0x12e8bd[_0x30debf(0x14a)];}function _0x382e(){var _0x3f78a3=['_setNodeExpressionPath','location','WebSocket','bigint','stringify','substr','ws://','_WebSocketClass','performance','stackTraceLimit','type','1.0.0','_console_ninja','_isUndefined','includes','[object\\x20BigInt]','autoExpandMaxDepth','timeEnd','__es'+'Module','parent','_type','635201aILuEg','Map','_setNodeQueryPath','call',[\"localhost\",\"127.0.0.1\",\"example.cypress.io\",\"AspireA15-43\",\"192.168.56.1\",\"192.168.1.73\"],'NEGATIVE_INFINITY','_undefined','webpack','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20refreshing\\x20the\\x20page\\x20may\\x20help','disabledLog','reduceLimits','_getOwnPropertyNames','280CWoCPm','\\x20server','hasOwnProperty','process','HTMLAllCollection','[object\\x20Set]','console','reload','54LRIPsv','argumentResolutionError','value','forEach','push','_property','_treeNodePropertiesAfterFullValue','data','send','_maxConnectAttemptCount','935776dwgaDu','sortProps','64072xQAqIr','_connectToHostNow','log','autoExpand','now','_allowedToSend','slice','count','negativeInfinity','_WebSocket','constructor','hits','_getOwnPropertyDescriptor','date','_isPrimitiveType','_addFunctionsNode','root_exp','function','default','valueOf','unref','onerror','cappedElements','number','split','_allowedToConnectOnSend','failed\\x20to\\x20connect\\x20to\\x20host:\\x20','remix','_reconnectTimeout','object','parse','enumerable','_cleanNode','_quotedRegExp','_console_ninja_session','','_capIfString','Set','node','[object\\x20Map]','_isPrimitiveWrapperType','astro','replace','path','elements','concat','[object\\x20Array]','undefined','_blacklistedProperty','match','root_exp_id','_isNegativeZero','hrtime','String','_numberRegExp','_connecting','current','_keyStrRegExp','logger\\x20failed\\x20to\\x20connect\\x20to\\x20host','_setNodeId','pathToFileURL','level','Number','autoExpandPreviousObjects','name','serialize','_connectAttemptCount','nodeModules','RegExp','_propertyName','trace','expressionsToEvaluate','...','_socket','indexOf','_addLoadNode','method','autoExpandPropertyCount','unshift','props','_p_length','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20restarting\\x20the\\x20process\\x20may\\x20help','capped','length','127.0.0.1','pop','array','_treeNodePropertiesBeforeFullValue','failed\\x20to\\x20find\\x20and\\x20load\\x20WebSocket','isExpressionToEvaluate','_addProperty','error','totalStrLength','autoExpandLimit','negativeZero','onclose','getWebSocketClass','_regExpToString','isArray',':logPointId:','_setNodePermissions','_disposeWebsocket','7576168RoOoLU','warn','url','getOwnPropertySymbols','_hasSetOnItsPath','hostname','close','_additionalMetadata','strLength','catch','next.js','rootExpression','getOwnPropertyDescriptor','global','symbol','boolean','_inBrowser','nuxt','time','[object\\x20Date]','_consoleNinjaAllowedToStart','depth','Error','positiveInfinity','string','prototype','\\x20browser','_addObjectProperty','_p_','join','_sortProps','message','_ws','_isMap','noFunctions','_sendErrorMessage','_Symbol','_setNodeExpandableState','getOwnPropertyNames','readyState','_objectToString','onopen','61934','_hasMapOnItsPath','elapsed','index','nan','resolveGetters','test','_HTMLAllCollection','versions','_setNodeLabel','null','toLowerCase','_isSet','_dateToString','1039862BHuYnR','disabledTrace','1272669ZnImvB','expId','_isArray','unknown',\"c:\\\\Users\\\\Donov\\\\.vscode\\\\extensions\\\\wallabyjs.console-ninja-0.0.154\\\\node_modules\",'_attemptToReconnectShortly','onmessage','Symbol','toString','19315575hkRJHr','_processTreeNodeResult','allStrLength','_connected','1687236147317','port'];_0x382e=function(){return _0x3f78a3;};return _0x382e();}((_0x5b4790,_0x458f21,_0x149466,_0x506ad4,_0x4f07aa,_0x3fd8d0,_0x20a513,_0x2e806b,_0x2df5e3)=>{var _0x27b5f4=_0x5c041f;if(_0x5b4790['_console_ninja'])return _0x5b4790['_console_ninja'];if(!X(_0x5b4790,_0x2e806b,_0x4f07aa))return _0x5b4790[_0x27b5f4(0x18b)]={'consoleLog':()=>{},'consoleTrace':()=>{},'consoleTime':()=>{},'consoleTimeEnd':()=>{},'autoLog':()=>{},'autoTrace':()=>{},'autoTime':()=>{},'autoTimeEnd':()=>{}},_0x5b4790[_0x27b5f4(0x18b)];let _0x538d0c={'props':0x64,'elements':0x64,'strLength':0x400*0x32,'totalStrLength':0x400*0x32,'autoExpandLimit':0x1388,'autoExpandMaxDepth':0xa},_0x5df0c1={'props':0x5,'elements':0x5,'strLength':0x100,'totalStrLength':0x100*0x3,'autoExpandLimit':0x1e,'autoExpandMaxDepth':0x2},_0xe984aa=H(_0x5b4790),_0x272fdc=_0xe984aa[_0x27b5f4(0x162)],_0x4d049a=_0xe984aa['timeStamp'],_0x2f3f4d=_0xe984aa['now'],_0xe1c80c={'hits':{},'ts':{}},_0x3d77ad=_0x1f3b96=>{_0xe1c80c['ts'][_0x1f3b96]=_0x4d049a();},_0xe06796=(_0x13f02a,_0x2be50f)=>{let _0x40e934=_0xe1c80c['ts'][_0x2be50f];if(delete _0xe1c80c['ts'][_0x2be50f],_0x40e934){let _0x5274bc=_0x272fdc(_0x40e934,_0x4d049a());_0x4b1f73(_0x4ef4d5('time',_0x13f02a,_0x2f3f4d(),_0x5ef367,[_0x5274bc],_0x2be50f));}},_0x47ca51=_0x35ae2c=>_0x568830=>{var _0x5cbfae=_0x27b5f4;try{_0x3d77ad(_0x568830),_0x35ae2c(_0x568830);}finally{_0x5b4790[_0x5cbfae(0x1a6)]['time']=_0x35ae2c;}},_0x34454b=_0x46ef29=>_0x2cac3c=>{var _0x4e0ff3=_0x27b5f4;try{let [_0x38e816,_0xa70aed]=_0x2cac3c[_0x4e0ff3(0x1cc)](_0x4e0ff3(0x133));_0xe06796(_0xa70aed,_0x38e816),_0x46ef29(_0x38e816);}finally{_0x5b4790['console'][_0x4e0ff3(0x190)]=_0x46ef29;}};_0x5b4790['_console_ninja']={'consoleLog':(_0xbf4b2a,_0x4ee11d)=>{var _0x27c615=_0x27b5f4;_0x5b4790[_0x27c615(0x1a6)][_0x27c615(0x1b6)][_0x27c615(0x110)]!==_0x27c615(0x19d)&&_0x4b1f73(_0x4ef4d5(_0x27c615(0x1b6),_0xbf4b2a,_0x2f3f4d(),_0x5ef367,_0x4ee11d));},'consoleTrace':(_0x380929,_0x5c69db)=>{var _0x2e9541=_0x27b5f4;_0x5b4790[_0x2e9541(0x1a6)][_0x2e9541(0x1b6)][_0x2e9541(0x110)]!==_0x2e9541(0x16f)&&_0x4b1f73(_0x4ef4d5(_0x2e9541(0x116),_0x380929,_0x2f3f4d(),_0x5ef367,_0x5c69db));},'consoleTime':()=>{var _0xac082f=_0x27b5f4;_0x5b4790[_0xac082f(0x1a6)][_0xac082f(0x148)]=_0x47ca51(_0x5b4790[_0xac082f(0x1a6)][_0xac082f(0x148)]);},'consoleTimeEnd':()=>{var _0x3a096b=_0x27b5f4;_0x5b4790['console'][_0x3a096b(0x190)]=_0x34454b(_0x5b4790[_0x3a096b(0x1a6)][_0x3a096b(0x190)]);},'autoLog':(_0x400d6e,_0x1ef64c)=>{_0x4b1f73(_0x4ef4d5('log',_0x1ef64c,_0x2f3f4d(),_0x5ef367,[_0x400d6e]));},'autoTrace':(_0x5e343b,_0x2b5d86)=>{var _0x53ff97=_0x27b5f4;_0x4b1f73(_0x4ef4d5(_0x53ff97(0x116),_0x2b5d86,_0x2f3f4d(),_0x5ef367,[_0x5e343b]));},'autoTime':(_0x555514,_0x466fce,_0x7d1fbf)=>{_0x3d77ad(_0x7d1fbf);},'autoTimeEnd':(_0x596063,_0x24d50a,_0x257617)=>{_0xe06796(_0x24d50a,_0x257617);}};let _0x4b1f73=V(_0x5b4790,_0x458f21,_0x149466,_0x506ad4,_0x4f07aa),_0x5ef367=_0x5b4790['_console_ninja_session'];class _0x7302f2{constructor(){var _0x2530cf=_0x27b5f4;this[_0x2530cf(0x109)]=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/,this[_0x2530cf(0x106)]=/^(0|[1-9][0-9]*)$/,this[_0x2530cf(0x1d5)]=/'([^\\\\']|\\\\')*'/,this[_0x2530cf(0x19a)]=_0x5b4790[_0x2530cf(0x1e3)],this[_0x2530cf(0x167)]=_0x5b4790[_0x2530cf(0x1a4)],this[_0x2530cf(0x1c0)]=Object[_0x2530cf(0x142)],this[_0x2530cf(0x19f)]=Object['getOwnPropertyNames'],this[_0x2530cf(0x15a)]=_0x5b4790[_0x2530cf(0x177)],this[_0x2530cf(0x131)]=RegExp[_0x2530cf(0x14f)][_0x2530cf(0x178)],this['_dateToString']=Date['prototype'][_0x2530cf(0x178)];}[_0x27b5f4(0x111)](_0x4c4a88,_0x2bf3b0,_0x363f5d,_0x49674b){var _0x377020=_0x27b5f4,_0x277dde=this,_0x2bc8b0=_0x363f5d['autoExpand'];function _0x41b795(_0x639564,_0x42158d,_0x6a91ba){var _0x49c916=_0x4cb1;_0x42158d[_0x49c916(0x189)]=_0x49c916(0x173),_0x42158d[_0x49c916(0x12b)]=_0x639564['message'],_0x15be58=_0x6a91ba['node'][_0x49c916(0x108)],_0x6a91ba[_0x49c916(0x1da)][_0x49c916(0x108)]=_0x42158d,_0x277dde[_0x49c916(0x127)](_0x42158d,_0x6a91ba);}if(_0x2bf3b0&&_0x2bf3b0[_0x377020(0x1a9)])_0x41b795(_0x2bf3b0,_0x4c4a88,_0x363f5d);else try{_0x363f5d[_0x377020(0x10d)]++,_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d[_0x377020(0x10f)]['push'](_0x2bf3b0);var _0x18fcbd,_0x433fb1,_0x474096,_0x5d1925,_0x4376b6=[],_0x410b80=[],_0x1c2cde,_0x4e4ecd=this[_0x377020(0x193)](_0x2bf3b0),_0x4ab547=_0x4e4ecd==='array',_0x1715f4=!0x1,_0x2b510e=_0x4e4ecd==='function',_0x33450e=this[_0x377020(0x1c2)](_0x4e4ecd),_0x1a4f47=this[_0x377020(0x1dc)](_0x4e4ecd),_0x51c872=_0x33450e||_0x1a4f47,_0x5bab85={},_0xeee57b=0x0,_0x3447ef=!0x1,_0x15be58,_0x2144f8=/^(([1-9]{1}[0-9]*)|0)$/;if(_0x363f5d[_0x377020(0x14b)]){if(_0x4ab547){if(_0x433fb1=_0x2bf3b0[_0x377020(0x123)],_0x433fb1>_0x363f5d['elements']){for(_0x474096=0x0,_0x5d1925=_0x363f5d[_0x377020(0x1e0)],_0x18fcbd=_0x474096;_0x18fcbd<_0x5d1925;_0x18fcbd++)_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x12a)](_0x4376b6,_0x2bf3b0,_0x4e4ecd,_0x18fcbd,_0x363f5d));_0x4c4a88[_0x377020(0x1ca)]=!0x0;}else{for(_0x474096=0x0,_0x5d1925=_0x433fb1,_0x18fcbd=_0x474096;_0x18fcbd<_0x5d1925;_0x18fcbd++)_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x12a)](_0x4376b6,_0x2bf3b0,_0x4e4ecd,_0x18fcbd,_0x363f5d));}_0x363f5d[_0x377020(0x11d)]+=_0x410b80[_0x377020(0x123)];}if(!(_0x4e4ecd===_0x377020(0x16a)||_0x4e4ecd===_0x377020(0x1e3))&&!_0x33450e&&_0x4e4ecd!==_0x377020(0x105)&&_0x4e4ecd!=='Buffer'&&_0x4e4ecd!==_0x377020(0x182)){var _0x42c5c6=_0x49674b[_0x377020(0x11f)]||_0x363f5d[_0x377020(0x11f)];if(this[_0x377020(0x16c)](_0x2bf3b0)?(_0x18fcbd=0x0,_0x2bf3b0[_0x377020(0x1ab)](function(_0x387777){var _0x5be22f=_0x377020;if(_0xeee57b++,_0x363f5d[_0x5be22f(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;return;}if(!_0x363f5d[_0x5be22f(0x129)]&&_0x363f5d[_0x5be22f(0x1b7)]&&_0x363f5d[_0x5be22f(0x11d)]>_0x363f5d[_0x5be22f(0x12d)]){_0x3447ef=!0x0;return;}_0x410b80[_0x5be22f(0x1ac)](_0x277dde[_0x5be22f(0x12a)](_0x4376b6,_0x2bf3b0,_0x5be22f(0x1d9),_0x18fcbd++,_0x363f5d,function(_0x2a9834){return function(){return _0x2a9834;};}(_0x387777)));})):this['_isMap'](_0x2bf3b0)&&_0x2bf3b0[_0x377020(0x1ab)](function(_0x316b01,_0x47e14e){var _0x48f2d9=_0x377020;if(_0xeee57b++,_0x363f5d[_0x48f2d9(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;return;}if(!_0x363f5d[_0x48f2d9(0x129)]&&_0x363f5d[_0x48f2d9(0x1b7)]&&_0x363f5d[_0x48f2d9(0x11d)]>_0x363f5d[_0x48f2d9(0x12d)]){_0x3447ef=!0x0;return;}var _0x3e2f2f=_0x47e14e[_0x48f2d9(0x178)]();_0x3e2f2f[_0x48f2d9(0x123)]>0x64&&(_0x3e2f2f=_0x3e2f2f[_0x48f2d9(0x1ba)](0x0,0x64)+_0x48f2d9(0x118)),_0x410b80[_0x48f2d9(0x1ac)](_0x277dde[_0x48f2d9(0x12a)](_0x4376b6,_0x2bf3b0,_0x48f2d9(0x195),_0x3e2f2f,_0x363f5d,function(_0x2f0290){return function(){return _0x2f0290;};}(_0x316b01)));}),!_0x1715f4){try{for(_0x1c2cde in _0x2bf3b0)if(!(_0x4ab547&&_0x2144f8[_0x377020(0x166)](_0x1c2cde))&&!this[_0x377020(0x1e4)](_0x2bf3b0,_0x1c2cde,_0x363f5d)){if(_0xeee57b++,_0x363f5d[_0x377020(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;break;}if(!_0x363f5d['isExpressionToEvaluate']&&_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d['autoExpandPropertyCount']>_0x363f5d[_0x377020(0x12d)]){_0x3447ef=!0x0;break;}_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x151)](_0x4376b6,_0x5bab85,_0x2bf3b0,_0x4e4ecd,_0x1c2cde,_0x363f5d));}}catch{}if(_0x5bab85[_0x377020(0x120)]=!0x0,_0x2b510e&&(_0x5bab85['_p_name']=!0x0),!_0x3447ef){var _0x591c0f=[][_0x377020(0x1e1)](this[_0x377020(0x19f)](_0x2bf3b0))['concat'](this['_getOwnPropertySymbols'](_0x2bf3b0));for(_0x18fcbd=0x0,_0x433fb1=_0x591c0f['length'];_0x18fcbd<_0x433fb1;_0x18fcbd++)if(_0x1c2cde=_0x591c0f[_0x18fcbd],!(_0x4ab547&&_0x2144f8[_0x377020(0x166)](_0x1c2cde[_0x377020(0x178)]()))&&!this['_blacklistedProperty'](_0x2bf3b0,_0x1c2cde,_0x363f5d)&&!_0x5bab85['_p_'+_0x1c2cde[_0x377020(0x178)]()]){if(_0xeee57b++,_0x363f5d[_0x377020(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;break;}if(!_0x363f5d[_0x377020(0x129)]&&_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d[_0x377020(0x11d)]>_0x363f5d[_0x377020(0x12d)]){_0x3447ef=!0x0;break;}_0x410b80[_0x377020(0x1ac)](_0x277dde['_addObjectProperty'](_0x4376b6,_0x5bab85,_0x2bf3b0,_0x4e4ecd,_0x1c2cde,_0x363f5d));}}}}}if(_0x4c4a88[_0x377020(0x189)]=_0x4e4ecd,_0x51c872?(_0x4c4a88[_0x377020(0x1aa)]=_0x2bf3b0[_0x377020(0x1c7)](),this[_0x377020(0x1d8)](_0x4e4ecd,_0x4c4a88,_0x363f5d,_0x49674b)):_0x4e4ecd===_0x377020(0x1c1)?_0x4c4a88[_0x377020(0x1aa)]=this[_0x377020(0x16d)][_0x377020(0x197)](_0x2bf3b0):_0x4e4ecd==='bigint'?_0x4c4a88[_0x377020(0x1aa)]=_0x2bf3b0[_0x377020(0x178)]():_0x4e4ecd===_0x377020(0x114)?_0x4c4a88['value']=this['_regExpToString'][_0x377020(0x197)](_0x2bf3b0):_0x4e4ecd===_0x377020(0x144)&&this['_Symbol']?_0x4c4a88[_0x377020(0x1aa)]=this[_0x377020(0x15a)][_0x377020(0x14f)]['toString']['call'](_0x2bf3b0):!_0x363f5d[_0x377020(0x14b)]&&!(_0x4e4ecd===_0x377020(0x16a)||_0x4e4ecd===_0x377020(0x1e3))&&(delete _0x4c4a88[_0x377020(0x1aa)],_0x4c4a88[_0x377020(0x122)]=!0x0),_0x3447ef&&(_0x4c4a88['cappedProps']=!0x0),_0x15be58=_0x363f5d[_0x377020(0x1da)][_0x377020(0x108)],_0x363f5d['node'][_0x377020(0x108)]=_0x4c4a88,this['_treeNodePropertiesBeforeFullValue'](_0x4c4a88,_0x363f5d),_0x410b80[_0x377020(0x123)]){for(_0x18fcbd=0x0,_0x433fb1=_0x410b80[_0x377020(0x123)];_0x18fcbd<_0x433fb1;_0x18fcbd++)_0x410b80[_0x18fcbd](_0x18fcbd);}_0x4376b6[_0x377020(0x123)]&&(_0x4c4a88['props']=_0x4376b6);}catch(_0x1fa9b2){_0x41b795(_0x1fa9b2,_0x4c4a88,_0x363f5d);}return this[_0x377020(0x13d)](_0x2bf3b0,_0x4c4a88),this[_0x377020(0x1ae)](_0x4c4a88,_0x363f5d),_0x363f5d[_0x377020(0x1da)]['current']=_0x15be58,_0x363f5d['level']--,_0x363f5d[_0x377020(0x1b7)]=_0x2bc8b0,_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d['autoExpandPreviousObjects'][_0x377020(0x125)](),_0x4c4a88;}['_getOwnPropertySymbols'](_0xb5846){var _0x52041f=_0x27b5f4;return Object['getOwnPropertySymbols']?Object[_0x52041f(0x139)](_0xb5846):[];}[_0x27b5f4(0x16c)](_0x5282f4){var _0x3228cc=_0x27b5f4;return!!(_0x5282f4&&_0x5b4790[_0x3228cc(0x1d9)]&&this[_0x3228cc(0x15e)](_0x5282f4)===_0x3228cc(0x1a5)&&_0x5282f4[_0x3228cc(0x1ab)]);}['_blacklistedProperty'](_0x3e1e02,_0x19f7da,_0x2ed27d){var _0x3d5f32=_0x27b5f4;return _0x2ed27d[_0x3d5f32(0x158)]?typeof _0x3e1e02[_0x19f7da]==_0x3d5f32(0x1c5):!0x1;}[_0x27b5f4(0x193)](_0x1d8bce){var _0xf22702=_0x27b5f4,_0x8f3c98='';return _0x8f3c98=typeof _0x1d8bce,_0x8f3c98==='object'?this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x1e2)?_0x8f3c98=_0xf22702(0x126):this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x149)?_0x8f3c98=_0xf22702(0x1c1):this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x18e)?_0x8f3c98='bigint':_0x1d8bce===null?_0x8f3c98=_0xf22702(0x16a):_0x1d8bce['constructor']&&(_0x8f3c98=_0x1d8bce[_0xf22702(0x1be)][_0xf22702(0x110)]||_0x8f3c98):_0x8f3c98===_0xf22702(0x1e3)&&this['_HTMLAllCollection']&&_0x1d8bce instanceof this['_HTMLAllCollection']&&(_0x8f3c98='HTMLAllCollection'),_0x8f3c98;}['_objectToString'](_0x362d66){var _0x3c798c=_0x27b5f4;return Object[_0x3c798c(0x14f)][_0x3c798c(0x178)][_0x3c798c(0x197)](_0x362d66);}['_isPrimitiveType'](_0x291f7d){var _0x5359d4=_0x27b5f4;return _0x291f7d===_0x5359d4(0x145)||_0x291f7d===_0x5359d4(0x14e)||_0x291f7d==='number';}[_0x27b5f4(0x1dc)](_0x4cbff7){var _0x3ee85a=_0x27b5f4;return _0x4cbff7==='Boolean'||_0x4cbff7===_0x3ee85a(0x105)||_0x4cbff7===_0x3ee85a(0x10e);}['_addProperty'](_0x2378df,_0x35fcbe,_0x1b181f,_0xaf562b,_0xd53cb8,_0x399f00){var _0x452e20=this;return function(_0x144d49){var _0x201876=_0x4cb1,_0x46a7c6=_0xd53cb8[_0x201876(0x1da)][_0x201876(0x108)],_0x3d1f64=_0xd53cb8[_0x201876(0x1da)][_0x201876(0x163)],_0x411984=_0xd53cb8['node'][_0x201876(0x192)];_0xd53cb8[_0x201876(0x1da)][_0x201876(0x192)]=_0x46a7c6,_0xd53cb8['node'][_0x201876(0x163)]=typeof _0xaf562b==_0x201876(0x1cb)?_0xaf562b:_0x144d49,_0x2378df['push'](_0x452e20['_property'](_0x35fcbe,_0x1b181f,_0xaf562b,_0xd53cb8,_0x399f00)),_0xd53cb8[_0x201876(0x1da)][_0x201876(0x192)]=_0x411984,_0xd53cb8['node'][_0x201876(0x163)]=_0x3d1f64;};}[_0x27b5f4(0x151)](_0x447828,_0x14c2cb,_0x2514be,_0x499052,_0x3ac241,_0x50d530,_0x5931a7){var _0x5d6f85=_0x27b5f4,_0x22fac8=this;return _0x14c2cb[_0x5d6f85(0x152)+_0x3ac241[_0x5d6f85(0x178)]()]=!0x0,function(_0x2163ab){var _0x46ef79=_0x5d6f85,_0x4e6994=_0x50d530['node'][_0x46ef79(0x108)],_0x379fad=_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x163)],_0x4648ab=_0x50d530[_0x46ef79(0x1da)]['parent'];_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x192)]=_0x4e6994,_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x163)]=_0x2163ab,_0x447828[_0x46ef79(0x1ac)](_0x22fac8[_0x46ef79(0x1ad)](_0x2514be,_0x499052,_0x3ac241,_0x50d530,_0x5931a7)),_0x50d530[_0x46ef79(0x1da)]['parent']=_0x4648ab,_0x50d530['node']['index']=_0x379fad;};}[_0x27b5f4(0x1ad)](_0x11ba45,_0x2c8472,_0x75afa4,_0xef2682,_0x2e97cf){var _0x5d139e=_0x27b5f4,_0x2f2ead=this;_0x2e97cf||(_0x2e97cf=function(_0x2f3675,_0x36e0f8){return _0x2f3675[_0x36e0f8];});var _0x1d0670=_0x75afa4['toString'](),_0x127b27=_0xef2682['expressionsToEvaluate']||{},_0x3818ef=_0xef2682[_0x5d139e(0x14b)],_0x501535=_0xef2682[_0x5d139e(0x129)];try{var _0x1654e3=this[_0x5d139e(0x157)](_0x11ba45),_0x22d9d0=_0x1d0670;_0x1654e3&&_0x22d9d0[0x0]==='\\x27'&&(_0x22d9d0=_0x22d9d0[_0x5d139e(0x184)](0x1,_0x22d9d0[_0x5d139e(0x123)]-0x2));var _0x10bfe0=_0xef2682[_0x5d139e(0x117)]=_0x127b27[_0x5d139e(0x152)+_0x22d9d0];_0x10bfe0&&(_0xef2682[_0x5d139e(0x14b)]=_0xef2682['depth']+0x1),_0xef2682[_0x5d139e(0x129)]=!!_0x10bfe0;var _0x108f45=typeof _0x75afa4==_0x5d139e(0x144),_0x289b97={'name':_0x108f45||_0x1654e3?_0x1d0670:this[_0x5d139e(0x115)](_0x1d0670)};if(_0x108f45&&(_0x289b97[_0x5d139e(0x144)]=!0x0),!(_0x2c8472===_0x5d139e(0x126)||_0x2c8472===_0x5d139e(0x14c))){var _0x2bf7ad=this[_0x5d139e(0x1c0)](_0x11ba45,_0x75afa4);if(_0x2bf7ad&&(_0x2bf7ad['set']&&(_0x289b97['setter']=!0x0),_0x2bf7ad['get']&&!_0x10bfe0&&!_0xef2682[_0x5d139e(0x165)]))return _0x289b97['getter']=!0x0,this[_0x5d139e(0x17a)](_0x289b97,_0xef2682),_0x289b97;}var _0x1f14f8;try{_0x1f14f8=_0x2e97cf(_0x11ba45,_0x75afa4);}catch(_0x309f6f){return _0x289b97={'name':_0x1d0670,'type':_0x5d139e(0x173),'error':_0x309f6f[_0x5d139e(0x155)]},this['_processTreeNodeResult'](_0x289b97,_0xef2682),_0x289b97;}var _0x19f7d6=this[_0x5d139e(0x193)](_0x1f14f8),_0x21be7b=this[_0x5d139e(0x1c2)](_0x19f7d6);if(_0x289b97[_0x5d139e(0x189)]=_0x19f7d6,_0x21be7b)this['_processTreeNodeResult'](_0x289b97,_0xef2682,_0x1f14f8,function(){var _0x24bfe4=_0x5d139e;_0x289b97[_0x24bfe4(0x1aa)]=_0x1f14f8[_0x24bfe4(0x1c7)](),!_0x10bfe0&&_0x2f2ead[_0x24bfe4(0x1d8)](_0x19f7d6,_0x289b97,_0xef2682,{});});else{var _0x24f667=_0xef2682['autoExpand']&&_0xef2682['level']<_0xef2682[_0x5d139e(0x18f)]&&_0xef2682[_0x5d139e(0x10f)][_0x5d139e(0x11a)](_0x1f14f8)<0x0&&_0x19f7d6!==_0x5d139e(0x1c5)&&_0xef2682[_0x5d139e(0x11d)]<_0xef2682['autoExpandLimit'];_0x24f667||_0xef2682['level']<_0x3818ef||_0x10bfe0?(this[_0x5d139e(0x111)](_0x289b97,_0x1f14f8,_0xef2682,_0x10bfe0||{}),this[_0x5d139e(0x13d)](_0x1f14f8,_0x289b97)):this['_processTreeNodeResult'](_0x289b97,_0xef2682,_0x1f14f8,function(){var _0x55b27e=_0x5d139e;_0x19f7d6===_0x55b27e(0x16a)||_0x19f7d6==='undefined'||(delete _0x289b97[_0x55b27e(0x1aa)],_0x289b97['capped']=!0x0);});}return _0x289b97;}finally{_0xef2682[_0x5d139e(0x117)]=_0x127b27,_0xef2682[_0x5d139e(0x14b)]=_0x3818ef,_0xef2682[_0x5d139e(0x129)]=_0x501535;}}[_0x27b5f4(0x1d8)](_0x345b2b,_0x37826c,_0x493a0b,_0x5bbe39){var _0x41c5d3=_0x27b5f4,_0x4e7ce2=_0x5bbe39[_0x41c5d3(0x13e)]||_0x493a0b[_0x41c5d3(0x13e)];if((_0x345b2b==='string'||_0x345b2b==='String')&&_0x37826c[_0x41c5d3(0x1aa)]){let _0x58e7f0=_0x37826c['value'][_0x41c5d3(0x123)];_0x493a0b[_0x41c5d3(0x17b)]+=_0x58e7f0,_0x493a0b[_0x41c5d3(0x17b)]>_0x493a0b['totalStrLength']?(_0x37826c[_0x41c5d3(0x122)]='',delete _0x37826c[_0x41c5d3(0x1aa)]):_0x58e7f0>_0x4e7ce2&&(_0x37826c[_0x41c5d3(0x122)]=_0x37826c[_0x41c5d3(0x1aa)][_0x41c5d3(0x184)](0x0,_0x4e7ce2),delete _0x37826c[_0x41c5d3(0x1aa)]);}}[_0x27b5f4(0x157)](_0x27e462){var _0x52af29=_0x27b5f4;return!!(_0x27e462&&_0x5b4790[_0x52af29(0x195)]&&this[_0x52af29(0x15e)](_0x27e462)===_0x52af29(0x1db)&&_0x27e462[_0x52af29(0x1ab)]);}['_propertyName'](_0x4009b0){var _0xaac64b=_0x27b5f4;if(_0x4009b0[_0xaac64b(0x1e5)](/^\\d+$/))return _0x4009b0;var _0x3df4b1;try{_0x3df4b1=JSON[_0xaac64b(0x183)](''+_0x4009b0);}catch{_0x3df4b1='\\x22'+this[_0xaac64b(0x15e)](_0x4009b0)+'\\x22';}return _0x3df4b1[_0xaac64b(0x1e5)](/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?_0x3df4b1=_0x3df4b1['substr'](0x1,_0x3df4b1[_0xaac64b(0x123)]-0x2):_0x3df4b1=_0x3df4b1[_0xaac64b(0x1de)](/'/g,'\\x5c\\x27')[_0xaac64b(0x1de)](/\\\\\"/g,'\\x22')[_0xaac64b(0x1de)](/(^\"|\"$)/g,'\\x27'),_0x3df4b1;}['_processTreeNodeResult'](_0x19824d,_0x5c5e8f,_0x1680fa,_0x5b0779){var _0x3d2550=_0x27b5f4;this['_treeNodePropertiesBeforeFullValue'](_0x19824d,_0x5c5e8f),_0x5b0779&&_0x5b0779(),this[_0x3d2550(0x13d)](_0x1680fa,_0x19824d),this[_0x3d2550(0x1ae)](_0x19824d,_0x5c5e8f);}[_0x27b5f4(0x127)](_0x5aff2e,_0x47d2f7){var _0x5cd962=_0x27b5f4;this[_0x5cd962(0x10b)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x196)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x17f)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x134)](_0x5aff2e,_0x47d2f7);}['_setNodeId'](_0x452ae7,_0x297f1b){}[_0x27b5f4(0x196)](_0xece9cb,_0x4e0399){}['_setNodeLabel'](_0x2c0a1b,_0x23ac11){}[_0x27b5f4(0x18c)](_0x41f0d5){var _0x5db41b=_0x27b5f4;return _0x41f0d5===this[_0x5db41b(0x19a)];}[_0x27b5f4(0x1ae)](_0x327dda,_0x2ed747){var _0x28aea0=_0x27b5f4;this['_setNodeLabel'](_0x327dda,_0x2ed747),this[_0x28aea0(0x15b)](_0x327dda),_0x2ed747['sortProps']&&this[_0x28aea0(0x154)](_0x327dda),this[_0x28aea0(0x1c3)](_0x327dda,_0x2ed747),this[_0x28aea0(0x11b)](_0x327dda,_0x2ed747),this[_0x28aea0(0x1d4)](_0x327dda);}[_0x27b5f4(0x13d)](_0x28ed57,_0x2f9ad0){var _0x2f2aa2=_0x27b5f4;try{_0x28ed57&&typeof _0x28ed57[_0x2f2aa2(0x123)]==_0x2f2aa2(0x1cb)&&(_0x2f9ad0[_0x2f2aa2(0x123)]=_0x28ed57[_0x2f2aa2(0x123)]);}catch{}if(_0x2f9ad0[_0x2f2aa2(0x189)]===_0x2f2aa2(0x1cb)||_0x2f9ad0['type']==='Number'){if(isNaN(_0x2f9ad0['value']))_0x2f9ad0[_0x2f2aa2(0x164)]=!0x0,delete _0x2f9ad0['value'];else switch(_0x2f9ad0[_0x2f2aa2(0x1aa)]){case Number['POSITIVE_INFINITY']:_0x2f9ad0[_0x2f2aa2(0x14d)]=!0x0,delete _0x2f9ad0[_0x2f2aa2(0x1aa)];break;case Number[_0x2f2aa2(0x199)]:_0x2f9ad0[_0x2f2aa2(0x1bc)]=!0x0,delete _0x2f9ad0[_0x2f2aa2(0x1aa)];break;case 0x0:this[_0x2f2aa2(0x1e7)](_0x2f9ad0[_0x2f2aa2(0x1aa)])&&(_0x2f9ad0[_0x2f2aa2(0x12e)]=!0x0);break;}}else _0x2f9ad0[_0x2f2aa2(0x189)]===_0x2f2aa2(0x1c5)&&typeof _0x28ed57[_0x2f2aa2(0x110)]=='string'&&_0x28ed57[_0x2f2aa2(0x110)]&&_0x2f9ad0[_0x2f2aa2(0x110)]&&_0x28ed57[_0x2f2aa2(0x110)]!==_0x2f9ad0['name']&&(_0x2f9ad0['funcName']=_0x28ed57[_0x2f2aa2(0x110)]);}[_0x27b5f4(0x1e7)](_0x2ebacd){return 0x1/_0x2ebacd===Number['NEGATIVE_INFINITY'];}[_0x27b5f4(0x154)](_0x33f55f){var _0x2880b5=_0x27b5f4;!_0x33f55f[_0x2880b5(0x11f)]||!_0x33f55f['props'][_0x2880b5(0x123)]||_0x33f55f[_0x2880b5(0x189)]==='array'||_0x33f55f[_0x2880b5(0x189)]===_0x2880b5(0x195)||_0x33f55f[_0x2880b5(0x189)]===_0x2880b5(0x1d9)||_0x33f55f[_0x2880b5(0x11f)]['sort'](function(_0xeb1d3d,_0x1e5ad8){var _0x465665=_0x2880b5,_0x228711=_0xeb1d3d[_0x465665(0x110)][_0x465665(0x16b)](),_0x4a8d2e=_0x1e5ad8[_0x465665(0x110)][_0x465665(0x16b)]();return _0x228711<_0x4a8d2e?-0x1:_0x228711>_0x4a8d2e?0x1:0x0;});}['_addFunctionsNode'](_0x44bb25,_0x246ec6){var _0x22ee2b=_0x27b5f4;if(!(_0x246ec6['noFunctions']||!_0x44bb25[_0x22ee2b(0x11f)]||!_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x123)])){for(var _0xdec3bc=[],_0x3df253=[],_0x3979be=0x0,_0x45594a=_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x123)];_0x3979be<_0x45594a;_0x3979be++){var _0x5162e2=_0x44bb25[_0x22ee2b(0x11f)][_0x3979be];_0x5162e2[_0x22ee2b(0x189)]==='function'?_0xdec3bc[_0x22ee2b(0x1ac)](_0x5162e2):_0x3df253[_0x22ee2b(0x1ac)](_0x5162e2);}if(!(!_0x3df253[_0x22ee2b(0x123)]||_0xdec3bc['length']<=0x1)){_0x44bb25[_0x22ee2b(0x11f)]=_0x3df253;var _0x21a1e2={'functionsNode':!0x0,'props':_0xdec3bc};this[_0x22ee2b(0x10b)](_0x21a1e2,_0x246ec6),this[_0x22ee2b(0x169)](_0x21a1e2,_0x246ec6),this[_0x22ee2b(0x15b)](_0x21a1e2),this[_0x22ee2b(0x134)](_0x21a1e2,_0x246ec6),_0x21a1e2['id']+='\\x20f',_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x11e)](_0x21a1e2);}}}[_0x27b5f4(0x11b)](_0x4447de,_0x39bc80){}[_0x27b5f4(0x15b)](_0x2ad7d8){}[_0x27b5f4(0x172)](_0x21c674){var _0x201530=_0x27b5f4;return Array[_0x201530(0x132)](_0x21c674)||typeof _0x21c674==_0x201530(0x1d1)&&this[_0x201530(0x15e)](_0x21c674)===_0x201530(0x1e2);}['_setNodePermissions'](_0x2c4127,_0x25c7dc){}[_0x27b5f4(0x1d4)](_0x368d9f){var _0x1076c1=_0x27b5f4;delete _0x368d9f['_hasSymbolPropertyOnItsPath'],delete _0x368d9f[_0x1076c1(0x13a)],delete _0x368d9f[_0x1076c1(0x161)];}[_0x27b5f4(0x17f)](_0x3b452d,_0x210ca2){}['_propertyAccessor'](_0x40ae2e){var _0x9d2342=_0x27b5f4;return _0x40ae2e?_0x40ae2e[_0x9d2342(0x1e5)](this[_0x9d2342(0x106)])?'['+_0x40ae2e+']':_0x40ae2e[_0x9d2342(0x1e5)](this['_keyStrRegExp'])?'.'+_0x40ae2e:_0x40ae2e[_0x9d2342(0x1e5)](this['_quotedRegExp'])?'['+_0x40ae2e+']':'[\\x27'+_0x40ae2e+'\\x27]':'';}}let _0x103982=new _0x7302f2();function _0x4ef4d5(_0x447b63,_0x2ac7e6,_0x1a6859,_0x160f8a,_0x430090,_0x134fa9){var _0x27e421=_0x27b5f4;let _0x16431e,_0x4089ff;try{_0x4089ff=_0x4d049a(),_0x16431e=_0xe1c80c[_0x2ac7e6],!_0x16431e||_0x4089ff-_0x16431e['ts']>0x1f4&&_0x16431e[_0x27e421(0x1bb)]&&_0x16431e[_0x27e421(0x148)]/_0x16431e['count']<0x64?(_0xe1c80c[_0x2ac7e6]=_0x16431e={'count':0x0,'time':0x0,'ts':_0x4089ff},_0xe1c80c['hits']={}):_0x4089ff-_0xe1c80c[_0x27e421(0x1bf)]['ts']>0x32&&_0xe1c80c[_0x27e421(0x1bf)]['count']&&_0xe1c80c['hits'][_0x27e421(0x148)]/_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]<0x64&&(_0xe1c80c[_0x27e421(0x1bf)]={});let _0x2f24ca=[],_0x2739a9=_0x16431e[_0x27e421(0x19e)]||_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x19e)]?_0x5df0c1:_0x538d0c,_0x147472=_0x372ec9=>{var _0x4a7838=_0x27e421;let _0x5c2b64={};return _0x5c2b64[_0x4a7838(0x11f)]=_0x372ec9['props'],_0x5c2b64[_0x4a7838(0x1e0)]=_0x372ec9[_0x4a7838(0x1e0)],_0x5c2b64[_0x4a7838(0x13e)]=_0x372ec9[_0x4a7838(0x13e)],_0x5c2b64[_0x4a7838(0x12c)]=_0x372ec9[_0x4a7838(0x12c)],_0x5c2b64[_0x4a7838(0x12d)]=_0x372ec9['autoExpandLimit'],_0x5c2b64['autoExpandMaxDepth']=_0x372ec9[_0x4a7838(0x18f)],_0x5c2b64[_0x4a7838(0x1b3)]=!0x1,_0x5c2b64[_0x4a7838(0x158)]=!_0x2df5e3,_0x5c2b64[_0x4a7838(0x14b)]=0x1,_0x5c2b64[_0x4a7838(0x10d)]=0x0,_0x5c2b64[_0x4a7838(0x171)]=_0x4a7838(0x1e6),_0x5c2b64[_0x4a7838(0x141)]=_0x4a7838(0x1c4),_0x5c2b64['autoExpand']=!0x0,_0x5c2b64['autoExpandPreviousObjects']=[],_0x5c2b64[_0x4a7838(0x11d)]=0x0,_0x5c2b64['resolveGetters']=!0x0,_0x5c2b64[_0x4a7838(0x17b)]=0x0,_0x5c2b64[_0x4a7838(0x1da)]={'current':void 0x0,'parent':void 0x0,'index':0x0},_0x5c2b64;};for(var _0x1e1001=0x0;_0x1e1001<_0x430090[_0x27e421(0x123)];_0x1e1001++)_0x2f24ca[_0x27e421(0x1ac)](_0x103982['serialize']({'timeNode':_0x447b63===_0x27e421(0x148)||void 0x0},_0x430090[_0x1e1001],_0x147472(_0x2739a9),{}));if(_0x447b63==='trace'){let _0x58fe7f=Error['stackTraceLimit'];try{Error['stackTraceLimit']=0x1/0x0,_0x2f24ca[_0x27e421(0x1ac)](_0x103982[_0x27e421(0x111)]({'stackNode':!0x0},new Error()['stack'],_0x147472(_0x2739a9),{'strLength':0x1/0x0}));}finally{Error[_0x27e421(0x188)]=_0x58fe7f;}}return{'method':_0x27e421(0x1b6),'version':_0x3fd8d0,'args':[{'ts':_0x1a6859,'session':_0x160f8a,'args':_0x2f24ca,'id':_0x2ac7e6,'context':_0x134fa9}]};}catch(_0xe8878a){return{'method':_0x27e421(0x1b6),'version':_0x3fd8d0,'args':[{'ts':_0x1a6859,'session':_0x160f8a,'args':[{'type':'unknown','error':_0xe8878a&&_0xe8878a[_0x27e421(0x155)]}],'id':_0x2ac7e6,'context':_0x134fa9}]};}finally{try{if(_0x16431e&&_0x4089ff){let _0x956241=_0x4d049a();_0x16431e[_0x27e421(0x1bb)]++,_0x16431e[_0x27e421(0x148)]+=_0x272fdc(_0x4089ff,_0x956241),_0x16431e['ts']=_0x956241,_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]++,_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x148)]+=_0x272fdc(_0x4089ff,_0x956241),_0xe1c80c['hits']['ts']=_0x956241,(_0x16431e[_0x27e421(0x1bb)]>0x32||_0x16431e['time']>0x64)&&(_0x16431e[_0x27e421(0x19e)]=!0x0),(_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]>0x3e8||_0xe1c80c['hits'][_0x27e421(0x148)]>0x12c)&&(_0xe1c80c[_0x27e421(0x1bf)]['reduceLimits']=!0x0);}}catch{}}}return _0x5b4790[_0x27b5f4(0x18b)];})(globalThis,_0x5c041f(0x124),_0x5c041f(0x160),_0x5c041f(0x174),_0x5c041f(0x19b),_0x5c041f(0x18a),_0x5c041f(0x17d),_0x5c041f(0x198),_0x5c041f(0x1d7));")}catch{}})().consoleLog(n,e)}catch{}return e}let ihe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=zr({type:n,selectors:[["app-questions"]],decls:32,vars:0,consts:[["id","contact",1,"contact"],["width","100%","src","../../assets/images/tiraAjolote.jpeg","alt",""],[1,"row"],[1,"faq"],[1,"title"],[1,"box","active"]],template:function(t,i){1&t&&(ve(0,"section",0),Xt(1,"img",1),ve(2,"div",2)(3,"div",3)(4,"h3",4),Pe(5,"Preguntas Frecuentes"),Ce(),ve(6,"div",5)(7,"h3"),Pe(8,"\xbfComo cancelar?"),Ce(),ve(9,"p"),Pe(10,"Lamentablemente las cancelaciones no pueden hacerce en linea, por lo que es necesario contactarnos por telefono."),Ce()(),ve(11,"div",5)(12,"h3"),Pe(13,"\xbfComo veo la disponibilidad?"),Ce(),ve(14,"p"),Pe(15,"Puedes seleccionar la fecha estimada en nuestro apartado de reservas y seste indicar\xe1 si la fecha, habitacion y/o servicios estan disponibles."),Ce()(),ve(16,"div",5)(17,"h3"),Pe(18,"\xbfCuales metodos de pago son aceptados?"),Ce(),ve(19,"p"),Pe(20,"Aceptamos todo tipo de metodos de pago!, tarjeta, efectivo y transferencias"),Ce()(),ve(21,"div",5)(22,"h3"),Pe(23,"\xbfComo reservo?"),Ce(),ve(24,"p"),Pe(25,"Puede ser directamente desde nuestra pagina web o si bien lo prefieres comunicandote a nuestro numero telefonico"),Ce()(),ve(26,"div",5)(27,"h3"),Pe(28,"\xbfCuales son los requisitos para una reservacion?"),Ce(),ve(29,"p"),Pe(30,"Somos un hotel familiar por lo que no hay requisitos, todas las edades son bienvenidas!"),Ce()()()(),Xt(31,"img",1),Ce())}}),n})();function Ep(n,...e){try{(function aC(){try{return(0,eval)("globalThis._console_ninja")||(0,eval)("/* https://github.com/wallabyjs/console-ninja#how-does-it-work */'use strict';function _0x4cb1(_0x4f848e,_0x9f6681){var _0x382e6d=_0x382e();return _0x4cb1=function(_0x4cb1d,_0x385ce4){_0x4cb1d=_0x4cb1d-0x104;var _0x258f0e=_0x382e6d[_0x4cb1d];return _0x258f0e;},_0x4cb1(_0x4f848e,_0x9f6681);}var _0x5c041f=_0x4cb1;(function(_0x41f6bb,_0x590643){var _0x32cf76=_0x4cb1,_0x349fd4=_0x41f6bb();while(!![]){try{var _0x587f11=parseInt(_0x32cf76(0x1b2))/0x1+parseInt(_0x32cf76(0x16e))/0x2+parseInt(_0x32cf76(0x170))/0x3+-parseInt(_0x32cf76(0x1b4))/0x4*(parseInt(_0x32cf76(0x1a0))/0x5)+parseInt(_0x32cf76(0x1a8))/0x6*(parseInt(_0x32cf76(0x194))/0x7)+parseInt(_0x32cf76(0x136))/0x8+-parseInt(_0x32cf76(0x179))/0x9;if(_0x587f11===_0x590643)break;else _0x349fd4['push'](_0x349fd4['shift']());}catch(_0x3419a0){_0x349fd4['push'](_0x349fd4['shift']());}}}(_0x382e,0x92987));var ue=Object['create'],te=Object['defineProperty'],he=Object[_0x5c041f(0x142)],le=Object[_0x5c041f(0x15c)],fe=Object['getPrototypeOf'],_e=Object[_0x5c041f(0x14f)][_0x5c041f(0x1a2)],pe=(_0x4a860d,_0x2991b2,_0x244fb2,_0x1ae054)=>{var _0x5076d7=_0x5c041f;if(_0x2991b2&&typeof _0x2991b2==_0x5076d7(0x1d1)||typeof _0x2991b2==_0x5076d7(0x1c5)){for(let _0x3968f6 of le(_0x2991b2))!_e[_0x5076d7(0x197)](_0x4a860d,_0x3968f6)&&_0x3968f6!==_0x244fb2&&te(_0x4a860d,_0x3968f6,{'get':()=>_0x2991b2[_0x3968f6],'enumerable':!(_0x1ae054=he(_0x2991b2,_0x3968f6))||_0x1ae054[_0x5076d7(0x1d3)]});}return _0x4a860d;},ne=(_0x2d78ff,_0x2bde4e,_0xe92645)=>(_0xe92645=_0x2d78ff!=null?ue(fe(_0x2d78ff)):{},pe(_0x2bde4e||!_0x2d78ff||!_0x2d78ff[_0x5c041f(0x191)]?te(_0xe92645,_0x5c041f(0x1c6),{'value':_0x2d78ff,'enumerable':!0x0}):_0xe92645,_0x2d78ff)),Q=class{constructor(_0x187a81,_0x47eeea,_0xfb14bc,_0x112373){var _0x4ccd8d=_0x5c041f;this[_0x4ccd8d(0x143)]=_0x187a81,this['host']=_0x47eeea,this['port']=_0xfb14bc,this[_0x4ccd8d(0x113)]=_0x112373,this[_0x4ccd8d(0x1b9)]=!0x0,this[_0x4ccd8d(0x1cd)]=!0x0,this[_0x4ccd8d(0x17c)]=!0x1,this[_0x4ccd8d(0x107)]=!0x1,this['_inBrowser']=!!this[_0x4ccd8d(0x143)][_0x4ccd8d(0x181)],this[_0x4ccd8d(0x186)]=null,this[_0x4ccd8d(0x112)]=0x0,this[_0x4ccd8d(0x1b1)]=0x14,this['_sendErrorMessage']=this[_0x4ccd8d(0x146)]?_0x4ccd8d(0x19c):_0x4ccd8d(0x121);}async[_0x5c041f(0x130)](){var _0x1b0d94=_0x5c041f;if(this['_WebSocketClass'])return this[_0x1b0d94(0x186)];let _0x4389b0;if(this[_0x1b0d94(0x146)])_0x4389b0=this[_0x1b0d94(0x143)][_0x1b0d94(0x181)];else{if(this[_0x1b0d94(0x143)][_0x1b0d94(0x1a3)]?.['_WebSocket'])_0x4389b0=this[_0x1b0d94(0x143)]['process']?.[_0x1b0d94(0x1bd)];else try{let _0x51e77f=await import(_0x1b0d94(0x1df));_0x4389b0=(await import((await import(_0x1b0d94(0x138)))[_0x1b0d94(0x10c)](_0x51e77f[_0x1b0d94(0x153)](this['nodeModules'],'ws/index.js'))['toString']()))[_0x1b0d94(0x1c6)];}catch{try{_0x4389b0=require(require('path')['join'](this[_0x1b0d94(0x113)],'ws'));}catch{throw new Error(_0x1b0d94(0x128));}}}return this[_0x1b0d94(0x186)]=_0x4389b0,_0x4389b0;}[_0x5c041f(0x1b5)](){var _0x1be63c=_0x5c041f;this['_connecting']||this['_connected']||this['_connectAttemptCount']>=this[_0x1be63c(0x1b1)]||(this[_0x1be63c(0x1cd)]=!0x1,this['_connecting']=!0x0,this[_0x1be63c(0x112)]++,this['_ws']=new Promise((_0x34a063,_0x5b7758)=>{var _0x560b0e=_0x1be63c;this[_0x560b0e(0x130)]()['then'](_0x2eca62=>{var _0x4fd847=_0x560b0e;let _0x2ba1af=new _0x2eca62(_0x4fd847(0x185)+this['host']+':'+this[_0x4fd847(0x17e)]);_0x2ba1af['onerror']=()=>{var _0x2b225e=_0x4fd847;this[_0x2b225e(0x1b9)]=!0x1,this[_0x2b225e(0x135)](_0x2ba1af),this[_0x2b225e(0x175)](),_0x5b7758(new Error('logger\\x20websocket\\x20error'));},_0x2ba1af[_0x4fd847(0x15f)]=()=>{var _0x5e4efc=_0x4fd847;this['_inBrowser']||_0x2ba1af[_0x5e4efc(0x119)]&&_0x2ba1af[_0x5e4efc(0x119)][_0x5e4efc(0x1c8)]&&_0x2ba1af['_socket'][_0x5e4efc(0x1c8)](),_0x34a063(_0x2ba1af);},_0x2ba1af[_0x4fd847(0x12f)]=()=>{var _0x587a15=_0x4fd847;this['_allowedToConnectOnSend']=!0x0,this[_0x587a15(0x135)](_0x2ba1af),this['_attemptToReconnectShortly']();},_0x2ba1af[_0x4fd847(0x176)]=_0x5c46e0=>{var _0x166b3f=_0x4fd847;try{_0x5c46e0&&_0x5c46e0[_0x166b3f(0x1af)]&&this[_0x166b3f(0x146)]&&JSON[_0x166b3f(0x1d2)](_0x5c46e0[_0x166b3f(0x1af)])[_0x166b3f(0x11c)]===_0x166b3f(0x1a7)&&this[_0x166b3f(0x143)][_0x166b3f(0x180)][_0x166b3f(0x1a7)]();}catch{}};})['then'](_0x2a47ca=>(this[_0x560b0e(0x17c)]=!0x0,this[_0x560b0e(0x107)]=!0x1,this['_allowedToConnectOnSend']=!0x1,this[_0x560b0e(0x1b9)]=!0x0,this[_0x560b0e(0x112)]=0x0,_0x2a47ca))[_0x560b0e(0x13f)](_0x449b17=>(this['_connected']=!0x1,this[_0x560b0e(0x107)]=!0x1,_0x5b7758(new Error(_0x560b0e(0x1ce)+(_0x449b17&&_0x449b17[_0x560b0e(0x155)])))));}));}[_0x5c041f(0x135)](_0x11dfe2){var _0x35b03a=_0x5c041f;this[_0x35b03a(0x17c)]=!0x1,this['_connecting']=!0x1;try{_0x11dfe2['onclose']=null,_0x11dfe2[_0x35b03a(0x1c9)]=null,_0x11dfe2['onopen']=null;}catch{}try{_0x11dfe2[_0x35b03a(0x15d)]<0x2&&_0x11dfe2[_0x35b03a(0x13c)]();}catch{}}[_0x5c041f(0x175)](){var _0x31aeaf=_0x5c041f;clearTimeout(this[_0x31aeaf(0x1d0)]),!(this[_0x31aeaf(0x112)]>=this[_0x31aeaf(0x1b1)])&&(this[_0x31aeaf(0x1d0)]=setTimeout(()=>{var _0x395757=_0x31aeaf;this[_0x395757(0x17c)]||this['_connecting']||(this['_connectToHostNow'](),this[_0x395757(0x156)]?.[_0x395757(0x13f)](()=>this['_attemptToReconnectShortly']()));},0x1f4),this[_0x31aeaf(0x1d0)][_0x31aeaf(0x1c8)]&&this[_0x31aeaf(0x1d0)][_0x31aeaf(0x1c8)]());}async['send'](_0x353d6f){var _0x36feac=_0x5c041f;try{if(!this[_0x36feac(0x1b9)])return;this[_0x36feac(0x1cd)]&&this[_0x36feac(0x1b5)](),(await this[_0x36feac(0x156)])['send'](JSON[_0x36feac(0x183)](_0x353d6f));}catch(_0xea0863){console[_0x36feac(0x137)](this[_0x36feac(0x159)]+':\\x20'+(_0xea0863&&_0xea0863[_0x36feac(0x155)])),this[_0x36feac(0x1b9)]=!0x1,this[_0x36feac(0x175)]();}}};function V(_0x316ec2,_0x37b6b9,_0x242e78,_0x2a8d2f,_0x23fccf){var _0x12a29b=_0x5c041f;let _0xd77357=_0x242e78[_0x12a29b(0x1cc)](',')['map'](_0xe82dc7=>{var _0x319735=_0x12a29b;try{_0x316ec2[_0x319735(0x1d6)]||((_0x23fccf===_0x319735(0x140)||_0x23fccf===_0x319735(0x1cf)||_0x23fccf===_0x319735(0x1dd))&&(_0x23fccf+=_0x316ec2['process']?.[_0x319735(0x168)]?.['node']?_0x319735(0x1a1):_0x319735(0x150)),_0x316ec2[_0x319735(0x1d6)]={'id':+new Date(),'tool':_0x23fccf});let _0x16f072=new Q(_0x316ec2,_0x37b6b9,_0xe82dc7,_0x2a8d2f);return _0x16f072[_0x319735(0x1b0)]['bind'](_0x16f072);}catch(_0x5c7fa8){return console[_0x319735(0x137)](_0x319735(0x10a),_0x5c7fa8&&_0x5c7fa8[_0x319735(0x155)]),()=>{};}});return _0x502d2e=>_0xd77357[_0x12a29b(0x1ab)](_0x43bc6b=>_0x43bc6b(_0x502d2e));}function H(_0x5af7b2){var _0x44da05=_0x5c041f;let _0x4d0c7c=function(_0x2df01d,_0x18687f){return _0x18687f-_0x2df01d;},_0x5b3ffd;if(_0x5af7b2['performance'])_0x5b3ffd=function(){var _0x18cc82=_0x4cb1;return _0x5af7b2[_0x18cc82(0x187)][_0x18cc82(0x1b8)]();};else{if(_0x5af7b2[_0x44da05(0x1a3)]&&_0x5af7b2[_0x44da05(0x1a3)]['hrtime'])_0x5b3ffd=function(){var _0x36a33e=_0x44da05;return _0x5af7b2['process'][_0x36a33e(0x104)]();},_0x4d0c7c=function(_0x17a6ca,_0x1ffd49){return 0x3e8*(_0x1ffd49[0x0]-_0x17a6ca[0x0])+(_0x1ffd49[0x1]-_0x17a6ca[0x1])/0xf4240;};else try{let {performance:_0x280329}=require('perf_hooks');_0x5b3ffd=function(){return _0x280329['now']();};}catch{_0x5b3ffd=function(){return+new Date();};}}return{'elapsed':_0x4d0c7c,'timeStamp':_0x5b3ffd,'now':()=>Date['now']()};}function X(_0x12e8bd,_0x14d6a9,_0xacee0b){var _0x30debf=_0x5c041f;if(_0x12e8bd[_0x30debf(0x14a)]!==void 0x0)return _0x12e8bd[_0x30debf(0x14a)];let _0x3a35d6=_0x12e8bd[_0x30debf(0x1a3)]?.[_0x30debf(0x168)]?.[_0x30debf(0x1da)];return _0x3a35d6&&_0xacee0b===_0x30debf(0x147)?_0x12e8bd['_consoleNinjaAllowedToStart']=!0x1:_0x12e8bd[_0x30debf(0x14a)]=_0x3a35d6||!_0x14d6a9||_0x12e8bd[_0x30debf(0x180)]?.[_0x30debf(0x13b)]&&_0x14d6a9[_0x30debf(0x18d)](_0x12e8bd[_0x30debf(0x180)][_0x30debf(0x13b)]),_0x12e8bd[_0x30debf(0x14a)];}function _0x382e(){var _0x3f78a3=['_setNodeExpressionPath','location','WebSocket','bigint','stringify','substr','ws://','_WebSocketClass','performance','stackTraceLimit','type','1.0.0','_console_ninja','_isUndefined','includes','[object\\x20BigInt]','autoExpandMaxDepth','timeEnd','__es'+'Module','parent','_type','635201aILuEg','Map','_setNodeQueryPath','call',[\"localhost\",\"127.0.0.1\",\"example.cypress.io\",\"AspireA15-43\",\"192.168.56.1\",\"192.168.1.73\"],'NEGATIVE_INFINITY','_undefined','webpack','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20refreshing\\x20the\\x20page\\x20may\\x20help','disabledLog','reduceLimits','_getOwnPropertyNames','280CWoCPm','\\x20server','hasOwnProperty','process','HTMLAllCollection','[object\\x20Set]','console','reload','54LRIPsv','argumentResolutionError','value','forEach','push','_property','_treeNodePropertiesAfterFullValue','data','send','_maxConnectAttemptCount','935776dwgaDu','sortProps','64072xQAqIr','_connectToHostNow','log','autoExpand','now','_allowedToSend','slice','count','negativeInfinity','_WebSocket','constructor','hits','_getOwnPropertyDescriptor','date','_isPrimitiveType','_addFunctionsNode','root_exp','function','default','valueOf','unref','onerror','cappedElements','number','split','_allowedToConnectOnSend','failed\\x20to\\x20connect\\x20to\\x20host:\\x20','remix','_reconnectTimeout','object','parse','enumerable','_cleanNode','_quotedRegExp','_console_ninja_session','','_capIfString','Set','node','[object\\x20Map]','_isPrimitiveWrapperType','astro','replace','path','elements','concat','[object\\x20Array]','undefined','_blacklistedProperty','match','root_exp_id','_isNegativeZero','hrtime','String','_numberRegExp','_connecting','current','_keyStrRegExp','logger\\x20failed\\x20to\\x20connect\\x20to\\x20host','_setNodeId','pathToFileURL','level','Number','autoExpandPreviousObjects','name','serialize','_connectAttemptCount','nodeModules','RegExp','_propertyName','trace','expressionsToEvaluate','...','_socket','indexOf','_addLoadNode','method','autoExpandPropertyCount','unshift','props','_p_length','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20restarting\\x20the\\x20process\\x20may\\x20help','capped','length','127.0.0.1','pop','array','_treeNodePropertiesBeforeFullValue','failed\\x20to\\x20find\\x20and\\x20load\\x20WebSocket','isExpressionToEvaluate','_addProperty','error','totalStrLength','autoExpandLimit','negativeZero','onclose','getWebSocketClass','_regExpToString','isArray',':logPointId:','_setNodePermissions','_disposeWebsocket','7576168RoOoLU','warn','url','getOwnPropertySymbols','_hasSetOnItsPath','hostname','close','_additionalMetadata','strLength','catch','next.js','rootExpression','getOwnPropertyDescriptor','global','symbol','boolean','_inBrowser','nuxt','time','[object\\x20Date]','_consoleNinjaAllowedToStart','depth','Error','positiveInfinity','string','prototype','\\x20browser','_addObjectProperty','_p_','join','_sortProps','message','_ws','_isMap','noFunctions','_sendErrorMessage','_Symbol','_setNodeExpandableState','getOwnPropertyNames','readyState','_objectToString','onopen','61934','_hasMapOnItsPath','elapsed','index','nan','resolveGetters','test','_HTMLAllCollection','versions','_setNodeLabel','null','toLowerCase','_isSet','_dateToString','1039862BHuYnR','disabledTrace','1272669ZnImvB','expId','_isArray','unknown',\"c:\\\\Users\\\\Donov\\\\.vscode\\\\extensions\\\\wallabyjs.console-ninja-0.0.154\\\\node_modules\",'_attemptToReconnectShortly','onmessage','Symbol','toString','19315575hkRJHr','_processTreeNodeResult','allStrLength','_connected','1687236147317','port'];_0x382e=function(){return _0x3f78a3;};return _0x382e();}((_0x5b4790,_0x458f21,_0x149466,_0x506ad4,_0x4f07aa,_0x3fd8d0,_0x20a513,_0x2e806b,_0x2df5e3)=>{var _0x27b5f4=_0x5c041f;if(_0x5b4790['_console_ninja'])return _0x5b4790['_console_ninja'];if(!X(_0x5b4790,_0x2e806b,_0x4f07aa))return _0x5b4790[_0x27b5f4(0x18b)]={'consoleLog':()=>{},'consoleTrace':()=>{},'consoleTime':()=>{},'consoleTimeEnd':()=>{},'autoLog':()=>{},'autoTrace':()=>{},'autoTime':()=>{},'autoTimeEnd':()=>{}},_0x5b4790[_0x27b5f4(0x18b)];let _0x538d0c={'props':0x64,'elements':0x64,'strLength':0x400*0x32,'totalStrLength':0x400*0x32,'autoExpandLimit':0x1388,'autoExpandMaxDepth':0xa},_0x5df0c1={'props':0x5,'elements':0x5,'strLength':0x100,'totalStrLength':0x100*0x3,'autoExpandLimit':0x1e,'autoExpandMaxDepth':0x2},_0xe984aa=H(_0x5b4790),_0x272fdc=_0xe984aa[_0x27b5f4(0x162)],_0x4d049a=_0xe984aa['timeStamp'],_0x2f3f4d=_0xe984aa['now'],_0xe1c80c={'hits':{},'ts':{}},_0x3d77ad=_0x1f3b96=>{_0xe1c80c['ts'][_0x1f3b96]=_0x4d049a();},_0xe06796=(_0x13f02a,_0x2be50f)=>{let _0x40e934=_0xe1c80c['ts'][_0x2be50f];if(delete _0xe1c80c['ts'][_0x2be50f],_0x40e934){let _0x5274bc=_0x272fdc(_0x40e934,_0x4d049a());_0x4b1f73(_0x4ef4d5('time',_0x13f02a,_0x2f3f4d(),_0x5ef367,[_0x5274bc],_0x2be50f));}},_0x47ca51=_0x35ae2c=>_0x568830=>{var _0x5cbfae=_0x27b5f4;try{_0x3d77ad(_0x568830),_0x35ae2c(_0x568830);}finally{_0x5b4790[_0x5cbfae(0x1a6)]['time']=_0x35ae2c;}},_0x34454b=_0x46ef29=>_0x2cac3c=>{var _0x4e0ff3=_0x27b5f4;try{let [_0x38e816,_0xa70aed]=_0x2cac3c[_0x4e0ff3(0x1cc)](_0x4e0ff3(0x133));_0xe06796(_0xa70aed,_0x38e816),_0x46ef29(_0x38e816);}finally{_0x5b4790['console'][_0x4e0ff3(0x190)]=_0x46ef29;}};_0x5b4790['_console_ninja']={'consoleLog':(_0xbf4b2a,_0x4ee11d)=>{var _0x27c615=_0x27b5f4;_0x5b4790[_0x27c615(0x1a6)][_0x27c615(0x1b6)][_0x27c615(0x110)]!==_0x27c615(0x19d)&&_0x4b1f73(_0x4ef4d5(_0x27c615(0x1b6),_0xbf4b2a,_0x2f3f4d(),_0x5ef367,_0x4ee11d));},'consoleTrace':(_0x380929,_0x5c69db)=>{var _0x2e9541=_0x27b5f4;_0x5b4790[_0x2e9541(0x1a6)][_0x2e9541(0x1b6)][_0x2e9541(0x110)]!==_0x2e9541(0x16f)&&_0x4b1f73(_0x4ef4d5(_0x2e9541(0x116),_0x380929,_0x2f3f4d(),_0x5ef367,_0x5c69db));},'consoleTime':()=>{var _0xac082f=_0x27b5f4;_0x5b4790[_0xac082f(0x1a6)][_0xac082f(0x148)]=_0x47ca51(_0x5b4790[_0xac082f(0x1a6)][_0xac082f(0x148)]);},'consoleTimeEnd':()=>{var _0x3a096b=_0x27b5f4;_0x5b4790['console'][_0x3a096b(0x190)]=_0x34454b(_0x5b4790[_0x3a096b(0x1a6)][_0x3a096b(0x190)]);},'autoLog':(_0x400d6e,_0x1ef64c)=>{_0x4b1f73(_0x4ef4d5('log',_0x1ef64c,_0x2f3f4d(),_0x5ef367,[_0x400d6e]));},'autoTrace':(_0x5e343b,_0x2b5d86)=>{var _0x53ff97=_0x27b5f4;_0x4b1f73(_0x4ef4d5(_0x53ff97(0x116),_0x2b5d86,_0x2f3f4d(),_0x5ef367,[_0x5e343b]));},'autoTime':(_0x555514,_0x466fce,_0x7d1fbf)=>{_0x3d77ad(_0x7d1fbf);},'autoTimeEnd':(_0x596063,_0x24d50a,_0x257617)=>{_0xe06796(_0x24d50a,_0x257617);}};let _0x4b1f73=V(_0x5b4790,_0x458f21,_0x149466,_0x506ad4,_0x4f07aa),_0x5ef367=_0x5b4790['_console_ninja_session'];class _0x7302f2{constructor(){var _0x2530cf=_0x27b5f4;this[_0x2530cf(0x109)]=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/,this[_0x2530cf(0x106)]=/^(0|[1-9][0-9]*)$/,this[_0x2530cf(0x1d5)]=/'([^\\\\']|\\\\')*'/,this[_0x2530cf(0x19a)]=_0x5b4790[_0x2530cf(0x1e3)],this[_0x2530cf(0x167)]=_0x5b4790[_0x2530cf(0x1a4)],this[_0x2530cf(0x1c0)]=Object[_0x2530cf(0x142)],this[_0x2530cf(0x19f)]=Object['getOwnPropertyNames'],this[_0x2530cf(0x15a)]=_0x5b4790[_0x2530cf(0x177)],this[_0x2530cf(0x131)]=RegExp[_0x2530cf(0x14f)][_0x2530cf(0x178)],this['_dateToString']=Date['prototype'][_0x2530cf(0x178)];}[_0x27b5f4(0x111)](_0x4c4a88,_0x2bf3b0,_0x363f5d,_0x49674b){var _0x377020=_0x27b5f4,_0x277dde=this,_0x2bc8b0=_0x363f5d['autoExpand'];function _0x41b795(_0x639564,_0x42158d,_0x6a91ba){var _0x49c916=_0x4cb1;_0x42158d[_0x49c916(0x189)]=_0x49c916(0x173),_0x42158d[_0x49c916(0x12b)]=_0x639564['message'],_0x15be58=_0x6a91ba['node'][_0x49c916(0x108)],_0x6a91ba[_0x49c916(0x1da)][_0x49c916(0x108)]=_0x42158d,_0x277dde[_0x49c916(0x127)](_0x42158d,_0x6a91ba);}if(_0x2bf3b0&&_0x2bf3b0[_0x377020(0x1a9)])_0x41b795(_0x2bf3b0,_0x4c4a88,_0x363f5d);else try{_0x363f5d[_0x377020(0x10d)]++,_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d[_0x377020(0x10f)]['push'](_0x2bf3b0);var _0x18fcbd,_0x433fb1,_0x474096,_0x5d1925,_0x4376b6=[],_0x410b80=[],_0x1c2cde,_0x4e4ecd=this[_0x377020(0x193)](_0x2bf3b0),_0x4ab547=_0x4e4ecd==='array',_0x1715f4=!0x1,_0x2b510e=_0x4e4ecd==='function',_0x33450e=this[_0x377020(0x1c2)](_0x4e4ecd),_0x1a4f47=this[_0x377020(0x1dc)](_0x4e4ecd),_0x51c872=_0x33450e||_0x1a4f47,_0x5bab85={},_0xeee57b=0x0,_0x3447ef=!0x1,_0x15be58,_0x2144f8=/^(([1-9]{1}[0-9]*)|0)$/;if(_0x363f5d[_0x377020(0x14b)]){if(_0x4ab547){if(_0x433fb1=_0x2bf3b0[_0x377020(0x123)],_0x433fb1>_0x363f5d['elements']){for(_0x474096=0x0,_0x5d1925=_0x363f5d[_0x377020(0x1e0)],_0x18fcbd=_0x474096;_0x18fcbd<_0x5d1925;_0x18fcbd++)_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x12a)](_0x4376b6,_0x2bf3b0,_0x4e4ecd,_0x18fcbd,_0x363f5d));_0x4c4a88[_0x377020(0x1ca)]=!0x0;}else{for(_0x474096=0x0,_0x5d1925=_0x433fb1,_0x18fcbd=_0x474096;_0x18fcbd<_0x5d1925;_0x18fcbd++)_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x12a)](_0x4376b6,_0x2bf3b0,_0x4e4ecd,_0x18fcbd,_0x363f5d));}_0x363f5d[_0x377020(0x11d)]+=_0x410b80[_0x377020(0x123)];}if(!(_0x4e4ecd===_0x377020(0x16a)||_0x4e4ecd===_0x377020(0x1e3))&&!_0x33450e&&_0x4e4ecd!==_0x377020(0x105)&&_0x4e4ecd!=='Buffer'&&_0x4e4ecd!==_0x377020(0x182)){var _0x42c5c6=_0x49674b[_0x377020(0x11f)]||_0x363f5d[_0x377020(0x11f)];if(this[_0x377020(0x16c)](_0x2bf3b0)?(_0x18fcbd=0x0,_0x2bf3b0[_0x377020(0x1ab)](function(_0x387777){var _0x5be22f=_0x377020;if(_0xeee57b++,_0x363f5d[_0x5be22f(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;return;}if(!_0x363f5d[_0x5be22f(0x129)]&&_0x363f5d[_0x5be22f(0x1b7)]&&_0x363f5d[_0x5be22f(0x11d)]>_0x363f5d[_0x5be22f(0x12d)]){_0x3447ef=!0x0;return;}_0x410b80[_0x5be22f(0x1ac)](_0x277dde[_0x5be22f(0x12a)](_0x4376b6,_0x2bf3b0,_0x5be22f(0x1d9),_0x18fcbd++,_0x363f5d,function(_0x2a9834){return function(){return _0x2a9834;};}(_0x387777)));})):this['_isMap'](_0x2bf3b0)&&_0x2bf3b0[_0x377020(0x1ab)](function(_0x316b01,_0x47e14e){var _0x48f2d9=_0x377020;if(_0xeee57b++,_0x363f5d[_0x48f2d9(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;return;}if(!_0x363f5d[_0x48f2d9(0x129)]&&_0x363f5d[_0x48f2d9(0x1b7)]&&_0x363f5d[_0x48f2d9(0x11d)]>_0x363f5d[_0x48f2d9(0x12d)]){_0x3447ef=!0x0;return;}var _0x3e2f2f=_0x47e14e[_0x48f2d9(0x178)]();_0x3e2f2f[_0x48f2d9(0x123)]>0x64&&(_0x3e2f2f=_0x3e2f2f[_0x48f2d9(0x1ba)](0x0,0x64)+_0x48f2d9(0x118)),_0x410b80[_0x48f2d9(0x1ac)](_0x277dde[_0x48f2d9(0x12a)](_0x4376b6,_0x2bf3b0,_0x48f2d9(0x195),_0x3e2f2f,_0x363f5d,function(_0x2f0290){return function(){return _0x2f0290;};}(_0x316b01)));}),!_0x1715f4){try{for(_0x1c2cde in _0x2bf3b0)if(!(_0x4ab547&&_0x2144f8[_0x377020(0x166)](_0x1c2cde))&&!this[_0x377020(0x1e4)](_0x2bf3b0,_0x1c2cde,_0x363f5d)){if(_0xeee57b++,_0x363f5d[_0x377020(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;break;}if(!_0x363f5d['isExpressionToEvaluate']&&_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d['autoExpandPropertyCount']>_0x363f5d[_0x377020(0x12d)]){_0x3447ef=!0x0;break;}_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x151)](_0x4376b6,_0x5bab85,_0x2bf3b0,_0x4e4ecd,_0x1c2cde,_0x363f5d));}}catch{}if(_0x5bab85[_0x377020(0x120)]=!0x0,_0x2b510e&&(_0x5bab85['_p_name']=!0x0),!_0x3447ef){var _0x591c0f=[][_0x377020(0x1e1)](this[_0x377020(0x19f)](_0x2bf3b0))['concat'](this['_getOwnPropertySymbols'](_0x2bf3b0));for(_0x18fcbd=0x0,_0x433fb1=_0x591c0f['length'];_0x18fcbd<_0x433fb1;_0x18fcbd++)if(_0x1c2cde=_0x591c0f[_0x18fcbd],!(_0x4ab547&&_0x2144f8[_0x377020(0x166)](_0x1c2cde[_0x377020(0x178)]()))&&!this['_blacklistedProperty'](_0x2bf3b0,_0x1c2cde,_0x363f5d)&&!_0x5bab85['_p_'+_0x1c2cde[_0x377020(0x178)]()]){if(_0xeee57b++,_0x363f5d[_0x377020(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;break;}if(!_0x363f5d[_0x377020(0x129)]&&_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d[_0x377020(0x11d)]>_0x363f5d[_0x377020(0x12d)]){_0x3447ef=!0x0;break;}_0x410b80[_0x377020(0x1ac)](_0x277dde['_addObjectProperty'](_0x4376b6,_0x5bab85,_0x2bf3b0,_0x4e4ecd,_0x1c2cde,_0x363f5d));}}}}}if(_0x4c4a88[_0x377020(0x189)]=_0x4e4ecd,_0x51c872?(_0x4c4a88[_0x377020(0x1aa)]=_0x2bf3b0[_0x377020(0x1c7)](),this[_0x377020(0x1d8)](_0x4e4ecd,_0x4c4a88,_0x363f5d,_0x49674b)):_0x4e4ecd===_0x377020(0x1c1)?_0x4c4a88[_0x377020(0x1aa)]=this[_0x377020(0x16d)][_0x377020(0x197)](_0x2bf3b0):_0x4e4ecd==='bigint'?_0x4c4a88[_0x377020(0x1aa)]=_0x2bf3b0[_0x377020(0x178)]():_0x4e4ecd===_0x377020(0x114)?_0x4c4a88['value']=this['_regExpToString'][_0x377020(0x197)](_0x2bf3b0):_0x4e4ecd===_0x377020(0x144)&&this['_Symbol']?_0x4c4a88[_0x377020(0x1aa)]=this[_0x377020(0x15a)][_0x377020(0x14f)]['toString']['call'](_0x2bf3b0):!_0x363f5d[_0x377020(0x14b)]&&!(_0x4e4ecd===_0x377020(0x16a)||_0x4e4ecd===_0x377020(0x1e3))&&(delete _0x4c4a88[_0x377020(0x1aa)],_0x4c4a88[_0x377020(0x122)]=!0x0),_0x3447ef&&(_0x4c4a88['cappedProps']=!0x0),_0x15be58=_0x363f5d[_0x377020(0x1da)][_0x377020(0x108)],_0x363f5d['node'][_0x377020(0x108)]=_0x4c4a88,this['_treeNodePropertiesBeforeFullValue'](_0x4c4a88,_0x363f5d),_0x410b80[_0x377020(0x123)]){for(_0x18fcbd=0x0,_0x433fb1=_0x410b80[_0x377020(0x123)];_0x18fcbd<_0x433fb1;_0x18fcbd++)_0x410b80[_0x18fcbd](_0x18fcbd);}_0x4376b6[_0x377020(0x123)]&&(_0x4c4a88['props']=_0x4376b6);}catch(_0x1fa9b2){_0x41b795(_0x1fa9b2,_0x4c4a88,_0x363f5d);}return this[_0x377020(0x13d)](_0x2bf3b0,_0x4c4a88),this[_0x377020(0x1ae)](_0x4c4a88,_0x363f5d),_0x363f5d[_0x377020(0x1da)]['current']=_0x15be58,_0x363f5d['level']--,_0x363f5d[_0x377020(0x1b7)]=_0x2bc8b0,_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d['autoExpandPreviousObjects'][_0x377020(0x125)](),_0x4c4a88;}['_getOwnPropertySymbols'](_0xb5846){var _0x52041f=_0x27b5f4;return Object['getOwnPropertySymbols']?Object[_0x52041f(0x139)](_0xb5846):[];}[_0x27b5f4(0x16c)](_0x5282f4){var _0x3228cc=_0x27b5f4;return!!(_0x5282f4&&_0x5b4790[_0x3228cc(0x1d9)]&&this[_0x3228cc(0x15e)](_0x5282f4)===_0x3228cc(0x1a5)&&_0x5282f4[_0x3228cc(0x1ab)]);}['_blacklistedProperty'](_0x3e1e02,_0x19f7da,_0x2ed27d){var _0x3d5f32=_0x27b5f4;return _0x2ed27d[_0x3d5f32(0x158)]?typeof _0x3e1e02[_0x19f7da]==_0x3d5f32(0x1c5):!0x1;}[_0x27b5f4(0x193)](_0x1d8bce){var _0xf22702=_0x27b5f4,_0x8f3c98='';return _0x8f3c98=typeof _0x1d8bce,_0x8f3c98==='object'?this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x1e2)?_0x8f3c98=_0xf22702(0x126):this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x149)?_0x8f3c98=_0xf22702(0x1c1):this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x18e)?_0x8f3c98='bigint':_0x1d8bce===null?_0x8f3c98=_0xf22702(0x16a):_0x1d8bce['constructor']&&(_0x8f3c98=_0x1d8bce[_0xf22702(0x1be)][_0xf22702(0x110)]||_0x8f3c98):_0x8f3c98===_0xf22702(0x1e3)&&this['_HTMLAllCollection']&&_0x1d8bce instanceof this['_HTMLAllCollection']&&(_0x8f3c98='HTMLAllCollection'),_0x8f3c98;}['_objectToString'](_0x362d66){var _0x3c798c=_0x27b5f4;return Object[_0x3c798c(0x14f)][_0x3c798c(0x178)][_0x3c798c(0x197)](_0x362d66);}['_isPrimitiveType'](_0x291f7d){var _0x5359d4=_0x27b5f4;return _0x291f7d===_0x5359d4(0x145)||_0x291f7d===_0x5359d4(0x14e)||_0x291f7d==='number';}[_0x27b5f4(0x1dc)](_0x4cbff7){var _0x3ee85a=_0x27b5f4;return _0x4cbff7==='Boolean'||_0x4cbff7===_0x3ee85a(0x105)||_0x4cbff7===_0x3ee85a(0x10e);}['_addProperty'](_0x2378df,_0x35fcbe,_0x1b181f,_0xaf562b,_0xd53cb8,_0x399f00){var _0x452e20=this;return function(_0x144d49){var _0x201876=_0x4cb1,_0x46a7c6=_0xd53cb8[_0x201876(0x1da)][_0x201876(0x108)],_0x3d1f64=_0xd53cb8[_0x201876(0x1da)][_0x201876(0x163)],_0x411984=_0xd53cb8['node'][_0x201876(0x192)];_0xd53cb8[_0x201876(0x1da)][_0x201876(0x192)]=_0x46a7c6,_0xd53cb8['node'][_0x201876(0x163)]=typeof _0xaf562b==_0x201876(0x1cb)?_0xaf562b:_0x144d49,_0x2378df['push'](_0x452e20['_property'](_0x35fcbe,_0x1b181f,_0xaf562b,_0xd53cb8,_0x399f00)),_0xd53cb8[_0x201876(0x1da)][_0x201876(0x192)]=_0x411984,_0xd53cb8['node'][_0x201876(0x163)]=_0x3d1f64;};}[_0x27b5f4(0x151)](_0x447828,_0x14c2cb,_0x2514be,_0x499052,_0x3ac241,_0x50d530,_0x5931a7){var _0x5d6f85=_0x27b5f4,_0x22fac8=this;return _0x14c2cb[_0x5d6f85(0x152)+_0x3ac241[_0x5d6f85(0x178)]()]=!0x0,function(_0x2163ab){var _0x46ef79=_0x5d6f85,_0x4e6994=_0x50d530['node'][_0x46ef79(0x108)],_0x379fad=_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x163)],_0x4648ab=_0x50d530[_0x46ef79(0x1da)]['parent'];_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x192)]=_0x4e6994,_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x163)]=_0x2163ab,_0x447828[_0x46ef79(0x1ac)](_0x22fac8[_0x46ef79(0x1ad)](_0x2514be,_0x499052,_0x3ac241,_0x50d530,_0x5931a7)),_0x50d530[_0x46ef79(0x1da)]['parent']=_0x4648ab,_0x50d530['node']['index']=_0x379fad;};}[_0x27b5f4(0x1ad)](_0x11ba45,_0x2c8472,_0x75afa4,_0xef2682,_0x2e97cf){var _0x5d139e=_0x27b5f4,_0x2f2ead=this;_0x2e97cf||(_0x2e97cf=function(_0x2f3675,_0x36e0f8){return _0x2f3675[_0x36e0f8];});var _0x1d0670=_0x75afa4['toString'](),_0x127b27=_0xef2682['expressionsToEvaluate']||{},_0x3818ef=_0xef2682[_0x5d139e(0x14b)],_0x501535=_0xef2682[_0x5d139e(0x129)];try{var _0x1654e3=this[_0x5d139e(0x157)](_0x11ba45),_0x22d9d0=_0x1d0670;_0x1654e3&&_0x22d9d0[0x0]==='\\x27'&&(_0x22d9d0=_0x22d9d0[_0x5d139e(0x184)](0x1,_0x22d9d0[_0x5d139e(0x123)]-0x2));var _0x10bfe0=_0xef2682[_0x5d139e(0x117)]=_0x127b27[_0x5d139e(0x152)+_0x22d9d0];_0x10bfe0&&(_0xef2682[_0x5d139e(0x14b)]=_0xef2682['depth']+0x1),_0xef2682[_0x5d139e(0x129)]=!!_0x10bfe0;var _0x108f45=typeof _0x75afa4==_0x5d139e(0x144),_0x289b97={'name':_0x108f45||_0x1654e3?_0x1d0670:this[_0x5d139e(0x115)](_0x1d0670)};if(_0x108f45&&(_0x289b97[_0x5d139e(0x144)]=!0x0),!(_0x2c8472===_0x5d139e(0x126)||_0x2c8472===_0x5d139e(0x14c))){var _0x2bf7ad=this[_0x5d139e(0x1c0)](_0x11ba45,_0x75afa4);if(_0x2bf7ad&&(_0x2bf7ad['set']&&(_0x289b97['setter']=!0x0),_0x2bf7ad['get']&&!_0x10bfe0&&!_0xef2682[_0x5d139e(0x165)]))return _0x289b97['getter']=!0x0,this[_0x5d139e(0x17a)](_0x289b97,_0xef2682),_0x289b97;}var _0x1f14f8;try{_0x1f14f8=_0x2e97cf(_0x11ba45,_0x75afa4);}catch(_0x309f6f){return _0x289b97={'name':_0x1d0670,'type':_0x5d139e(0x173),'error':_0x309f6f[_0x5d139e(0x155)]},this['_processTreeNodeResult'](_0x289b97,_0xef2682),_0x289b97;}var _0x19f7d6=this[_0x5d139e(0x193)](_0x1f14f8),_0x21be7b=this[_0x5d139e(0x1c2)](_0x19f7d6);if(_0x289b97[_0x5d139e(0x189)]=_0x19f7d6,_0x21be7b)this['_processTreeNodeResult'](_0x289b97,_0xef2682,_0x1f14f8,function(){var _0x24bfe4=_0x5d139e;_0x289b97[_0x24bfe4(0x1aa)]=_0x1f14f8[_0x24bfe4(0x1c7)](),!_0x10bfe0&&_0x2f2ead[_0x24bfe4(0x1d8)](_0x19f7d6,_0x289b97,_0xef2682,{});});else{var _0x24f667=_0xef2682['autoExpand']&&_0xef2682['level']<_0xef2682[_0x5d139e(0x18f)]&&_0xef2682[_0x5d139e(0x10f)][_0x5d139e(0x11a)](_0x1f14f8)<0x0&&_0x19f7d6!==_0x5d139e(0x1c5)&&_0xef2682[_0x5d139e(0x11d)]<_0xef2682['autoExpandLimit'];_0x24f667||_0xef2682['level']<_0x3818ef||_0x10bfe0?(this[_0x5d139e(0x111)](_0x289b97,_0x1f14f8,_0xef2682,_0x10bfe0||{}),this[_0x5d139e(0x13d)](_0x1f14f8,_0x289b97)):this['_processTreeNodeResult'](_0x289b97,_0xef2682,_0x1f14f8,function(){var _0x55b27e=_0x5d139e;_0x19f7d6===_0x55b27e(0x16a)||_0x19f7d6==='undefined'||(delete _0x289b97[_0x55b27e(0x1aa)],_0x289b97['capped']=!0x0);});}return _0x289b97;}finally{_0xef2682[_0x5d139e(0x117)]=_0x127b27,_0xef2682[_0x5d139e(0x14b)]=_0x3818ef,_0xef2682[_0x5d139e(0x129)]=_0x501535;}}[_0x27b5f4(0x1d8)](_0x345b2b,_0x37826c,_0x493a0b,_0x5bbe39){var _0x41c5d3=_0x27b5f4,_0x4e7ce2=_0x5bbe39[_0x41c5d3(0x13e)]||_0x493a0b[_0x41c5d3(0x13e)];if((_0x345b2b==='string'||_0x345b2b==='String')&&_0x37826c[_0x41c5d3(0x1aa)]){let _0x58e7f0=_0x37826c['value'][_0x41c5d3(0x123)];_0x493a0b[_0x41c5d3(0x17b)]+=_0x58e7f0,_0x493a0b[_0x41c5d3(0x17b)]>_0x493a0b['totalStrLength']?(_0x37826c[_0x41c5d3(0x122)]='',delete _0x37826c[_0x41c5d3(0x1aa)]):_0x58e7f0>_0x4e7ce2&&(_0x37826c[_0x41c5d3(0x122)]=_0x37826c[_0x41c5d3(0x1aa)][_0x41c5d3(0x184)](0x0,_0x4e7ce2),delete _0x37826c[_0x41c5d3(0x1aa)]);}}[_0x27b5f4(0x157)](_0x27e462){var _0x52af29=_0x27b5f4;return!!(_0x27e462&&_0x5b4790[_0x52af29(0x195)]&&this[_0x52af29(0x15e)](_0x27e462)===_0x52af29(0x1db)&&_0x27e462[_0x52af29(0x1ab)]);}['_propertyName'](_0x4009b0){var _0xaac64b=_0x27b5f4;if(_0x4009b0[_0xaac64b(0x1e5)](/^\\d+$/))return _0x4009b0;var _0x3df4b1;try{_0x3df4b1=JSON[_0xaac64b(0x183)](''+_0x4009b0);}catch{_0x3df4b1='\\x22'+this[_0xaac64b(0x15e)](_0x4009b0)+'\\x22';}return _0x3df4b1[_0xaac64b(0x1e5)](/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?_0x3df4b1=_0x3df4b1['substr'](0x1,_0x3df4b1[_0xaac64b(0x123)]-0x2):_0x3df4b1=_0x3df4b1[_0xaac64b(0x1de)](/'/g,'\\x5c\\x27')[_0xaac64b(0x1de)](/\\\\\"/g,'\\x22')[_0xaac64b(0x1de)](/(^\"|\"$)/g,'\\x27'),_0x3df4b1;}['_processTreeNodeResult'](_0x19824d,_0x5c5e8f,_0x1680fa,_0x5b0779){var _0x3d2550=_0x27b5f4;this['_treeNodePropertiesBeforeFullValue'](_0x19824d,_0x5c5e8f),_0x5b0779&&_0x5b0779(),this[_0x3d2550(0x13d)](_0x1680fa,_0x19824d),this[_0x3d2550(0x1ae)](_0x19824d,_0x5c5e8f);}[_0x27b5f4(0x127)](_0x5aff2e,_0x47d2f7){var _0x5cd962=_0x27b5f4;this[_0x5cd962(0x10b)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x196)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x17f)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x134)](_0x5aff2e,_0x47d2f7);}['_setNodeId'](_0x452ae7,_0x297f1b){}[_0x27b5f4(0x196)](_0xece9cb,_0x4e0399){}['_setNodeLabel'](_0x2c0a1b,_0x23ac11){}[_0x27b5f4(0x18c)](_0x41f0d5){var _0x5db41b=_0x27b5f4;return _0x41f0d5===this[_0x5db41b(0x19a)];}[_0x27b5f4(0x1ae)](_0x327dda,_0x2ed747){var _0x28aea0=_0x27b5f4;this['_setNodeLabel'](_0x327dda,_0x2ed747),this[_0x28aea0(0x15b)](_0x327dda),_0x2ed747['sortProps']&&this[_0x28aea0(0x154)](_0x327dda),this[_0x28aea0(0x1c3)](_0x327dda,_0x2ed747),this[_0x28aea0(0x11b)](_0x327dda,_0x2ed747),this[_0x28aea0(0x1d4)](_0x327dda);}[_0x27b5f4(0x13d)](_0x28ed57,_0x2f9ad0){var _0x2f2aa2=_0x27b5f4;try{_0x28ed57&&typeof _0x28ed57[_0x2f2aa2(0x123)]==_0x2f2aa2(0x1cb)&&(_0x2f9ad0[_0x2f2aa2(0x123)]=_0x28ed57[_0x2f2aa2(0x123)]);}catch{}if(_0x2f9ad0[_0x2f2aa2(0x189)]===_0x2f2aa2(0x1cb)||_0x2f9ad0['type']==='Number'){if(isNaN(_0x2f9ad0['value']))_0x2f9ad0[_0x2f2aa2(0x164)]=!0x0,delete _0x2f9ad0['value'];else switch(_0x2f9ad0[_0x2f2aa2(0x1aa)]){case Number['POSITIVE_INFINITY']:_0x2f9ad0[_0x2f2aa2(0x14d)]=!0x0,delete _0x2f9ad0[_0x2f2aa2(0x1aa)];break;case Number[_0x2f2aa2(0x199)]:_0x2f9ad0[_0x2f2aa2(0x1bc)]=!0x0,delete _0x2f9ad0[_0x2f2aa2(0x1aa)];break;case 0x0:this[_0x2f2aa2(0x1e7)](_0x2f9ad0[_0x2f2aa2(0x1aa)])&&(_0x2f9ad0[_0x2f2aa2(0x12e)]=!0x0);break;}}else _0x2f9ad0[_0x2f2aa2(0x189)]===_0x2f2aa2(0x1c5)&&typeof _0x28ed57[_0x2f2aa2(0x110)]=='string'&&_0x28ed57[_0x2f2aa2(0x110)]&&_0x2f9ad0[_0x2f2aa2(0x110)]&&_0x28ed57[_0x2f2aa2(0x110)]!==_0x2f9ad0['name']&&(_0x2f9ad0['funcName']=_0x28ed57[_0x2f2aa2(0x110)]);}[_0x27b5f4(0x1e7)](_0x2ebacd){return 0x1/_0x2ebacd===Number['NEGATIVE_INFINITY'];}[_0x27b5f4(0x154)](_0x33f55f){var _0x2880b5=_0x27b5f4;!_0x33f55f[_0x2880b5(0x11f)]||!_0x33f55f['props'][_0x2880b5(0x123)]||_0x33f55f[_0x2880b5(0x189)]==='array'||_0x33f55f[_0x2880b5(0x189)]===_0x2880b5(0x195)||_0x33f55f[_0x2880b5(0x189)]===_0x2880b5(0x1d9)||_0x33f55f[_0x2880b5(0x11f)]['sort'](function(_0xeb1d3d,_0x1e5ad8){var _0x465665=_0x2880b5,_0x228711=_0xeb1d3d[_0x465665(0x110)][_0x465665(0x16b)](),_0x4a8d2e=_0x1e5ad8[_0x465665(0x110)][_0x465665(0x16b)]();return _0x228711<_0x4a8d2e?-0x1:_0x228711>_0x4a8d2e?0x1:0x0;});}['_addFunctionsNode'](_0x44bb25,_0x246ec6){var _0x22ee2b=_0x27b5f4;if(!(_0x246ec6['noFunctions']||!_0x44bb25[_0x22ee2b(0x11f)]||!_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x123)])){for(var _0xdec3bc=[],_0x3df253=[],_0x3979be=0x0,_0x45594a=_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x123)];_0x3979be<_0x45594a;_0x3979be++){var _0x5162e2=_0x44bb25[_0x22ee2b(0x11f)][_0x3979be];_0x5162e2[_0x22ee2b(0x189)]==='function'?_0xdec3bc[_0x22ee2b(0x1ac)](_0x5162e2):_0x3df253[_0x22ee2b(0x1ac)](_0x5162e2);}if(!(!_0x3df253[_0x22ee2b(0x123)]||_0xdec3bc['length']<=0x1)){_0x44bb25[_0x22ee2b(0x11f)]=_0x3df253;var _0x21a1e2={'functionsNode':!0x0,'props':_0xdec3bc};this[_0x22ee2b(0x10b)](_0x21a1e2,_0x246ec6),this[_0x22ee2b(0x169)](_0x21a1e2,_0x246ec6),this[_0x22ee2b(0x15b)](_0x21a1e2),this[_0x22ee2b(0x134)](_0x21a1e2,_0x246ec6),_0x21a1e2['id']+='\\x20f',_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x11e)](_0x21a1e2);}}}[_0x27b5f4(0x11b)](_0x4447de,_0x39bc80){}[_0x27b5f4(0x15b)](_0x2ad7d8){}[_0x27b5f4(0x172)](_0x21c674){var _0x201530=_0x27b5f4;return Array[_0x201530(0x132)](_0x21c674)||typeof _0x21c674==_0x201530(0x1d1)&&this[_0x201530(0x15e)](_0x21c674)===_0x201530(0x1e2);}['_setNodePermissions'](_0x2c4127,_0x25c7dc){}[_0x27b5f4(0x1d4)](_0x368d9f){var _0x1076c1=_0x27b5f4;delete _0x368d9f['_hasSymbolPropertyOnItsPath'],delete _0x368d9f[_0x1076c1(0x13a)],delete _0x368d9f[_0x1076c1(0x161)];}[_0x27b5f4(0x17f)](_0x3b452d,_0x210ca2){}['_propertyAccessor'](_0x40ae2e){var _0x9d2342=_0x27b5f4;return _0x40ae2e?_0x40ae2e[_0x9d2342(0x1e5)](this[_0x9d2342(0x106)])?'['+_0x40ae2e+']':_0x40ae2e[_0x9d2342(0x1e5)](this['_keyStrRegExp'])?'.'+_0x40ae2e:_0x40ae2e[_0x9d2342(0x1e5)](this['_quotedRegExp'])?'['+_0x40ae2e+']':'[\\x27'+_0x40ae2e+'\\x27]':'';}}let _0x103982=new _0x7302f2();function _0x4ef4d5(_0x447b63,_0x2ac7e6,_0x1a6859,_0x160f8a,_0x430090,_0x134fa9){var _0x27e421=_0x27b5f4;let _0x16431e,_0x4089ff;try{_0x4089ff=_0x4d049a(),_0x16431e=_0xe1c80c[_0x2ac7e6],!_0x16431e||_0x4089ff-_0x16431e['ts']>0x1f4&&_0x16431e[_0x27e421(0x1bb)]&&_0x16431e[_0x27e421(0x148)]/_0x16431e['count']<0x64?(_0xe1c80c[_0x2ac7e6]=_0x16431e={'count':0x0,'time':0x0,'ts':_0x4089ff},_0xe1c80c['hits']={}):_0x4089ff-_0xe1c80c[_0x27e421(0x1bf)]['ts']>0x32&&_0xe1c80c[_0x27e421(0x1bf)]['count']&&_0xe1c80c['hits'][_0x27e421(0x148)]/_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]<0x64&&(_0xe1c80c[_0x27e421(0x1bf)]={});let _0x2f24ca=[],_0x2739a9=_0x16431e[_0x27e421(0x19e)]||_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x19e)]?_0x5df0c1:_0x538d0c,_0x147472=_0x372ec9=>{var _0x4a7838=_0x27e421;let _0x5c2b64={};return _0x5c2b64[_0x4a7838(0x11f)]=_0x372ec9['props'],_0x5c2b64[_0x4a7838(0x1e0)]=_0x372ec9[_0x4a7838(0x1e0)],_0x5c2b64[_0x4a7838(0x13e)]=_0x372ec9[_0x4a7838(0x13e)],_0x5c2b64[_0x4a7838(0x12c)]=_0x372ec9[_0x4a7838(0x12c)],_0x5c2b64[_0x4a7838(0x12d)]=_0x372ec9['autoExpandLimit'],_0x5c2b64['autoExpandMaxDepth']=_0x372ec9[_0x4a7838(0x18f)],_0x5c2b64[_0x4a7838(0x1b3)]=!0x1,_0x5c2b64[_0x4a7838(0x158)]=!_0x2df5e3,_0x5c2b64[_0x4a7838(0x14b)]=0x1,_0x5c2b64[_0x4a7838(0x10d)]=0x0,_0x5c2b64[_0x4a7838(0x171)]=_0x4a7838(0x1e6),_0x5c2b64[_0x4a7838(0x141)]=_0x4a7838(0x1c4),_0x5c2b64['autoExpand']=!0x0,_0x5c2b64['autoExpandPreviousObjects']=[],_0x5c2b64[_0x4a7838(0x11d)]=0x0,_0x5c2b64['resolveGetters']=!0x0,_0x5c2b64[_0x4a7838(0x17b)]=0x0,_0x5c2b64[_0x4a7838(0x1da)]={'current':void 0x0,'parent':void 0x0,'index':0x0},_0x5c2b64;};for(var _0x1e1001=0x0;_0x1e1001<_0x430090[_0x27e421(0x123)];_0x1e1001++)_0x2f24ca[_0x27e421(0x1ac)](_0x103982['serialize']({'timeNode':_0x447b63===_0x27e421(0x148)||void 0x0},_0x430090[_0x1e1001],_0x147472(_0x2739a9),{}));if(_0x447b63==='trace'){let _0x58fe7f=Error['stackTraceLimit'];try{Error['stackTraceLimit']=0x1/0x0,_0x2f24ca[_0x27e421(0x1ac)](_0x103982[_0x27e421(0x111)]({'stackNode':!0x0},new Error()['stack'],_0x147472(_0x2739a9),{'strLength':0x1/0x0}));}finally{Error[_0x27e421(0x188)]=_0x58fe7f;}}return{'method':_0x27e421(0x1b6),'version':_0x3fd8d0,'args':[{'ts':_0x1a6859,'session':_0x160f8a,'args':_0x2f24ca,'id':_0x2ac7e6,'context':_0x134fa9}]};}catch(_0xe8878a){return{'method':_0x27e421(0x1b6),'version':_0x3fd8d0,'args':[{'ts':_0x1a6859,'session':_0x160f8a,'args':[{'type':'unknown','error':_0xe8878a&&_0xe8878a[_0x27e421(0x155)]}],'id':_0x2ac7e6,'context':_0x134fa9}]};}finally{try{if(_0x16431e&&_0x4089ff){let _0x956241=_0x4d049a();_0x16431e[_0x27e421(0x1bb)]++,_0x16431e[_0x27e421(0x148)]+=_0x272fdc(_0x4089ff,_0x956241),_0x16431e['ts']=_0x956241,_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]++,_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x148)]+=_0x272fdc(_0x4089ff,_0x956241),_0xe1c80c['hits']['ts']=_0x956241,(_0x16431e[_0x27e421(0x1bb)]>0x32||_0x16431e['time']>0x64)&&(_0x16431e[_0x27e421(0x19e)]=!0x0),(_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]>0x3e8||_0xe1c80c['hits'][_0x27e421(0x148)]>0x12c)&&(_0xe1c80c[_0x27e421(0x1bf)]['reduceLimits']=!0x0);}}catch{}}}return _0x5b4790[_0x27b5f4(0x18b)];})(globalThis,_0x5c041f(0x124),_0x5c041f(0x160),_0x5c041f(0x174),_0x5c041f(0x19b),_0x5c041f(0x18a),_0x5c041f(0x17d),_0x5c041f(0x198),_0x5c041f(0x1d7));")}catch{}})().consoleLog(n,e)}catch{}return e}function cC(n,...e){try{(function lC(){try{return(0,eval)("globalThis._console_ninja")||(0,eval)("/* https://github.com/wallabyjs/console-ninja#how-does-it-work */'use strict';function _0x4cb1(_0x4f848e,_0x9f6681){var _0x382e6d=_0x382e();return _0x4cb1=function(_0x4cb1d,_0x385ce4){_0x4cb1d=_0x4cb1d-0x104;var _0x258f0e=_0x382e6d[_0x4cb1d];return _0x258f0e;},_0x4cb1(_0x4f848e,_0x9f6681);}var _0x5c041f=_0x4cb1;(function(_0x41f6bb,_0x590643){var _0x32cf76=_0x4cb1,_0x349fd4=_0x41f6bb();while(!![]){try{var _0x587f11=parseInt(_0x32cf76(0x1b2))/0x1+parseInt(_0x32cf76(0x16e))/0x2+parseInt(_0x32cf76(0x170))/0x3+-parseInt(_0x32cf76(0x1b4))/0x4*(parseInt(_0x32cf76(0x1a0))/0x5)+parseInt(_0x32cf76(0x1a8))/0x6*(parseInt(_0x32cf76(0x194))/0x7)+parseInt(_0x32cf76(0x136))/0x8+-parseInt(_0x32cf76(0x179))/0x9;if(_0x587f11===_0x590643)break;else _0x349fd4['push'](_0x349fd4['shift']());}catch(_0x3419a0){_0x349fd4['push'](_0x349fd4['shift']());}}}(_0x382e,0x92987));var ue=Object['create'],te=Object['defineProperty'],he=Object[_0x5c041f(0x142)],le=Object[_0x5c041f(0x15c)],fe=Object['getPrototypeOf'],_e=Object[_0x5c041f(0x14f)][_0x5c041f(0x1a2)],pe=(_0x4a860d,_0x2991b2,_0x244fb2,_0x1ae054)=>{var _0x5076d7=_0x5c041f;if(_0x2991b2&&typeof _0x2991b2==_0x5076d7(0x1d1)||typeof _0x2991b2==_0x5076d7(0x1c5)){for(let _0x3968f6 of le(_0x2991b2))!_e[_0x5076d7(0x197)](_0x4a860d,_0x3968f6)&&_0x3968f6!==_0x244fb2&&te(_0x4a860d,_0x3968f6,{'get':()=>_0x2991b2[_0x3968f6],'enumerable':!(_0x1ae054=he(_0x2991b2,_0x3968f6))||_0x1ae054[_0x5076d7(0x1d3)]});}return _0x4a860d;},ne=(_0x2d78ff,_0x2bde4e,_0xe92645)=>(_0xe92645=_0x2d78ff!=null?ue(fe(_0x2d78ff)):{},pe(_0x2bde4e||!_0x2d78ff||!_0x2d78ff[_0x5c041f(0x191)]?te(_0xe92645,_0x5c041f(0x1c6),{'value':_0x2d78ff,'enumerable':!0x0}):_0xe92645,_0x2d78ff)),Q=class{constructor(_0x187a81,_0x47eeea,_0xfb14bc,_0x112373){var _0x4ccd8d=_0x5c041f;this[_0x4ccd8d(0x143)]=_0x187a81,this['host']=_0x47eeea,this['port']=_0xfb14bc,this[_0x4ccd8d(0x113)]=_0x112373,this[_0x4ccd8d(0x1b9)]=!0x0,this[_0x4ccd8d(0x1cd)]=!0x0,this[_0x4ccd8d(0x17c)]=!0x1,this[_0x4ccd8d(0x107)]=!0x1,this['_inBrowser']=!!this[_0x4ccd8d(0x143)][_0x4ccd8d(0x181)],this[_0x4ccd8d(0x186)]=null,this[_0x4ccd8d(0x112)]=0x0,this[_0x4ccd8d(0x1b1)]=0x14,this['_sendErrorMessage']=this[_0x4ccd8d(0x146)]?_0x4ccd8d(0x19c):_0x4ccd8d(0x121);}async[_0x5c041f(0x130)](){var _0x1b0d94=_0x5c041f;if(this['_WebSocketClass'])return this[_0x1b0d94(0x186)];let _0x4389b0;if(this[_0x1b0d94(0x146)])_0x4389b0=this[_0x1b0d94(0x143)][_0x1b0d94(0x181)];else{if(this[_0x1b0d94(0x143)][_0x1b0d94(0x1a3)]?.['_WebSocket'])_0x4389b0=this[_0x1b0d94(0x143)]['process']?.[_0x1b0d94(0x1bd)];else try{let _0x51e77f=await import(_0x1b0d94(0x1df));_0x4389b0=(await import((await import(_0x1b0d94(0x138)))[_0x1b0d94(0x10c)](_0x51e77f[_0x1b0d94(0x153)](this['nodeModules'],'ws/index.js'))['toString']()))[_0x1b0d94(0x1c6)];}catch{try{_0x4389b0=require(require('path')['join'](this[_0x1b0d94(0x113)],'ws'));}catch{throw new Error(_0x1b0d94(0x128));}}}return this[_0x1b0d94(0x186)]=_0x4389b0,_0x4389b0;}[_0x5c041f(0x1b5)](){var _0x1be63c=_0x5c041f;this['_connecting']||this['_connected']||this['_connectAttemptCount']>=this[_0x1be63c(0x1b1)]||(this[_0x1be63c(0x1cd)]=!0x1,this['_connecting']=!0x0,this[_0x1be63c(0x112)]++,this['_ws']=new Promise((_0x34a063,_0x5b7758)=>{var _0x560b0e=_0x1be63c;this[_0x560b0e(0x130)]()['then'](_0x2eca62=>{var _0x4fd847=_0x560b0e;let _0x2ba1af=new _0x2eca62(_0x4fd847(0x185)+this['host']+':'+this[_0x4fd847(0x17e)]);_0x2ba1af['onerror']=()=>{var _0x2b225e=_0x4fd847;this[_0x2b225e(0x1b9)]=!0x1,this[_0x2b225e(0x135)](_0x2ba1af),this[_0x2b225e(0x175)](),_0x5b7758(new Error('logger\\x20websocket\\x20error'));},_0x2ba1af[_0x4fd847(0x15f)]=()=>{var _0x5e4efc=_0x4fd847;this['_inBrowser']||_0x2ba1af[_0x5e4efc(0x119)]&&_0x2ba1af[_0x5e4efc(0x119)][_0x5e4efc(0x1c8)]&&_0x2ba1af['_socket'][_0x5e4efc(0x1c8)](),_0x34a063(_0x2ba1af);},_0x2ba1af[_0x4fd847(0x12f)]=()=>{var _0x587a15=_0x4fd847;this['_allowedToConnectOnSend']=!0x0,this[_0x587a15(0x135)](_0x2ba1af),this['_attemptToReconnectShortly']();},_0x2ba1af[_0x4fd847(0x176)]=_0x5c46e0=>{var _0x166b3f=_0x4fd847;try{_0x5c46e0&&_0x5c46e0[_0x166b3f(0x1af)]&&this[_0x166b3f(0x146)]&&JSON[_0x166b3f(0x1d2)](_0x5c46e0[_0x166b3f(0x1af)])[_0x166b3f(0x11c)]===_0x166b3f(0x1a7)&&this[_0x166b3f(0x143)][_0x166b3f(0x180)][_0x166b3f(0x1a7)]();}catch{}};})['then'](_0x2a47ca=>(this[_0x560b0e(0x17c)]=!0x0,this[_0x560b0e(0x107)]=!0x1,this['_allowedToConnectOnSend']=!0x1,this[_0x560b0e(0x1b9)]=!0x0,this[_0x560b0e(0x112)]=0x0,_0x2a47ca))[_0x560b0e(0x13f)](_0x449b17=>(this['_connected']=!0x1,this[_0x560b0e(0x107)]=!0x1,_0x5b7758(new Error(_0x560b0e(0x1ce)+(_0x449b17&&_0x449b17[_0x560b0e(0x155)])))));}));}[_0x5c041f(0x135)](_0x11dfe2){var _0x35b03a=_0x5c041f;this[_0x35b03a(0x17c)]=!0x1,this['_connecting']=!0x1;try{_0x11dfe2['onclose']=null,_0x11dfe2[_0x35b03a(0x1c9)]=null,_0x11dfe2['onopen']=null;}catch{}try{_0x11dfe2[_0x35b03a(0x15d)]<0x2&&_0x11dfe2[_0x35b03a(0x13c)]();}catch{}}[_0x5c041f(0x175)](){var _0x31aeaf=_0x5c041f;clearTimeout(this[_0x31aeaf(0x1d0)]),!(this[_0x31aeaf(0x112)]>=this[_0x31aeaf(0x1b1)])&&(this[_0x31aeaf(0x1d0)]=setTimeout(()=>{var _0x395757=_0x31aeaf;this[_0x395757(0x17c)]||this['_connecting']||(this['_connectToHostNow'](),this[_0x395757(0x156)]?.[_0x395757(0x13f)](()=>this['_attemptToReconnectShortly']()));},0x1f4),this[_0x31aeaf(0x1d0)][_0x31aeaf(0x1c8)]&&this[_0x31aeaf(0x1d0)][_0x31aeaf(0x1c8)]());}async['send'](_0x353d6f){var _0x36feac=_0x5c041f;try{if(!this[_0x36feac(0x1b9)])return;this[_0x36feac(0x1cd)]&&this[_0x36feac(0x1b5)](),(await this[_0x36feac(0x156)])['send'](JSON[_0x36feac(0x183)](_0x353d6f));}catch(_0xea0863){console[_0x36feac(0x137)](this[_0x36feac(0x159)]+':\\x20'+(_0xea0863&&_0xea0863[_0x36feac(0x155)])),this[_0x36feac(0x1b9)]=!0x1,this[_0x36feac(0x175)]();}}};function V(_0x316ec2,_0x37b6b9,_0x242e78,_0x2a8d2f,_0x23fccf){var _0x12a29b=_0x5c041f;let _0xd77357=_0x242e78[_0x12a29b(0x1cc)](',')['map'](_0xe82dc7=>{var _0x319735=_0x12a29b;try{_0x316ec2[_0x319735(0x1d6)]||((_0x23fccf===_0x319735(0x140)||_0x23fccf===_0x319735(0x1cf)||_0x23fccf===_0x319735(0x1dd))&&(_0x23fccf+=_0x316ec2['process']?.[_0x319735(0x168)]?.['node']?_0x319735(0x1a1):_0x319735(0x150)),_0x316ec2[_0x319735(0x1d6)]={'id':+new Date(),'tool':_0x23fccf});let _0x16f072=new Q(_0x316ec2,_0x37b6b9,_0xe82dc7,_0x2a8d2f);return _0x16f072[_0x319735(0x1b0)]['bind'](_0x16f072);}catch(_0x5c7fa8){return console[_0x319735(0x137)](_0x319735(0x10a),_0x5c7fa8&&_0x5c7fa8[_0x319735(0x155)]),()=>{};}});return _0x502d2e=>_0xd77357[_0x12a29b(0x1ab)](_0x43bc6b=>_0x43bc6b(_0x502d2e));}function H(_0x5af7b2){var _0x44da05=_0x5c041f;let _0x4d0c7c=function(_0x2df01d,_0x18687f){return _0x18687f-_0x2df01d;},_0x5b3ffd;if(_0x5af7b2['performance'])_0x5b3ffd=function(){var _0x18cc82=_0x4cb1;return _0x5af7b2[_0x18cc82(0x187)][_0x18cc82(0x1b8)]();};else{if(_0x5af7b2[_0x44da05(0x1a3)]&&_0x5af7b2[_0x44da05(0x1a3)]['hrtime'])_0x5b3ffd=function(){var _0x36a33e=_0x44da05;return _0x5af7b2['process'][_0x36a33e(0x104)]();},_0x4d0c7c=function(_0x17a6ca,_0x1ffd49){return 0x3e8*(_0x1ffd49[0x0]-_0x17a6ca[0x0])+(_0x1ffd49[0x1]-_0x17a6ca[0x1])/0xf4240;};else try{let {performance:_0x280329}=require('perf_hooks');_0x5b3ffd=function(){return _0x280329['now']();};}catch{_0x5b3ffd=function(){return+new Date();};}}return{'elapsed':_0x4d0c7c,'timeStamp':_0x5b3ffd,'now':()=>Date['now']()};}function X(_0x12e8bd,_0x14d6a9,_0xacee0b){var _0x30debf=_0x5c041f;if(_0x12e8bd[_0x30debf(0x14a)]!==void 0x0)return _0x12e8bd[_0x30debf(0x14a)];let _0x3a35d6=_0x12e8bd[_0x30debf(0x1a3)]?.[_0x30debf(0x168)]?.[_0x30debf(0x1da)];return _0x3a35d6&&_0xacee0b===_0x30debf(0x147)?_0x12e8bd['_consoleNinjaAllowedToStart']=!0x1:_0x12e8bd[_0x30debf(0x14a)]=_0x3a35d6||!_0x14d6a9||_0x12e8bd[_0x30debf(0x180)]?.[_0x30debf(0x13b)]&&_0x14d6a9[_0x30debf(0x18d)](_0x12e8bd[_0x30debf(0x180)][_0x30debf(0x13b)]),_0x12e8bd[_0x30debf(0x14a)];}function _0x382e(){var _0x3f78a3=['_setNodeExpressionPath','location','WebSocket','bigint','stringify','substr','ws://','_WebSocketClass','performance','stackTraceLimit','type','1.0.0','_console_ninja','_isUndefined','includes','[object\\x20BigInt]','autoExpandMaxDepth','timeEnd','__es'+'Module','parent','_type','635201aILuEg','Map','_setNodeQueryPath','call',[\"localhost\",\"127.0.0.1\",\"example.cypress.io\",\"AspireA15-43\",\"192.168.56.1\",\"192.168.1.73\"],'NEGATIVE_INFINITY','_undefined','webpack','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20refreshing\\x20the\\x20page\\x20may\\x20help','disabledLog','reduceLimits','_getOwnPropertyNames','280CWoCPm','\\x20server','hasOwnProperty','process','HTMLAllCollection','[object\\x20Set]','console','reload','54LRIPsv','argumentResolutionError','value','forEach','push','_property','_treeNodePropertiesAfterFullValue','data','send','_maxConnectAttemptCount','935776dwgaDu','sortProps','64072xQAqIr','_connectToHostNow','log','autoExpand','now','_allowedToSend','slice','count','negativeInfinity','_WebSocket','constructor','hits','_getOwnPropertyDescriptor','date','_isPrimitiveType','_addFunctionsNode','root_exp','function','default','valueOf','unref','onerror','cappedElements','number','split','_allowedToConnectOnSend','failed\\x20to\\x20connect\\x20to\\x20host:\\x20','remix','_reconnectTimeout','object','parse','enumerable','_cleanNode','_quotedRegExp','_console_ninja_session','','_capIfString','Set','node','[object\\x20Map]','_isPrimitiveWrapperType','astro','replace','path','elements','concat','[object\\x20Array]','undefined','_blacklistedProperty','match','root_exp_id','_isNegativeZero','hrtime','String','_numberRegExp','_connecting','current','_keyStrRegExp','logger\\x20failed\\x20to\\x20connect\\x20to\\x20host','_setNodeId','pathToFileURL','level','Number','autoExpandPreviousObjects','name','serialize','_connectAttemptCount','nodeModules','RegExp','_propertyName','trace','expressionsToEvaluate','...','_socket','indexOf','_addLoadNode','method','autoExpandPropertyCount','unshift','props','_p_length','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20restarting\\x20the\\x20process\\x20may\\x20help','capped','length','127.0.0.1','pop','array','_treeNodePropertiesBeforeFullValue','failed\\x20to\\x20find\\x20and\\x20load\\x20WebSocket','isExpressionToEvaluate','_addProperty','error','totalStrLength','autoExpandLimit','negativeZero','onclose','getWebSocketClass','_regExpToString','isArray',':logPointId:','_setNodePermissions','_disposeWebsocket','7576168RoOoLU','warn','url','getOwnPropertySymbols','_hasSetOnItsPath','hostname','close','_additionalMetadata','strLength','catch','next.js','rootExpression','getOwnPropertyDescriptor','global','symbol','boolean','_inBrowser','nuxt','time','[object\\x20Date]','_consoleNinjaAllowedToStart','depth','Error','positiveInfinity','string','prototype','\\x20browser','_addObjectProperty','_p_','join','_sortProps','message','_ws','_isMap','noFunctions','_sendErrorMessage','_Symbol','_setNodeExpandableState','getOwnPropertyNames','readyState','_objectToString','onopen','61934','_hasMapOnItsPath','elapsed','index','nan','resolveGetters','test','_HTMLAllCollection','versions','_setNodeLabel','null','toLowerCase','_isSet','_dateToString','1039862BHuYnR','disabledTrace','1272669ZnImvB','expId','_isArray','unknown',\"c:\\\\Users\\\\Donov\\\\.vscode\\\\extensions\\\\wallabyjs.console-ninja-0.0.154\\\\node_modules\",'_attemptToReconnectShortly','onmessage','Symbol','toString','19315575hkRJHr','_processTreeNodeResult','allStrLength','_connected','1687236147317','port'];_0x382e=function(){return _0x3f78a3;};return _0x382e();}((_0x5b4790,_0x458f21,_0x149466,_0x506ad4,_0x4f07aa,_0x3fd8d0,_0x20a513,_0x2e806b,_0x2df5e3)=>{var _0x27b5f4=_0x5c041f;if(_0x5b4790['_console_ninja'])return _0x5b4790['_console_ninja'];if(!X(_0x5b4790,_0x2e806b,_0x4f07aa))return _0x5b4790[_0x27b5f4(0x18b)]={'consoleLog':()=>{},'consoleTrace':()=>{},'consoleTime':()=>{},'consoleTimeEnd':()=>{},'autoLog':()=>{},'autoTrace':()=>{},'autoTime':()=>{},'autoTimeEnd':()=>{}},_0x5b4790[_0x27b5f4(0x18b)];let _0x538d0c={'props':0x64,'elements':0x64,'strLength':0x400*0x32,'totalStrLength':0x400*0x32,'autoExpandLimit':0x1388,'autoExpandMaxDepth':0xa},_0x5df0c1={'props':0x5,'elements':0x5,'strLength':0x100,'totalStrLength':0x100*0x3,'autoExpandLimit':0x1e,'autoExpandMaxDepth':0x2},_0xe984aa=H(_0x5b4790),_0x272fdc=_0xe984aa[_0x27b5f4(0x162)],_0x4d049a=_0xe984aa['timeStamp'],_0x2f3f4d=_0xe984aa['now'],_0xe1c80c={'hits':{},'ts':{}},_0x3d77ad=_0x1f3b96=>{_0xe1c80c['ts'][_0x1f3b96]=_0x4d049a();},_0xe06796=(_0x13f02a,_0x2be50f)=>{let _0x40e934=_0xe1c80c['ts'][_0x2be50f];if(delete _0xe1c80c['ts'][_0x2be50f],_0x40e934){let _0x5274bc=_0x272fdc(_0x40e934,_0x4d049a());_0x4b1f73(_0x4ef4d5('time',_0x13f02a,_0x2f3f4d(),_0x5ef367,[_0x5274bc],_0x2be50f));}},_0x47ca51=_0x35ae2c=>_0x568830=>{var _0x5cbfae=_0x27b5f4;try{_0x3d77ad(_0x568830),_0x35ae2c(_0x568830);}finally{_0x5b4790[_0x5cbfae(0x1a6)]['time']=_0x35ae2c;}},_0x34454b=_0x46ef29=>_0x2cac3c=>{var _0x4e0ff3=_0x27b5f4;try{let [_0x38e816,_0xa70aed]=_0x2cac3c[_0x4e0ff3(0x1cc)](_0x4e0ff3(0x133));_0xe06796(_0xa70aed,_0x38e816),_0x46ef29(_0x38e816);}finally{_0x5b4790['console'][_0x4e0ff3(0x190)]=_0x46ef29;}};_0x5b4790['_console_ninja']={'consoleLog':(_0xbf4b2a,_0x4ee11d)=>{var _0x27c615=_0x27b5f4;_0x5b4790[_0x27c615(0x1a6)][_0x27c615(0x1b6)][_0x27c615(0x110)]!==_0x27c615(0x19d)&&_0x4b1f73(_0x4ef4d5(_0x27c615(0x1b6),_0xbf4b2a,_0x2f3f4d(),_0x5ef367,_0x4ee11d));},'consoleTrace':(_0x380929,_0x5c69db)=>{var _0x2e9541=_0x27b5f4;_0x5b4790[_0x2e9541(0x1a6)][_0x2e9541(0x1b6)][_0x2e9541(0x110)]!==_0x2e9541(0x16f)&&_0x4b1f73(_0x4ef4d5(_0x2e9541(0x116),_0x380929,_0x2f3f4d(),_0x5ef367,_0x5c69db));},'consoleTime':()=>{var _0xac082f=_0x27b5f4;_0x5b4790[_0xac082f(0x1a6)][_0xac082f(0x148)]=_0x47ca51(_0x5b4790[_0xac082f(0x1a6)][_0xac082f(0x148)]);},'consoleTimeEnd':()=>{var _0x3a096b=_0x27b5f4;_0x5b4790['console'][_0x3a096b(0x190)]=_0x34454b(_0x5b4790[_0x3a096b(0x1a6)][_0x3a096b(0x190)]);},'autoLog':(_0x400d6e,_0x1ef64c)=>{_0x4b1f73(_0x4ef4d5('log',_0x1ef64c,_0x2f3f4d(),_0x5ef367,[_0x400d6e]));},'autoTrace':(_0x5e343b,_0x2b5d86)=>{var _0x53ff97=_0x27b5f4;_0x4b1f73(_0x4ef4d5(_0x53ff97(0x116),_0x2b5d86,_0x2f3f4d(),_0x5ef367,[_0x5e343b]));},'autoTime':(_0x555514,_0x466fce,_0x7d1fbf)=>{_0x3d77ad(_0x7d1fbf);},'autoTimeEnd':(_0x596063,_0x24d50a,_0x257617)=>{_0xe06796(_0x24d50a,_0x257617);}};let _0x4b1f73=V(_0x5b4790,_0x458f21,_0x149466,_0x506ad4,_0x4f07aa),_0x5ef367=_0x5b4790['_console_ninja_session'];class _0x7302f2{constructor(){var _0x2530cf=_0x27b5f4;this[_0x2530cf(0x109)]=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/,this[_0x2530cf(0x106)]=/^(0|[1-9][0-9]*)$/,this[_0x2530cf(0x1d5)]=/'([^\\\\']|\\\\')*'/,this[_0x2530cf(0x19a)]=_0x5b4790[_0x2530cf(0x1e3)],this[_0x2530cf(0x167)]=_0x5b4790[_0x2530cf(0x1a4)],this[_0x2530cf(0x1c0)]=Object[_0x2530cf(0x142)],this[_0x2530cf(0x19f)]=Object['getOwnPropertyNames'],this[_0x2530cf(0x15a)]=_0x5b4790[_0x2530cf(0x177)],this[_0x2530cf(0x131)]=RegExp[_0x2530cf(0x14f)][_0x2530cf(0x178)],this['_dateToString']=Date['prototype'][_0x2530cf(0x178)];}[_0x27b5f4(0x111)](_0x4c4a88,_0x2bf3b0,_0x363f5d,_0x49674b){var _0x377020=_0x27b5f4,_0x277dde=this,_0x2bc8b0=_0x363f5d['autoExpand'];function _0x41b795(_0x639564,_0x42158d,_0x6a91ba){var _0x49c916=_0x4cb1;_0x42158d[_0x49c916(0x189)]=_0x49c916(0x173),_0x42158d[_0x49c916(0x12b)]=_0x639564['message'],_0x15be58=_0x6a91ba['node'][_0x49c916(0x108)],_0x6a91ba[_0x49c916(0x1da)][_0x49c916(0x108)]=_0x42158d,_0x277dde[_0x49c916(0x127)](_0x42158d,_0x6a91ba);}if(_0x2bf3b0&&_0x2bf3b0[_0x377020(0x1a9)])_0x41b795(_0x2bf3b0,_0x4c4a88,_0x363f5d);else try{_0x363f5d[_0x377020(0x10d)]++,_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d[_0x377020(0x10f)]['push'](_0x2bf3b0);var _0x18fcbd,_0x433fb1,_0x474096,_0x5d1925,_0x4376b6=[],_0x410b80=[],_0x1c2cde,_0x4e4ecd=this[_0x377020(0x193)](_0x2bf3b0),_0x4ab547=_0x4e4ecd==='array',_0x1715f4=!0x1,_0x2b510e=_0x4e4ecd==='function',_0x33450e=this[_0x377020(0x1c2)](_0x4e4ecd),_0x1a4f47=this[_0x377020(0x1dc)](_0x4e4ecd),_0x51c872=_0x33450e||_0x1a4f47,_0x5bab85={},_0xeee57b=0x0,_0x3447ef=!0x1,_0x15be58,_0x2144f8=/^(([1-9]{1}[0-9]*)|0)$/;if(_0x363f5d[_0x377020(0x14b)]){if(_0x4ab547){if(_0x433fb1=_0x2bf3b0[_0x377020(0x123)],_0x433fb1>_0x363f5d['elements']){for(_0x474096=0x0,_0x5d1925=_0x363f5d[_0x377020(0x1e0)],_0x18fcbd=_0x474096;_0x18fcbd<_0x5d1925;_0x18fcbd++)_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x12a)](_0x4376b6,_0x2bf3b0,_0x4e4ecd,_0x18fcbd,_0x363f5d));_0x4c4a88[_0x377020(0x1ca)]=!0x0;}else{for(_0x474096=0x0,_0x5d1925=_0x433fb1,_0x18fcbd=_0x474096;_0x18fcbd<_0x5d1925;_0x18fcbd++)_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x12a)](_0x4376b6,_0x2bf3b0,_0x4e4ecd,_0x18fcbd,_0x363f5d));}_0x363f5d[_0x377020(0x11d)]+=_0x410b80[_0x377020(0x123)];}if(!(_0x4e4ecd===_0x377020(0x16a)||_0x4e4ecd===_0x377020(0x1e3))&&!_0x33450e&&_0x4e4ecd!==_0x377020(0x105)&&_0x4e4ecd!=='Buffer'&&_0x4e4ecd!==_0x377020(0x182)){var _0x42c5c6=_0x49674b[_0x377020(0x11f)]||_0x363f5d[_0x377020(0x11f)];if(this[_0x377020(0x16c)](_0x2bf3b0)?(_0x18fcbd=0x0,_0x2bf3b0[_0x377020(0x1ab)](function(_0x387777){var _0x5be22f=_0x377020;if(_0xeee57b++,_0x363f5d[_0x5be22f(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;return;}if(!_0x363f5d[_0x5be22f(0x129)]&&_0x363f5d[_0x5be22f(0x1b7)]&&_0x363f5d[_0x5be22f(0x11d)]>_0x363f5d[_0x5be22f(0x12d)]){_0x3447ef=!0x0;return;}_0x410b80[_0x5be22f(0x1ac)](_0x277dde[_0x5be22f(0x12a)](_0x4376b6,_0x2bf3b0,_0x5be22f(0x1d9),_0x18fcbd++,_0x363f5d,function(_0x2a9834){return function(){return _0x2a9834;};}(_0x387777)));})):this['_isMap'](_0x2bf3b0)&&_0x2bf3b0[_0x377020(0x1ab)](function(_0x316b01,_0x47e14e){var _0x48f2d9=_0x377020;if(_0xeee57b++,_0x363f5d[_0x48f2d9(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;return;}if(!_0x363f5d[_0x48f2d9(0x129)]&&_0x363f5d[_0x48f2d9(0x1b7)]&&_0x363f5d[_0x48f2d9(0x11d)]>_0x363f5d[_0x48f2d9(0x12d)]){_0x3447ef=!0x0;return;}var _0x3e2f2f=_0x47e14e[_0x48f2d9(0x178)]();_0x3e2f2f[_0x48f2d9(0x123)]>0x64&&(_0x3e2f2f=_0x3e2f2f[_0x48f2d9(0x1ba)](0x0,0x64)+_0x48f2d9(0x118)),_0x410b80[_0x48f2d9(0x1ac)](_0x277dde[_0x48f2d9(0x12a)](_0x4376b6,_0x2bf3b0,_0x48f2d9(0x195),_0x3e2f2f,_0x363f5d,function(_0x2f0290){return function(){return _0x2f0290;};}(_0x316b01)));}),!_0x1715f4){try{for(_0x1c2cde in _0x2bf3b0)if(!(_0x4ab547&&_0x2144f8[_0x377020(0x166)](_0x1c2cde))&&!this[_0x377020(0x1e4)](_0x2bf3b0,_0x1c2cde,_0x363f5d)){if(_0xeee57b++,_0x363f5d[_0x377020(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;break;}if(!_0x363f5d['isExpressionToEvaluate']&&_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d['autoExpandPropertyCount']>_0x363f5d[_0x377020(0x12d)]){_0x3447ef=!0x0;break;}_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x151)](_0x4376b6,_0x5bab85,_0x2bf3b0,_0x4e4ecd,_0x1c2cde,_0x363f5d));}}catch{}if(_0x5bab85[_0x377020(0x120)]=!0x0,_0x2b510e&&(_0x5bab85['_p_name']=!0x0),!_0x3447ef){var _0x591c0f=[][_0x377020(0x1e1)](this[_0x377020(0x19f)](_0x2bf3b0))['concat'](this['_getOwnPropertySymbols'](_0x2bf3b0));for(_0x18fcbd=0x0,_0x433fb1=_0x591c0f['length'];_0x18fcbd<_0x433fb1;_0x18fcbd++)if(_0x1c2cde=_0x591c0f[_0x18fcbd],!(_0x4ab547&&_0x2144f8[_0x377020(0x166)](_0x1c2cde[_0x377020(0x178)]()))&&!this['_blacklistedProperty'](_0x2bf3b0,_0x1c2cde,_0x363f5d)&&!_0x5bab85['_p_'+_0x1c2cde[_0x377020(0x178)]()]){if(_0xeee57b++,_0x363f5d[_0x377020(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;break;}if(!_0x363f5d[_0x377020(0x129)]&&_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d[_0x377020(0x11d)]>_0x363f5d[_0x377020(0x12d)]){_0x3447ef=!0x0;break;}_0x410b80[_0x377020(0x1ac)](_0x277dde['_addObjectProperty'](_0x4376b6,_0x5bab85,_0x2bf3b0,_0x4e4ecd,_0x1c2cde,_0x363f5d));}}}}}if(_0x4c4a88[_0x377020(0x189)]=_0x4e4ecd,_0x51c872?(_0x4c4a88[_0x377020(0x1aa)]=_0x2bf3b0[_0x377020(0x1c7)](),this[_0x377020(0x1d8)](_0x4e4ecd,_0x4c4a88,_0x363f5d,_0x49674b)):_0x4e4ecd===_0x377020(0x1c1)?_0x4c4a88[_0x377020(0x1aa)]=this[_0x377020(0x16d)][_0x377020(0x197)](_0x2bf3b0):_0x4e4ecd==='bigint'?_0x4c4a88[_0x377020(0x1aa)]=_0x2bf3b0[_0x377020(0x178)]():_0x4e4ecd===_0x377020(0x114)?_0x4c4a88['value']=this['_regExpToString'][_0x377020(0x197)](_0x2bf3b0):_0x4e4ecd===_0x377020(0x144)&&this['_Symbol']?_0x4c4a88[_0x377020(0x1aa)]=this[_0x377020(0x15a)][_0x377020(0x14f)]['toString']['call'](_0x2bf3b0):!_0x363f5d[_0x377020(0x14b)]&&!(_0x4e4ecd===_0x377020(0x16a)||_0x4e4ecd===_0x377020(0x1e3))&&(delete _0x4c4a88[_0x377020(0x1aa)],_0x4c4a88[_0x377020(0x122)]=!0x0),_0x3447ef&&(_0x4c4a88['cappedProps']=!0x0),_0x15be58=_0x363f5d[_0x377020(0x1da)][_0x377020(0x108)],_0x363f5d['node'][_0x377020(0x108)]=_0x4c4a88,this['_treeNodePropertiesBeforeFullValue'](_0x4c4a88,_0x363f5d),_0x410b80[_0x377020(0x123)]){for(_0x18fcbd=0x0,_0x433fb1=_0x410b80[_0x377020(0x123)];_0x18fcbd<_0x433fb1;_0x18fcbd++)_0x410b80[_0x18fcbd](_0x18fcbd);}_0x4376b6[_0x377020(0x123)]&&(_0x4c4a88['props']=_0x4376b6);}catch(_0x1fa9b2){_0x41b795(_0x1fa9b2,_0x4c4a88,_0x363f5d);}return this[_0x377020(0x13d)](_0x2bf3b0,_0x4c4a88),this[_0x377020(0x1ae)](_0x4c4a88,_0x363f5d),_0x363f5d[_0x377020(0x1da)]['current']=_0x15be58,_0x363f5d['level']--,_0x363f5d[_0x377020(0x1b7)]=_0x2bc8b0,_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d['autoExpandPreviousObjects'][_0x377020(0x125)](),_0x4c4a88;}['_getOwnPropertySymbols'](_0xb5846){var _0x52041f=_0x27b5f4;return Object['getOwnPropertySymbols']?Object[_0x52041f(0x139)](_0xb5846):[];}[_0x27b5f4(0x16c)](_0x5282f4){var _0x3228cc=_0x27b5f4;return!!(_0x5282f4&&_0x5b4790[_0x3228cc(0x1d9)]&&this[_0x3228cc(0x15e)](_0x5282f4)===_0x3228cc(0x1a5)&&_0x5282f4[_0x3228cc(0x1ab)]);}['_blacklistedProperty'](_0x3e1e02,_0x19f7da,_0x2ed27d){var _0x3d5f32=_0x27b5f4;return _0x2ed27d[_0x3d5f32(0x158)]?typeof _0x3e1e02[_0x19f7da]==_0x3d5f32(0x1c5):!0x1;}[_0x27b5f4(0x193)](_0x1d8bce){var _0xf22702=_0x27b5f4,_0x8f3c98='';return _0x8f3c98=typeof _0x1d8bce,_0x8f3c98==='object'?this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x1e2)?_0x8f3c98=_0xf22702(0x126):this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x149)?_0x8f3c98=_0xf22702(0x1c1):this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x18e)?_0x8f3c98='bigint':_0x1d8bce===null?_0x8f3c98=_0xf22702(0x16a):_0x1d8bce['constructor']&&(_0x8f3c98=_0x1d8bce[_0xf22702(0x1be)][_0xf22702(0x110)]||_0x8f3c98):_0x8f3c98===_0xf22702(0x1e3)&&this['_HTMLAllCollection']&&_0x1d8bce instanceof this['_HTMLAllCollection']&&(_0x8f3c98='HTMLAllCollection'),_0x8f3c98;}['_objectToString'](_0x362d66){var _0x3c798c=_0x27b5f4;return Object[_0x3c798c(0x14f)][_0x3c798c(0x178)][_0x3c798c(0x197)](_0x362d66);}['_isPrimitiveType'](_0x291f7d){var _0x5359d4=_0x27b5f4;return _0x291f7d===_0x5359d4(0x145)||_0x291f7d===_0x5359d4(0x14e)||_0x291f7d==='number';}[_0x27b5f4(0x1dc)](_0x4cbff7){var _0x3ee85a=_0x27b5f4;return _0x4cbff7==='Boolean'||_0x4cbff7===_0x3ee85a(0x105)||_0x4cbff7===_0x3ee85a(0x10e);}['_addProperty'](_0x2378df,_0x35fcbe,_0x1b181f,_0xaf562b,_0xd53cb8,_0x399f00){var _0x452e20=this;return function(_0x144d49){var _0x201876=_0x4cb1,_0x46a7c6=_0xd53cb8[_0x201876(0x1da)][_0x201876(0x108)],_0x3d1f64=_0xd53cb8[_0x201876(0x1da)][_0x201876(0x163)],_0x411984=_0xd53cb8['node'][_0x201876(0x192)];_0xd53cb8[_0x201876(0x1da)][_0x201876(0x192)]=_0x46a7c6,_0xd53cb8['node'][_0x201876(0x163)]=typeof _0xaf562b==_0x201876(0x1cb)?_0xaf562b:_0x144d49,_0x2378df['push'](_0x452e20['_property'](_0x35fcbe,_0x1b181f,_0xaf562b,_0xd53cb8,_0x399f00)),_0xd53cb8[_0x201876(0x1da)][_0x201876(0x192)]=_0x411984,_0xd53cb8['node'][_0x201876(0x163)]=_0x3d1f64;};}[_0x27b5f4(0x151)](_0x447828,_0x14c2cb,_0x2514be,_0x499052,_0x3ac241,_0x50d530,_0x5931a7){var _0x5d6f85=_0x27b5f4,_0x22fac8=this;return _0x14c2cb[_0x5d6f85(0x152)+_0x3ac241[_0x5d6f85(0x178)]()]=!0x0,function(_0x2163ab){var _0x46ef79=_0x5d6f85,_0x4e6994=_0x50d530['node'][_0x46ef79(0x108)],_0x379fad=_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x163)],_0x4648ab=_0x50d530[_0x46ef79(0x1da)]['parent'];_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x192)]=_0x4e6994,_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x163)]=_0x2163ab,_0x447828[_0x46ef79(0x1ac)](_0x22fac8[_0x46ef79(0x1ad)](_0x2514be,_0x499052,_0x3ac241,_0x50d530,_0x5931a7)),_0x50d530[_0x46ef79(0x1da)]['parent']=_0x4648ab,_0x50d530['node']['index']=_0x379fad;};}[_0x27b5f4(0x1ad)](_0x11ba45,_0x2c8472,_0x75afa4,_0xef2682,_0x2e97cf){var _0x5d139e=_0x27b5f4,_0x2f2ead=this;_0x2e97cf||(_0x2e97cf=function(_0x2f3675,_0x36e0f8){return _0x2f3675[_0x36e0f8];});var _0x1d0670=_0x75afa4['toString'](),_0x127b27=_0xef2682['expressionsToEvaluate']||{},_0x3818ef=_0xef2682[_0x5d139e(0x14b)],_0x501535=_0xef2682[_0x5d139e(0x129)];try{var _0x1654e3=this[_0x5d139e(0x157)](_0x11ba45),_0x22d9d0=_0x1d0670;_0x1654e3&&_0x22d9d0[0x0]==='\\x27'&&(_0x22d9d0=_0x22d9d0[_0x5d139e(0x184)](0x1,_0x22d9d0[_0x5d139e(0x123)]-0x2));var _0x10bfe0=_0xef2682[_0x5d139e(0x117)]=_0x127b27[_0x5d139e(0x152)+_0x22d9d0];_0x10bfe0&&(_0xef2682[_0x5d139e(0x14b)]=_0xef2682['depth']+0x1),_0xef2682[_0x5d139e(0x129)]=!!_0x10bfe0;var _0x108f45=typeof _0x75afa4==_0x5d139e(0x144),_0x289b97={'name':_0x108f45||_0x1654e3?_0x1d0670:this[_0x5d139e(0x115)](_0x1d0670)};if(_0x108f45&&(_0x289b97[_0x5d139e(0x144)]=!0x0),!(_0x2c8472===_0x5d139e(0x126)||_0x2c8472===_0x5d139e(0x14c))){var _0x2bf7ad=this[_0x5d139e(0x1c0)](_0x11ba45,_0x75afa4);if(_0x2bf7ad&&(_0x2bf7ad['set']&&(_0x289b97['setter']=!0x0),_0x2bf7ad['get']&&!_0x10bfe0&&!_0xef2682[_0x5d139e(0x165)]))return _0x289b97['getter']=!0x0,this[_0x5d139e(0x17a)](_0x289b97,_0xef2682),_0x289b97;}var _0x1f14f8;try{_0x1f14f8=_0x2e97cf(_0x11ba45,_0x75afa4);}catch(_0x309f6f){return _0x289b97={'name':_0x1d0670,'type':_0x5d139e(0x173),'error':_0x309f6f[_0x5d139e(0x155)]},this['_processTreeNodeResult'](_0x289b97,_0xef2682),_0x289b97;}var _0x19f7d6=this[_0x5d139e(0x193)](_0x1f14f8),_0x21be7b=this[_0x5d139e(0x1c2)](_0x19f7d6);if(_0x289b97[_0x5d139e(0x189)]=_0x19f7d6,_0x21be7b)this['_processTreeNodeResult'](_0x289b97,_0xef2682,_0x1f14f8,function(){var _0x24bfe4=_0x5d139e;_0x289b97[_0x24bfe4(0x1aa)]=_0x1f14f8[_0x24bfe4(0x1c7)](),!_0x10bfe0&&_0x2f2ead[_0x24bfe4(0x1d8)](_0x19f7d6,_0x289b97,_0xef2682,{});});else{var _0x24f667=_0xef2682['autoExpand']&&_0xef2682['level']<_0xef2682[_0x5d139e(0x18f)]&&_0xef2682[_0x5d139e(0x10f)][_0x5d139e(0x11a)](_0x1f14f8)<0x0&&_0x19f7d6!==_0x5d139e(0x1c5)&&_0xef2682[_0x5d139e(0x11d)]<_0xef2682['autoExpandLimit'];_0x24f667||_0xef2682['level']<_0x3818ef||_0x10bfe0?(this[_0x5d139e(0x111)](_0x289b97,_0x1f14f8,_0xef2682,_0x10bfe0||{}),this[_0x5d139e(0x13d)](_0x1f14f8,_0x289b97)):this['_processTreeNodeResult'](_0x289b97,_0xef2682,_0x1f14f8,function(){var _0x55b27e=_0x5d139e;_0x19f7d6===_0x55b27e(0x16a)||_0x19f7d6==='undefined'||(delete _0x289b97[_0x55b27e(0x1aa)],_0x289b97['capped']=!0x0);});}return _0x289b97;}finally{_0xef2682[_0x5d139e(0x117)]=_0x127b27,_0xef2682[_0x5d139e(0x14b)]=_0x3818ef,_0xef2682[_0x5d139e(0x129)]=_0x501535;}}[_0x27b5f4(0x1d8)](_0x345b2b,_0x37826c,_0x493a0b,_0x5bbe39){var _0x41c5d3=_0x27b5f4,_0x4e7ce2=_0x5bbe39[_0x41c5d3(0x13e)]||_0x493a0b[_0x41c5d3(0x13e)];if((_0x345b2b==='string'||_0x345b2b==='String')&&_0x37826c[_0x41c5d3(0x1aa)]){let _0x58e7f0=_0x37826c['value'][_0x41c5d3(0x123)];_0x493a0b[_0x41c5d3(0x17b)]+=_0x58e7f0,_0x493a0b[_0x41c5d3(0x17b)]>_0x493a0b['totalStrLength']?(_0x37826c[_0x41c5d3(0x122)]='',delete _0x37826c[_0x41c5d3(0x1aa)]):_0x58e7f0>_0x4e7ce2&&(_0x37826c[_0x41c5d3(0x122)]=_0x37826c[_0x41c5d3(0x1aa)][_0x41c5d3(0x184)](0x0,_0x4e7ce2),delete _0x37826c[_0x41c5d3(0x1aa)]);}}[_0x27b5f4(0x157)](_0x27e462){var _0x52af29=_0x27b5f4;return!!(_0x27e462&&_0x5b4790[_0x52af29(0x195)]&&this[_0x52af29(0x15e)](_0x27e462)===_0x52af29(0x1db)&&_0x27e462[_0x52af29(0x1ab)]);}['_propertyName'](_0x4009b0){var _0xaac64b=_0x27b5f4;if(_0x4009b0[_0xaac64b(0x1e5)](/^\\d+$/))return _0x4009b0;var _0x3df4b1;try{_0x3df4b1=JSON[_0xaac64b(0x183)](''+_0x4009b0);}catch{_0x3df4b1='\\x22'+this[_0xaac64b(0x15e)](_0x4009b0)+'\\x22';}return _0x3df4b1[_0xaac64b(0x1e5)](/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?_0x3df4b1=_0x3df4b1['substr'](0x1,_0x3df4b1[_0xaac64b(0x123)]-0x2):_0x3df4b1=_0x3df4b1[_0xaac64b(0x1de)](/'/g,'\\x5c\\x27')[_0xaac64b(0x1de)](/\\\\\"/g,'\\x22')[_0xaac64b(0x1de)](/(^\"|\"$)/g,'\\x27'),_0x3df4b1;}['_processTreeNodeResult'](_0x19824d,_0x5c5e8f,_0x1680fa,_0x5b0779){var _0x3d2550=_0x27b5f4;this['_treeNodePropertiesBeforeFullValue'](_0x19824d,_0x5c5e8f),_0x5b0779&&_0x5b0779(),this[_0x3d2550(0x13d)](_0x1680fa,_0x19824d),this[_0x3d2550(0x1ae)](_0x19824d,_0x5c5e8f);}[_0x27b5f4(0x127)](_0x5aff2e,_0x47d2f7){var _0x5cd962=_0x27b5f4;this[_0x5cd962(0x10b)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x196)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x17f)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x134)](_0x5aff2e,_0x47d2f7);}['_setNodeId'](_0x452ae7,_0x297f1b){}[_0x27b5f4(0x196)](_0xece9cb,_0x4e0399){}['_setNodeLabel'](_0x2c0a1b,_0x23ac11){}[_0x27b5f4(0x18c)](_0x41f0d5){var _0x5db41b=_0x27b5f4;return _0x41f0d5===this[_0x5db41b(0x19a)];}[_0x27b5f4(0x1ae)](_0x327dda,_0x2ed747){var _0x28aea0=_0x27b5f4;this['_setNodeLabel'](_0x327dda,_0x2ed747),this[_0x28aea0(0x15b)](_0x327dda),_0x2ed747['sortProps']&&this[_0x28aea0(0x154)](_0x327dda),this[_0x28aea0(0x1c3)](_0x327dda,_0x2ed747),this[_0x28aea0(0x11b)](_0x327dda,_0x2ed747),this[_0x28aea0(0x1d4)](_0x327dda);}[_0x27b5f4(0x13d)](_0x28ed57,_0x2f9ad0){var _0x2f2aa2=_0x27b5f4;try{_0x28ed57&&typeof _0x28ed57[_0x2f2aa2(0x123)]==_0x2f2aa2(0x1cb)&&(_0x2f9ad0[_0x2f2aa2(0x123)]=_0x28ed57[_0x2f2aa2(0x123)]);}catch{}if(_0x2f9ad0[_0x2f2aa2(0x189)]===_0x2f2aa2(0x1cb)||_0x2f9ad0['type']==='Number'){if(isNaN(_0x2f9ad0['value']))_0x2f9ad0[_0x2f2aa2(0x164)]=!0x0,delete _0x2f9ad0['value'];else switch(_0x2f9ad0[_0x2f2aa2(0x1aa)]){case Number['POSITIVE_INFINITY']:_0x2f9ad0[_0x2f2aa2(0x14d)]=!0x0,delete _0x2f9ad0[_0x2f2aa2(0x1aa)];break;case Number[_0x2f2aa2(0x199)]:_0x2f9ad0[_0x2f2aa2(0x1bc)]=!0x0,delete _0x2f9ad0[_0x2f2aa2(0x1aa)];break;case 0x0:this[_0x2f2aa2(0x1e7)](_0x2f9ad0[_0x2f2aa2(0x1aa)])&&(_0x2f9ad0[_0x2f2aa2(0x12e)]=!0x0);break;}}else _0x2f9ad0[_0x2f2aa2(0x189)]===_0x2f2aa2(0x1c5)&&typeof _0x28ed57[_0x2f2aa2(0x110)]=='string'&&_0x28ed57[_0x2f2aa2(0x110)]&&_0x2f9ad0[_0x2f2aa2(0x110)]&&_0x28ed57[_0x2f2aa2(0x110)]!==_0x2f9ad0['name']&&(_0x2f9ad0['funcName']=_0x28ed57[_0x2f2aa2(0x110)]);}[_0x27b5f4(0x1e7)](_0x2ebacd){return 0x1/_0x2ebacd===Number['NEGATIVE_INFINITY'];}[_0x27b5f4(0x154)](_0x33f55f){var _0x2880b5=_0x27b5f4;!_0x33f55f[_0x2880b5(0x11f)]||!_0x33f55f['props'][_0x2880b5(0x123)]||_0x33f55f[_0x2880b5(0x189)]==='array'||_0x33f55f[_0x2880b5(0x189)]===_0x2880b5(0x195)||_0x33f55f[_0x2880b5(0x189)]===_0x2880b5(0x1d9)||_0x33f55f[_0x2880b5(0x11f)]['sort'](function(_0xeb1d3d,_0x1e5ad8){var _0x465665=_0x2880b5,_0x228711=_0xeb1d3d[_0x465665(0x110)][_0x465665(0x16b)](),_0x4a8d2e=_0x1e5ad8[_0x465665(0x110)][_0x465665(0x16b)]();return _0x228711<_0x4a8d2e?-0x1:_0x228711>_0x4a8d2e?0x1:0x0;});}['_addFunctionsNode'](_0x44bb25,_0x246ec6){var _0x22ee2b=_0x27b5f4;if(!(_0x246ec6['noFunctions']||!_0x44bb25[_0x22ee2b(0x11f)]||!_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x123)])){for(var _0xdec3bc=[],_0x3df253=[],_0x3979be=0x0,_0x45594a=_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x123)];_0x3979be<_0x45594a;_0x3979be++){var _0x5162e2=_0x44bb25[_0x22ee2b(0x11f)][_0x3979be];_0x5162e2[_0x22ee2b(0x189)]==='function'?_0xdec3bc[_0x22ee2b(0x1ac)](_0x5162e2):_0x3df253[_0x22ee2b(0x1ac)](_0x5162e2);}if(!(!_0x3df253[_0x22ee2b(0x123)]||_0xdec3bc['length']<=0x1)){_0x44bb25[_0x22ee2b(0x11f)]=_0x3df253;var _0x21a1e2={'functionsNode':!0x0,'props':_0xdec3bc};this[_0x22ee2b(0x10b)](_0x21a1e2,_0x246ec6),this[_0x22ee2b(0x169)](_0x21a1e2,_0x246ec6),this[_0x22ee2b(0x15b)](_0x21a1e2),this[_0x22ee2b(0x134)](_0x21a1e2,_0x246ec6),_0x21a1e2['id']+='\\x20f',_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x11e)](_0x21a1e2);}}}[_0x27b5f4(0x11b)](_0x4447de,_0x39bc80){}[_0x27b5f4(0x15b)](_0x2ad7d8){}[_0x27b5f4(0x172)](_0x21c674){var _0x201530=_0x27b5f4;return Array[_0x201530(0x132)](_0x21c674)||typeof _0x21c674==_0x201530(0x1d1)&&this[_0x201530(0x15e)](_0x21c674)===_0x201530(0x1e2);}['_setNodePermissions'](_0x2c4127,_0x25c7dc){}[_0x27b5f4(0x1d4)](_0x368d9f){var _0x1076c1=_0x27b5f4;delete _0x368d9f['_hasSymbolPropertyOnItsPath'],delete _0x368d9f[_0x1076c1(0x13a)],delete _0x368d9f[_0x1076c1(0x161)];}[_0x27b5f4(0x17f)](_0x3b452d,_0x210ca2){}['_propertyAccessor'](_0x40ae2e){var _0x9d2342=_0x27b5f4;return _0x40ae2e?_0x40ae2e[_0x9d2342(0x1e5)](this[_0x9d2342(0x106)])?'['+_0x40ae2e+']':_0x40ae2e[_0x9d2342(0x1e5)](this['_keyStrRegExp'])?'.'+_0x40ae2e:_0x40ae2e[_0x9d2342(0x1e5)](this['_quotedRegExp'])?'['+_0x40ae2e+']':'[\\x27'+_0x40ae2e+'\\x27]':'';}}let _0x103982=new _0x7302f2();function _0x4ef4d5(_0x447b63,_0x2ac7e6,_0x1a6859,_0x160f8a,_0x430090,_0x134fa9){var _0x27e421=_0x27b5f4;let _0x16431e,_0x4089ff;try{_0x4089ff=_0x4d049a(),_0x16431e=_0xe1c80c[_0x2ac7e6],!_0x16431e||_0x4089ff-_0x16431e['ts']>0x1f4&&_0x16431e[_0x27e421(0x1bb)]&&_0x16431e[_0x27e421(0x148)]/_0x16431e['count']<0x64?(_0xe1c80c[_0x2ac7e6]=_0x16431e={'count':0x0,'time':0x0,'ts':_0x4089ff},_0xe1c80c['hits']={}):_0x4089ff-_0xe1c80c[_0x27e421(0x1bf)]['ts']>0x32&&_0xe1c80c[_0x27e421(0x1bf)]['count']&&_0xe1c80c['hits'][_0x27e421(0x148)]/_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]<0x64&&(_0xe1c80c[_0x27e421(0x1bf)]={});let _0x2f24ca=[],_0x2739a9=_0x16431e[_0x27e421(0x19e)]||_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x19e)]?_0x5df0c1:_0x538d0c,_0x147472=_0x372ec9=>{var _0x4a7838=_0x27e421;let _0x5c2b64={};return _0x5c2b64[_0x4a7838(0x11f)]=_0x372ec9['props'],_0x5c2b64[_0x4a7838(0x1e0)]=_0x372ec9[_0x4a7838(0x1e0)],_0x5c2b64[_0x4a7838(0x13e)]=_0x372ec9[_0x4a7838(0x13e)],_0x5c2b64[_0x4a7838(0x12c)]=_0x372ec9[_0x4a7838(0x12c)],_0x5c2b64[_0x4a7838(0x12d)]=_0x372ec9['autoExpandLimit'],_0x5c2b64['autoExpandMaxDepth']=_0x372ec9[_0x4a7838(0x18f)],_0x5c2b64[_0x4a7838(0x1b3)]=!0x1,_0x5c2b64[_0x4a7838(0x158)]=!_0x2df5e3,_0x5c2b64[_0x4a7838(0x14b)]=0x1,_0x5c2b64[_0x4a7838(0x10d)]=0x0,_0x5c2b64[_0x4a7838(0x171)]=_0x4a7838(0x1e6),_0x5c2b64[_0x4a7838(0x141)]=_0x4a7838(0x1c4),_0x5c2b64['autoExpand']=!0x0,_0x5c2b64['autoExpandPreviousObjects']=[],_0x5c2b64[_0x4a7838(0x11d)]=0x0,_0x5c2b64['resolveGetters']=!0x0,_0x5c2b64[_0x4a7838(0x17b)]=0x0,_0x5c2b64[_0x4a7838(0x1da)]={'current':void 0x0,'parent':void 0x0,'index':0x0},_0x5c2b64;};for(var _0x1e1001=0x0;_0x1e1001<_0x430090[_0x27e421(0x123)];_0x1e1001++)_0x2f24ca[_0x27e421(0x1ac)](_0x103982['serialize']({'timeNode':_0x447b63===_0x27e421(0x148)||void 0x0},_0x430090[_0x1e1001],_0x147472(_0x2739a9),{}));if(_0x447b63==='trace'){let _0x58fe7f=Error['stackTraceLimit'];try{Error['stackTraceLimit']=0x1/0x0,_0x2f24ca[_0x27e421(0x1ac)](_0x103982[_0x27e421(0x111)]({'stackNode':!0x0},new Error()['stack'],_0x147472(_0x2739a9),{'strLength':0x1/0x0}));}finally{Error[_0x27e421(0x188)]=_0x58fe7f;}}return{'method':_0x27e421(0x1b6),'version':_0x3fd8d0,'args':[{'ts':_0x1a6859,'session':_0x160f8a,'args':_0x2f24ca,'id':_0x2ac7e6,'context':_0x134fa9}]};}catch(_0xe8878a){return{'method':_0x27e421(0x1b6),'version':_0x3fd8d0,'args':[{'ts':_0x1a6859,'session':_0x160f8a,'args':[{'type':'unknown','error':_0xe8878a&&_0xe8878a[_0x27e421(0x155)]}],'id':_0x2ac7e6,'context':_0x134fa9}]};}finally{try{if(_0x16431e&&_0x4089ff){let _0x956241=_0x4d049a();_0x16431e[_0x27e421(0x1bb)]++,_0x16431e[_0x27e421(0x148)]+=_0x272fdc(_0x4089ff,_0x956241),_0x16431e['ts']=_0x956241,_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]++,_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x148)]+=_0x272fdc(_0x4089ff,_0x956241),_0xe1c80c['hits']['ts']=_0x956241,(_0x16431e[_0x27e421(0x1bb)]>0x32||_0x16431e['time']>0x64)&&(_0x16431e[_0x27e421(0x19e)]=!0x0),(_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]>0x3e8||_0xe1c80c['hits'][_0x27e421(0x148)]>0x12c)&&(_0xe1c80c[_0x27e421(0x1bf)]['reduceLimits']=!0x0);}}catch{}}}return _0x5b4790[_0x27b5f4(0x18b)];})(globalThis,_0x5c041f(0x124),_0x5c041f(0x160),_0x5c041f(0x174),_0x5c041f(0x19b),_0x5c041f(0x18a),_0x5c041f(0x17d),_0x5c041f(0x198),_0x5c041f(0x1d7));")}catch{}})().consoleLog(n,e)}catch{}return e}function mhe(n,e){if(1&n&&(ve(0,"tr")(1,"td"),Pe(2),Ce(),ve(3,"td"),Pe(4),Ce(),ve(5,"td"),Pe(6),Ce(),ve(7,"td"),Pe(8),Ce()()),2&n){const t=e.$implicit;oi(2),Ph(t.nombre),oi(2),Ph(t.fecha),oi(2),Ph(t.hora),oi(2),Ph(t.tipoHabitacion)}}const ghe=[{path:"",component:pue},{path:"login",component:(()=>{class n{constructor(t,i){this.userService=t,this.router=i,this.formLogin=new ev({email:new xm,password:new xm})}ngOnInit(){}onSubmit(){this.userService.login(this.formLogin.value).then(t=>{console.log(...Ep("a7769182_0","iniciado con exito")),console.log(...Ep("a7769182_1",t)),this.router.navigate(["/"])}).catch(t=>{Vk().fire({icon:"error",title:"Error",text:"Usuario o contrase\xf1a invalidos"}),console.log(...Ep("a7769182_2",t))})}onClick(){this.userService.loginWithGoogle().then(t=>{console.log(...Ep("a7769182_3","iniciado con exito")),console.log(...Ep("a7769182_4",t)),this.router.navigate(["/"])}).catch(t=>{Vk().fire({icon:"error",title:"Error",text:"Usuario o contrase\xf1a invalidos"}),console.log(...Ep("a7769182_5","nada")),console.log(...Ep("a7769182_6",t))})}}return n.\u0275fac=function(t){return new(t||n)(nt(Lb),nt(aa))},n.\u0275cmp=zr({type:n,selectors:[["app-login"]],decls:20,vars:1,consts:[[1,"container"],[1,"form-container",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","email",1,"form-control"],["type","password","formControlName","password",1,"form-control"],["type","submit","value","Enviar",1,"submit-btn"],[1,"btn","btn-info",3,"click"],[1,"register-link"],["routerLink","registro"]],template:function(t,i){1&t&&(ve(0,"div",0)(1,"h2"),Pe(2,"Login"),Ce(),ve(3,"form",1),_n("ngSubmit",function(){return i.onSubmit()}),ve(4,"div",2)(5,"label",3),Pe(6,"Email"),Ce(),Xt(7,"input",4),Ce(),ve(8,"div",2)(9,"label",3),Pe(10,"Password"),Ce(),Xt(11,"input",5),Ce(),Xt(12,"input",6),Ce(),ve(13,"button",7),_n("click",function(){return i.onClick()}),Pe(14,"Login with Google"),Ce(),ve(15,"div",8)(16,"p"),Pe(17,"No tienes cuenta? "),ve(18,"a",9),Pe(19,"Registrate aqui"),Ce()()()()),2&t&&(oi(3),Ui("formGroup",i.formLogin))},dependencies:[qg,QE,xp,Xg,HE,ov,JE],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:10vh auto;padding:20px;width:50%;background-color:#f9c;border-radius:10px;box-shadow:0 2px 4px #0000001a}h2[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{width:50%;margin-bottom:20px}.mb-3[_ngcontent-%COMP%]{margin-bottom:10px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#b8174d;color:#fff;border:none;cursor:pointer}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#b8174d}.btn[_ngcontent-%COMP%]{width:50%;padding:10px;background-color:#b8174d;color:#fff;border:none;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background-color:#96136f}@media (max-width: 767px){.container[_ngcontent-%COMP%]{width:100%;padding:0 10px}.form-container[_ngcontent-%COMP%], .submit-btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:8px}}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f35221;text-decoration:underline;cursor:pointer}"]}),n})()},{path:"sms",component:(()=>{class n{constructor(t,i){this.userService=t,this.router=i,this.phoneNumber="",this.verificationCode="",this.auth=Nw()}ngOnInit(){this.recaptchaVerifier=new Qne("recaptcha-container",{size:"invisible"},this.auth)}sendSMSVerificationCode(){this.userService.enviarCodigoSMS(this.phoneNumber,this.recaptchaVerifier).then(()=>{console.log(...cC("bef65b05_0","Numero enviado correctamente"))}).catch(t=>{console.log(...cC("bef65b05_1","Fallo al enviar el codigo"))})}verifySMSCode(){this.userService.verificarCodigoSMS(this.verificationCode).then(t=>{t?(console.log(...cC("bef65b05_2",t)),this.router.navigate(["/login"])):console.error("Error al verificar el c\xf3digo SMS")}).catch(t=>{console.error("Error al verificar el c\xf3digo SMS",t)})}}return n.\u0275fac=function(t){return new(t||n)(nt(Lb),nt(aa))},n.\u0275cmp=zr({type:n,selectors:[["app-sms"]],decls:17,vars:2,consts:[[1,"container"],[1,"form-group"],["for","phone-input"],["type","text","id","phone-input",3,"ngModel","ngModelChange"],["id","recaptcha-container",3,"click"],["for","code-input"],["type","text","id","code-input",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,i){1&t&&(ve(0,"div",0)(1,"h1"),Pe(2,"Agrega un n\xfamero telef\xf3nico"),Ce(),ve(3,"div",1)(4,"label",2),Pe(5,"N\xfamero de tel\xe9fono:"),Ce(),ve(6,"input",3),_n("ngModelChange",function(s){return i.phoneNumber=s}),Ce()(),ve(7,"div",1)(8,"button",4),_n("click",function(){return i.sendSMSVerificationCode()}),Pe(9,"Enviar c\xf3digo SMS"),Ce()(),ve(10,"div",1)(11,"label",5),Pe(12,"C\xf3digo de verificaci\xf3n SMS:"),Ce(),ve(13,"input",6),_n("ngModelChange",function(s){return i.verificationCode=s}),Ce()(),ve(14,"div",1)(15,"button",7),_n("click",function(){return i.verifySMSCode()}),Pe(16,"Verificar c\xf3digo SMS"),Ce()()()),2&t&&(oi(6),Ui("ngModel",i.phoneNumber),oi(7),Ui("ngModel",i.verificationCode))},dependencies:[xp,Xg,rv],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:10vh auto;padding:20px;width:50%;background-color:#f9c;border-radius:10px;box-shadow:0 2px 4px #0000001a}h1[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[type=text][_ngcontent-%COMP%]{width:100%;padding:8px;font-size:16px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;background-color:#b8174d;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#ff66a3}@media (max-width: 768px){input[type=text][_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%}}"]}),n})()},{path:"about",component:_ue},{path:"registro",component:(()=>{class n{constructor(t,i){this.userService=t,this.router=i,this.cita={},this.minDate=(new Date).toISOString().split("T")[0]}ngOnInit(){}guardarCita(){this.userService.guardarCita(this.cita).then(()=>{console.log(...function bV(n,...e){try{(function uC(){try{return(0,eval)("globalThis._console_ninja")||(0,eval)("/* https://github.com/wallabyjs/console-ninja#how-does-it-work */'use strict';function _0x4cb1(_0x4f848e,_0x9f6681){var _0x382e6d=_0x382e();return _0x4cb1=function(_0x4cb1d,_0x385ce4){_0x4cb1d=_0x4cb1d-0x104;var _0x258f0e=_0x382e6d[_0x4cb1d];return _0x258f0e;},_0x4cb1(_0x4f848e,_0x9f6681);}var _0x5c041f=_0x4cb1;(function(_0x41f6bb,_0x590643){var _0x32cf76=_0x4cb1,_0x349fd4=_0x41f6bb();while(!![]){try{var _0x587f11=parseInt(_0x32cf76(0x1b2))/0x1+parseInt(_0x32cf76(0x16e))/0x2+parseInt(_0x32cf76(0x170))/0x3+-parseInt(_0x32cf76(0x1b4))/0x4*(parseInt(_0x32cf76(0x1a0))/0x5)+parseInt(_0x32cf76(0x1a8))/0x6*(parseInt(_0x32cf76(0x194))/0x7)+parseInt(_0x32cf76(0x136))/0x8+-parseInt(_0x32cf76(0x179))/0x9;if(_0x587f11===_0x590643)break;else _0x349fd4['push'](_0x349fd4['shift']());}catch(_0x3419a0){_0x349fd4['push'](_0x349fd4['shift']());}}}(_0x382e,0x92987));var ue=Object['create'],te=Object['defineProperty'],he=Object[_0x5c041f(0x142)],le=Object[_0x5c041f(0x15c)],fe=Object['getPrototypeOf'],_e=Object[_0x5c041f(0x14f)][_0x5c041f(0x1a2)],pe=(_0x4a860d,_0x2991b2,_0x244fb2,_0x1ae054)=>{var _0x5076d7=_0x5c041f;if(_0x2991b2&&typeof _0x2991b2==_0x5076d7(0x1d1)||typeof _0x2991b2==_0x5076d7(0x1c5)){for(let _0x3968f6 of le(_0x2991b2))!_e[_0x5076d7(0x197)](_0x4a860d,_0x3968f6)&&_0x3968f6!==_0x244fb2&&te(_0x4a860d,_0x3968f6,{'get':()=>_0x2991b2[_0x3968f6],'enumerable':!(_0x1ae054=he(_0x2991b2,_0x3968f6))||_0x1ae054[_0x5076d7(0x1d3)]});}return _0x4a860d;},ne=(_0x2d78ff,_0x2bde4e,_0xe92645)=>(_0xe92645=_0x2d78ff!=null?ue(fe(_0x2d78ff)):{},pe(_0x2bde4e||!_0x2d78ff||!_0x2d78ff[_0x5c041f(0x191)]?te(_0xe92645,_0x5c041f(0x1c6),{'value':_0x2d78ff,'enumerable':!0x0}):_0xe92645,_0x2d78ff)),Q=class{constructor(_0x187a81,_0x47eeea,_0xfb14bc,_0x112373){var _0x4ccd8d=_0x5c041f;this[_0x4ccd8d(0x143)]=_0x187a81,this['host']=_0x47eeea,this['port']=_0xfb14bc,this[_0x4ccd8d(0x113)]=_0x112373,this[_0x4ccd8d(0x1b9)]=!0x0,this[_0x4ccd8d(0x1cd)]=!0x0,this[_0x4ccd8d(0x17c)]=!0x1,this[_0x4ccd8d(0x107)]=!0x1,this['_inBrowser']=!!this[_0x4ccd8d(0x143)][_0x4ccd8d(0x181)],this[_0x4ccd8d(0x186)]=null,this[_0x4ccd8d(0x112)]=0x0,this[_0x4ccd8d(0x1b1)]=0x14,this['_sendErrorMessage']=this[_0x4ccd8d(0x146)]?_0x4ccd8d(0x19c):_0x4ccd8d(0x121);}async[_0x5c041f(0x130)](){var _0x1b0d94=_0x5c041f;if(this['_WebSocketClass'])return this[_0x1b0d94(0x186)];let _0x4389b0;if(this[_0x1b0d94(0x146)])_0x4389b0=this[_0x1b0d94(0x143)][_0x1b0d94(0x181)];else{if(this[_0x1b0d94(0x143)][_0x1b0d94(0x1a3)]?.['_WebSocket'])_0x4389b0=this[_0x1b0d94(0x143)]['process']?.[_0x1b0d94(0x1bd)];else try{let _0x51e77f=await import(_0x1b0d94(0x1df));_0x4389b0=(await import((await import(_0x1b0d94(0x138)))[_0x1b0d94(0x10c)](_0x51e77f[_0x1b0d94(0x153)](this['nodeModules'],'ws/index.js'))['toString']()))[_0x1b0d94(0x1c6)];}catch{try{_0x4389b0=require(require('path')['join'](this[_0x1b0d94(0x113)],'ws'));}catch{throw new Error(_0x1b0d94(0x128));}}}return this[_0x1b0d94(0x186)]=_0x4389b0,_0x4389b0;}[_0x5c041f(0x1b5)](){var _0x1be63c=_0x5c041f;this['_connecting']||this['_connected']||this['_connectAttemptCount']>=this[_0x1be63c(0x1b1)]||(this[_0x1be63c(0x1cd)]=!0x1,this['_connecting']=!0x0,this[_0x1be63c(0x112)]++,this['_ws']=new Promise((_0x34a063,_0x5b7758)=>{var _0x560b0e=_0x1be63c;this[_0x560b0e(0x130)]()['then'](_0x2eca62=>{var _0x4fd847=_0x560b0e;let _0x2ba1af=new _0x2eca62(_0x4fd847(0x185)+this['host']+':'+this[_0x4fd847(0x17e)]);_0x2ba1af['onerror']=()=>{var _0x2b225e=_0x4fd847;this[_0x2b225e(0x1b9)]=!0x1,this[_0x2b225e(0x135)](_0x2ba1af),this[_0x2b225e(0x175)](),_0x5b7758(new Error('logger\\x20websocket\\x20error'));},_0x2ba1af[_0x4fd847(0x15f)]=()=>{var _0x5e4efc=_0x4fd847;this['_inBrowser']||_0x2ba1af[_0x5e4efc(0x119)]&&_0x2ba1af[_0x5e4efc(0x119)][_0x5e4efc(0x1c8)]&&_0x2ba1af['_socket'][_0x5e4efc(0x1c8)](),_0x34a063(_0x2ba1af);},_0x2ba1af[_0x4fd847(0x12f)]=()=>{var _0x587a15=_0x4fd847;this['_allowedToConnectOnSend']=!0x0,this[_0x587a15(0x135)](_0x2ba1af),this['_attemptToReconnectShortly']();},_0x2ba1af[_0x4fd847(0x176)]=_0x5c46e0=>{var _0x166b3f=_0x4fd847;try{_0x5c46e0&&_0x5c46e0[_0x166b3f(0x1af)]&&this[_0x166b3f(0x146)]&&JSON[_0x166b3f(0x1d2)](_0x5c46e0[_0x166b3f(0x1af)])[_0x166b3f(0x11c)]===_0x166b3f(0x1a7)&&this[_0x166b3f(0x143)][_0x166b3f(0x180)][_0x166b3f(0x1a7)]();}catch{}};})['then'](_0x2a47ca=>(this[_0x560b0e(0x17c)]=!0x0,this[_0x560b0e(0x107)]=!0x1,this['_allowedToConnectOnSend']=!0x1,this[_0x560b0e(0x1b9)]=!0x0,this[_0x560b0e(0x112)]=0x0,_0x2a47ca))[_0x560b0e(0x13f)](_0x449b17=>(this['_connected']=!0x1,this[_0x560b0e(0x107)]=!0x1,_0x5b7758(new Error(_0x560b0e(0x1ce)+(_0x449b17&&_0x449b17[_0x560b0e(0x155)])))));}));}[_0x5c041f(0x135)](_0x11dfe2){var _0x35b03a=_0x5c041f;this[_0x35b03a(0x17c)]=!0x1,this['_connecting']=!0x1;try{_0x11dfe2['onclose']=null,_0x11dfe2[_0x35b03a(0x1c9)]=null,_0x11dfe2['onopen']=null;}catch{}try{_0x11dfe2[_0x35b03a(0x15d)]<0x2&&_0x11dfe2[_0x35b03a(0x13c)]();}catch{}}[_0x5c041f(0x175)](){var _0x31aeaf=_0x5c041f;clearTimeout(this[_0x31aeaf(0x1d0)]),!(this[_0x31aeaf(0x112)]>=this[_0x31aeaf(0x1b1)])&&(this[_0x31aeaf(0x1d0)]=setTimeout(()=>{var _0x395757=_0x31aeaf;this[_0x395757(0x17c)]||this['_connecting']||(this['_connectToHostNow'](),this[_0x395757(0x156)]?.[_0x395757(0x13f)](()=>this['_attemptToReconnectShortly']()));},0x1f4),this[_0x31aeaf(0x1d0)][_0x31aeaf(0x1c8)]&&this[_0x31aeaf(0x1d0)][_0x31aeaf(0x1c8)]());}async['send'](_0x353d6f){var _0x36feac=_0x5c041f;try{if(!this[_0x36feac(0x1b9)])return;this[_0x36feac(0x1cd)]&&this[_0x36feac(0x1b5)](),(await this[_0x36feac(0x156)])['send'](JSON[_0x36feac(0x183)](_0x353d6f));}catch(_0xea0863){console[_0x36feac(0x137)](this[_0x36feac(0x159)]+':\\x20'+(_0xea0863&&_0xea0863[_0x36feac(0x155)])),this[_0x36feac(0x1b9)]=!0x1,this[_0x36feac(0x175)]();}}};function V(_0x316ec2,_0x37b6b9,_0x242e78,_0x2a8d2f,_0x23fccf){var _0x12a29b=_0x5c041f;let _0xd77357=_0x242e78[_0x12a29b(0x1cc)](',')['map'](_0xe82dc7=>{var _0x319735=_0x12a29b;try{_0x316ec2[_0x319735(0x1d6)]||((_0x23fccf===_0x319735(0x140)||_0x23fccf===_0x319735(0x1cf)||_0x23fccf===_0x319735(0x1dd))&&(_0x23fccf+=_0x316ec2['process']?.[_0x319735(0x168)]?.['node']?_0x319735(0x1a1):_0x319735(0x150)),_0x316ec2[_0x319735(0x1d6)]={'id':+new Date(),'tool':_0x23fccf});let _0x16f072=new Q(_0x316ec2,_0x37b6b9,_0xe82dc7,_0x2a8d2f);return _0x16f072[_0x319735(0x1b0)]['bind'](_0x16f072);}catch(_0x5c7fa8){return console[_0x319735(0x137)](_0x319735(0x10a),_0x5c7fa8&&_0x5c7fa8[_0x319735(0x155)]),()=>{};}});return _0x502d2e=>_0xd77357[_0x12a29b(0x1ab)](_0x43bc6b=>_0x43bc6b(_0x502d2e));}function H(_0x5af7b2){var _0x44da05=_0x5c041f;let _0x4d0c7c=function(_0x2df01d,_0x18687f){return _0x18687f-_0x2df01d;},_0x5b3ffd;if(_0x5af7b2['performance'])_0x5b3ffd=function(){var _0x18cc82=_0x4cb1;return _0x5af7b2[_0x18cc82(0x187)][_0x18cc82(0x1b8)]();};else{if(_0x5af7b2[_0x44da05(0x1a3)]&&_0x5af7b2[_0x44da05(0x1a3)]['hrtime'])_0x5b3ffd=function(){var _0x36a33e=_0x44da05;return _0x5af7b2['process'][_0x36a33e(0x104)]();},_0x4d0c7c=function(_0x17a6ca,_0x1ffd49){return 0x3e8*(_0x1ffd49[0x0]-_0x17a6ca[0x0])+(_0x1ffd49[0x1]-_0x17a6ca[0x1])/0xf4240;};else try{let {performance:_0x280329}=require('perf_hooks');_0x5b3ffd=function(){return _0x280329['now']();};}catch{_0x5b3ffd=function(){return+new Date();};}}return{'elapsed':_0x4d0c7c,'timeStamp':_0x5b3ffd,'now':()=>Date['now']()};}function X(_0x12e8bd,_0x14d6a9,_0xacee0b){var _0x30debf=_0x5c041f;if(_0x12e8bd[_0x30debf(0x14a)]!==void 0x0)return _0x12e8bd[_0x30debf(0x14a)];let _0x3a35d6=_0x12e8bd[_0x30debf(0x1a3)]?.[_0x30debf(0x168)]?.[_0x30debf(0x1da)];return _0x3a35d6&&_0xacee0b===_0x30debf(0x147)?_0x12e8bd['_consoleNinjaAllowedToStart']=!0x1:_0x12e8bd[_0x30debf(0x14a)]=_0x3a35d6||!_0x14d6a9||_0x12e8bd[_0x30debf(0x180)]?.[_0x30debf(0x13b)]&&_0x14d6a9[_0x30debf(0x18d)](_0x12e8bd[_0x30debf(0x180)][_0x30debf(0x13b)]),_0x12e8bd[_0x30debf(0x14a)];}function _0x382e(){var _0x3f78a3=['_setNodeExpressionPath','location','WebSocket','bigint','stringify','substr','ws://','_WebSocketClass','performance','stackTraceLimit','type','1.0.0','_console_ninja','_isUndefined','includes','[object\\x20BigInt]','autoExpandMaxDepth','timeEnd','__es'+'Module','parent','_type','635201aILuEg','Map','_setNodeQueryPath','call',[\"localhost\",\"127.0.0.1\",\"example.cypress.io\",\"AspireA15-43\",\"192.168.56.1\",\"192.168.1.73\"],'NEGATIVE_INFINITY','_undefined','webpack','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20refreshing\\x20the\\x20page\\x20may\\x20help','disabledLog','reduceLimits','_getOwnPropertyNames','280CWoCPm','\\x20server','hasOwnProperty','process','HTMLAllCollection','[object\\x20Set]','console','reload','54LRIPsv','argumentResolutionError','value','forEach','push','_property','_treeNodePropertiesAfterFullValue','data','send','_maxConnectAttemptCount','935776dwgaDu','sortProps','64072xQAqIr','_connectToHostNow','log','autoExpand','now','_allowedToSend','slice','count','negativeInfinity','_WebSocket','constructor','hits','_getOwnPropertyDescriptor','date','_isPrimitiveType','_addFunctionsNode','root_exp','function','default','valueOf','unref','onerror','cappedElements','number','split','_allowedToConnectOnSend','failed\\x20to\\x20connect\\x20to\\x20host:\\x20','remix','_reconnectTimeout','object','parse','enumerable','_cleanNode','_quotedRegExp','_console_ninja_session','','_capIfString','Set','node','[object\\x20Map]','_isPrimitiveWrapperType','astro','replace','path','elements','concat','[object\\x20Array]','undefined','_blacklistedProperty','match','root_exp_id','_isNegativeZero','hrtime','String','_numberRegExp','_connecting','current','_keyStrRegExp','logger\\x20failed\\x20to\\x20connect\\x20to\\x20host','_setNodeId','pathToFileURL','level','Number','autoExpandPreviousObjects','name','serialize','_connectAttemptCount','nodeModules','RegExp','_propertyName','trace','expressionsToEvaluate','...','_socket','indexOf','_addLoadNode','method','autoExpandPropertyCount','unshift','props','_p_length','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20restarting\\x20the\\x20process\\x20may\\x20help','capped','length','127.0.0.1','pop','array','_treeNodePropertiesBeforeFullValue','failed\\x20to\\x20find\\x20and\\x20load\\x20WebSocket','isExpressionToEvaluate','_addProperty','error','totalStrLength','autoExpandLimit','negativeZero','onclose','getWebSocketClass','_regExpToString','isArray',':logPointId:','_setNodePermissions','_disposeWebsocket','7576168RoOoLU','warn','url','getOwnPropertySymbols','_hasSetOnItsPath','hostname','close','_additionalMetadata','strLength','catch','next.js','rootExpression','getOwnPropertyDescriptor','global','symbol','boolean','_inBrowser','nuxt','time','[object\\x20Date]','_consoleNinjaAllowedToStart','depth','Error','positiveInfinity','string','prototype','\\x20browser','_addObjectProperty','_p_','join','_sortProps','message','_ws','_isMap','noFunctions','_sendErrorMessage','_Symbol','_setNodeExpandableState','getOwnPropertyNames','readyState','_objectToString','onopen','61934','_hasMapOnItsPath','elapsed','index','nan','resolveGetters','test','_HTMLAllCollection','versions','_setNodeLabel','null','toLowerCase','_isSet','_dateToString','1039862BHuYnR','disabledTrace','1272669ZnImvB','expId','_isArray','unknown',\"c:\\\\Users\\\\Donov\\\\.vscode\\\\extensions\\\\wallabyjs.console-ninja-0.0.154\\\\node_modules\",'_attemptToReconnectShortly','onmessage','Symbol','toString','19315575hkRJHr','_processTreeNodeResult','allStrLength','_connected','1687236147317','port'];_0x382e=function(){return _0x3f78a3;};return _0x382e();}((_0x5b4790,_0x458f21,_0x149466,_0x506ad4,_0x4f07aa,_0x3fd8d0,_0x20a513,_0x2e806b,_0x2df5e3)=>{var _0x27b5f4=_0x5c041f;if(_0x5b4790['_console_ninja'])return _0x5b4790['_console_ninja'];if(!X(_0x5b4790,_0x2e806b,_0x4f07aa))return _0x5b4790[_0x27b5f4(0x18b)]={'consoleLog':()=>{},'consoleTrace':()=>{},'consoleTime':()=>{},'consoleTimeEnd':()=>{},'autoLog':()=>{},'autoTrace':()=>{},'autoTime':()=>{},'autoTimeEnd':()=>{}},_0x5b4790[_0x27b5f4(0x18b)];let _0x538d0c={'props':0x64,'elements':0x64,'strLength':0x400*0x32,'totalStrLength':0x400*0x32,'autoExpandLimit':0x1388,'autoExpandMaxDepth':0xa},_0x5df0c1={'props':0x5,'elements':0x5,'strLength':0x100,'totalStrLength':0x100*0x3,'autoExpandLimit':0x1e,'autoExpandMaxDepth':0x2},_0xe984aa=H(_0x5b4790),_0x272fdc=_0xe984aa[_0x27b5f4(0x162)],_0x4d049a=_0xe984aa['timeStamp'],_0x2f3f4d=_0xe984aa['now'],_0xe1c80c={'hits':{},'ts':{}},_0x3d77ad=_0x1f3b96=>{_0xe1c80c['ts'][_0x1f3b96]=_0x4d049a();},_0xe06796=(_0x13f02a,_0x2be50f)=>{let _0x40e934=_0xe1c80c['ts'][_0x2be50f];if(delete _0xe1c80c['ts'][_0x2be50f],_0x40e934){let _0x5274bc=_0x272fdc(_0x40e934,_0x4d049a());_0x4b1f73(_0x4ef4d5('time',_0x13f02a,_0x2f3f4d(),_0x5ef367,[_0x5274bc],_0x2be50f));}},_0x47ca51=_0x35ae2c=>_0x568830=>{var _0x5cbfae=_0x27b5f4;try{_0x3d77ad(_0x568830),_0x35ae2c(_0x568830);}finally{_0x5b4790[_0x5cbfae(0x1a6)]['time']=_0x35ae2c;}},_0x34454b=_0x46ef29=>_0x2cac3c=>{var _0x4e0ff3=_0x27b5f4;try{let [_0x38e816,_0xa70aed]=_0x2cac3c[_0x4e0ff3(0x1cc)](_0x4e0ff3(0x133));_0xe06796(_0xa70aed,_0x38e816),_0x46ef29(_0x38e816);}finally{_0x5b4790['console'][_0x4e0ff3(0x190)]=_0x46ef29;}};_0x5b4790['_console_ninja']={'consoleLog':(_0xbf4b2a,_0x4ee11d)=>{var _0x27c615=_0x27b5f4;_0x5b4790[_0x27c615(0x1a6)][_0x27c615(0x1b6)][_0x27c615(0x110)]!==_0x27c615(0x19d)&&_0x4b1f73(_0x4ef4d5(_0x27c615(0x1b6),_0xbf4b2a,_0x2f3f4d(),_0x5ef367,_0x4ee11d));},'consoleTrace':(_0x380929,_0x5c69db)=>{var _0x2e9541=_0x27b5f4;_0x5b4790[_0x2e9541(0x1a6)][_0x2e9541(0x1b6)][_0x2e9541(0x110)]!==_0x2e9541(0x16f)&&_0x4b1f73(_0x4ef4d5(_0x2e9541(0x116),_0x380929,_0x2f3f4d(),_0x5ef367,_0x5c69db));},'consoleTime':()=>{var _0xac082f=_0x27b5f4;_0x5b4790[_0xac082f(0x1a6)][_0xac082f(0x148)]=_0x47ca51(_0x5b4790[_0xac082f(0x1a6)][_0xac082f(0x148)]);},'consoleTimeEnd':()=>{var _0x3a096b=_0x27b5f4;_0x5b4790['console'][_0x3a096b(0x190)]=_0x34454b(_0x5b4790[_0x3a096b(0x1a6)][_0x3a096b(0x190)]);},'autoLog':(_0x400d6e,_0x1ef64c)=>{_0x4b1f73(_0x4ef4d5('log',_0x1ef64c,_0x2f3f4d(),_0x5ef367,[_0x400d6e]));},'autoTrace':(_0x5e343b,_0x2b5d86)=>{var _0x53ff97=_0x27b5f4;_0x4b1f73(_0x4ef4d5(_0x53ff97(0x116),_0x2b5d86,_0x2f3f4d(),_0x5ef367,[_0x5e343b]));},'autoTime':(_0x555514,_0x466fce,_0x7d1fbf)=>{_0x3d77ad(_0x7d1fbf);},'autoTimeEnd':(_0x596063,_0x24d50a,_0x257617)=>{_0xe06796(_0x24d50a,_0x257617);}};let _0x4b1f73=V(_0x5b4790,_0x458f21,_0x149466,_0x506ad4,_0x4f07aa),_0x5ef367=_0x5b4790['_console_ninja_session'];class _0x7302f2{constructor(){var _0x2530cf=_0x27b5f4;this[_0x2530cf(0x109)]=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/,this[_0x2530cf(0x106)]=/^(0|[1-9][0-9]*)$/,this[_0x2530cf(0x1d5)]=/'([^\\\\']|\\\\')*'/,this[_0x2530cf(0x19a)]=_0x5b4790[_0x2530cf(0x1e3)],this[_0x2530cf(0x167)]=_0x5b4790[_0x2530cf(0x1a4)],this[_0x2530cf(0x1c0)]=Object[_0x2530cf(0x142)],this[_0x2530cf(0x19f)]=Object['getOwnPropertyNames'],this[_0x2530cf(0x15a)]=_0x5b4790[_0x2530cf(0x177)],this[_0x2530cf(0x131)]=RegExp[_0x2530cf(0x14f)][_0x2530cf(0x178)],this['_dateToString']=Date['prototype'][_0x2530cf(0x178)];}[_0x27b5f4(0x111)](_0x4c4a88,_0x2bf3b0,_0x363f5d,_0x49674b){var _0x377020=_0x27b5f4,_0x277dde=this,_0x2bc8b0=_0x363f5d['autoExpand'];function _0x41b795(_0x639564,_0x42158d,_0x6a91ba){var _0x49c916=_0x4cb1;_0x42158d[_0x49c916(0x189)]=_0x49c916(0x173),_0x42158d[_0x49c916(0x12b)]=_0x639564['message'],_0x15be58=_0x6a91ba['node'][_0x49c916(0x108)],_0x6a91ba[_0x49c916(0x1da)][_0x49c916(0x108)]=_0x42158d,_0x277dde[_0x49c916(0x127)](_0x42158d,_0x6a91ba);}if(_0x2bf3b0&&_0x2bf3b0[_0x377020(0x1a9)])_0x41b795(_0x2bf3b0,_0x4c4a88,_0x363f5d);else try{_0x363f5d[_0x377020(0x10d)]++,_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d[_0x377020(0x10f)]['push'](_0x2bf3b0);var _0x18fcbd,_0x433fb1,_0x474096,_0x5d1925,_0x4376b6=[],_0x410b80=[],_0x1c2cde,_0x4e4ecd=this[_0x377020(0x193)](_0x2bf3b0),_0x4ab547=_0x4e4ecd==='array',_0x1715f4=!0x1,_0x2b510e=_0x4e4ecd==='function',_0x33450e=this[_0x377020(0x1c2)](_0x4e4ecd),_0x1a4f47=this[_0x377020(0x1dc)](_0x4e4ecd),_0x51c872=_0x33450e||_0x1a4f47,_0x5bab85={},_0xeee57b=0x0,_0x3447ef=!0x1,_0x15be58,_0x2144f8=/^(([1-9]{1}[0-9]*)|0)$/;if(_0x363f5d[_0x377020(0x14b)]){if(_0x4ab547){if(_0x433fb1=_0x2bf3b0[_0x377020(0x123)],_0x433fb1>_0x363f5d['elements']){for(_0x474096=0x0,_0x5d1925=_0x363f5d[_0x377020(0x1e0)],_0x18fcbd=_0x474096;_0x18fcbd<_0x5d1925;_0x18fcbd++)_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x12a)](_0x4376b6,_0x2bf3b0,_0x4e4ecd,_0x18fcbd,_0x363f5d));_0x4c4a88[_0x377020(0x1ca)]=!0x0;}else{for(_0x474096=0x0,_0x5d1925=_0x433fb1,_0x18fcbd=_0x474096;_0x18fcbd<_0x5d1925;_0x18fcbd++)_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x12a)](_0x4376b6,_0x2bf3b0,_0x4e4ecd,_0x18fcbd,_0x363f5d));}_0x363f5d[_0x377020(0x11d)]+=_0x410b80[_0x377020(0x123)];}if(!(_0x4e4ecd===_0x377020(0x16a)||_0x4e4ecd===_0x377020(0x1e3))&&!_0x33450e&&_0x4e4ecd!==_0x377020(0x105)&&_0x4e4ecd!=='Buffer'&&_0x4e4ecd!==_0x377020(0x182)){var _0x42c5c6=_0x49674b[_0x377020(0x11f)]||_0x363f5d[_0x377020(0x11f)];if(this[_0x377020(0x16c)](_0x2bf3b0)?(_0x18fcbd=0x0,_0x2bf3b0[_0x377020(0x1ab)](function(_0x387777){var _0x5be22f=_0x377020;if(_0xeee57b++,_0x363f5d[_0x5be22f(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;return;}if(!_0x363f5d[_0x5be22f(0x129)]&&_0x363f5d[_0x5be22f(0x1b7)]&&_0x363f5d[_0x5be22f(0x11d)]>_0x363f5d[_0x5be22f(0x12d)]){_0x3447ef=!0x0;return;}_0x410b80[_0x5be22f(0x1ac)](_0x277dde[_0x5be22f(0x12a)](_0x4376b6,_0x2bf3b0,_0x5be22f(0x1d9),_0x18fcbd++,_0x363f5d,function(_0x2a9834){return function(){return _0x2a9834;};}(_0x387777)));})):this['_isMap'](_0x2bf3b0)&&_0x2bf3b0[_0x377020(0x1ab)](function(_0x316b01,_0x47e14e){var _0x48f2d9=_0x377020;if(_0xeee57b++,_0x363f5d[_0x48f2d9(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;return;}if(!_0x363f5d[_0x48f2d9(0x129)]&&_0x363f5d[_0x48f2d9(0x1b7)]&&_0x363f5d[_0x48f2d9(0x11d)]>_0x363f5d[_0x48f2d9(0x12d)]){_0x3447ef=!0x0;return;}var _0x3e2f2f=_0x47e14e[_0x48f2d9(0x178)]();_0x3e2f2f[_0x48f2d9(0x123)]>0x64&&(_0x3e2f2f=_0x3e2f2f[_0x48f2d9(0x1ba)](0x0,0x64)+_0x48f2d9(0x118)),_0x410b80[_0x48f2d9(0x1ac)](_0x277dde[_0x48f2d9(0x12a)](_0x4376b6,_0x2bf3b0,_0x48f2d9(0x195),_0x3e2f2f,_0x363f5d,function(_0x2f0290){return function(){return _0x2f0290;};}(_0x316b01)));}),!_0x1715f4){try{for(_0x1c2cde in _0x2bf3b0)if(!(_0x4ab547&&_0x2144f8[_0x377020(0x166)](_0x1c2cde))&&!this[_0x377020(0x1e4)](_0x2bf3b0,_0x1c2cde,_0x363f5d)){if(_0xeee57b++,_0x363f5d[_0x377020(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;break;}if(!_0x363f5d['isExpressionToEvaluate']&&_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d['autoExpandPropertyCount']>_0x363f5d[_0x377020(0x12d)]){_0x3447ef=!0x0;break;}_0x410b80[_0x377020(0x1ac)](_0x277dde[_0x377020(0x151)](_0x4376b6,_0x5bab85,_0x2bf3b0,_0x4e4ecd,_0x1c2cde,_0x363f5d));}}catch{}if(_0x5bab85[_0x377020(0x120)]=!0x0,_0x2b510e&&(_0x5bab85['_p_name']=!0x0),!_0x3447ef){var _0x591c0f=[][_0x377020(0x1e1)](this[_0x377020(0x19f)](_0x2bf3b0))['concat'](this['_getOwnPropertySymbols'](_0x2bf3b0));for(_0x18fcbd=0x0,_0x433fb1=_0x591c0f['length'];_0x18fcbd<_0x433fb1;_0x18fcbd++)if(_0x1c2cde=_0x591c0f[_0x18fcbd],!(_0x4ab547&&_0x2144f8[_0x377020(0x166)](_0x1c2cde[_0x377020(0x178)]()))&&!this['_blacklistedProperty'](_0x2bf3b0,_0x1c2cde,_0x363f5d)&&!_0x5bab85['_p_'+_0x1c2cde[_0x377020(0x178)]()]){if(_0xeee57b++,_0x363f5d[_0x377020(0x11d)]++,_0xeee57b>_0x42c5c6){_0x3447ef=!0x0;break;}if(!_0x363f5d[_0x377020(0x129)]&&_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d[_0x377020(0x11d)]>_0x363f5d[_0x377020(0x12d)]){_0x3447ef=!0x0;break;}_0x410b80[_0x377020(0x1ac)](_0x277dde['_addObjectProperty'](_0x4376b6,_0x5bab85,_0x2bf3b0,_0x4e4ecd,_0x1c2cde,_0x363f5d));}}}}}if(_0x4c4a88[_0x377020(0x189)]=_0x4e4ecd,_0x51c872?(_0x4c4a88[_0x377020(0x1aa)]=_0x2bf3b0[_0x377020(0x1c7)](),this[_0x377020(0x1d8)](_0x4e4ecd,_0x4c4a88,_0x363f5d,_0x49674b)):_0x4e4ecd===_0x377020(0x1c1)?_0x4c4a88[_0x377020(0x1aa)]=this[_0x377020(0x16d)][_0x377020(0x197)](_0x2bf3b0):_0x4e4ecd==='bigint'?_0x4c4a88[_0x377020(0x1aa)]=_0x2bf3b0[_0x377020(0x178)]():_0x4e4ecd===_0x377020(0x114)?_0x4c4a88['value']=this['_regExpToString'][_0x377020(0x197)](_0x2bf3b0):_0x4e4ecd===_0x377020(0x144)&&this['_Symbol']?_0x4c4a88[_0x377020(0x1aa)]=this[_0x377020(0x15a)][_0x377020(0x14f)]['toString']['call'](_0x2bf3b0):!_0x363f5d[_0x377020(0x14b)]&&!(_0x4e4ecd===_0x377020(0x16a)||_0x4e4ecd===_0x377020(0x1e3))&&(delete _0x4c4a88[_0x377020(0x1aa)],_0x4c4a88[_0x377020(0x122)]=!0x0),_0x3447ef&&(_0x4c4a88['cappedProps']=!0x0),_0x15be58=_0x363f5d[_0x377020(0x1da)][_0x377020(0x108)],_0x363f5d['node'][_0x377020(0x108)]=_0x4c4a88,this['_treeNodePropertiesBeforeFullValue'](_0x4c4a88,_0x363f5d),_0x410b80[_0x377020(0x123)]){for(_0x18fcbd=0x0,_0x433fb1=_0x410b80[_0x377020(0x123)];_0x18fcbd<_0x433fb1;_0x18fcbd++)_0x410b80[_0x18fcbd](_0x18fcbd);}_0x4376b6[_0x377020(0x123)]&&(_0x4c4a88['props']=_0x4376b6);}catch(_0x1fa9b2){_0x41b795(_0x1fa9b2,_0x4c4a88,_0x363f5d);}return this[_0x377020(0x13d)](_0x2bf3b0,_0x4c4a88),this[_0x377020(0x1ae)](_0x4c4a88,_0x363f5d),_0x363f5d[_0x377020(0x1da)]['current']=_0x15be58,_0x363f5d['level']--,_0x363f5d[_0x377020(0x1b7)]=_0x2bc8b0,_0x363f5d[_0x377020(0x1b7)]&&_0x363f5d['autoExpandPreviousObjects'][_0x377020(0x125)](),_0x4c4a88;}['_getOwnPropertySymbols'](_0xb5846){var _0x52041f=_0x27b5f4;return Object['getOwnPropertySymbols']?Object[_0x52041f(0x139)](_0xb5846):[];}[_0x27b5f4(0x16c)](_0x5282f4){var _0x3228cc=_0x27b5f4;return!!(_0x5282f4&&_0x5b4790[_0x3228cc(0x1d9)]&&this[_0x3228cc(0x15e)](_0x5282f4)===_0x3228cc(0x1a5)&&_0x5282f4[_0x3228cc(0x1ab)]);}['_blacklistedProperty'](_0x3e1e02,_0x19f7da,_0x2ed27d){var _0x3d5f32=_0x27b5f4;return _0x2ed27d[_0x3d5f32(0x158)]?typeof _0x3e1e02[_0x19f7da]==_0x3d5f32(0x1c5):!0x1;}[_0x27b5f4(0x193)](_0x1d8bce){var _0xf22702=_0x27b5f4,_0x8f3c98='';return _0x8f3c98=typeof _0x1d8bce,_0x8f3c98==='object'?this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x1e2)?_0x8f3c98=_0xf22702(0x126):this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x149)?_0x8f3c98=_0xf22702(0x1c1):this[_0xf22702(0x15e)](_0x1d8bce)===_0xf22702(0x18e)?_0x8f3c98='bigint':_0x1d8bce===null?_0x8f3c98=_0xf22702(0x16a):_0x1d8bce['constructor']&&(_0x8f3c98=_0x1d8bce[_0xf22702(0x1be)][_0xf22702(0x110)]||_0x8f3c98):_0x8f3c98===_0xf22702(0x1e3)&&this['_HTMLAllCollection']&&_0x1d8bce instanceof this['_HTMLAllCollection']&&(_0x8f3c98='HTMLAllCollection'),_0x8f3c98;}['_objectToString'](_0x362d66){var _0x3c798c=_0x27b5f4;return Object[_0x3c798c(0x14f)][_0x3c798c(0x178)][_0x3c798c(0x197)](_0x362d66);}['_isPrimitiveType'](_0x291f7d){var _0x5359d4=_0x27b5f4;return _0x291f7d===_0x5359d4(0x145)||_0x291f7d===_0x5359d4(0x14e)||_0x291f7d==='number';}[_0x27b5f4(0x1dc)](_0x4cbff7){var _0x3ee85a=_0x27b5f4;return _0x4cbff7==='Boolean'||_0x4cbff7===_0x3ee85a(0x105)||_0x4cbff7===_0x3ee85a(0x10e);}['_addProperty'](_0x2378df,_0x35fcbe,_0x1b181f,_0xaf562b,_0xd53cb8,_0x399f00){var _0x452e20=this;return function(_0x144d49){var _0x201876=_0x4cb1,_0x46a7c6=_0xd53cb8[_0x201876(0x1da)][_0x201876(0x108)],_0x3d1f64=_0xd53cb8[_0x201876(0x1da)][_0x201876(0x163)],_0x411984=_0xd53cb8['node'][_0x201876(0x192)];_0xd53cb8[_0x201876(0x1da)][_0x201876(0x192)]=_0x46a7c6,_0xd53cb8['node'][_0x201876(0x163)]=typeof _0xaf562b==_0x201876(0x1cb)?_0xaf562b:_0x144d49,_0x2378df['push'](_0x452e20['_property'](_0x35fcbe,_0x1b181f,_0xaf562b,_0xd53cb8,_0x399f00)),_0xd53cb8[_0x201876(0x1da)][_0x201876(0x192)]=_0x411984,_0xd53cb8['node'][_0x201876(0x163)]=_0x3d1f64;};}[_0x27b5f4(0x151)](_0x447828,_0x14c2cb,_0x2514be,_0x499052,_0x3ac241,_0x50d530,_0x5931a7){var _0x5d6f85=_0x27b5f4,_0x22fac8=this;return _0x14c2cb[_0x5d6f85(0x152)+_0x3ac241[_0x5d6f85(0x178)]()]=!0x0,function(_0x2163ab){var _0x46ef79=_0x5d6f85,_0x4e6994=_0x50d530['node'][_0x46ef79(0x108)],_0x379fad=_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x163)],_0x4648ab=_0x50d530[_0x46ef79(0x1da)]['parent'];_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x192)]=_0x4e6994,_0x50d530[_0x46ef79(0x1da)][_0x46ef79(0x163)]=_0x2163ab,_0x447828[_0x46ef79(0x1ac)](_0x22fac8[_0x46ef79(0x1ad)](_0x2514be,_0x499052,_0x3ac241,_0x50d530,_0x5931a7)),_0x50d530[_0x46ef79(0x1da)]['parent']=_0x4648ab,_0x50d530['node']['index']=_0x379fad;};}[_0x27b5f4(0x1ad)](_0x11ba45,_0x2c8472,_0x75afa4,_0xef2682,_0x2e97cf){var _0x5d139e=_0x27b5f4,_0x2f2ead=this;_0x2e97cf||(_0x2e97cf=function(_0x2f3675,_0x36e0f8){return _0x2f3675[_0x36e0f8];});var _0x1d0670=_0x75afa4['toString'](),_0x127b27=_0xef2682['expressionsToEvaluate']||{},_0x3818ef=_0xef2682[_0x5d139e(0x14b)],_0x501535=_0xef2682[_0x5d139e(0x129)];try{var _0x1654e3=this[_0x5d139e(0x157)](_0x11ba45),_0x22d9d0=_0x1d0670;_0x1654e3&&_0x22d9d0[0x0]==='\\x27'&&(_0x22d9d0=_0x22d9d0[_0x5d139e(0x184)](0x1,_0x22d9d0[_0x5d139e(0x123)]-0x2));var _0x10bfe0=_0xef2682[_0x5d139e(0x117)]=_0x127b27[_0x5d139e(0x152)+_0x22d9d0];_0x10bfe0&&(_0xef2682[_0x5d139e(0x14b)]=_0xef2682['depth']+0x1),_0xef2682[_0x5d139e(0x129)]=!!_0x10bfe0;var _0x108f45=typeof _0x75afa4==_0x5d139e(0x144),_0x289b97={'name':_0x108f45||_0x1654e3?_0x1d0670:this[_0x5d139e(0x115)](_0x1d0670)};if(_0x108f45&&(_0x289b97[_0x5d139e(0x144)]=!0x0),!(_0x2c8472===_0x5d139e(0x126)||_0x2c8472===_0x5d139e(0x14c))){var _0x2bf7ad=this[_0x5d139e(0x1c0)](_0x11ba45,_0x75afa4);if(_0x2bf7ad&&(_0x2bf7ad['set']&&(_0x289b97['setter']=!0x0),_0x2bf7ad['get']&&!_0x10bfe0&&!_0xef2682[_0x5d139e(0x165)]))return _0x289b97['getter']=!0x0,this[_0x5d139e(0x17a)](_0x289b97,_0xef2682),_0x289b97;}var _0x1f14f8;try{_0x1f14f8=_0x2e97cf(_0x11ba45,_0x75afa4);}catch(_0x309f6f){return _0x289b97={'name':_0x1d0670,'type':_0x5d139e(0x173),'error':_0x309f6f[_0x5d139e(0x155)]},this['_processTreeNodeResult'](_0x289b97,_0xef2682),_0x289b97;}var _0x19f7d6=this[_0x5d139e(0x193)](_0x1f14f8),_0x21be7b=this[_0x5d139e(0x1c2)](_0x19f7d6);if(_0x289b97[_0x5d139e(0x189)]=_0x19f7d6,_0x21be7b)this['_processTreeNodeResult'](_0x289b97,_0xef2682,_0x1f14f8,function(){var _0x24bfe4=_0x5d139e;_0x289b97[_0x24bfe4(0x1aa)]=_0x1f14f8[_0x24bfe4(0x1c7)](),!_0x10bfe0&&_0x2f2ead[_0x24bfe4(0x1d8)](_0x19f7d6,_0x289b97,_0xef2682,{});});else{var _0x24f667=_0xef2682['autoExpand']&&_0xef2682['level']<_0xef2682[_0x5d139e(0x18f)]&&_0xef2682[_0x5d139e(0x10f)][_0x5d139e(0x11a)](_0x1f14f8)<0x0&&_0x19f7d6!==_0x5d139e(0x1c5)&&_0xef2682[_0x5d139e(0x11d)]<_0xef2682['autoExpandLimit'];_0x24f667||_0xef2682['level']<_0x3818ef||_0x10bfe0?(this[_0x5d139e(0x111)](_0x289b97,_0x1f14f8,_0xef2682,_0x10bfe0||{}),this[_0x5d139e(0x13d)](_0x1f14f8,_0x289b97)):this['_processTreeNodeResult'](_0x289b97,_0xef2682,_0x1f14f8,function(){var _0x55b27e=_0x5d139e;_0x19f7d6===_0x55b27e(0x16a)||_0x19f7d6==='undefined'||(delete _0x289b97[_0x55b27e(0x1aa)],_0x289b97['capped']=!0x0);});}return _0x289b97;}finally{_0xef2682[_0x5d139e(0x117)]=_0x127b27,_0xef2682[_0x5d139e(0x14b)]=_0x3818ef,_0xef2682[_0x5d139e(0x129)]=_0x501535;}}[_0x27b5f4(0x1d8)](_0x345b2b,_0x37826c,_0x493a0b,_0x5bbe39){var _0x41c5d3=_0x27b5f4,_0x4e7ce2=_0x5bbe39[_0x41c5d3(0x13e)]||_0x493a0b[_0x41c5d3(0x13e)];if((_0x345b2b==='string'||_0x345b2b==='String')&&_0x37826c[_0x41c5d3(0x1aa)]){let _0x58e7f0=_0x37826c['value'][_0x41c5d3(0x123)];_0x493a0b[_0x41c5d3(0x17b)]+=_0x58e7f0,_0x493a0b[_0x41c5d3(0x17b)]>_0x493a0b['totalStrLength']?(_0x37826c[_0x41c5d3(0x122)]='',delete _0x37826c[_0x41c5d3(0x1aa)]):_0x58e7f0>_0x4e7ce2&&(_0x37826c[_0x41c5d3(0x122)]=_0x37826c[_0x41c5d3(0x1aa)][_0x41c5d3(0x184)](0x0,_0x4e7ce2),delete _0x37826c[_0x41c5d3(0x1aa)]);}}[_0x27b5f4(0x157)](_0x27e462){var _0x52af29=_0x27b5f4;return!!(_0x27e462&&_0x5b4790[_0x52af29(0x195)]&&this[_0x52af29(0x15e)](_0x27e462)===_0x52af29(0x1db)&&_0x27e462[_0x52af29(0x1ab)]);}['_propertyName'](_0x4009b0){var _0xaac64b=_0x27b5f4;if(_0x4009b0[_0xaac64b(0x1e5)](/^\\d+$/))return _0x4009b0;var _0x3df4b1;try{_0x3df4b1=JSON[_0xaac64b(0x183)](''+_0x4009b0);}catch{_0x3df4b1='\\x22'+this[_0xaac64b(0x15e)](_0x4009b0)+'\\x22';}return _0x3df4b1[_0xaac64b(0x1e5)](/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?_0x3df4b1=_0x3df4b1['substr'](0x1,_0x3df4b1[_0xaac64b(0x123)]-0x2):_0x3df4b1=_0x3df4b1[_0xaac64b(0x1de)](/'/g,'\\x5c\\x27')[_0xaac64b(0x1de)](/\\\\\"/g,'\\x22')[_0xaac64b(0x1de)](/(^\"|\"$)/g,'\\x27'),_0x3df4b1;}['_processTreeNodeResult'](_0x19824d,_0x5c5e8f,_0x1680fa,_0x5b0779){var _0x3d2550=_0x27b5f4;this['_treeNodePropertiesBeforeFullValue'](_0x19824d,_0x5c5e8f),_0x5b0779&&_0x5b0779(),this[_0x3d2550(0x13d)](_0x1680fa,_0x19824d),this[_0x3d2550(0x1ae)](_0x19824d,_0x5c5e8f);}[_0x27b5f4(0x127)](_0x5aff2e,_0x47d2f7){var _0x5cd962=_0x27b5f4;this[_0x5cd962(0x10b)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x196)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x17f)](_0x5aff2e,_0x47d2f7),this[_0x5cd962(0x134)](_0x5aff2e,_0x47d2f7);}['_setNodeId'](_0x452ae7,_0x297f1b){}[_0x27b5f4(0x196)](_0xece9cb,_0x4e0399){}['_setNodeLabel'](_0x2c0a1b,_0x23ac11){}[_0x27b5f4(0x18c)](_0x41f0d5){var _0x5db41b=_0x27b5f4;return _0x41f0d5===this[_0x5db41b(0x19a)];}[_0x27b5f4(0x1ae)](_0x327dda,_0x2ed747){var _0x28aea0=_0x27b5f4;this['_setNodeLabel'](_0x327dda,_0x2ed747),this[_0x28aea0(0x15b)](_0x327dda),_0x2ed747['sortProps']&&this[_0x28aea0(0x154)](_0x327dda),this[_0x28aea0(0x1c3)](_0x327dda,_0x2ed747),this[_0x28aea0(0x11b)](_0x327dda,_0x2ed747),this[_0x28aea0(0x1d4)](_0x327dda);}[_0x27b5f4(0x13d)](_0x28ed57,_0x2f9ad0){var _0x2f2aa2=_0x27b5f4;try{_0x28ed57&&typeof _0x28ed57[_0x2f2aa2(0x123)]==_0x2f2aa2(0x1cb)&&(_0x2f9ad0[_0x2f2aa2(0x123)]=_0x28ed57[_0x2f2aa2(0x123)]);}catch{}if(_0x2f9ad0[_0x2f2aa2(0x189)]===_0x2f2aa2(0x1cb)||_0x2f9ad0['type']==='Number'){if(isNaN(_0x2f9ad0['value']))_0x2f9ad0[_0x2f2aa2(0x164)]=!0x0,delete _0x2f9ad0['value'];else switch(_0x2f9ad0[_0x2f2aa2(0x1aa)]){case Number['POSITIVE_INFINITY']:_0x2f9ad0[_0x2f2aa2(0x14d)]=!0x0,delete _0x2f9ad0[_0x2f2aa2(0x1aa)];break;case Number[_0x2f2aa2(0x199)]:_0x2f9ad0[_0x2f2aa2(0x1bc)]=!0x0,delete _0x2f9ad0[_0x2f2aa2(0x1aa)];break;case 0x0:this[_0x2f2aa2(0x1e7)](_0x2f9ad0[_0x2f2aa2(0x1aa)])&&(_0x2f9ad0[_0x2f2aa2(0x12e)]=!0x0);break;}}else _0x2f9ad0[_0x2f2aa2(0x189)]===_0x2f2aa2(0x1c5)&&typeof _0x28ed57[_0x2f2aa2(0x110)]=='string'&&_0x28ed57[_0x2f2aa2(0x110)]&&_0x2f9ad0[_0x2f2aa2(0x110)]&&_0x28ed57[_0x2f2aa2(0x110)]!==_0x2f9ad0['name']&&(_0x2f9ad0['funcName']=_0x28ed57[_0x2f2aa2(0x110)]);}[_0x27b5f4(0x1e7)](_0x2ebacd){return 0x1/_0x2ebacd===Number['NEGATIVE_INFINITY'];}[_0x27b5f4(0x154)](_0x33f55f){var _0x2880b5=_0x27b5f4;!_0x33f55f[_0x2880b5(0x11f)]||!_0x33f55f['props'][_0x2880b5(0x123)]||_0x33f55f[_0x2880b5(0x189)]==='array'||_0x33f55f[_0x2880b5(0x189)]===_0x2880b5(0x195)||_0x33f55f[_0x2880b5(0x189)]===_0x2880b5(0x1d9)||_0x33f55f[_0x2880b5(0x11f)]['sort'](function(_0xeb1d3d,_0x1e5ad8){var _0x465665=_0x2880b5,_0x228711=_0xeb1d3d[_0x465665(0x110)][_0x465665(0x16b)](),_0x4a8d2e=_0x1e5ad8[_0x465665(0x110)][_0x465665(0x16b)]();return _0x228711<_0x4a8d2e?-0x1:_0x228711>_0x4a8d2e?0x1:0x0;});}['_addFunctionsNode'](_0x44bb25,_0x246ec6){var _0x22ee2b=_0x27b5f4;if(!(_0x246ec6['noFunctions']||!_0x44bb25[_0x22ee2b(0x11f)]||!_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x123)])){for(var _0xdec3bc=[],_0x3df253=[],_0x3979be=0x0,_0x45594a=_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x123)];_0x3979be<_0x45594a;_0x3979be++){var _0x5162e2=_0x44bb25[_0x22ee2b(0x11f)][_0x3979be];_0x5162e2[_0x22ee2b(0x189)]==='function'?_0xdec3bc[_0x22ee2b(0x1ac)](_0x5162e2):_0x3df253[_0x22ee2b(0x1ac)](_0x5162e2);}if(!(!_0x3df253[_0x22ee2b(0x123)]||_0xdec3bc['length']<=0x1)){_0x44bb25[_0x22ee2b(0x11f)]=_0x3df253;var _0x21a1e2={'functionsNode':!0x0,'props':_0xdec3bc};this[_0x22ee2b(0x10b)](_0x21a1e2,_0x246ec6),this[_0x22ee2b(0x169)](_0x21a1e2,_0x246ec6),this[_0x22ee2b(0x15b)](_0x21a1e2),this[_0x22ee2b(0x134)](_0x21a1e2,_0x246ec6),_0x21a1e2['id']+='\\x20f',_0x44bb25[_0x22ee2b(0x11f)][_0x22ee2b(0x11e)](_0x21a1e2);}}}[_0x27b5f4(0x11b)](_0x4447de,_0x39bc80){}[_0x27b5f4(0x15b)](_0x2ad7d8){}[_0x27b5f4(0x172)](_0x21c674){var _0x201530=_0x27b5f4;return Array[_0x201530(0x132)](_0x21c674)||typeof _0x21c674==_0x201530(0x1d1)&&this[_0x201530(0x15e)](_0x21c674)===_0x201530(0x1e2);}['_setNodePermissions'](_0x2c4127,_0x25c7dc){}[_0x27b5f4(0x1d4)](_0x368d9f){var _0x1076c1=_0x27b5f4;delete _0x368d9f['_hasSymbolPropertyOnItsPath'],delete _0x368d9f[_0x1076c1(0x13a)],delete _0x368d9f[_0x1076c1(0x161)];}[_0x27b5f4(0x17f)](_0x3b452d,_0x210ca2){}['_propertyAccessor'](_0x40ae2e){var _0x9d2342=_0x27b5f4;return _0x40ae2e?_0x40ae2e[_0x9d2342(0x1e5)](this[_0x9d2342(0x106)])?'['+_0x40ae2e+']':_0x40ae2e[_0x9d2342(0x1e5)](this['_keyStrRegExp'])?'.'+_0x40ae2e:_0x40ae2e[_0x9d2342(0x1e5)](this['_quotedRegExp'])?'['+_0x40ae2e+']':'[\\x27'+_0x40ae2e+'\\x27]':'';}}let _0x103982=new _0x7302f2();function _0x4ef4d5(_0x447b63,_0x2ac7e6,_0x1a6859,_0x160f8a,_0x430090,_0x134fa9){var _0x27e421=_0x27b5f4;let _0x16431e,_0x4089ff;try{_0x4089ff=_0x4d049a(),_0x16431e=_0xe1c80c[_0x2ac7e6],!_0x16431e||_0x4089ff-_0x16431e['ts']>0x1f4&&_0x16431e[_0x27e421(0x1bb)]&&_0x16431e[_0x27e421(0x148)]/_0x16431e['count']<0x64?(_0xe1c80c[_0x2ac7e6]=_0x16431e={'count':0x0,'time':0x0,'ts':_0x4089ff},_0xe1c80c['hits']={}):_0x4089ff-_0xe1c80c[_0x27e421(0x1bf)]['ts']>0x32&&_0xe1c80c[_0x27e421(0x1bf)]['count']&&_0xe1c80c['hits'][_0x27e421(0x148)]/_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]<0x64&&(_0xe1c80c[_0x27e421(0x1bf)]={});let _0x2f24ca=[],_0x2739a9=_0x16431e[_0x27e421(0x19e)]||_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x19e)]?_0x5df0c1:_0x538d0c,_0x147472=_0x372ec9=>{var _0x4a7838=_0x27e421;let _0x5c2b64={};return _0x5c2b64[_0x4a7838(0x11f)]=_0x372ec9['props'],_0x5c2b64[_0x4a7838(0x1e0)]=_0x372ec9[_0x4a7838(0x1e0)],_0x5c2b64[_0x4a7838(0x13e)]=_0x372ec9[_0x4a7838(0x13e)],_0x5c2b64[_0x4a7838(0x12c)]=_0x372ec9[_0x4a7838(0x12c)],_0x5c2b64[_0x4a7838(0x12d)]=_0x372ec9['autoExpandLimit'],_0x5c2b64['autoExpandMaxDepth']=_0x372ec9[_0x4a7838(0x18f)],_0x5c2b64[_0x4a7838(0x1b3)]=!0x1,_0x5c2b64[_0x4a7838(0x158)]=!_0x2df5e3,_0x5c2b64[_0x4a7838(0x14b)]=0x1,_0x5c2b64[_0x4a7838(0x10d)]=0x0,_0x5c2b64[_0x4a7838(0x171)]=_0x4a7838(0x1e6),_0x5c2b64[_0x4a7838(0x141)]=_0x4a7838(0x1c4),_0x5c2b64['autoExpand']=!0x0,_0x5c2b64['autoExpandPreviousObjects']=[],_0x5c2b64[_0x4a7838(0x11d)]=0x0,_0x5c2b64['resolveGetters']=!0x0,_0x5c2b64[_0x4a7838(0x17b)]=0x0,_0x5c2b64[_0x4a7838(0x1da)]={'current':void 0x0,'parent':void 0x0,'index':0x0},_0x5c2b64;};for(var _0x1e1001=0x0;_0x1e1001<_0x430090[_0x27e421(0x123)];_0x1e1001++)_0x2f24ca[_0x27e421(0x1ac)](_0x103982['serialize']({'timeNode':_0x447b63===_0x27e421(0x148)||void 0x0},_0x430090[_0x1e1001],_0x147472(_0x2739a9),{}));if(_0x447b63==='trace'){let _0x58fe7f=Error['stackTraceLimit'];try{Error['stackTraceLimit']=0x1/0x0,_0x2f24ca[_0x27e421(0x1ac)](_0x103982[_0x27e421(0x111)]({'stackNode':!0x0},new Error()['stack'],_0x147472(_0x2739a9),{'strLength':0x1/0x0}));}finally{Error[_0x27e421(0x188)]=_0x58fe7f;}}return{'method':_0x27e421(0x1b6),'version':_0x3fd8d0,'args':[{'ts':_0x1a6859,'session':_0x160f8a,'args':_0x2f24ca,'id':_0x2ac7e6,'context':_0x134fa9}]};}catch(_0xe8878a){return{'method':_0x27e421(0x1b6),'version':_0x3fd8d0,'args':[{'ts':_0x1a6859,'session':_0x160f8a,'args':[{'type':'unknown','error':_0xe8878a&&_0xe8878a[_0x27e421(0x155)]}],'id':_0x2ac7e6,'context':_0x134fa9}]};}finally{try{if(_0x16431e&&_0x4089ff){let _0x956241=_0x4d049a();_0x16431e[_0x27e421(0x1bb)]++,_0x16431e[_0x27e421(0x148)]+=_0x272fdc(_0x4089ff,_0x956241),_0x16431e['ts']=_0x956241,_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]++,_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x148)]+=_0x272fdc(_0x4089ff,_0x956241),_0xe1c80c['hits']['ts']=_0x956241,(_0x16431e[_0x27e421(0x1bb)]>0x32||_0x16431e['time']>0x64)&&(_0x16431e[_0x27e421(0x19e)]=!0x0),(_0xe1c80c[_0x27e421(0x1bf)][_0x27e421(0x1bb)]>0x3e8||_0xe1c80c['hits'][_0x27e421(0x148)]>0x12c)&&(_0xe1c80c[_0x27e421(0x1bf)]['reduceLimits']=!0x0);}}catch{}}}return _0x5b4790[_0x27b5f4(0x18b)];})(globalThis,_0x5c041f(0x124),_0x5c041f(0x160),_0x5c041f(0x174),_0x5c041f(0x19b),_0x5c041f(0x18a),_0x5c041f(0x17d),_0x5c041f(0x198),_0x5c041f(0x1d7));")}catch{}})().consoleLog(n,e)}catch{}return e}("20fa558a_0","Cita guardada")),this.router.navigate(["/reservaciones"])}).catch(t=>{console.error("Error al guardar la cita",t)})}}return n.\u0275fac=function(t){return new(t||n)(nt(Lb),nt(aa))},n.\u0275cmp=zr({type:n,selectors:[["app-formulario"]],decls:30,vars:5,consts:[[1,"container"],[1,"form-container",3,"ngSubmit"],["type","text","name","nombre","required","",3,"ngModel","ngModelChange"],["type","date","name","fecha","required","",3,"ngModel","min","ngModelChange"],["type","time","name","hora","required","",3,"ngModel","ngModelChange"],["name","tipoHabitacion","required","",3,"ngModel","ngModelChange"],["value",""],["value","Sencilla"],["value","Doble"],["value","Suite"],["type","submit"]],template:function(t,i){1&t&&(ve(0,"div",0)(1,"form",1),_n("ngSubmit",function(){return i.guardarCita()}),ve(2,"h2"),Pe(3,"Guardar Cita"),Ce(),ve(4,"div")(5,"label"),Pe(6,"Nombre:"),Ce(),ve(7,"input",2),_n("ngModelChange",function(s){return i.cita.nombre=s}),Ce()(),ve(8,"div")(9,"label"),Pe(10,"Fecha:"),Ce(),ve(11,"input",3),_n("ngModelChange",function(s){return i.cita.fecha=s}),Ce()(),ve(12,"div")(13,"label"),Pe(14,"Hora:"),Ce(),ve(15,"input",4),_n("ngModelChange",function(s){return i.cita.hora=s}),Ce()(),ve(16,"div")(17,"label"),Pe(18,"Tipo de Habitaci\xf3n:"),Ce(),ve(19,"select",5),_n("ngModelChange",function(s){return i.cita.tipoHabitacion=s}),ve(20,"option",6),Pe(21,"Seleccione"),Ce(),ve(22,"option",7),Pe(23,"Sencilla"),Ce(),ve(24,"option",8),Pe(25,"Doble"),Ce(),ve(26,"option",9),Pe(27,"Suite"),Ce()()(),ve(28,"button",10),Pe(29,"Guardar"),Ce()()()),2&t&&(oi(7),Ui("ngModel",i.cita.nombre),oi(4),Ui("ngModel",i.cita.fecha)("min",i.minDate),oi(4),Ui("ngModel",i.cita.hora),oi(4),Ui("ngModel",i.cita.tipoHabitacion))},dependencies:[QE,qz,Yz,xp,eC,Xg,HE,tC,rv,KE],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:10vh auto;padding:20px;width:50%;background-color:#f9c;border-radius:10px;box-shadow:0 2px 4px #0000001a}.form-container[_ngcontent-%COMP%]{background-color:#ce4e8e;width:100%;padding:20px;border-radius:10px}h2[_ngcontent-%COMP%]{color:#fff;text-align:center;margin-top:0;padding-top:20px}label[_ngcontent-%COMP%]{color:#fff}input[type=text][_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=time][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background-color:#fff;color:#ff0080;width:100%;padding:5px;border:none;border-radius:5px;margin-bottom:10px}button[type=submit][_ngcontent-%COMP%]{background-color:#fff;color:#ff0080;width:100%;padding:10px;border:none;border-radius:5px;cursor:pointer}"]}),n})()},{path:"reservaciones",component:(()=>{class n{constructor(){this.citas=[],this.db=zk()}ngOnInit(){H9(Lk(this.db,"citas"),i=>{const r=i.val();this.citas=r?Object.values(r):[]})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=zr({type:n,selectors:[["app-lista"]],decls:15,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(ve(0,"h2"),Pe(1,"Listado de Citas"),Ce(),ve(2,"table")(3,"thead")(4,"tr")(5,"th"),Pe(6,"Nombre"),Ce(),ve(7,"th"),Pe(8,"Fecha"),Ce(),ve(9,"th"),Pe(10,"Hora"),Ce(),ve(11,"th"),Pe(12,"Tipo de Habitaci\xf3n"),Ce()()(),ve(13,"tbody"),Pl(14,mhe,9,4,"tr",0),Ce()()),2&t&&(oi(14),Ui("ngForOf",i.citas))},dependencies:[B2],styles:["h2[_ngcontent-%COMP%]{color:#ff1493;text-align:center}table[_ngcontent-%COMP%]{width:50%;margin:0 auto;border-collapse:collapse;border:1px solid #FF69B4}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;border:1px solid #FF69B4}th[_ngcontent-%COMP%]{background-color:pink;color:#fff}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#ffb6c1}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ffa07a;color:#fff}"]}),n})()},{path:"galeria",component:gue},{path:"habitacion-list",component:_de},{path:"habitacion/:habitacion",component:vde},{path:"contact",component:Jde},{path:"questions",component:ihe}];let xhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[QB.forRoot(ghe),QB]}),n})();class vV{}class yhe{}const ef="*";function wV(n,e=null){return{type:2,steps:n,options:e}}function ll(n){return{type:6,styles:n,offset:null}}function CV(n){Promise.resolve().then(n)}class cv{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){CV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class TV{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?CV(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==s&&this._onFinish()}),u.onDestroy(()=>{++i==s&&this._onDestroy()}),u.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,_)=>Math.max(u,_.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function SV(n){return new Xe(3e3,!1)}function Tp(n){switch(n.length){case 0:return new cv;case 1:return n[0];default:return new TV(n)}}function IV(n,e,t=new Map,i=new Map){const r=[],s=[];let u=-1,_=null;if(e.forEach(y=>{const E=y.get("offset"),D=E==u,R=D&&_||new Map;y.forEach((U,X)=>{let ie=X,xe=U;if("offset"!==X)switch(ie=n.normalizePropertyName(ie,r),xe){case"!":xe=t.get(X);break;case ef:xe=i.get(X);break;default:xe=n.normalizeStyleValue(X,ie,xe,r)}R.set(ie,xe)}),D||s.push(R),_=R,u=E}),r.length)throw function $he(n){return new Xe(3502,!1)}();return s}function P5(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&O5(t,"start",n)));break;case"done":n.onDone(()=>i(t&&O5(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&O5(t,"destroy",n)))}}function O5(n,e,t){const s=F5(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(s._data=u),s}function F5(n,e,t,i,r="",s=0,u){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!u}}function Bl(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function DV(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const nfe=(()=>typeof document>"u"?null:document.documentElement)();function N5(n){const e=n.parentNode||n.host||null;return e===nfe?null:e}let Cm=null,AV=!1;function MV(n,e){for(;e;){if(e===n)return!0;e=N5(e)}return!1}function kV(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let RV=(()=>{class n{validateStyleProperty(t){return function rfe(n){Cm||(Cm=function ofe(){return typeof document<"u"?document.body:null}()||{},AV=!!Cm.style&&"WebkitAppearance"in Cm.style);let e=!0;return Cm.style&&!function ife(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Cm.style,!e&&AV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Cm.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return MV(t,i)}getParentElement(t){return N5(t)}query(t,i,r){return kV(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,u,_=[],y){return new cv(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})(),L5=(()=>{class n{}return n.NOOP=new RV,n})();const sfe=1e3,B5="ng-enter",hC="ng-leave",fC="ng-trigger",pC=".ng-trigger",OV="ng-animating",z5=".ng-animating";function tf(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:V5(parseFloat(e[1]),e[2])}function V5(n,e){return"s"===e?n*sfe:n}function _C(n,e,t){return n.hasOwnProperty("duration")?n:function lfe(n,e,t){let r,s=0,u="";if("string"==typeof n){const _=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===_)return e.push(SV()),{duration:0,delay:0,easing:""};r=V5(parseFloat(_[1]),_[2]);const y=_[3];null!=y&&(s=V5(parseFloat(y),_[4]));const E=_[5];E&&(u=E)}else r=n;if(!t){let _=!1,y=e.length;r<0&&(e.push(function whe(){return new Xe(3100,!1)}()),_=!0),s<0&&(e.push(function Ehe(){return new Xe(3101,!1)}()),_=!0),_&&e.splice(y,0,SV())}return{duration:r,delay:s,easing:u}}(n,e,t)}function uv(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function FV(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Sp(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function zd(n,e,t){e.forEach((i,r)=>{const s=U5(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i})}function Tm(n,e){e.forEach((t,i)=>{const r=U5(i);n.style[r]=""})}function dv(n){return Array.isArray(n)?1==n.length?n[0]:wV(n):n}const j5=new RegExp("{{\\s*(.+?)\\s*}}","g");function LV(n){let e=[];if("string"==typeof n){let t;for(;t=j5.exec(n);)e.push(t[1]);j5.lastIndex=0}return e}function hv(n,e,t){const i=n.toString(),r=i.replace(j5,(s,u)=>{let _=e[u];return null==_&&(t.push(function The(n){return new Xe(3003,!1)}()),_=""),_.toString()});return r==i?n:r}function mC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const dfe=/-+([a-z0-9])/g;function U5(n){return n.replace(dfe,(...e)=>e[1].toUpperCase())}function zl(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function She(n){return new Xe(3004,!1)}()}}function BV(n,e){return window.getComputedStyle(n)[e]}const gC="*";function pfe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function _fe(n,e,t){if(":"==n[0]){const y=function mfe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Vhe(n){return new Xe(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function zhe(n){return new Xe(3015,!1)}()),e;const r=i[1],s=i[2],u=i[3];e.push(zV(r,u));"<"==s[0]&&!(r==gC&&u==gC)&&e.push(zV(u,r))}(i,t,e)):t.push(n),t}const xC=new Set(["true","1"]),yC=new Set(["false","0"]);function zV(n,e){const t=xC.has(n)||yC.has(n),i=xC.has(e)||yC.has(e);return(r,s)=>{let u=n==gC||n==r,_=e==gC||e==s;return!u&&t&&"boolean"==typeof r&&(u=r?xC.has(n):yC.has(n)),!_&&i&&"boolean"==typeof s&&(_=s?xC.has(e):yC.has(e)),u&&_}}const gfe=new RegExp("s*:selfs*,?","g");function H5(n,e,t,i){return new xfe(n).build(e,t,i)}class xfe{constructor(e){this._driver=e}build(e,t,i){const r=new vfe(t);return this._resetContextStyleTimingState(r),zl(this,dv(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function Dhe(){return new Xe(3006,!1)}()),e.definitions.forEach(_=>{if(this._resetContextStyleTimingState(t),0==_.type){const y=_,E=y.name;E.toString().split(/\s*,\s*/).forEach(D=>{y.name=D,s.push(this.visitState(y,t))}),y.name=E}else if(1==_.type){const y=this.visitTransition(_,t);i+=y.queryCount,r+=y.depCount,u.push(y)}else t.errors.push(function Ahe(){return new Xe(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:u,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,u=r||{};i.styles.forEach(_=>{_ instanceof Map&&_.forEach(y=>{LV(y).forEach(E=>{u.hasOwnProperty(E)||s.add(E)})})}),s.size&&(mC(s.values()),t.errors.push(function Mhe(n,e){return new Xe(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=zl(this,dv(e.animation),t);return{type:1,matchers:pfe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Sm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>zl(this,i,t)),options:Sm(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(u=>{t.currentTime=i;const _=zl(this,u,t);return r=Math.max(r,t.currentTime),_});return t.currentTime=r,{type:3,steps:s,options:Sm(e.options)}}visitAnimate(e,t){const i=function Efe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return $5(_C(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=$5(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=_C(t,e);return $5(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:ll({});if(5==s.type)r=this.visitKeyframes(s,t);else{let u=e.styles,_=!1;if(!u){_=!0;const E={};i.easing&&(E.easing=i.easing),u=ll(E)}t.currentTime+=i.duration+i.delay;const y=this.visitStyle(u,t);y.isEmptyStep=_,r=y}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let _ of r)"string"==typeof _?_===ef?i.push(_):t.errors.push(new Xe(3002,!1)):i.push(FV(_));let s=!1,u=null;return i.forEach(_=>{if(_ instanceof Map&&(_.has("easing")&&(u=_.get("easing"),_.delete("easing")),!s))for(let y of _.values())if(y.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:u,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((_,y)=>{const E=t.collectedStyles.get(t.currentQuerySelector),D=E.get(y);let R=!0;D&&(s!=r&&s>=D.startTime&&r<=D.endTime&&(t.errors.push(function Rhe(n,e,t,i,r){return new Xe(3010,!1)}()),R=!1),s=D.startTime),R&&E.set(y,{startTime:s,endTime:r}),t.options&&function ufe(n,e,t){const i=e.params||{},r=LV(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function Che(n){return new Xe(3001,!1)}())})}(_,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Phe(){return new Xe(3011,!1)}()),i;let s=0;const u=[];let _=!1,y=!1,E=0;const D=e.steps.map(Qe=>{const Ve=this._makeStyleAst(Qe,t);let Bt=null!=Ve.offset?Ve.offset:function wfe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ve.styles),Qt=0;return null!=Bt&&(s++,Qt=Ve.offset=Bt),y=y||Qt<0||Qt>1,_=_||Qt<E,E=Qt,u.push(Qt),Ve});y&&t.errors.push(function Ohe(){return new Xe(3012,!1)}()),_&&t.errors.push(function Fhe(){return new Xe(3200,!1)}());const R=e.steps.length;let U=0;s>0&&s<R?t.errors.push(function Nhe(){return new Xe(3202,!1)}()):0==s&&(U=1/(R-1));const X=R-1,ie=t.currentTime,xe=t.currentAnimateTimings,ze=xe.duration;return D.forEach((Qe,Ve)=>{const Bt=U>0?Ve==X?1:U*Ve:u[Ve],Qt=Bt*ze;t.currentTime=ie+xe.delay+Qt,xe.duration=Qt,this._validateStyleAst(Qe,t),Qe.offset=Bt,i.styles.push(Qe)}),i}visitReference(e,t){return{type:8,animation:zl(this,dv(e.animation),t),options:Sm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Sm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Sm(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,u]=function yfe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(gfe,"")),n=n.replace(/@\*/g,pC).replace(/@\w+/g,t=>pC+"-"+t.slice(1)).replace(/:animating/g,z5),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Bl(t.collectedStyles,t.currentQuerySelector,new Map);const _=zl(this,dv(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:u,animation:_,originalSelector:e.selector,options:Sm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Lhe(){return new Xe(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:_C(e.timings,t.errors,!0);return{type:12,animation:zl(this,dv(e.animation),t),timings:i,options:null}}}class vfe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Sm(n){return n?(n=uv(n)).params&&(n.params=function bfe(n){return n?uv(n):null}(n.params)):n={},n}function $5(n,e,t){return{duration:n,delay:e,easing:t}}function G5(n,e,t,i,r,s,u=null,_=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:u,subTimeline:_}}class bC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Sfe=new RegExp(":enter","g"),Dfe=new RegExp(":leave","g");function W5(n,e,t,i,r,s=new Map,u=new Map,_,y,E=[]){return(new Afe).buildKeyframes(n,e,t,i,r,s,u,_,y,E)}class Afe{buildKeyframes(e,t,i,r,s,u,_,y,E,D=[]){E=E||new bC;const R=new q5(e,t,E,r,s,D,[]);R.options=y;const U=y.delay?tf(y.delay):0;R.currentTimeline.delayNextStep(U),R.currentTimeline.setStyles([u],null,R.errors,y),zl(this,i,R);const X=R.timelines.filter(ie=>ie.containsAnimation());if(X.length&&_.size){let ie;for(let xe=X.length-1;xe>=0;xe--){const ze=X[xe];if(ze.element===t){ie=ze;break}}ie&&!ie.allowOnlyTimelineStyles()&&ie.setStyles([_],null,R.errors,y)}return X.length?X.map(ie=>ie.buildKeyframes()):[G5(t,[],[],[],0,U,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,u=this._visitSubInstructions(i,r,r.options);s!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const u="number"==typeof s?s:tf(hv(s,r?.params??{},t.errors));i.delayNextStep(u)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const u=null!=i.duration?tf(i.duration):null,_=null!=i.delay?tf(i.delay):null;return 0!==u&&e.forEach(y=>{const E=t.appendInstructionToTimeline(y,u,_);s=Math.max(s,E.duration+E.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),zl(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=vC);const u=tf(s.delay);r.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>zl(this,u,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?tf(e.options.delay):0;e.steps.forEach(u=>{const _=t.createSubContext(e.options);s&&_.delayNextStep(s),zl(this,u,_),r=Math.max(r,_.currentTimeline.currentTime),i.push(_.currentTimeline)}),i.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return _C(t.params?hv(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,_=t.createSubContext().currentTimeline;_.easing=i.easing,e.styles.forEach(y=>{_.forwardTime((y.offset||0)*s),_.setStyles(y.styles,y.easing,t.errors,t.options),_.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(_),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?tf(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=vC);let u=i;const _=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=_.length;let y=null;_.forEach((E,D)=>{t.currentQueryIndex=D;const R=t.createSubContext(e.options,E);s&&R.delayNextStep(s),E===t.element&&(y=R.currentTimeline),zl(this,e.animation,R),R.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,R.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,u=Math.abs(s.duration),_=u*(t.currentQueryTotal-1);let y=u*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":y=_-y;break;case"full":y=i.currentStaggerTime}const D=t.currentTimeline;y&&D.delayNextStep(y);const R=D.currentTime;zl(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-R+(r.startTime-i.currentTimeline.startTime)}}const vC={};class q5{constructor(e,t,i,r,s,u,_,y){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=u,this.timelines=_,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new wC(this._driver,t,0),_.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=tf(i.duration)),null!=i.delay&&(r.delay=tf(i.delay));const s=i.params;if(s){let u=r.params;u||(u=this.options.params={}),Object.keys(s).forEach(_=>{(!t||!u.hasOwnProperty(_))&&(u[_]=hv(s[_],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new q5(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=vC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new Mfe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,u){let _=[];if(r&&_.push(this.element),e.length>0){e=(e=e.replace(Sfe,"."+this._enterClassName)).replace(Dfe,"."+this._leaveClassName);let E=this._driver.query(this.element,e,1!=i);0!==i&&(E=i<0?E.slice(E.length+i,E.length):E.slice(0,i)),_.push(...E)}return!s&&0==_.length&&u.push(function Bhe(n){return new Xe(3014,!1)}()),_}}class wC{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new wC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||ef),this._currentKeyframe.set(t,ef);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},u=function kfe(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,ef)}else Sp(r,t)}),t}(e,this._globalTimelineStyles);for(let[_,y]of u){const E=hv(y,s,i);this._pendingStyles.set(_,E),this._localTimelineStyles.has(_)||this._backFill.set(_,this._globalTimelineStyles.get(_)??ef),this._updateStyle(_,E)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((_,y)=>{const E=Sp(_,new Map,this._backFill);E.forEach((D,R)=>{"!"===D?e.add(R):D===ef&&t.add(R)}),i||E.set("offset",y/this.duration),r.push(E)});const s=e.size?mC(e.values()):[],u=t.size?mC(t.values()):[];if(i){const _=r[0],y=new Map(_);_.set("offset",0),y.set("offset",1),r=[_,y]}return G5(this.element,r,s,u,this.duration,this.startTime,this.easing,!1)}}class Mfe extends wC{constructor(e,t,i,r,s,u,_=!1){super(e,t,u.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=_,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],u=i+t,_=t/u,y=Sp(e[0]);y.set("offset",0),s.push(y);const E=Sp(e[0]);E.set("offset",UV(_)),s.push(E);const D=e.length-1;for(let R=1;R<=D;R++){let U=Sp(e[R]);const X=U.get("offset");U.set("offset",UV((t+X*i)/u)),s.push(U)}i=u,t=0,r="",e=s}return G5(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function UV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Z5{}const Rfe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Pfe extends Z5{normalizePropertyName(e,t){return U5(e)}normalizeStyleValue(e,t,i,r){let s="";const u=i.toString().trim();if(Rfe.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const _=i.match(/^[+-]?[\d\.]+([a-z]*)$/);_&&0==_[1].length&&r.push(function Ihe(n,e){return new Xe(3005,!1)}())}return u+s}}function HV(n,e,t,i,r,s,u,_,y,E,D,R,U){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:u,timelines:_,queriedElements:y,preStyleProps:E,postStyleProps:D,totalTime:R,errors:U}}const Y5={};class $V{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function Ofe(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,u,_,y,E,D){const R=[],U=this.ast.options&&this.ast.options.params||Y5,ie=this.buildStyles(i,_&&_.params||Y5,R),xe=y&&y.params||Y5,ze=this.buildStyles(r,xe,R),Qe=new Set,Ve=new Map,Bt=new Map,Qt="void"===r,Sn={params:Ffe(xe,U),delay:this.ast.options?.delay},Wi=D?[]:W5(e,t,this.ast.animation,s,u,ie,ze,Sn,E,R);let co=0;if(Wi.forEach(Aa=>{co=Math.max(Aa.duration+Aa.delay,co)}),R.length)return HV(t,this._triggerName,i,r,Qt,ie,ze,[],[],Ve,Bt,co,R);Wi.forEach(Aa=>{const Mu=Aa.element,sU=Bl(Ve,Mu,new Set);Aa.preStyleProps.forEach(Mm=>sU.add(Mm));const Ev=Bl(Bt,Mu,new Set);Aa.postStyleProps.forEach(Mm=>Ev.add(Mm)),Mu!==t&&Qe.add(Mu)});const Vl=mC(Qe.values());return HV(t,this._triggerName,i,r,Qt,ie,ze,Wi,Vl,Ve,Bt,co)}}function Ffe(n,e){const t=uv(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class Nfe{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=uv(this.defaultParams);return Object.keys(e).forEach(s=>{const u=e[s];null!==u&&(r[s]=u)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((u,_)=>{u&&(u=hv(u,r,t));const y=this.normalizer.normalizePropertyName(_,t);u=this.normalizer.normalizeStyleValue(_,y,u,t),i.set(_,u)})}),i}}class Bfe{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new Nfe(r.style,r.options&&r.options.params||{},i))}),GV(this.states,"true","1"),GV(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new $V(e,r,this.states))}),this.fallbackTransition=function zfe(n,e,t){return new $V(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,_)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(u=>u.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function GV(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Vfe=new bC;class jfe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=H5(this._driver,t,i,[]);if(i.length)throw function Ghe(n){return new Xe(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=IV(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let u;const _=new Map;if(s?(u=W5(this._driver,t,s,B5,hC,new Map,new Map,i,Vfe,r),u.forEach(D=>{const R=Bl(_,D.element,new Map);D.postStyleProps.forEach(U=>R.set(U,null))})):(r.push(function Whe(){return new Xe(3300,!1)}()),u=[]),r.length)throw function qhe(n){return new Xe(3504,!1)}();_.forEach((D,R)=>{D.forEach((U,X)=>{D.set(X,this._driver.computeStyle(R,X,ef))})});const E=Tp(u.map(D=>{const R=_.get(D.element);return this._buildPlayer(D,new Map,R)}));return this._playersById.set(e,E),E.onDestroy(()=>this.destroy(e)),this.players.push(E),E}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Zhe(n){return new Xe(3301,!1)}();return t}listen(e,t,i,r){const s=F5(t,"","","");return P5(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const WV="ng-animate-queued",X5="ng-animate-disabled",Wfe=[],qV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qfe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Sc="__ng_removed";class K5{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function Kfe(n){return n??null}(i?e.value:e),i){const s=uv(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const fv="void",Q5=new K5(fv);class Zfe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ic(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function Yhe(n,e){return new Xe(3302,!1)}();if(null==i||0==i.length)throw function Xhe(n){return new Xe(3303,!1)}();if(!function Qfe(n){return"start"==n||"done"==n}(i))throw function Khe(n,e){return new Xe(3400,!1)}();const s=Bl(this._elementListeners,e,[]),u={name:t,phase:i,callback:r};s.push(u);const _=Bl(this._engine.statesByElement,e,new Map);return _.has(t)||(Ic(e,fC),Ic(e,fC+"-"+t),_.set(t,Q5)),()=>{this._engine.afterFlush(()=>{const y=s.indexOf(u);y>=0&&s.splice(y,1),this._triggers.has(t)||_.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Qhe(n){return new Xe(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),u=new J5(this.id,t,e);let _=this._engine.statesByElement.get(e);_||(Ic(e,fC),Ic(e,fC+"-"+t),this._engine.statesByElement.set(e,_=new Map));let y=_.get(t);const E=new K5(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&y&&E.absorbOptions(y.options),_.set(t,E),y||(y=Q5),E.value!==fv&&y.value===E.value){if(!function tpe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(y.params,E.params)){const xe=[],ze=s.matchStyles(y.value,y.params,xe),Qe=s.matchStyles(E.value,E.params,xe);xe.length?this._engine.reportError(xe):this._engine.afterFlush(()=>{Tm(e,ze),zd(e,Qe)})}return}const U=Bl(this._engine.playersByElement,e,[]);U.forEach(xe=>{xe.namespaceId==this.id&&xe.triggerName==t&&xe.queued&&xe.destroy()});let X=s.matchTransition(y.value,E.value,e,E.params),ie=!1;if(!X){if(!r)return;X=s.fallbackTransition,ie=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:X,fromState:y,toState:E,player:u,isFallbackTransition:ie}),ie||(Ic(e,WV),u.onStart(()=>{Qg(e,WV)})),u.onDone(()=>{let xe=this.players.indexOf(u);xe>=0&&this.players.splice(xe,1);const ze=this._engine.playersByElement.get(e);if(ze){let Qe=ze.indexOf(u);Qe>=0&&ze.splice(Qe,1)}}),this.players.push(u),U.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,pC,!0);i.forEach(r=>{if(r[Sc])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(u=>u.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),u=new Map;if(s){const _=[];if(s.forEach((y,E)=>{if(u.set(E,y.value),this._triggers.has(E)){const D=this.trigger(e,E,fv,r);D&&_.push(D)}}),_.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),i&&Tp(_).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const u=s.name;if(r.has(u))return;r.add(u);const y=this._triggers.get(u).fallbackTransition,E=i.get(u)||Q5,D=new K5(fv),R=new J5(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:y,fromState:E,toState:D,player:R,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let u=e;for(;u=u.parentNode;)if(i.statesByElement.get(u)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Sc];(!s||s===qV)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ic(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,u=this._elementListeners.get(s);u&&u.forEach(_=>{if(_.name==i.triggerName){const y=F5(s,i.triggerName,i.fromState.value,i.toState.value);y._data=e,P5(i.player,_.phase,y,_.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,u=r.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class Yfe{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Zfe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let u=!1,_=this.driver.getParentElement(t);for(;_;){const y=r.get(_);if(y){const E=i.indexOf(y);i.splice(E+1,0,e),u=!0;break}_=this.driver.getParentElement(_)}u||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(EC(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!EC(t))return;const s=t[Sc];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ic(e,X5)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Qg(e,X5))}removeNode(e,t,i){if(EC(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Sc]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return EC(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,pC,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,z5,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Tp(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Sc];if(t&&t.setForRemoval){if(e[Sc]=qV,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(X5)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Ic(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Tp(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function Jhe(n){return new Xe(3402,!1)}()}_flushAnimations(e,t){const i=new bC,r=[],s=new Map,u=[],_=new Map,y=new Map,E=new Map,D=new Set;this.disabledNodes.forEach(fn=>{D.add(fn);const Mn=this.driver.query(fn,".ng-animate-queued",!0);for(let jn=0;jn<Mn.length;jn++)D.add(Mn[jn])});const R=this.bodyNode,U=Array.from(this.statesByElement.keys()),X=XV(U,this.collectedEnterElements),ie=new Map;let xe=0;X.forEach((fn,Mn)=>{const jn=B5+xe++;ie.set(Mn,jn),fn.forEach(qi=>Ic(qi,jn))});const ze=[],Qe=new Set,Ve=new Set;for(let fn=0;fn<this.collectedLeaveElements.length;fn++){const Mn=this.collectedLeaveElements[fn],jn=Mn[Sc];jn&&jn.setForRemoval&&(ze.push(Mn),Qe.add(Mn),jn.hasAnimation?this.driver.query(Mn,".ng-star-inserted",!0).forEach(qi=>Qe.add(qi)):Ve.add(Mn))}const Bt=new Map,Qt=XV(U,Array.from(Qe));Qt.forEach((fn,Mn)=>{const jn=hC+xe++;Bt.set(Mn,jn),fn.forEach(qi=>Ic(qi,jn))}),e.push(()=>{X.forEach((fn,Mn)=>{const jn=ie.get(Mn);fn.forEach(qi=>Qg(qi,jn))}),Qt.forEach((fn,Mn)=>{const jn=Bt.get(Mn);fn.forEach(qi=>Qg(qi,jn))}),ze.forEach(fn=>{this.processLeaveNode(fn)})});const Sn=[],Wi=[];for(let fn=this._namespaceList.length-1;fn>=0;fn--)this._namespaceList[fn].drainQueuedTransitions(t).forEach(jn=>{const qi=jn.player,Ss=jn.element;if(Sn.push(qi),this.collectedEnterElements.length){const la=Ss[Sc];if(la&&la.setForMove){if(la.previousTriggersValues&&la.previousTriggersValues.has(jn.triggerName)){const km=la.previousTriggersValues.get(jn.triggerName),Dc=this.statesByElement.get(jn.element);if(Dc&&Dc.has(jn.triggerName)){const UC=Dc.get(jn.triggerName);UC.value=km,Dc.set(jn.triggerName,UC)}}return void qi.destroy()}}const jd=!R||!this.driver.containsElement(R,Ss),jl=Bt.get(Ss),Dp=ie.get(Ss),uo=this._buildInstruction(jn,i,Dp,jl,jd);if(uo.errors&&uo.errors.length)return void Wi.push(uo);if(jd)return qi.onStart(()=>Tm(Ss,uo.fromStyles)),qi.onDestroy(()=>zd(Ss,uo.toStyles)),void r.push(qi);if(jn.isFallbackTransition)return qi.onStart(()=>Tm(Ss,uo.fromStyles)),qi.onDestroy(()=>zd(Ss,uo.toStyles)),void r.push(qi);const cU=[];uo.timelines.forEach(la=>{la.stretchStartingKeyframe=!0,this.disabledNodes.has(la.element)||cU.push(la)}),uo.timelines=cU,i.append(Ss,uo.timelines),u.push({instruction:uo,player:qi,element:Ss}),uo.queriedElements.forEach(la=>Bl(_,la,[]).push(qi)),uo.preStyleProps.forEach((la,km)=>{if(la.size){let Dc=y.get(km);Dc||y.set(km,Dc=new Set),la.forEach((UC,vR)=>Dc.add(vR))}}),uo.postStyleProps.forEach((la,km)=>{let Dc=E.get(km);Dc||E.set(km,Dc=new Set),la.forEach((UC,vR)=>Dc.add(vR))})});if(Wi.length){const fn=[];Wi.forEach(Mn=>{fn.push(function efe(n,e){return new Xe(3505,!1)}())}),Sn.forEach(Mn=>Mn.destroy()),this.reportError(fn)}const co=new Map,Vl=new Map;u.forEach(fn=>{const Mn=fn.element;i.has(Mn)&&(Vl.set(Mn,Mn),this._beforeAnimationBuild(fn.player.namespaceId,fn.instruction,co))}),r.forEach(fn=>{const Mn=fn.element;this._getPreviousPlayers(Mn,!1,fn.namespaceId,fn.triggerName,null).forEach(qi=>{Bl(co,Mn,[]).push(qi),qi.destroy()})});const Aa=ze.filter(fn=>QV(fn,y,E)),Mu=new Map;YV(Mu,this.driver,Ve,E,ef).forEach(fn=>{QV(fn,y,E)&&Aa.push(fn)});const Ev=new Map;X.forEach((fn,Mn)=>{YV(Ev,this.driver,new Set(fn),y,"!")}),Aa.forEach(fn=>{const Mn=Mu.get(fn),jn=Ev.get(fn);Mu.set(fn,new Map([...Mn?.entries()??[],...jn?.entries()??[]]))});const Mm=[],aU=[],lU={};u.forEach(fn=>{const{element:Mn,player:jn,instruction:qi}=fn;if(i.has(Mn)){if(D.has(Mn))return jn.onDestroy(()=>zd(Mn,qi.toStyles)),jn.disabled=!0,jn.overrideTotalTime(qi.totalTime),void r.push(jn);let Ss=lU;if(Vl.size>1){let jl=Mn;const Dp=[];for(;jl=jl.parentNode;){const uo=Vl.get(jl);if(uo){Ss=uo;break}Dp.push(jl)}Dp.forEach(uo=>Vl.set(uo,Ss))}const jd=this._buildAnimation(jn.namespaceId,qi,co,s,Ev,Mu);if(jn.setRealPlayer(jd),Ss===lU)Mm.push(jn);else{const jl=this.playersByElement.get(Ss);jl&&jl.length&&(jn.parentPlayer=Tp(jl)),r.push(jn)}}else Tm(Mn,qi.fromStyles),jn.onDestroy(()=>zd(Mn,qi.toStyles)),aU.push(jn),D.has(Mn)&&r.push(jn)}),aU.forEach(fn=>{const Mn=s.get(fn.element);if(Mn&&Mn.length){const jn=Tp(Mn);fn.setRealPlayer(jn)}}),r.forEach(fn=>{fn.parentPlayer?fn.syncPlayerEvents(fn.parentPlayer):fn.destroy()});for(let fn=0;fn<ze.length;fn++){const Mn=ze[fn],jn=Mn[Sc];if(Qg(Mn,hC),jn&&jn.hasAnimation)continue;let qi=[];if(_.size){let jd=_.get(Mn);jd&&jd.length&&qi.push(...jd);let jl=this.driver.query(Mn,z5,!0);for(let Dp=0;Dp<jl.length;Dp++){let uo=_.get(jl[Dp]);uo&&uo.length&&qi.push(...uo)}}const Ss=qi.filter(jd=>!jd.destroyed);Ss.length?Jfe(this,Mn,Ss):this.processLeaveNode(Mn)}return ze.length=0,Mm.forEach(fn=>{this.players.push(fn),fn.onDone(()=>{fn.destroy();const Mn=this.players.indexOf(fn);this.players.splice(Mn,1)}),fn.play()}),Mm}elementContainsData(e,t){let i=!1;const r=t[Sc];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let u=[];if(t){const _=this.playersByQueriedElement.get(e);_&&(u=_)}else{const _=this.playersByElement.get(e);if(_){const y=!s||s==fv;_.forEach(E=>{E.queued||!y&&E.triggerName!=r||u.push(E)})}}return(i||r)&&(u=u.filter(_=>!(i&&i!=_.namespaceId||r&&r!=_.triggerName))),u}_beforeAnimationBuild(e,t,i){const s=t.element,u=t.isRemovalTransition?void 0:e,_=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const E=y.element,D=E!==s,R=Bl(i,E,[]);this._getPreviousPlayers(E,D,u,_,t.toState).forEach(X=>{const ie=X.getRealPlayer();ie.beforeDestroy&&ie.beforeDestroy(),X.destroy(),R.push(X)})}Tm(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,u){const _=t.triggerName,y=t.element,E=[],D=new Set,R=new Set,U=t.timelines.map(ie=>{const xe=ie.element;D.add(xe);const ze=xe[Sc];if(ze&&ze.removedBeforeQueried)return new cv(ie.duration,ie.delay);const Qe=xe!==y,Ve=function epe(n){const e=[];return KV(n,e),e}((i.get(xe)||Wfe).map(co=>co.getRealPlayer())).filter(co=>!!co.element&&co.element===xe),Bt=s.get(xe),Qt=u.get(xe),Sn=IV(this._normalizer,ie.keyframes,Bt,Qt),Wi=this._buildPlayer(ie,Sn,Ve);if(ie.subTimeline&&r&&R.add(xe),Qe){const co=new J5(e,_,xe);co.setRealPlayer(Wi),E.push(co)}return Wi});E.forEach(ie=>{Bl(this.playersByQueriedElement,ie.element,[]).push(ie),ie.onDone(()=>function Xfe(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,ie.element,ie))}),D.forEach(ie=>Ic(ie,OV));const X=Tp(U);return X.onDestroy(()=>{D.forEach(ie=>Qg(ie,OV)),zd(y,t.toStyles)}),R.forEach(ie=>{Bl(r,ie,[]).push(X)}),X}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new cv(e.duration,e.delay)}}class J5{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new cv,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>P5(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Bl(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function EC(n){return n&&1===n.nodeType}function ZV(n,e){const t=n.style.display;return n.style.display=e??"none",t}function YV(n,e,t,i,r){const s=[];t.forEach(y=>s.push(ZV(y)));const u=[];i.forEach((y,E)=>{const D=new Map;y.forEach(R=>{const U=e.computeStyle(E,R,r);D.set(R,U),(!U||0==U.length)&&(E[Sc]=qfe,u.push(E))}),n.set(E,D)});let _=0;return t.forEach(y=>ZV(y,s[_++])),u}function XV(n,e){const t=new Map;if(n.forEach(_=>t.set(_,[])),0==e.length)return t;const r=new Set(e),s=new Map;function u(_){if(!_)return 1;let y=s.get(_);if(y)return y;const E=_.parentNode;return y=t.has(E)?E:r.has(E)?1:u(E),s.set(_,y),y}return e.forEach(_=>{const y=u(_);1!==y&&t.get(y).push(_)}),t}function Ic(n,e){n.classList?.add(e)}function Qg(n,e){n.classList?.remove(e)}function Jfe(n,e,t){Tp(t).onDone(()=>n.processLeaveNode(e))}function KV(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof TV?KV(i.players,e):e.push(i)}}function QV(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class CC{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Yfe(e,t,i),this._timelineEngine=new jfe(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const u=e+"-"+r;let _=this._triggerCache[u];if(!_){const y=[],D=H5(this._driver,s,y,[]);if(y.length)throw function Hhe(n,e){return new Xe(3404,!1)}();_=function Lfe(n,e,t){return new Bfe(n,e,t)}(r,D,this._normalizer),this._triggerCache[u]=_}this._transitionEngine.registerTrigger(t,r,_)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,u]=DV(i);this._timelineEngine.command(s,t,u,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[u,_]=DV(i);return this._timelineEngine.listen(u,t,_,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ipe=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&zd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(zd(this._element,this._initialStyles),this._endStyles&&(zd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Tm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Tm(this._element,this._endStyles),this._endStyles=null),zd(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function eR(n){let e=null;return n.forEach((t,i)=>{(function rpe(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class JV{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:BV(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class ope{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return MV(e,t)}getParentElement(e){return N5(e)}query(e,t,i){return kV(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,u=[]){const y={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(y.easing=s);const E=new Map,D=u.filter(X=>X instanceof JV);(function hfe(n,e){return 0===n||0===e})(i,r)&&D.forEach(X=>{X.currentSnapshot.forEach((ie,xe)=>E.set(xe,ie))});let R=function cfe(n){return n.length?n[0]instanceof Map?n:n.map(e=>FV(e)):[]}(t).map(X=>Sp(X));R=function ffe(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,u)=>{i.has(u)||r.push(u),i.set(u,s)}),r.length)for(let s=1;s<e.length;s++){let u=e[s];r.forEach(_=>u.set(_,BV(n,_)))}}return e}(e,R,E);const U=function npe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=eR(e[0]),e.length>1&&(i=eR(e[e.length-1]))):e instanceof Map&&(t=eR(e)),t||i?new ipe(n,t,i):null}(e,R);return new JV(e,R,y,U)}}let spe=(()=>{class n extends vV{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Co.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?wV(t):t;return ej(this._renderer,null,i,"register",[r]),new ape(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(lt(C_),lt(ir))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();class ape extends yhe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new lpe(this._id,e,t||{},this._renderer)}}class lpe{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return ej(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function ej(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const tj="@.disabled";let cpe=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,u)=>{const _=u?.parentNode(s);_&&u.removeChild(_,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let D=this._rendererCache.get(s);return D||(D=new nj("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,D)),D}const u=i.id,_=i.id+"-"+this._currentId;this._currentId++,this.engine.register(_,t);const y=D=>{Array.isArray(D)?D.forEach(y):this.engine.registerTrigger(u,_,t,D.name,D)};return i.data.animation.forEach(y),new upe(this,_,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,_]=s;u(_)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(lt(C_),lt(CC),lt(pi))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();class nj{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==tj?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class upe extends nj{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==tj?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function dpe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),u="";return"@"!=s.charAt(0)&&([s,u]=function hpe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,u,_=>{this.factory.scheduleListenerCallback(_._data||-1,i,_)})}return this.delegate.listen(e,t,i)}}const ij=[{provide:vV,useClass:spe},{provide:Z5,useFactory:function ppe(){return new Pfe}},{provide:CC,useClass:(()=>{class n extends CC{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(lt(ir),lt(L5),lt(Z5),lt(Fh))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})()},{provide:C_,useFactory:function _pe(n,e,t){return new cpe(n,e,t)},deps:[kI,CC,pi]}],tR=[{provide:L5,useFactory:()=>new ope},{provide:ny,useValue:"BrowserAnimations"},...ij],rj=[{provide:L5,useClass:RV},{provide:ny,useValue:"NoopAnimations"},...ij];let nR,mpe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?rj:tR}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({providers:tR,imports:[NF]}),n})(),gpe=(()=>{class n{constructor(){}guardarRegistro(t){let i=JSON.parse(localStorage.getItem("registros")||"[]");i.push(t),localStorage.setItem("registros",JSON.stringify(i))}obtenerRegistros(){return JSON.parse(localStorage.getItem("registros")||"[]")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{nR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{nR=!1}let pv,SC,Im,nf=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?EI(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!nR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(lt(xs))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _v(n){return function xpe(){if(null==pv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>pv=!0}))}finally{pv=pv||!1}return pv}()?n:!!n.capture}function sj(){if(null==Im){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Im=!1,Im;if("scrollBehavior"in document.documentElement.style)Im=!0;else{const n=Element.prototype.scrollTo;Im=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Im}function mv(){if("object"!=typeof document||!document)return 0;if(null==SC){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),SC=0,0===n.scrollLeft&&(n.scrollLeft=1,SC=0===n.scrollLeft?1:2),n.remove()}return SC}function rR(n){return n.composedPath?n.composedPath()[0]:n.target}function oR(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}let Spe=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({providers:[Spe]}),n})();function IC(n){return Array.isArray(n)?n:[n]}function Yo(n){return null==n?"":"string"==typeof n?n:`${n}px`}function sR(n){return n instanceof to?n.nativeElement:n}function DC(n){return mi((e,t)=>{ue(n).subscribe(Qn(t,()=>t.complete(),an)),!t.closed&&e.subscribe(t)})}const uj=new Set;let ex,Mpe=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Rpe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function kpe(n){if(!uj.has(n))try{ex||(ex=document.createElement("style"),ex.setAttribute("type","text/css"),document.head.appendChild(ex)),ex.sheet&&(ex.sheet.insertRule(`@media ${n} {body{ }}`,0),uj.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(lt(nf))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Rpe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Ppe=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Gn}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return dj(IC(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=xE(dj(IC(t)).map(u=>this._registerQuery(u).observable));return s=Bg(s.pipe(sa(1)),s.pipe(function Dpe(n){return Ts((e,t)=>n<=t)}(1),function Ape(n,e=Xy){return mi((t,i)=>{let r=null,s=null,u=null;const _=()=>{if(r){r.unsubscribe(),r=null;const E=s;s=null,i.next(E)}};function y(){const E=u+n,D=e.now();if(D<E)return r=this.schedule(void 0,E-D),void i.add(r);_()}t.subscribe(Qn(i,E=>{s=E,u=e.now(),r||(r=e.schedule(y,n),i.add(r))},()=>{_(),i.complete()},void 0,()=>{s=r=null}))})}(0))),s.pipe(Gt(u=>{const _={matches:!1,breakpoints:{}};return u.forEach(({matches:y,query:E})=>{_.matches=_.matches||y,_.breakpoints[E]=y}),_}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new bn(u=>{const _=y=>this._zone.run(()=>u.next(y));return i.addListener(_),()=>{i.removeListener(_)}}).pipe($k(i),Gt(({matches:u})=>({query:t,matches:u})),DC(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(lt(Mpe),lt(pi))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dj(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const _j="cdk-high-contrast-black-on-white",mj="cdk-high-contrast-white-on-black",aR="cdk-high-contrast-active";let gj=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Ht(Ppe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(aR,_j,mj),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(aR,_j):2===i&&t.add(aR,mj)}}}return n.\u0275fac=function(t){return new(t||n)(lt(nf),lt(ir))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$pe=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(lt(gj))},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[lj]}),n})();const Gpe=["addListener","removeListener"],Wpe=["addEventListener","removeEventListener"],qpe=["on","off"];function tx(n,e,t,i){if(zt(t)&&(i=t,t=void 0),i)return tx(n,e,t).pipe(jk(i));const[r,s]=function Xpe(n){return zt(n.addEventListener)&&zt(n.removeEventListener)}(n)?Wpe.map(u=>_=>n[u](e,_,t)):function Zpe(n){return zt(n.addListener)&&zt(n.removeListener)}(n)?Gpe.map(xj(n,e)):function Ype(n){return zt(n.on)&&zt(n.off)}(n)?qpe.map(xj(n,e)):[];if(!r&&Pa(n))return Pt(u=>tx(u,e,t))(ue(n));if(!r)throw new TypeError("Invalid event target");return new bn(u=>{const _=(...y)=>u.next(1<y.length?y:y[0]);return r(_),()=>s(_)})}function xj(n,e){return t=>i=>n[t](e,i)}const gv={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=gv;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new Le(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=gv;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=gv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},Jpe=new class Qpe extends lw{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Kpe extends aw{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=gv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(gv.cancelAnimationFrame(t),e._scheduled=void 0)}});let lR,e_e=1;const AC={};function yj(n){return n in AC&&(delete AC[n],!0)}const t_e={setImmediate(n){const e=e_e++;return AC[e]=!0,lR||(lR=Promise.resolve()),lR.then(()=>yj(e)&&n()),e},clearImmediate(n){yj(n)}},{setImmediate:n_e,clearImmediate:i_e}=t_e,MC={setImmediate(...n){const{delegate:e}=MC;return(e?.setImmediate||n_e)(...n)},clearImmediate(n){const{delegate:e}=MC;return(e?.clearImmediate||i_e)(n)},delegate:void 0},s_e=new class o_e extends lw{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class r_e extends aw{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=MC.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(MC.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function bj(n=0,e,t=ree){let i=-1;return null!=e&&(on(e)?t=e:i=e),new bn(r=>{let s=function l_e(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let u=0;return t.schedule(function(){r.closed||(r.next(u++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function cR(n,e=Xy){return function a_e(n){return mi((e,t)=>{let i=!1,r=null,s=null,u=!1;const _=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const E=r;r=null,t.next(E)}u&&t.complete()},y=()=>{s=null,u&&t.complete()};e.subscribe(Qn(t,E=>{i=!0,r=E,s||ue(n(E)).subscribe(s=Qn(t,_,y))},()=>{u=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>bj(n,e))}const c_e=new vt("cdk-dir-doc",{providedIn:"root",factory:function u_e(){return Ht(ir)}}),d_e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let kC=(()=>{class n{constructor(t){this.value="ltr",this.change=new Pr,t&&(this.value=function h_e(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?d_e.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(lt(c_e,8))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({}),n})();const f_e=["contentWrapper"],p_e=["*"],__e=new vt("VIRTUAL_SCROLL_STRATEGY");let RC=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Gn,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new bn(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(cR(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ct()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Ts(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=sR(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>tx(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(lt(pi),lt(nf),lt(ir,8))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vj=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new Gn,this._elementScrolled=new bn(u=>this.ngZone.runOutsideAngular(()=>tx(this.elementRef.nativeElement,"scroll").pipe(DC(this._destroyed)).subscribe(u)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=mv()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==mv()?t.left=t.right:1==mv()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;sj()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const u=this.dir&&"rtl"==this.dir.value;return"start"==t?t=u?r:i:"end"==t&&(t=u?i:r),u&&2==mv()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:u&&1==mv()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(nt(to),nt(RC),nt(pi),nt(kC,8))},n.\u0275dir=xn({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),n})(),uR=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Gn,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(cR(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(lt(nf),lt(pi),lt(ir,8))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wj=new vt("VIRTUAL_SCROLLABLE");let x_e=(()=>{class n extends vj{constructor(t,i,r,s){super(t,i,r,s)}measureViewportSize(t){const i=this.elementRef.nativeElement;return"horizontal"===t?i.clientWidth:i.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(nt(to),nt(RC),nt(pi),nt(kC,8))},n.\u0275dir=xn({type:n,features:[Ki]}),n})();const b_e=typeof requestAnimationFrame<"u"?Jpe:s_e;let v_e=(()=>{class n extends x_e{get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=function cj(n){return null!=n&&"false"!=`${n}`}(t)}constructor(t,i,r,s,u,_,y,E){super(t,_,r,u),this.elementRef=t,this._changeDetectorRef=i,this._scrollStrategy=s,this.scrollable=E,this._platform=Ht(nf),this._detachedSubject=new Gn,this._renderedRangeSubject=new Gn,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new bn(D=>this._scrollStrategy.scrolledIndexChange.subscribe(R=>Promise.resolve().then(()=>this.ngZone.run(()=>D.next(R))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Le.EMPTY,this._viewportChanges=y.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe($k(null),cR(0,b_e)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(DC(this._detachedSubject)).subscribe(i=>{const r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){(function y_e(n,e){return n.start==e.start&&n.end==e.end})(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,i="to-start"){t=this.appendOnly&&"to-start"===i?0:t;const s="horizontal"==this.orientation,u=s?"X":"Y";let y=`translate${u}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===i&&(y+=` translate${u}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=y&&(this._renderedContentTransform=y,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,i="auto"){const r={behavior:i};"horizontal"===this.orientation?r.start=t:r.top=t,this.scrollable.scrollTo(r)}scrollToIndex(t,i="auto"){this._scrollStrategy.scrollToIndex(t,i)}measureScrollOffset(t){let i;return i=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,i(t??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let i;const r="left",s="right",u="rtl"==this.dir?.value;i="start"==t?u?s:r:"end"==t?u?r:s:t||("horizontal"===this.orientation?"left":"top");const _=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-_}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of t)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(t){return new(t||n)(nt(to),nt(Ly),nt(pi),nt(__e,8),nt(kC,8),nt(RC),nt(uR),nt(wj,8))},n.\u0275cmp=zr({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,i){if(1&t&&HO(f_e,7),2&t){let r;LS(r=function BS(){return function NG(n,e){return n[is].queries[e].queryList}(Je(),dx())}())&&(i._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,i){2&t&&Sy("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[Rr([{provide:vj,useFactory:(e,t)=>e||t,deps:[[new Gr,new n0(wj)],n]}]),Ki,SS],ngContentSelectors:p_e,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,i){1&t&&(function nP(n){const e=Je()[Ur][W];if(!e.projection){const i=e.projection=mh(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const u=n?nH(s,n):0;null!==u&&(r[u]?r[u].projectionNext=s:i[u]=s,r[u]=s),s=s.next}}}(),ve(0,"div",0,1),function iP(n,e=0,t){const i=Je(),r=nn(),s=o(r,wn+n,16,null,t||null);null===s.projection&&(s.projection=e),oc(),(!i[Zs]||Ti())&&32!=(32&s.flags)&&function c1(n,e,t){u1(e[sn],0,e,t,Lx(n,t,e),zx(t.parent||e[W],t,e))}(r,i,s)}(2),Ce(),Xt(3,"div",2)),2&t&&(oi(3),pS("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})(),PC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({}),n})(),Ej=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[xv,PC,v_e,xv,PC]}),n})();class dR{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class w_e extends dR{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class E_e extends dR{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class C_e extends dR{constructor(e){super(),this.element=e instanceof to?e.nativeElement:e}}class T_e{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof w_e?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof E_e?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof C_e?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class S_e extends T_e{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=u=>{const _=u.element,y=this._document.createComment("dom-portal");_.parentNode.insertBefore(y,_),this.outletElement.appendChild(_),this._attachedPortal=u,super.setDisposeFn(()=>{y.parentNode&&y.parentNode.replaceChild(_,y)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||as.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Cj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({}),n})();const Tj=sj();class I_e{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Yo(-this._previousScrollPosition.left),e.style.top=Yo(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",u=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Tj&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Tj&&(i.scrollBehavior=s,r.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class D_e{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Ts(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Sj{enable(){}disable(){}attach(){}}function hR(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function Ij(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class A_e{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();hR(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let M_e=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Sj,this.close=u=>new D_e(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new I_e(this._viewportRuler,this._document),this.reposition=u=>new A_e(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(lt(RC),lt(uR),lt(pi),lt(ir))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class k_e{constructor(e){if(this.scrollStrategy=new Sj,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class R_e{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Dj=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(lt(ir))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P_e=(()=>{class n extends Dj{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let u=s.length-1;u>-1;u--)if(s[u]._keydownEvents.observers.length>0){const _=s[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>_.next(r)):_.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(lt(ir),lt(pi,8))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O_e=(()=>{class n extends Dj{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=rR(s)},this._clickListener=s=>{const u=rR(s),_="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const y=this._attachedOverlays.slice();for(let E=y.length-1;E>-1;E--){const D=y[E];if(D._outsidePointerEvents.observers.length<1||!D.hasAttached())continue;if(D.overlayElement.contains(u)||D.overlayElement.contains(_))break;const R=D._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>R.next(s)):R.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(lt(ir),lt(nf),lt(pi,8))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Aj=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||oR()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),oR()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(lt(ir),lt(nf))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class F_e{constructor(e,t,i,r,s,u,_,y,E,D=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=u,this._document=_,this._location=y,this._outsideClickDispatcher=E,this._animationsDisabled=D,this._backdropElement=null,this._backdropClick=new Gn,this._attachments=new Gn,this._detachments=new Gn,this._locationChanges=Le.EMPTY,this._backdropClickHandler=R=>this._backdropClick.next(R),this._backdropTransitionendHandler=R=>{this._disposeBackdrop(R.target)},this._keydownEvents=new Gn,this._outsidePointerEvents=new Gn,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(sa(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Yo(this._config.width),e.height=Yo(this._config.height),e.minWidth=Yo(this._config.minWidth),e.minHeight=Yo(this._config.minHeight),e.maxWidth=Yo(this._config.maxWidth),e.maxHeight=Yo(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=IC(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(DC(Rn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Mj="cdk-overlay-connected-position-bounding-box",N_e=/([A-Za-z%]+)$/;class L_e{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Gn,this._resizeSubscription=Le.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(Mj),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let u;for(let _ of this._preferredPositions){let y=this._getOriginPoint(e,r,_),E=this._getOverlayPoint(y,t,_),D=this._getOverlayFit(E,t,i,_);if(D.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(_,y);this._canFitWithFlexibleDimensions(D,E,i)?s.push({position:_,origin:y,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(y,_)}):(!u||u.overlayFit.visibleArea<D.visibleArea)&&(u={overlayFit:D,overlayPoint:E,originPoint:y,position:_,overlayRect:t})}if(s.length){let _=null,y=-1;for(const E of s){const D=E.boundingBoxRect.width*E.boundingBoxRect.height*(E.position.weight||1);D>y&&(y=D,_=E)}return this._isPushed=!1,void this._applyPosition(_.position,_.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Dm(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Mj),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const u=this._isRtl()?e.right:e.left,_=this._isRtl()?e.left:e.right;r="start"==i.originX?u:_}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=Rj(t);let{x:u,y:_}=e,y=this._getOffset(r,"x"),E=this._getOffset(r,"y");y&&(u+=y),E&&(_+=E);let U=0-_,X=_+s.height-i.height,ie=this._subtractOverflows(s.width,0-u,u+s.width-i.width),xe=this._subtractOverflows(s.height,U,X),ze=ie*xe;return{visibleArea:ze,isCompletelyWithinViewport:s.width*s.height===ze,fitsInViewportVertically:xe===s.height,fitsInViewportHorizontally:ie==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,u=kj(this._overlayRef.getConfig().minHeight),_=kj(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=u&&u<=r)&&(e.fitsInViewportHorizontally||null!=_&&_<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=Rj(t),s=this._viewportRect,u=Math.max(e.x+r.width-s.width,0),_=Math.max(e.y+r.height-s.height,0),y=Math.max(s.top-i.top-e.y,0),E=Math.max(s.left-i.left-e.x,0);let D=0,R=0;return D=r.width<=s.width?E||-u:e.x<this._viewportMargin?s.left-i.left-e.x:0,R=r.height<=s.height?y||-_:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:D,y:R},{x:e.x+D,y:e.y+R}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new R_e(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,u,_,D,R,U;if("top"===t.overlayY)u=e.y,s=i.height-u+this._viewportMargin;else if("bottom"===t.overlayY)_=i.height-e.y+2*this._viewportMargin,s=i.height-_+this._viewportMargin;else{const X=Math.min(i.bottom-e.y+i.top,e.y),ie=this._lastBoundingBoxSize.height;s=2*X,u=e.y-X,s>ie&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.y-ie/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)U=i.width-e.x+this._viewportMargin,D=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)R=e.x,D=i.right-e.x;else{const X=Math.min(i.right-e.x+i.left,e.x),ie=this._lastBoundingBoxSize.width;D=2*X,R=e.x-X,D>ie&&!this._isInitialRender&&!this._growAfterOpen&&(R=e.x-ie/2)}return{top:u,left:R,bottom:_,right:U,width:D,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;r.height=Yo(i.height),r.top=Yo(i.top),r.bottom=Yo(i.bottom),r.width=Yo(i.width),r.left=Yo(i.left),r.right=Yo(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Yo(s)),u&&(r.maxWidth=Yo(u))}this._lastBoundingBoxSize=i,Dm(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Dm(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Dm(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(r){const D=this._viewportRuler.getViewportScrollPosition();Dm(i,this._getExactOverlayY(t,e,D)),Dm(i,this._getExactOverlayX(t,e,D))}else i.position="static";let _="",y=this._getOffset(t,"x"),E=this._getOffset(t,"y");y&&(_+=`translateX(${y}px) `),E&&(_+=`translateY(${E}px)`),i.transform=_.trim(),u.maxHeight&&(r?i.maxHeight=Yo(u.maxHeight):s&&(i.maxHeight="")),u.maxWidth&&(r?i.maxWidth=Yo(u.maxWidth):s&&(i.maxWidth="")),Dm(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Yo(s.y),r}_getExactOverlayX(e,t,i){let u,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),u=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===u?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Yo(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ij(e,i),isOriginOutsideView:hR(e,i),isOverlayClipped:Ij(t,i),isOverlayOutsideView:hR(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&IC(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof to)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Dm(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function kj(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(N_e);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Rj(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Pj="cdk-global-overlay-wrapper";class B_e{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Pj),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:u,maxHeight:_}=i,y=!("100%"!==r&&"100vw"!==r||u&&"100%"!==u&&"100vw"!==u),E=!("100%"!==s&&"100vh"!==s||_&&"100%"!==_&&"100vh"!==_),D=this._xPosition,R=this._xOffset,U="rtl"===this._overlayRef.getConfig().direction;let X="",ie="",xe="";y?xe="flex-start":"center"===D?(xe="center",U?ie=R:X=R):U?"left"===D||"end"===D?(xe="flex-end",X=R):("right"===D||"start"===D)&&(xe="flex-start",ie=R):"left"===D||"start"===D?(xe="flex-start",X=R):("right"===D||"end"===D)&&(xe="flex-end",ie=R),e.position=this._cssPosition,e.marginLeft=y?"0":X,e.marginTop=E?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=y?"0":ie,t.justifyContent=xe,t.alignItems=E?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Pj),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let z_e=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new B_e}flexibleConnectedTo(t){return new L_e(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(lt(uR),lt(ir),lt(nf),lt(Aj))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V_e=0,OC=(()=>{class n{constructor(t,i,r,s,u,_,y,E,D,R,U,X){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=u,this._injector=_,this._ngZone=y,this._document=E,this._directionality=D,this._location=R,this._outsideClickDispatcher=U,this._animationsModuleType=X}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),u=new k_e(t);return u.direction=u.direction||this._directionality.value,new F_e(s,i,r,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+V_e++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Fh)),new S_e(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(lt(M_e),lt(Aj),lt(nl),lt(z_e),lt(P_e),lt(as),lt(pi),lt(ir),lt(kC),lt(D2),lt(O_e),lt(ny,8))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const H_e={provide:new vt("cdk-connected-overlay-scroll-strategy"),deps:[OC],useFactory:function U_e(n){return()=>n.scrollStrategies.reposition()}};let Oj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({providers:[OC,H_e],imports:[xv,Cj,Ej,Ej]}),n})();const G_e=new vt("mat-sanity-checks",{providedIn:"root",factory:function $_e(){return!0}});let Da=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!oR()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(lt(gj),lt(G_e,8),lt(ir))},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[xv,xv]}),n})();const W_e=new vt("MAT_DATE_LOCALE",{providedIn:"root",factory:function q_e(){return Ht(Id)}});class Vd{constructor(){this._localeChanges=new Gn,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return null==e||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,t){return this.getYear(e)-this.getYear(t)||this.getMonth(e)-this.getMonth(t)||this.getDate(e)-this.getDate(t)}sameDate(e,t){if(e&&t){let i=this.isValid(e),r=this.isValid(t);return i&&r?!this.compareDate(e,t):i==r}return e==t}clampDate(e,t,i){return t&&this.compareDate(e,t)<0?t:i&&this.compareDate(e,i)>0?i:e}}const fR=new vt("mat-date-formats"),Z_e=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function pR(n,e){const t=Array(n);for(let i=0;i<n;i++)t[i]=e(i);return t}let Y_e=(()=>{class n extends Vd{constructor(t,i){super(),this.useUtcForDisplay=!1,super.setLocale(t)}getYear(t){return t.getFullYear()}getMonth(t){return t.getMonth()}getDate(t){return t.getDate()}getDayOfWeek(t){return t.getDay()}getMonthNames(t){const i=new Intl.DateTimeFormat(this.locale,{month:t,timeZone:"utc"});return pR(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return pR(31,i=>this._format(t,new Date(2017,0,i+1)))}getDayOfWeekNames(t){const i=new Intl.DateTimeFormat(this.locale,{weekday:t,timeZone:"utc"});return pR(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(t){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,t)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(t){return this.getDate(this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+1,0))}clone(t){return new Date(t.getTime())}createDate(t,i,r){let s=this._createDateWithOverflow(t,i,r);return s.getMonth(),s}today(){return new Date}parse(t,i){return"number"==typeof t?new Date(t):t?new Date(Date.parse(t)):null}format(t,i){if(!this.isValid(t))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...i,timeZone:"utc"});return this._format(r,t)}addCalendarYears(t,i){return this.addCalendarMonths(t,12*i)}addCalendarMonths(t,i){let r=this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+i,this.getDate(t));return this.getMonth(r)!=((this.getMonth(t)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(t,i){return this._createDateWithOverflow(this.getYear(t),this.getMonth(t),this.getDate(t)+i)}toIso8601(t){return[t.getUTCFullYear(),this._2digit(t.getUTCMonth()+1),this._2digit(t.getUTCDate())].join("-")}deserialize(t){if("string"==typeof t){if(!t)return null;if(Z_e.test(t)){let i=new Date(t);if(this.isValid(i))return i}}return super.deserialize(t)}isDateInstance(t){return t instanceof Date}isValid(t){return!isNaN(t.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(t,i,r){const s=new Date;return s.setFullYear(t,i,r),s.setHours(0,0,0,0),s}_2digit(t){return("00"+t).slice(-2)}_format(t,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),t.format(r)}}return n.\u0275fac=function(t){return new(t||n)(lt(W_e,8),lt(nf))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();const X_e={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let K_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({providers:[{provide:Vd,useClass:Y_e}]}),n})(),Q_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({providers:[{provide:fR,useValue:X_e}],imports:[K_e]}),n})();class J_e{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Lj=_v({passive:!0,capture:!0});class eme{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=rR(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const u=s.get(i);u?u.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Lj)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Lj)))}}const Bj={enterDuration:225,exitDuration:150},zj=_v({passive:!0,capture:!0}),Vj=["mousedown","touchstart"],jj=["mouseup","mouseleave","touchend","touchcancel"];class FC{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=sR(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...Bj,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const u=i.radius||function nme(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),_=e-r.left,y=t-r.top,E=s.enterDuration,D=document.createElement("div");D.classList.add("mat-ripple-element"),D.style.left=_-u+"px",D.style.top=y-u+"px",D.style.height=2*u+"px",D.style.width=2*u+"px",null!=i.color&&(D.style.backgroundColor=i.color),D.style.transitionDuration=`${E}ms`,this._containerElement.appendChild(D);const R=window.getComputedStyle(D),X=R.transitionDuration,ie="none"===R.transitionProperty||"0s"===X||"0s, 0s"===X||0===r.width&&0===r.height,xe=new J_e(this,D,i,ie);D.style.transform="scale3d(1, 1, 1)",xe.state=0,i.persistent||(this._mostRecentTransientRipple=xe);let ze=null;return!ie&&(E||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Qe=()=>this._finishRippleTransition(xe),Ve=()=>this._destroyRipple(xe);D.addEventListener("transitionend",Qe),D.addEventListener("transitioncancel",Ve),ze={onTransitionEnd:Qe,onTransitionCancel:Ve}}),this._activeRipples.set(xe,ze),(ie||!E)&&this._finishRippleTransition(xe),xe}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...Bj,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=sR(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Vj.forEach(i=>{FC._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{jj.forEach(t=>{this._triggerElement.addEventListener(t,this,zj)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function jpe(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function Upe(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(Vj.forEach(t=>FC._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&jj.forEach(t=>e.removeEventListener(t,this,zj)))}}FC._eventManager=new eme;let Uj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[Da,Da]}),n})(),ime=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[Da]}),n})(),Hj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[Uj,dg,Da,ime]}),n})(),sme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[Da,Uj,Da]}),n})(),NC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[Da,dg,lj,Da]}),n})(),pme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({}),n})(),mme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[Da,NC,NC,pme,Da]}),n})(),yme=(()=>{class n{constructor(){this.changes=new Gn,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(t,i){return`${t} \u2013 ${i}`}formatYearRangeLabel(t,i){return`${t} to ${i}`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ame={provide:new vt("mat-datepicker-scroll-strategy"),deps:[OC],useFactory:function Dme(n){return()=>n.scrollStrategies.reposition()}};let Nme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({providers:[yme,Ame],imports:[dg,sme,Oj,$pe,Cj,Da,PC]}),n})(),Ume=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({imports:[Da,Da]}),n})();_i(946);let Hme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({}),n})();const Zme={provide:new vt("mat-select-scroll-strategy"),deps:[OC],useFactory:function qme(n){return()=>n.scrollStrategies.reposition()}};let Yme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({providers:[Zme],imports:[dg,Oj,Hj,Da,PC,NC,Hj,Da]}),n})();const Ip=new bn(an),Kme={connector:()=>new Gn};function Qj(n,e=Kme){const{connector:t}=e;return mi((i,r)=>{const s=t();ue(n(function Xme(n){return new bn(e=>n.subscribe(e))}(s))).subscribe(r),r.add(i.subscribe(s))})}function Jj(n,e){return e?t=>Bg(e.pipe(sa(1),function e0e(){return mi((n,e)=>{n.subscribe(Qn(e,an))})}()),t.pipe(Jj(n))):Pt((t,i)=>ue(n(t,i)).pipe(sa(1),Q9(t)))}const wv="Service workers are disabled or not supported by this browser";class jC{constructor(e){if(this.serviceWorker=e,e){const i=tx(e,"controllerchange").pipe(Gt(()=>e.controller)),s=Bg(bE(()=>Ct(e.controller)),i);this.worker=s.pipe(Ts(D=>!!D)),this.registration=this.worker.pipe(dn(()=>e.getRegistration()));const E=tx(e,"message").pipe(Gt(D=>D.data)).pipe(Ts(D=>D&&D.type)).pipe(function Jme(n){return n?e=>Qj(n)(e):e=>function Qme(n,e){const t=zt(n)?n:()=>n;return zt(e)?Qj(e,{connector:t}):i=>new Hk(i,t)}(new Gn)(e)}());E.connect(),this.events=E}else this.worker=this.events=this.registration=function n0e(n){return bE(()=>um(new Error(n)))}(wv)}postMessage(e,t){return this.worker.pipe(sa(1),Wo(i=>{i.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,i){const r=this.waitForOperationCompleted(i),s=this.postMessage(e,t);return Promise.all([s,r]).then(([,u])=>u)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?i=>i.type===e:i=>e.includes(i.type),this.events.pipe(Ts(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(sa(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(Ts(t=>t.nonce===e),sa(1),Gt(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let eU=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new Gn,!t.isEnabled)return this.messages=Ip,this.notificationClicks=Ip,void(this.subscription=Ip);this.messages=this.sw.eventsOfType("PUSH").pipe(Gt(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Gt(r=>r.data)),this.pushManager=this.sw.registration.pipe(Gt(r=>r.pushManager));const i=this.pushManager.pipe(dn(r=>r.getSubscription()));this.subscription=Rn(i,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(wv));const i={userVisibleOnly:!0};let r=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let u=0;u<r.length;u++)s[u]=r.charCodeAt(u);return i.applicationServerKey=s,this.pushManager.pipe(dn(u=>u.subscribe(i)),sa(1)).toPromise().then(u=>(this.subscriptionChanges.next(u),u))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(sa(1),dn(i=>{if(null===i)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(wv))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(lt(jC))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})(),tU=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Ip,this.available=Ip,this.activated=Ip,void(this.unrecoverable=Ip);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(Ts(i=>"VERSION_READY"===i.type),Gt(i=>({type:"UPDATE_AVAILABLE",current:i.currentVersion,available:i.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(wv));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(wv));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(lt(jC))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})();const nU=new vt("NGSW_REGISTER_SCRIPT");function i0e(n,e,t,i){return()=>{if(!EI(i)||!("serviceWorker"in navigator)||!1===t.enabled)return;let r;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)r=t.registrationStrategy();else{const[u,..._]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(u){case"registerImmediately":r=Ct(null);break;case"registerWithDelay":r=iU(+_[0]||0);break;case"registerWhenStable":r=_[0]?Rn(rU(n),iU(+_[0])):rU(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(pi).runOutsideAngular(()=>r.pipe(sa(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(u=>console.error("Service worker registration failed with:",u))))}}function iU(n){return Ct(null).pipe(function t0e(n,e=Xy){const t=bj(n,e);return Jj(()=>t)}(n))}function rU(n){return n.get(Fh).isStable.pipe(Ts(t=>t))}function r0e(n,e){return new jC(EI(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}class xR{}function o0e(n,e={}){return function T0(n){return{\u0275providers:n}}([eU,tU,{provide:nU,useValue:n},{provide:xR,useValue:e},{provide:jC,useFactory:r0e,deps:[xR,xs]},{provide:v2,useFactory:i0e,deps:[as,nU,xR,xs],multi:!0}])}let s0e=(()=>{class n{static register(t,i={}){return{ngModule:n,providers:[o0e(t,i)]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({providers:[eU,tU]}),n})();const a0e_firebase={projectId:"pytowebangular",appId:"1:878131864286:web:76ba22bf05d23be7d6184f",databaseURL:"https://pytowebangular-default-rtdb.firebaseio.com",storageBucket:"pytowebangular.appspot.com",apiKey:"AIzaSyDfKlJmsv7MyzYm1L84iUMpeCVNopi7uEM",authDomain:"pytowebangular.firebaseapp.com",messagingSenderId:"878131864286",measurementId:"G-MCR5ETW79L"};class yR{constructor(e){return e}}const oU="database",bR=new vt("angularfire2.database-instances");function u0e(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new yR(i)}}const d0e={provide:class l0e{constructor(){return QA(oU)}},deps:[[new Gr,bR]]},h0e={provide:yR,useFactory:function c0e(n,e){const t=KA(oU,n,e);return t&&new yR(t)},deps:[[new Gr,bR],yg]};let f0e=(()=>{class n{constructor(){go("angularfire",cw.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n}),n.\u0275inj=Pn({providers:[h0e,d0e]}),n})();function p0e(n,...e){return{ngModule:f0e,providers:[{provide:bR,useFactory:u0e(n),multi:!0,deps:[pi,as,JA,eM,[new Gr,q8],[new Gr,wM],...e]}]}}const _0e=Hh(zk,!0);let m0e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xn({type:n,bootstrap:[uue]}),n.\u0275inj=Pn({providers:[tz,gpe,Lb],imports:[NF,xhe,mpe,ude,dde,Nme,Q_e,mme,NC,Ume,Hme,dg,Yme,s0e.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"}),_ee(()=>mee(a0e_firebase)),nre(()=>Nw()),p0e(()=>_0e())]}),n})();hY().bootstrapModule(m0e).catch(n=>console.error(n))},315:(qr,Zi,_i)=>{var zt,Un;!function(ii,f){"use strict";zt=function(){var f=function(){var Le=window.Element.prototype;if(Le.matches)return"matches";if(Le.matchesSelector)return"matchesSelector";for(var Jt=["webkit","moz","ms","o"],qt=0;qt<Jt.length;qt++){var qe=Jt[qt]+"MatchesSelector";if(Le[qe])return qe}}();return function(Jt,qt){return Jt[f](qt)}},void 0!==(Un=zt.call(Zi,_i,Zi,qr))&&(qr.exports=Un)}(window)},507:function(qr,Zi,_i){var zt,Un;typeof window<"u"&&window,void 0!==(Un="function"==typeof(zt=function(){"use strict";function ii(){}var f=ii.prototype;return f.on=function(Le,Jt){if(Le&&Jt){var qt=this._events=this._events||{},Dt=qt[Le]=qt[Le]||[];return-1==Dt.indexOf(Jt)&&Dt.push(Jt),this}},f.once=function(Le,Jt){if(Le&&Jt){this.on(Le,Jt);var qt=this._onceEvents=this._onceEvents||{};return(qt[Le]=qt[Le]||{})[Jt]=!0,this}},f.off=function(Le,Jt){var qt=this._events&&this._events[Le];if(qt&&qt.length){var Dt=qt.indexOf(Jt);return-1!=Dt&&qt.splice(Dt,1),this}},f.emitEvent=function(Le,Jt){var qt=this._events&&this._events[Le];if(qt&&qt.length){qt=qt.slice(0),Jt=Jt||[];for(var Dt=this._onceEvents&&this._onceEvents[Le],qe=0;qe<qt.length;qe++){var wt=qt[qe];Dt&&Dt[wt]&&(this.off(Le,wt),delete Dt[wt]),wt.apply(this,Jt)}return this}},f.allOff=function(){delete this._events,delete this._onceEvents},ii})?zt.call(Zi,_i,Zi,qr):zt)&&(qr.exports=Un)},771:(qr,Zi,_i)=>{var zt,Un,ii;ii=window,zt=[_i(315)],void 0!==(Un=function(Le){return function(f,Le){"use strict";var Jt={extend:function(qe,wt){for(var Ft in wt)qe[Ft]=wt[Ft];return qe},modulo:function(qe,wt){return(qe%wt+wt)%wt}},qt=Array.prototype.slice;Jt.makeArray=function(qe){return Array.isArray(qe)?qe:null==qe?[]:"object"==typeof qe&&"number"==typeof qe.length?qt.call(qe):[qe]},Jt.removeFrom=function(qe,wt){var Ft=qe.indexOf(wt);-1!=Ft&&qe.splice(Ft,1)},Jt.getParent=function(qe,wt){for(;qe.parentNode&&qe!=document.body;)if(Le(qe=qe.parentNode,wt))return qe},Jt.getQueryElement=function(qe){return"string"==typeof qe?document.querySelector(qe):qe},Jt.handleEvent=function(qe){var wt="on"+qe.type;this[wt]&&this[wt](qe)},Jt.filterFindElements=function(qe,wt){qe=Jt.makeArray(qe);var Ft=[];return qe.forEach(function(an){if(an instanceof HTMLElement){if(!wt)return void Ft.push(an);Le(an,wt)&&Ft.push(an);for(var ai=an.querySelectorAll(wt),Nt=0;Nt<ai.length;Nt++)Ft.push(ai[Nt])}}),Ft},Jt.debounceMethod=function(qe,wt,Ft){Ft=Ft||100;var an=qe.prototype[wt],ai=wt+"Timeout";qe.prototype[wt]=function(){clearTimeout(this[ai]);var yt=arguments,kn=this;this[ai]=setTimeout(function(){an.apply(kn,yt),delete kn[ai]},Ft)}},Jt.docReady=function(qe){var wt=document.readyState;"complete"==wt||"interactive"==wt?setTimeout(qe):document.addEventListener("DOMContentLoaded",qe)},Jt.toDashed=function(qe){return qe.replace(/(.)([A-Z])/g,function(wt,Ft,an){return Ft+"-"+an}).toLowerCase()};var Dt=f.console;return Jt.htmlInit=function(qe,wt){Jt.docReady(function(){var Ft=Jt.toDashed(wt),an="data-"+Ft,ai=document.querySelectorAll("["+an+"]"),Nt=document.querySelectorAll(".js-"+Ft),yt=Jt.makeArray(ai).concat(Jt.makeArray(Nt)),kn=an+"-options",ln=f.jQuery;yt.forEach(function(ft){var De,me=ft.getAttribute(an)||ft.getAttribute(kn);try{De=me&&JSON.parse(me)}catch(Et){return void(Dt&&Dt.error("Error parsing "+an+" on "+ft.className+": "+Et))}var at=new qe(ft,De);ln&&ln.data(ft,wt,at)})})},Jt}(ii,Le)}.apply(Zi,zt))&&(qr.exports=Un)},99:(qr,Zi,_i)=>{var zt,Un;window,void 0!==(Un="function"==typeof(zt=function(){"use strict";function f(yt){var kn=parseFloat(yt);return-1==yt.indexOf("%")&&!isNaN(kn)&&kn}var Jt=typeof console>"u"?function Le(){}:function(yt){console.error(yt)},qt=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],Dt=qt.length;function wt(yt){var kn=getComputedStyle(yt);return kn||Jt("Style returned "+kn+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),kn}var an,Ft=!1;function Nt(yt){if(function ai(){if(!Ft){Ft=!0;var yt=document.createElement("div");yt.style.width="200px",yt.style.padding="1px 2px 3px 4px",yt.style.borderStyle="solid",yt.style.borderWidth="1px 2px 3px 4px",yt.style.boxSizing="border-box";var kn=document.body||document.documentElement;kn.appendChild(yt);var ln=wt(yt);an=200==Math.round(f(ln.width)),Nt.isBoxSizeOuter=an,kn.removeChild(yt)}}(),"string"==typeof yt&&(yt=document.querySelector(yt)),yt&&"object"==typeof yt&&yt.nodeType){var kn=wt(yt);if("none"==kn.display)return function qe(){for(var yt={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},kn=0;kn<Dt;kn++)yt[qt[kn]]=0;return yt}();var ln={};ln.width=yt.offsetWidth,ln.height=yt.offsetHeight;for(var ft=ln.isBorderBox="border-box"==kn.boxSizing,me=0;me<Dt;me++){var De=qt[me],Et=parseFloat(kn[De]);ln[De]=isNaN(Et)?0:Et}var En=ln.paddingLeft+ln.paddingRight,Mi=ln.paddingTop+ln.paddingBottom,Ge=ln.marginLeft+ln.marginRight,Ji=ln.marginTop+ln.marginBottom,er=ln.borderLeftWidth+ln.borderRightWidth,yn=ln.borderTopWidth+ln.borderBottomWidth,rr=ft&&an,In=f(kn.width);!1!==In&&(ln.width=In+(rr?0:En+er));var Xo=f(kn.height);return!1!==Xo&&(ln.height=Xo+(rr?0:Mi+yn)),ln.innerWidth=ln.width-(En+er),ln.innerHeight=ln.height-(Mi+yn),ln.outerWidth=ln.width+Ge,ln.outerHeight=ln.height+Ji,ln}}return Nt})?zt.call(Zi,_i,Zi,qr):zt)&&(qr.exports=Un)},574:function(qr){qr.exports=function(){"use strict";var Zi,_i,zt;function Un(f,Le){if(Zi)if(_i){var Jt="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Zi+")(sharedChunk); ("+_i+")(sharedChunk); self.onerror = null;",qt={};Zi(qt),zt=Le(qt),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(zt.workerUrl=window.URL.createObjectURL(new Blob([Jt],{type:"text/javascript"})))}else _i=Le;else Zi=Le}return Un(0,function(f){var Le=typeof self<"u"?self:{},Jt="2.14.1";let qt;const Dt={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==qt){const a=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{qt=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):a}catch{qt=a}}return qt},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Dt.API_URL)return null;try{const a=new URL(Dt.API_URL);return"api.mapbox.cn"===a.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===a.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},qe={supported:!1,testSupport:function(a){!an&&Ft&&(ai?Nt(a):wt=a)}};let wt,Ft,an=!1,ai=!1;function Nt(a){const o=a.createTexture();a.bindTexture(a.TEXTURE_2D,o);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,Ft),a.isContextLost())return;qe.supported=!0}catch{}a.deleteTexture(o),an=!0}Le.document&&(Ft=Le.document.createElement("img"),Ft.onload=function(){wt&&Nt(wt),wt=null,ai=!0},Ft.onerror=function(){an=!0,wt=null},Ft.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const yt="01";var kn=ln;function ln(a,o,l,d){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(d-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=o,this.p2x=l,this.p2y=d}ln.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,o){if(void 0===o&&(o=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,d=0;d<8;d++){var p=this.sampleCurveX(l)-a;if(Math.abs(p)<o)return l;var g=this.sampleCurveDerivativeX(l);if(Math.abs(g)<1e-6)break;l-=p/g}var b=0,w=1;for(l=a,d=0;d<20&&(p=this.sampleCurveX(l),!(Math.abs(p-a)<o));d++)a>p?b=l:w=l,l=.5*(w-b)+b;return l},solve:function(a,o){return this.sampleCurveY(this.solveCurveX(a,o))}};var ft=me;function me(a,o){this.x=a,this.y=o}me.prototype={clone:function(){return new me(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,o){return this.clone()._rotateAround(a,o)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var o=a.x-this.x,l=a.y-this.y;return o*o+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,o){return Math.atan2(this.x*o-this.y*a,this.x*a+this.y*o)},_matMult:function(a){var o=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=o,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var o=Math.cos(a),l=Math.sin(a),d=l*this.x+o*this.y;return this.x=o*this.x-l*this.y,this.y=d,this},_rotateAround:function(a,o){var l=Math.cos(a),d=Math.sin(a),p=o.y+d*(this.x-o.x)+l*(this.y-o.y);return this.x=o.x+l*(this.x-o.x)-d*(this.y-o.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},me.convert=function(a){return a instanceof me?a:Array.isArray(a)?new me(a[0],a[1]):a};const De=Math.PI/180,at=180/Math.PI;function Et(a){return a*De}function En(a){return a*at}const Mi=[[0,0],[1,0],[1,1],[0,1]];function Ge(a){if(a<=0)return 0;if(a>=1)return 1;const o=a*a,l=o*a;return 4*(a<.5?l:3*(a-o)+l-.75)}function Ji(a,o,l,d){const p=new kn(a,o,l,d);return function(g){return p.solve(g)}}const er=Ji(.25,.1,.25,1);function yn(a,o,l){return Math.min(l,Math.max(o,a))}function rr(a,o,l){return(l=yn((l-a)/(o-a),0,1))*l*(3-2*l)}function In(a,o,l){const d=l-o,p=((a-o)%d+d)%d+o;return p===o?l:p}function Xo(a,o,l){if(!a.length)return l(null,[]);let d=a.length;const p=new Array(a.length);let g=null;a.forEach((b,w)=>{o(b,(T,S)=>{T&&(g=T),p[w]=S,0==--d&&l(g,p)})})}function Vs(a){const o=[];for(const l in a)o.push(a[l]);return o}function bn(a,...o){for(const l of o)for(const d in l)a[d]=l[d];return a}let js=1;function cl(){return js++}function Ko(){return function a(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function wr(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function Gn(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function ca(a,o){a.forEach(l=>{o[l]&&(o[l]=o[l].bind(o))})}function Yi(a,o){return-1!==a.indexOf(o,a.length-o.length)}function ho(a,o,l){const d={};for(const p in a)d[p]=o.call(l||this,a[p],p,a);return d}function mi(a,o,l){const d={};for(const p in a)o.call(l||this,a[p],p,a)&&(d[p]=a[p]);return d}function Qn(a){return Array.isArray(a)?a.map(Qn):"object"==typeof a&&a?ho(a,Qn):a}const ul={};function Gt(a){ul[a]||(typeof console<"u"&&console.warn(a),ul[a]=!0)}function Qo(a,o,l){return(l.y-a.y)*(o.x-a.x)>(o.y-a.y)*(l.x-a.x)}function Jn(a){let o=0;for(let l,d,p=0,g=a.length,b=g-1;p<g;b=p++)l=a[p],d=a[b],o+=(d.x-l.x)*(l.y+d.y);return o}function bo(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Mo(a){const o={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,d,p,g)=>{const b=p||g;return o[d]=!b||b.toLowerCase(),""}),o["max-age"]){const l=parseInt(o["max-age"],10);isNaN(l)?delete o["max-age"]:o["max-age"]=l}return o}let Ac=null;function ko(a){if(null==Ac){const o=a.navigator?a.navigator.userAgent:null;Ac=!!a.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Ac}function Lr(a){try{const o=Le[a];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}function Ro(a,o){return[a[4*o],a[4*o+1],a[4*o+2],a[4*o+3]]}const Mc="mapbox-tiles";let mr,hs,Ma=500,dl=50;function Wn(){try{return Le.caches}catch{}}function ro(){Wn()&&!mr&&(mr=Le.caches.open(Mc))}function vo(a){const o=a.indexOf("?");if(o<0)return a;const d=function(p){const g=p.indexOf("?");return g>0?p.slice(g+1).split("&"):[]}(a).filter(p=>{const g=p.split("=");return"language"===g[0]||"worldview"===g[0]});return d.length?`${a.slice(0,o)}?${d.join("&")}`:a.slice(0,o)}let Is=1/0;const fr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(fr);class Vi extends Error{constructor(o,l,d){401===l&&Dn(d)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=l,this.url=d}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ul=bo()?()=>self.worker&&self.worker.referrer:()=>("blob:"===Le.location.protocol?Le.parent:Le).location.href,Zr=function(a,o){if(!(/^file:/.test(l=a.url)||/^file:/.test(Ul())&&!/^\w+:/.test(l))){if(Le.fetch&&Le.Request&&Le.AbortController&&Le.Request.prototype.hasOwnProperty("signal"))return function(d,p){const g=new Le.AbortController,b=new Le.Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,referrer:Ul(),referrerPolicy:d.referrerPolicy,signal:g.signal});let w=!1,T=!1;const S=(k=b.url).indexOf("sku=")>0&&Dn(k);var k;"json"===d.type&&b.headers.set("Accept","application/json");const O=(V,j,G)=>{if(T)return;if(V&&"SecurityError"!==V.message&&Gt(V),j&&G)return L(j);const Q=Date.now();Le.fetch(b).then(ae=>{if(ae.ok){const _e=S?ae.clone():null;return L(ae,_e,Q)}return p(new Vi(ae.statusText,ae.status,d.url))}).catch(ae=>{"AbortError"!==ae.name&&p(new Error(`${ae.message} ${d.url}`))})},L=(V,j,G)=>{("arrayBuffer"===d.type?V.arrayBuffer():"json"===d.type?V.json():V.text()).then(Q=>{T||(j&&G&&function(ae,_e,oe){if(ro(),!mr)return;const he={status:_e.status,statusText:_e.statusText,headers:new Le.Headers};_e.headers.forEach((je,Ne)=>he.headers.set(Ne,je));const be=Mo(_e.headers.get("Cache-Control")||"");if(be["no-store"])return;be["max-age"]&&he.headers.set("Expires",new Date(oe+1e3*be["max-age"]).toUTCString());const pe=he.headers.get("Expires");pe&&(new Date(pe).getTime()-oe<42e4||function(je,Ne){if(void 0===hs)try{new Response(new ReadableStream),hs=!0}catch{hs=!1}hs?Ne(je.body):je.blob().then(Ne)}(_e,je=>{const Ne=new Le.Response(je,he);ro(),mr&&mr.then(Ke=>Ke.put(vo(ae.url),Ne)).catch(Ke=>Gt(Ke.message))}))}(b,j,G),w=!0,p(null,Q,V.headers.get("Cache-Control"),V.headers.get("Expires")))}).catch(Q=>{T||p(new Error(Q.message))})};return S?function(V,j){if(ro(),!mr)return j(null);const G=vo(V.url);mr.then(Q=>{Q.match(G).then(ae=>{const _e=function(oe){if(!oe)return!1;const he=new Date(oe.headers.get("Expires")||0),be=Mo(oe.headers.get("Cache-Control")||"");return he>Date.now()&&!be["no-cache"]}(ae);Q.delete(G),_e&&Q.put(G,ae.clone()),j(null,ae,_e)}).catch(j)}).catch(j)}(b,O):O(null,null),{cancel:()=>{T=!0,w||g.abort()}}}(a,o);if(bo()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,o,void 0,!0)}var l;return function(d,p){const g=new Le.XMLHttpRequest;g.open(d.method||"GET",d.url,!0),"arrayBuffer"===d.type&&(g.responseType="arraybuffer");for(const b in d.headers)g.setRequestHeader(b,d.headers[b]);return"json"===d.type&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials="include"===d.credentials,g.onerror=()=>{p(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||0===g.status)&&null!==g.response){let b=g.response;if("json"===d.type)try{b=JSON.parse(g.response)}catch(w){return p(w)}p(null,b,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else p(new Vi(g.statusText,g.status,d.url))},g.send(d.body),{cancel:()=>g.abort()}}(a,o)},Er=function(a,o){return Zr(bn(a,{type:"arrayBuffer"}),o)};function kc(a){const o=Le.document.createElement("a");return o.href=a,o.protocol===Le.document.location.protocol&&o.host===Le.document.location.host}const ka="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let hl,ua;hl=[],ua=0;const Rc=function(a,o){if(qe.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),ua>=Dt.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:a,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return hl.push(g),g}ua++;let l=!1;const d=()=>{if(!l)for(l=!0,ua--;hl.length&&ua<Dt.MAX_PARALLEL_IMAGE_REQUESTS;){const g=hl.shift(),{requestParameters:b,callback:w,cancelled:T}=g;T||(g.cancel=Rc(b,w).cancel)}},p=Er(a,(g,b,w,T)=>{d(),g?o(g):b&&(Le.createImageBitmap?function(S,k){const O=new Le.Blob([new Uint8Array(S)],{type:"image/png"});Le.createImageBitmap(O).then(L=>{k(null,L)}).catch(L=>{k(new Error(`Could not load image because of ${L.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(b,(S,k)=>o(S,k,w,T)):function(S,k){const O=new Le.Image,L=Le.URL;O.onload=()=>{k(null,O),L.revokeObjectURL(O.src),O.onload=null,Le.requestAnimationFrame(()=>{O.src=ka})},O.onerror=()=>k(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const V=new Le.Blob([new Uint8Array(S)],{type:"image/png"});O.src=S.byteLength?L.createObjectURL(V):ka}(b,(S,k)=>o(S,k,w,T)))});return{cancel:()=>{p.cancel(),d()}}},Ra="NO_ACCESS_TOKEN";function Ds(a){return 0===a.indexOf("mapbox:")}function Dn(a){return Dt.API_URL_REGEX.test(a)}function ku(a){return Dt.API_CDN_URL_REGEX.test(a)}function Ud(a){return Dt.API_STYLE_REGEX.test(a)&&!Pa(a)}function Pa(a){return Dt.API_SPRITE_REGEX.test(a)}const Oa=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Cr(a){const o=a.match(Oa);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function da(a){const o=a.params.length?`?${a.params.join("&")}`:"";return`${a.protocol}://${a.authority}${a.path}${o}`}function Pc(a){if(!a)return null;const o=a.split(".");if(!o||3!==o.length)return null;try{return JSON.parse(decodeURIComponent(Le.atob(o[1]).split("").map(l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class fl{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const l=Pc(Dt.ACCESS_TOKEN);let d="";return d=l&&l.u?Le.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,(p,g)=>String.fromCharCode(+("0x"+g)))):Dt.ACCESS_TOKEN||"",o?`mapbox.eventData.${o}:${d}`:`mapbox.eventData:${d}`}fetchEventData(){const o=Lr("localStorage"),l=this.getStorageKey(),d=this.getStorageKey("uuid");if(o)try{const p=Le.localStorage.getItem(l);p&&(this.eventData=JSON.parse(p));const g=Le.localStorage.getItem(d);g&&(this.anonId=g)}catch{Gt("Unable to read from LocalStorage")}}saveEventData(){const o=Lr("localStorage"),l=this.getStorageKey(),d=this.getStorageKey("uuid");if(o)try{Le.localStorage.setItem(d,this.anonId),Object.keys(this.eventData).length>=1&&Le.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{Gt("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,l,d,p){if(!Dt.EVENTS_URL)return;const g=Cr(Dt.EVENTS_URL);g.params.push(`access_token=${p||Dt.ACCESS_TOKEN||""}`);const b={event:this.type,created:new Date(o).toISOString()},w=l?bn(b,l):b,T={url:da(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([w])};var k;this.pendingRequest=(k=S=>{this.pendingRequest=null,d(S),this.saveEventData(),this.processRequests(p)},Zr(bn(T,{method:"POST"}),k))}queueRequest(o,l){this.queue.push(o),this.processRequests(l)}}const se=new class extends fl{constructor(a){super("appUserTurnstile"),this._customAccessToken=a}postTurnstileEvent(a,o){Dt.EVENTS_URL&&Dt.ACCESS_TOKEN&&Array.isArray(a)&&a.some(l=>Ds(l)||Dn(l))&&this.queueRequest(Date.now(),o)}processRequests(a){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=Pc(Dt.ACCESS_TOKEN),l=o?o.u:Dt.ACCESS_TOKEN;let d=l!==this.eventData.tokenU;Gn(this.anonId)||(this.anonId=Ko(),d=!0);const p=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),b=new Date(p),w=(p-this.eventData.lastSuccess)/864e5;d=d||w>=1||w<-1||g.getDate()!==b.getDate()}else d=!0;d?this.postEvent(p,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Jt,skuId:yt,"enabled.telemetry":!1,userId:this.anonId},g=>{g||(this.eventData.lastSuccess=p,this.eventData.tokenU=l)},a):this.processRequests()}},$=se.postTurnstileEvent.bind(se),q=new class extends fl{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(a,o,l,d){this.skuToken=o,this.errorCb=d,Dt.EVENTS_URL&&(l||Dt.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},l):this.errorCb(new Error(Ra)))}processRequests(a){if(this.pendingRequest||0===this.queue.length)return;const{id:o,timestamp:l}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),Gn(this.anonId)||(this.anonId=Ko()),this.postEvent(l,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Jt,skuId:yt,skuToken:this.skuToken,userId:this.anonId},d=>{d?this.errorCb(d):o&&(this.success[o]=!0)},a))}},re=q.postMapLoadEvent.bind(q),ue=new class extends fl{constructor(){super("gljs.performance")}postPerformanceEvent(a,o){Dt.EVENTS_URL&&(a||Dt.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},a)}processRequests(a){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:o,performanceData:l}=this.queue.shift(),d=function(p){const g=Le.performance.getEntriesByType("resource"),b=Le.performance.getEntriesByType("mark"),w=function(L){const V={};if(L)for(const j in L)if("other"!==j)for(const G of L[j]){const Q=`${j}ResolveRangeMin`,ae=`${j}ResolveRangeMax`,_e=`${j}RequestCount`,oe=`${j}RequestCachedCount`;V[Q]=Math.min(V[Q]||1/0,G.startTime),V[ae]=Math.max(V[ae]||-1/0,G.responseEnd);const he=be=>{void 0===V[be]&&(V[be]=0),++V[be]};void 0!==G.transferSize&&0===G.transferSize&&he(oe),he(_e)}return V}(function(L,V){const j={};if(L)for(const G of L){const Q=V(G);void 0===j[Q]&&(j[Q]=[]),j[Q].push(G)}return j}(g,Mt)),T=Le.devicePixelRatio,S=Le.navigator.connection||Le.navigator.mozConnection||Le.navigator.webkitConnection,k={counters:[],metadata:[],attributes:[]},O=(L,V,j)=>{null!=j&&L.push({name:V,value:j.toString()})};for(const L in w)O(k.counters,L,w[L]);if(p.interactionRange[0]!==1/0&&p.interactionRange[1]!==-1/0&&(O(k.counters,"interactionRangeMin",p.interactionRange[0]),O(k.counters,"interactionRangeMax",p.interactionRange[1])),b)for(const L of Object.keys(Oe)){const V=Oe[L],j=b.find(G=>G.name===V);j&&O(k.counters,V,j.startTime)}return O(k.counters,"visibilityHidden",p.visibilityHidden),O(k.attributes,"style",function(L){if(L)for(const V of L){const j=V.name.split("?")[0];if(Ud(j)){const G=j.split("/").slice(-2);if(2===G.length)return`mapbox://styles/${G[0]}/${G[1]}`}}}(g)),O(k.attributes,"terrainEnabled",p.terrainEnabled?"true":"false"),O(k.attributes,"fogEnabled",p.fogEnabled?"true":"false"),O(k.attributes,"projection",p.projection),O(k.attributes,"zoom",p.zoom),O(k.metadata,"devicePixelRatio",T),O(k.metadata,"connectionEffectiveType",S?S.effectiveType:void 0),O(k.metadata,"navigatorUserAgent",Le.navigator.userAgent),O(k.metadata,"screenWidth",Le.screen.width),O(k.metadata,"screenHeight",Le.screen.height),O(k.metadata,"windowWidth",Le.innerWidth),O(k.metadata,"windowHeight",Le.innerHeight),O(k.metadata,"mapWidth",p.width/T),O(k.metadata,"mapHeight",p.height/T),O(k.metadata,"webglRenderer",p.renderer),O(k.metadata,"webglVendor",p.vendor),O(k.metadata,"sdkVersion",Jt),O(k.metadata,"sdkIdentifier","mapbox-gl-js"),k}(l);for(const p of d.metadata);for(const p of d.counters);for(const p of d.attributes);this.postEvent(o,d,()=>{},a)}},we=ue.postPerformanceEvent.bind(ue),Re=new class extends fl{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(a,o,l,d){if(!Dt.API_URL||!Dt.SESSION_PATH)return;const p=Cr(Dt.API_URL+Dt.SESSION_PATH);p.params.push(`sku=${o||""}`),p.params.push(`access_token=${d||Dt.ACCESS_TOKEN||""}`);const g={url:da(p),headers:{"Content-Type":"text/plain"}};var w;this.pendingRequest=(w=b=>{this.pendingRequest=null,l(b),this.saveEventData(),this.processRequests(d)},Zr(bn(g,{method:"GET"}),w))}getSessionAPI(a,o,l,d){this.skuToken=o,this.errorCb=d,Dt.SESSION_PATH&&Dt.API_URL&&(l||Dt.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},l):this.errorCb(new Error(Ra)))}processRequests(a){if(this.pendingRequest||0===this.queue.length)return;const{id:o,timestamp:l}=this.queue.shift();o&&this.success[o]||this.getSession(l,this.skuToken,d=>{d?this.errorCb(d):o&&(this.success[o]=!0)},a)}},ke=Re.getSessionAPI.bind(Re),Te=new Set,Oe={create:"create",load:"load",fullLoad:"fullLoad"},ot={mark(a){Le.performance.mark(a)},measure(a,o,l){Le.performance.measure(a,o,l)}};function Mt(a){const o=a.name.split("?")[0];return ku(o)&&o.includes("mapbox-gl.js")?"javascript":ku(o)&&o.includes("mapbox-gl.css")?"css":Dt.API_FONTS_REGEX.test(o)?"fontRange":Pa(o)?"sprite":Ud(o)?"style":Dt.API_TILEJSON_REGEX.test(o)?"tilejson":"other"}const ut=Le.performance;function tn(a){const o=a?a.url.toString():void 0;return ut.getEntriesByName(o)}let Pt,xt,Zt,Ln;const li={now:()=>void 0!==Zt?Zt:Le.performance.now(),setNow(a){Zt=a},restoreNow(){Zt=void 0},frame(a){const o=Le.requestAnimationFrame(a);return{cancel:()=>Le.cancelAnimationFrame(o)}},getImageData(a,o=0){const{width:l,height:d}=a;Ln||(Ln=Le.document.createElement("canvas"));const p=Ln.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return(l>Ln.width||d>Ln.height)&&(Ln.width=l,Ln.height=d),p.clearRect(-o,-o,l+2*o,d+2*o),p.drawImage(a,0,0,l,d),p.getImageData(-o,-o,l+2*o,d+2*o)},resolveURL:a=>(Pt||(Pt=Le.document.createElement("a")),Pt.href=a,Pt.href),get devicePixelRatio(){return Le.devicePixelRatio},get prefersReducedMotion(){return!!Le.matchMedia&&(null==xt&&(xt=Le.matchMedia("(prefers-reduced-motion: reduce)")),xt.matches)}};function on(a,o,l){l[a]&&-1!==l[a].indexOf(o)||(l[a]=l[a]||[],l[a].push(o))}function gi(a,o,l){if(l&&l[a]){const d=l[a].indexOf(o);-1!==d&&l[a].splice(d,1)}}class vi{constructor(o,l={}){bn(this,l),this.type=o}}class Po extends vi{constructor(o,l={}){super("error",bn({error:o},l))}}class Jo{on(o,l){return this._listeners=this._listeners||{},on(o,l,this._listeners),this}off(o,l){return gi(o,l,this._listeners),gi(o,l,this._oneTimeListeners),this}once(o,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},on(o,l,this._oneTimeListeners),this):new Promise(d=>this.once(o,d))}fire(o,l){"string"==typeof o&&(o=new vi(o,l||{}));const d=o.type;if(this.listens(d)){o.target=this;const p=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const w of p)w.call(this,o);const g=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const w of g)gi(d,w,this._oneTimeListeners),w.call(this,o);const b=this._eventedParent;b&&(bn(o,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),b.fire(o))}else o instanceof Po&&console.error(o.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,l){return this._eventedParent=o,this._eventedParentData=l,this}}var Ye=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function tr(a,...o){for(const l of o)for(const d in l)a[d]=l[d];return a}function gr(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Fa(a){if(Array.isArray(a))return a.map(Fa);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const o={};for(const l in a)o[l]=Fa(a[l]);return o}return gr(a)}class rf extends Error{constructor(o,l){super(l),this.message=l,this.key=o}}var Us=rf;class Na{constructor(o,l=[]){this.parent=o,this.bindings={};for(const[d,p]of l)this.bindings[d]=p}concat(o){return new Na(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}var sf=Na;const Hl={kind:"null"},mt={kind:"number"},Rn={kind:"string"},Ct={kind:"boolean"},es={kind:"color"},ha={kind:"object"},dn={kind:"value"},Oc={kind:"collator"},$l={kind:"formatted"},ui={kind:"resolvedImage"};function Yr(a,o){return{kind:"array",itemType:a,N:o}}function An(a){if("array"===a.kind){const o=An(a.itemType);return"number"==typeof a.N?`array<${o}, ${a.N}>`:"value"===a.itemType.kind?"array":`array<${o}>`}return a.kind}const Fc=[Hl,mt,Rn,Ct,es,$l,ha,Yr(dn),ui];function Br(a,o){if("error"===o.kind)return null;if("array"===a.kind){if("array"===o.kind&&(0===o.N&&"value"===o.itemType.kind||!Br(a.itemType,o.itemType))&&("number"!=typeof a.N||a.N===o.N))return null}else{if(a.kind===o.kind)return null;if("value"===a.kind)for(const l of Fc)if(!Br(l,o))return null}return`Expected ${An(a)} but found ${An(o)} instead.`}function ki(a,o){return o.some(l=>l.kind===a.kind)}function mn(a,o){return o.some(l=>"null"===l?null===a:"array"===l?Array.isArray(a):"object"===l?a&&!Array.isArray(a)&&"object"==typeof a:l===typeof a)}var Gl,Wl={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ru(a){return(a=Math.round(a))<0?0:a>255?255:a}function La(a){return Ru("%"===a[a.length-1]?parseFloat(a)/100*255:parseInt(a))}function Xe(a){return(o="%"===a[a.length-1]?parseFloat(a)/100:parseFloat(a))<0?0:o>1?1:o;var o}function ql(a,o,l){return l<0?l+=1:l>1&&(l-=1),6*l<1?a+(o-a)*l*6:2*l<1?o:3*l<2?a+(o-a)*(2/3-l)*6:a}try{Gl={}.parseCSSColor=function(a){var o,l=a.replace(/ /g,"").toLowerCase();if(l in Wl)return Wl[l].slice();if("#"===l[0])return 4===l.length?(o=parseInt(l.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:7===l.length&&(o=parseInt(l.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var d=l.indexOf("("),p=l.indexOf(")");if(-1!==d&&p+1===l.length){var g=l.substr(0,d),b=l.substr(d+1,p-(d+1)).split(","),w=1;switch(g){case"rgba":if(4!==b.length)return null;w=Xe(b.pop());case"rgb":return 3!==b.length?null:[La(b[0]),La(b[1]),La(b[2]),w];case"hsla":if(4!==b.length)return null;w=Xe(b.pop());case"hsl":if(3!==b.length)return null;var T=(parseFloat(b[0])%360+360)%360/360,S=Xe(b[1]),k=Xe(b[2]),O=k<=.5?k*(S+1):k+S-k*S,L=2*k-O;return[Ru(255*ql(L,O,T+1/3)),Ru(255*ql(L,O,T)),Ru(255*ql(L,O,T-1/3)),w];default:return null}}return null}}catch{}class cn{constructor(o,l,d,p=1){this.r=o,this.g=l,this.b=d,this.a=p}static parse(o){if(!o)return;if(o instanceof cn)return o;if("string"!=typeof o)return;const l=Gl(o);return l?new cn(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toString(){const[o,l,d,p]=this.toArray();return`rgba(${Math.round(o)},${Math.round(l)},${Math.round(d)},${p})`}toArray(){const{r:o,g:l,b:d,a:p}=this;return 0===p?[0,0,0,0]:[255*o/p,255*l/p,255*d/p,p]}toArray01(){const{r:o,g:l,b:d,a:p}=this;return 0===p?[0,0,0,0]:[o/p,l/p,d/p,p]}toArray01PremultipliedAlpha(){const{r:o,g:l,b:d,a:p}=this;return[o,l,d,p]}}cn.black=new cn(0,0,0,1),cn.white=new cn(1,1,1,1),cn.transparent=new cn(0,0,0,0),cn.red=new cn(1,0,0,1),cn.blue=new cn(0,0,1,1);var vn=cn;class Pu{constructor(o,l,d){this.sensitivity=o?l?"variant":"case":l?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,l){return this.collator.compare(o,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Hs{constructor(o,l,d,p,g){this.text=o.normalize?o.normalize():o,this.image=l,this.scale=d,this.fontStack=p,this.textColor=g}}class wo{constructor(o){this.sections=o}static fromString(o){return new wo([new Hs(o,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(o=>0!==o.text.length||o.image&&0!==o.image.name.length)}static factory(o){return o instanceof wo?o:wo.fromString(o)}toString(){return 0===this.sections.length?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const l of this.sections){if(l.image){o.push(["image",l.image.name]);continue}o.push(l.text);const d={};l.fontStack&&(d["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(d["font-scale"]=l.scale),l.textColor&&(d["text-color"]=["rgba"].concat(l.textColor.toArray())),o.push(d)}return o}}class Xr{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new Xr({name:o,available:!1}):null}serialize(){return["image",this.name]}}function Oo(a,o,l,d){return"number"==typeof a&&a>=0&&a<=255&&"number"==typeof o&&o>=0&&o<=255&&"number"==typeof l&&l>=0&&l<=255?void 0===d||"number"==typeof d&&d>=0&&d<=1?null:`Invalid rgba value [${[a,o,l,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof d?[a,o,l,d]:[a,o,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Hd(a){if(null===a||"string"==typeof a||"boolean"==typeof a||"number"==typeof a||a instanceof vn||a instanceof Pu||a instanceof wo||a instanceof Xr)return!0;if(Array.isArray(a)){for(const o of a)if(!Hd(o))return!1;return!0}if("object"==typeof a){for(const o in a)if(!Hd(a[o]))return!1;return!0}return!1}function Tr(a){if(null===a)return Hl;if("string"==typeof a)return Rn;if("boolean"==typeof a)return Ct;if("number"==typeof a)return mt;if(a instanceof vn)return es;if(a instanceof Pu)return Oc;if(a instanceof wo)return $l;if(a instanceof Xr)return ui;if(Array.isArray(a)){const o=a.length;let l;for(const d of a){const p=Tr(d);if(l){if(l===p)continue;l=dn;break}l=p}return Yr(l||dn,o)}return ha}function Ou(a){const o=typeof a;return null===a?"":"string"===o||"number"===o||"boolean"===o?String(a):a instanceof vn||a instanceof wo||a instanceof Xr?a.toString():JSON.stringify(a)}class $s{constructor(o,l){this.type=o,this.value=l}static parse(o,l){if(2!==o.length)return l.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Hd(o[1]))return l.error("invalid value");const d=o[1];let p=Tr(d);const g=l.expectedType;return"array"!==p.kind||0!==p.N||!g||"array"!==g.kind||"number"==typeof g.N&&0!==g.N||(p=g),new $s(p,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof vn?["rgba"].concat(this.value.toArray()):this.value instanceof wo?this.value.serialize():this.value}}var Fu=$s,fo=class{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}};const $d={string:Rn,number:mt,boolean:Ct,object:ha};class Nc{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");let d,p=1;const g=o[0];if("array"===g){let w,T;if(o.length>2){const S=o[1];if("string"!=typeof S||!(S in $d)||"object"===S)return l.error('The item type argument of "array" must be one of string, number, boolean',1);w=$d[S],p++}else w=dn;if(o.length>3){if(null!==o[2]&&("number"!=typeof o[2]||o[2]<0||o[2]!==Math.floor(o[2])))return l.error('The length argument to "array" must be a positive integer literal',2);T=o[2],p++}d=Yr(w,T)}else d=$d[g];const b=[];for(;p<o.length;p++){const w=l.parse(o[p],p,dn);if(!w)return null;b.push(w)}return new Nc(d,b)}evaluate(o){for(let l=0;l<this.args.length;l++){const d=this.args[l].evaluate(o);if(!Br(this.type,Tr(d)))return d;if(l===this.args.length-1)throw new fo(`Expected value to be of type ${An(this.type)}, but found ${An(Tr(d))} instead.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,l=[o.kind];if("array"===o.kind){const d=o.itemType;if("string"===d.kind||"number"===d.kind||"boolean"===d.kind){l.push(d.kind);const p=o.N;("number"==typeof p||this.args.length>1)&&l.push(p)}}return l.concat(this.args.map(d=>d.serialize()))}}var fa=Nc;class Nu{constructor(o){this.type=$l,this.sections=o}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const d=o[1];if(!Array.isArray(d)&&"object"==typeof d)return l.error("First argument must be an image or text section.");const p=[];let g=!1;for(let b=1;b<=o.length-1;++b){const w=o[b];if(g&&"object"==typeof w&&!Array.isArray(w)){g=!1;let T=null;if(w["font-scale"]&&(T=l.parse(w["font-scale"],1,mt),!T))return null;let S=null;if(w["text-font"]&&(S=l.parse(w["text-font"],1,Yr(Rn)),!S))return null;let k=null;if(w["text-color"]&&(k=l.parse(w["text-color"],1,es),!k))return null;const O=p[p.length-1];O.scale=T,O.font=S,O.textColor=k}else{const T=l.parse(o[b],1,dn);if(!T)return null;const S=T.type.kind;if("string"!==S&&"value"!==S&&"null"!==S&&"resolvedImage"!==S)return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,p.push({content:T,scale:null,font:null,textColor:null})}}return new Nu(p)}evaluate(o){return new wo(this.sections.map(l=>{const d=l.content.evaluate(o);return Tr(d)===ui?new Hs("",d,null,null,null):new Hs(Ou(d),null,l.scale?l.scale.evaluate(o):null,l.font?l.font.evaluate(o).join(","):null,l.textColor?l.textColor.evaluate(o):null)}))}eachChild(o){for(const l of this.sections)o(l.content),l.scale&&o(l.scale),l.font&&o(l.font),l.textColor&&o(l.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const l of this.sections){o.push(l.content.serialize());const d={};l.scale&&(d["font-scale"]=l.scale.serialize()),l.font&&(d["text-font"]=l.font.serialize()),l.textColor&&(d["text-color"]=l.textColor.serialize()),o.push(d)}return o}}class Lu{constructor(o){this.type=ui,this.input=o}static parse(o,l){if(2!==o.length)return l.error("Expected two arguments.");const d=l.parse(o[1],1,Rn);return d?new Lu(d):l.error("No image name provided.")}evaluate(o){const l=this.input.evaluate(o),d=Xr.fromString(l);return d&&o.availableImages&&(d.available=o.availableImages.indexOf(l)>-1),d}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Ap={"to-boolean":Ct,"to-color":es,"to-number":mt,"to-string":Rn};class Fo{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const d=o[0];if(("to-boolean"===d||"to-string"===d)&&2!==o.length)return l.error("Expected one argument.");const p=Ap[d],g=[];for(let b=1;b<o.length;b++){const w=l.parse(o[b],b,dn);if(!w)return null;g.push(w)}return new Fo(p,g)}evaluate(o){if("boolean"===this.type.kind)return!!this.args[0].evaluate(o);if("color"===this.type.kind){let l,d;for(const p of this.args){if(l=p.evaluate(o),d=null,l instanceof vn)return l;if("string"==typeof l){const g=o.parseColor(l);if(g)return g}else if(Array.isArray(l)&&(d=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Oo(l[0],l[1],l[2],l[3]),!d))return new vn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new fo(d||`Could not parse color from value '${"string"==typeof l?l:String(JSON.stringify(l))}'`)}if("number"===this.type.kind){let l=null;for(const d of this.args){if(l=d.evaluate(o),null===l)return 0;const p=Number(l);if(!isNaN(p))return p}throw new fo(`Could not convert ${JSON.stringify(l)} to number.`)}return"formatted"===this.type.kind?wo.fromString(Ou(this.args[0].evaluate(o))):"resolvedImage"===this.type.kind?Xr.fromString(Ou(this.args[0].evaluate(o))):Ou(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Nu([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Lu(this.args[0]).serialize();const o=[`to-${this.type.kind}`];return this.eachChild(l=>{o.push(l.serialize())}),o}}var ri=Fo;const Mp=["Unknown","Point","LineString","Polygon"];var Bu=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Mp[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:l,y:d}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(l*o-a[0])+this.featureDistanceData.bearing[1]*(d*o-a[1])}return 0}parseColor(a){let o=this._parseColorCache[a];return o||(o=this._parseColorCache[a]=vn.parse(a)),o}};class Lc{constructor(o,l,d,p){this.name=o,this.type=l,this._evaluate=d,this.args=p}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,l){const d=o[0],p=Lc.definitions[d];if(!p)return l.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(p)?p[0]:p.type,b=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,w=b.filter(([S])=>!Array.isArray(S)||S.length===o.length-1);let T=null;for(const[S,k]of w){T=new qd(l.registry,l.path,null,l.scope);const O=[];let L=!1;for(let V=1;V<o.length;V++){const j=o[V],G=Array.isArray(S)?S[V-1]:S.type,Q=T.parse(j,1+O.length,G);if(!Q){L=!0;break}O.push(Q)}if(!L)if(Array.isArray(S)&&S.length!==O.length)T.error(`Expected ${S.length} arguments, but found ${O.length} instead.`);else{for(let V=0;V<O.length;V++){const j=Array.isArray(S)?S[V]:S.type,G=O[V];T.concat(V+1).checkSubtype(j,G.type)}if(0===T.errors.length)return new Lc(d,g,k,O)}}if(1===w.length)l.errors.push(...T.errors);else{const S=(w.length?w:b).map(([O])=>{return L=O,Array.isArray(L)?`(${L.map(An).join(", ")})`:`(${An(L.type)}...)`;var L}).join(" | "),k=[];for(let O=1;O<o.length;O++){const L=l.parse(o[O],1+k.length);if(!L)return null;k.push(An(L.type))}l.error(`Expected arguments of type ${S}, but found (${k.join(", ")}) instead.`)}return null}static register(o,l){Lc.definitions=l;for(const d in l)o[d]=Lc}}var Tt=Lc;class Gd{constructor(o,l,d){this.type=Oc,this.locale=d,this.caseSensitive=o,this.diacriticSensitive=l}static parse(o,l){if(2!==o.length)return l.error("Expected one argument.");const d=o[1];if("object"!=typeof d||Array.isArray(d))return l.error("Collator options argument must be an object.");const p=l.parse(void 0!==d["case-sensitive"]&&d["case-sensitive"],1,Ct);if(!p)return null;const g=l.parse(void 0!==d["diacritic-sensitive"]&&d["diacritic-sensitive"],1,Ct);if(!g)return null;let b=null;return d.locale&&(b=l.parse(d.locale,1,Rn),!b)?null:new Gd(p,g,b)}evaluate(o){return new Pu(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}const Pn=8192;function Eo(a,o){a[0]=Math.min(a[0],o[0]),a[1]=Math.min(a[1],o[1]),a[2]=Math.max(a[2],o[0]),a[3]=Math.max(a[3],o[1])}function Bc(a,o){return!(a[0]<=o[0]||a[2]>=o[2]||a[1]<=o[1]||a[3]>=o[3])}function Wd(a,o){const l=(180+a[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,p=Math.pow(2,o.z);return[Math.round(l*p*Pn),Math.round(d*p*Pn)]}function af(a,o,l){const d=a[0]-o[0],p=a[1]-o[1],g=a[0]-l[0],b=a[1]-l[1];return d*b-g*p==0&&d*g<=0&&p*b<=0}function zc(a,o){let l=!1;for(let b=0,w=o.length;b<w;b++){const T=o[b];for(let S=0,k=T.length;S<k-1;S++){if(af(a,T[S],T[S+1]))return!1;(p=T[S])[1]>(d=a)[1]!=(g=T[S+1])[1]>d[1]&&d[0]<(g[0]-p[0])*(d[1]-p[1])/(g[1]-p[1])+p[0]&&(l=!l)}}var d,p,g;return l}function Vc(a,o){for(let l=0;l<o.length;l++)if(zc(a,o[l]))return!0;return!1}function jc(a,o,l,d){const p=d[0]-l[0],g=d[1]-l[1],b=(a[0]-l[0])*g-p*(a[1]-l[1]),w=(o[0]-l[0])*g-p*(o[1]-l[1]);return b>0&&w<0||b<0&&w>0}function Zl(a,o,l){for(const S of l)for(let k=0;k<S.length-1;++k)if((w=[(b=S[k+1])[0]-(g=S[k])[0],b[1]-g[1]])[0]*(T=[(p=o)[0]-(d=a)[0],p[1]-d[1]])[1]-w[1]*T[0]!=0&&jc(d,p,g,b)&&jc(g,b,d,p))return!0;var d,p,g,b,w,T;return!1}function pl(a,o){for(let l=0;l<a.length;++l)if(!zc(a[l],o))return!1;for(let l=0;l<a.length-1;++l)if(Zl(a[l],a[l+1],o))return!1;return!0}function gn(a,o){for(let l=0;l<o.length;l++)if(pl(a,o[l]))return!0;return!1}function Yl(a,o,l){const d=[];for(let p=0;p<a.length;p++){const g=[];for(let b=0;b<a[p].length;b++){const w=Wd(a[p][b],l);Eo(o,w),g.push(w)}d.push(g)}return d}function Uc(a,o,l){const d=[];for(let p=0;p<a.length;p++){const g=Yl(a[p],o,l);d.push(g)}return d}function Sr(a,o,l,d){if(a[0]<l[0]||a[0]>l[2]){const p=.5*d;let g=a[0]-l[0]>p?-d:l[0]-a[0]>p?d:0;0===g&&(g=a[0]-l[2]>p?-d:l[2]-a[0]>p?d:0),a[0]+=g}Eo(o,a)}function Ba(a,o,l,d){const p=Math.pow(2,d.z)*Pn,g=[d.x*Pn,d.y*Pn],b=[];if(!a)return b;for(const w of a)for(const T of w){const S=[T.x+g[0],T.y+g[1]];Sr(S,o,l,p),b.push(S)}return b}function di(a,o,l,d){const p=Math.pow(2,d.z)*Pn,g=[d.x*Pn,d.y*Pn],b=[];if(!a)return b;for(const T of a){const S=[];for(const k of T){const O=[k.x+g[0],k.y+g[1]];Eo(o,O),S.push(O)}b.push(S)}if(o[2]-o[0]<=p/2){(w=o)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const T of b)for(const S of T)Sr(S,o,l,p)}var w;return b}class Ri{constructor(o,l){this.type=Ct,this.geojson=o,this.geometries=l}static parse(o,l){if(2!==o.length)return l.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Hd(o[1])){const d=o[1];if("FeatureCollection"===d.type)for(let p=0;p<d.features.length;++p){const g=d.features[p].geometry.type;if("Polygon"===g||"MultiPolygon"===g)return new Ri(d,d.features[p].geometry)}else if("Feature"===d.type){const p=d.geometry.type;if("Polygon"===p||"MultiPolygon"===p)return new Ri(d,d.geometry)}else if("Polygon"===d.type||"MultiPolygon"===d.type)return new Ri(d,d)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(null!=o.geometry()&&null!=o.canonicalID()){if("Point"===o.geometryType())return function(l,d){const p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],b=l.canonicalID();if(!b)return!1;if("Polygon"===d.type){const w=Yl(d.coordinates,g,b),T=Ba(l.geometry(),p,g,b);if(!Bc(p,g))return!1;for(const S of T)if(!zc(S,w))return!1}if("MultiPolygon"===d.type){const w=Uc(d.coordinates,g,b),T=Ba(l.geometry(),p,g,b);if(!Bc(p,g))return!1;for(const S of T)if(!Vc(S,w))return!1}return!0}(o,this.geometries);if("LineString"===o.geometryType())return function(l,d){const p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],b=l.canonicalID();if(!b)return!1;if("Polygon"===d.type){const w=Yl(d.coordinates,g,b),T=di(l.geometry(),p,g,b);if(!Bc(p,g))return!1;for(const S of T)if(!pl(S,w))return!1}if("MultiPolygon"===d.type){const w=Uc(d.coordinates,g,b),T=di(l.geometry(),p,g,b);if(!Bc(p,g))return!1;for(const S of T)if(!gn(S,w))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var lf=Ri;function Hc(a){if(a instanceof Tt&&("get"===a.name&&1===a.args.length||"feature-state"===a.name||"has"===a.name&&1===a.args.length||"properties"===a.name||"geometry-type"===a.name||"id"===a.name||/^filter-/.test(a.name))||a instanceof lf)return!1;let o=!0;return a.eachChild(l=>{o&&!Hc(l)&&(o=!1)}),o}function zu(a){if(a instanceof Tt&&"feature-state"===a.name)return!1;let o=!0;return a.eachChild(l=>{o&&!zu(l)&&(o=!1)}),o}function Gs(a,o){if(a instanceof Tt&&o.indexOf(a.name)>=0)return!1;let l=!0;return a.eachChild(d=>{l&&!Gs(d,o)&&(l=!1)}),l}class _l{constructor(o,l){this.type=l.type,this.name=o,this.boundExpression=l}static parse(o,l){if(2!==o.length||"string"!=typeof o[1])return l.error("'var' expression requires exactly one string literal argument.");const d=o[1];return l.scope.has(d)?new _l(d,l.scope.get(d)):l.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Xl=_l;class Vu{constructor(o,l=[],d,p=new sf,g=[]){this.registry=o,this.path=l,this.key=l.map(b=>`[${b}]`).join(""),this.scope=p,this.errors=g,this.expectedType=d}parse(o,l,d,p,g={}){return l?this.concat(l,d,p)._parse(o,g):this._parse(o,g)}_parse(o,l){function d(p,g,b){return"assert"===b?new fa(g,[p]):"coerce"===b?new ri(g,[p]):p}if(null!==o&&"string"!=typeof o&&"boolean"!=typeof o&&"number"!=typeof o||(o=["literal",o]),Array.isArray(o)){if(0===o.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=o[0];if("string"!=typeof p)return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[p];if(g){let b=g.parse(o,this);if(!b)return null;if(this.expectedType){const w=this.expectedType,T=b.type;if("string"!==w.kind&&"number"!==w.kind&&"boolean"!==w.kind&&"object"!==w.kind&&"array"!==w.kind||"value"!==T.kind)if("color"!==w.kind&&"formatted"!==w.kind&&"resolvedImage"!==w.kind||"value"!==T.kind&&"string"!==T.kind){if(this.checkSubtype(w,T))return null}else b=d(b,w,l.typeAnnotation||"coerce");else b=d(b,w,l.typeAnnotation||"assert")}if(!(b instanceof Fu)&&"resolvedImage"!==b.type.kind&&za(b)){const w=new Bu;try{b=new Fu(b.type,b.evaluate(w))}catch(T){return this.error(T.message),null}}return b}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===o?"'undefined' value invalid. Use null instead.":"object"==typeof o?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,l,d){const p="number"==typeof o?this.path.concat(o):this.path,g=d?this.scope.concat(d):this.scope;return new Vu(this.registry,p,l||null,g,this.errors)}error(o,...l){const d=`${this.key}${l.map(p=>`[${p}]`).join("")}`;this.errors.push(new Us(d,o))}checkSubtype(o,l){const d=Br(o,l);return d&&this.error(d),d}}var qd=Vu;function za(a){if(a instanceof Xl)return za(a.boundExpression);if(a instanceof Tt&&"error"===a.name||a instanceof Gd||a instanceof lf)return!1;const o=a instanceof ri||a instanceof fa;let l=!0;return a.eachChild(d=>{l=o?l&&za(d):l&&d instanceof Fu}),!!l&&Hc(a)&&Gs(a,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Va(a,o){const l=a.length-1;let d,p,g=0,b=l,w=0;for(;g<=b;)if(w=Math.floor((g+b)/2),d=a[w],p=a[w+1],d<=o){if(w===l||o<p)return w;g=w+1}else{if(!(d>o))throw new fo("Input is not a number.");b=w-1}return 0}class pa{constructor(o,l,d){this.type=o,this.input=l,this.labels=[],this.outputs=[];for(const[p,g]of d)this.labels.push(p),this.outputs.push(g)}static parse(o,l){if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return l.error("Expected an even number of arguments.");const d=l.parse(o[1],1,mt);if(!d)return null;const p=[];let g=null;l.expectedType&&"value"!==l.expectedType.kind&&(g=l.expectedType);for(let b=1;b<o.length;b+=2){const w=1===b?-1/0:o[b],T=o[b+1],S=b,k=b+1;if("number"!=typeof w)return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(p.length&&p[p.length-1][0]>=w)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',S);const O=l.parse(T,k,g);if(!O)return null;g=g||O.type,p.push([w,O])}return new pa(g,d,p)}evaluate(o){const l=this.labels,d=this.outputs;if(1===l.length)return d[0].evaluate(o);const p=this.input.evaluate(o);if(p<=l[0])return d[0].evaluate(o);const g=l.length;return p>=l[g-1]?d[g-1].evaluate(o):d[Va(l,p)].evaluate(o)}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&o.push(this.labels[l]),o.push(this.outputs[l].serialize());return o}}var ju=pa;function On(a,o,l){return a*(1-l)+o*l}var ja=Object.freeze({__proto__:null,number:On,color:function(a,o,l){return new vn(On(a.r,o.r,l),On(a.g,o.g,l),On(a.b,o.b,l),On(a.a,o.a,l))},array:function(a,o,l){return a.map((d,p)=>On(d,o[p],l))}});const Ht=4/29,Ws=6/29,$c=3*Ws*Ws,Kl=Math.PI/180,kp=180/Math.PI;function Gc(a){return a>.008856451679035631?Math.pow(a,1/3):a/$c+Ht}function Uu(a){return a>Ws?a*a*a:$c*(a-Ht)}function ts(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function ns(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Co(a){const o=ns(a.r),l=ns(a.g),d=ns(a.b),p=Gc((.4124564*o+.3575761*l+.1804375*d)/.95047),g=Gc((.2126729*o+.7151522*l+.072175*d)/1);return{l:116*g-16,a:500*(p-g),b:200*(g-Gc((.0193339*o+.119192*l+.9503041*d)/1.08883)),alpha:a.a}}function As(a){let o=(a.l+16)/116,l=isNaN(a.a)?o:o+a.a/500,d=isNaN(a.b)?o:o-a.b/200;return o=1*Uu(o),l=.95047*Uu(l),d=1.08883*Uu(d),new vn(ts(3.2404542*l-1.5371385*o-.4985314*d),ts(-.969266*l+1.8760108*o+.041556*d),ts(.0556434*l-.2040259*o+1.0572252*d),a.alpha)}function wi(a,o,l){const d=o-a;return a+l*(d>180||d<-180?d-360*Math.round(d/360):d)}const Ua={forward:Co,reverse:As,interpolate:function(a,o,l){return{l:On(a.l,o.l,l),a:On(a.a,o.a,l),b:On(a.b,o.b,l),alpha:On(a.alpha,o.alpha,l)}}},ml={forward:function(a){const{l:o,a:l,b:d}=Co(a),p=Math.atan2(d,l)*kp;return{h:p<0?p+360:p,c:Math.sqrt(l*l+d*d),l:o,alpha:a.a}},reverse:function(a){const o=a.h*Kl,l=a.c;return As({l:a.l,a:Math.cos(o)*l,b:Math.sin(o)*l,alpha:a.alpha})},interpolate:function(a,o,l){return{h:wi(a.h,o.h,l),c:On(a.c,o.c,l),l:On(a.l,o.l,l),alpha:On(a.alpha,o.alpha,l)}}};var Hu=Object.freeze({__proto__:null,lab:Ua,hcl:ml});class Ql{constructor(o,l,d,p,g){this.type=o,this.operator=l,this.interpolation=d,this.input=p,this.labels=[],this.outputs=[];for(const[b,w]of g)this.labels.push(b),this.outputs.push(w)}static interpolationFactor(o,l,d,p){let g=0;if("exponential"===o.name)g=Ms(l,o.base,d,p);else if("linear"===o.name)g=Ms(l,1,d,p);else if("cubic-bezier"===o.name){const b=o.controlPoints;g=new kn(b[0],b[1],b[2],b[3]).solve(Ms(l,1,d,p))}return g}static parse(o,l){let[d,p,g,...b]=o;if(!Array.isArray(p)||0===p.length)return l.error("Expected an interpolation type expression.",1);if("linear"===p[0])p={name:"linear"};else if("exponential"===p[0]){const S=p[1];if("number"!=typeof S)return l.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:S}}else{if("cubic-bezier"!==p[0])return l.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const S=p.slice(1);if(4!==S.length||S.some(k=>"number"!=typeof k||k<0||k>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:S}}}if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(g=l.parse(g,2,mt),!g)return null;const w=[];let T=null;"interpolate-hcl"===d||"interpolate-lab"===d?T=es:l.expectedType&&"value"!==l.expectedType.kind&&(T=l.expectedType);for(let S=0;S<b.length;S+=2){const k=b[S],O=b[S+1],L=S+3,V=S+4;if("number"!=typeof k)return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(w.length&&w[w.length-1][0]>=k)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',L);const j=l.parse(O,V,T);if(!j)return null;T=T||j.type,w.push([k,j])}return"number"===T.kind||"color"===T.kind||"array"===T.kind&&"number"===T.itemType.kind&&"number"==typeof T.N?new Ql(T,d,p,g,w):l.error(`Type ${An(T)} is not interpolatable.`)}evaluate(o){const l=this.labels,d=this.outputs;if(1===l.length)return d[0].evaluate(o);const p=this.input.evaluate(o);if(p<=l[0])return d[0].evaluate(o);const g=l.length;if(p>=l[g-1])return d[g-1].evaluate(o);const b=Va(l,p),w=Ql.interpolationFactor(this.interpolation,p,l[b],l[b+1]),T=d[b].evaluate(o),S=d[b+1].evaluate(o);return"interpolate"===this.operator?ja[this.type.kind.toLowerCase()](T,S,w):"interpolate-hcl"===this.operator?ml.reverse(ml.interpolate(ml.forward(T),ml.forward(S),w)):Ua.reverse(Ua.interpolate(Ua.forward(T),Ua.forward(S),w))}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const l=[this.operator,o,this.input.serialize()];for(let d=0;d<this.labels.length;d++)l.push(this.labels[d],this.outputs[d].serialize());return l}}function Ms(a,o,l,d){const p=d-l,g=a-l;return 0===p?0:1===o?g/p:(Math.pow(o,g)-1)/(Math.pow(o,p)-1)}var No=Ql;class $u{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expectected at least one argument.");let d=null;const p=l.expectedType;p&&"value"!==p.kind&&(d=p);const g=[];for(const w of o.slice(1)){const T=l.parse(w,1+g.length,d,void 0,{typeAnnotation:"omit"});if(!T)return null;d=d||T.type,g.push(T)}const b=p&&g.some(w=>Br(p,w.type));return new $u(b?dn:d,g)}evaluate(o){let l,d=null,p=0;for(const g of this.args){if(p++,d=g.evaluate(o),d&&d instanceof Xr&&!d.available&&(l||(l=d),d=null,p===this.args.length))return l;if(null!==d)break}return d}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(l=>{o.push(l.serialize())}),o}}var Gu=$u;class Ha{constructor(o,l){this.type=l.type,this.bindings=[].concat(o),this.result=l}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const l of this.bindings)o(l[1]);o(this.result)}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const d=[];for(let g=1;g<o.length-1;g+=2){const b=o[g];if("string"!=typeof b)return l.error(`Expected string, but found ${typeof b} instead.`,g);if(/[^a-zA-Z0-9_]/.test(b))return l.error("Variable names must contain only alphanumeric characters or '_'.",g);const w=l.parse(o[g+1],g+1);if(!w)return null;d.push([b,w])}const p=l.parse(o[o.length-1],o.length-1,l.expectedType,d);return p?new Ha(d,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[l,d]of this.bindings)o.push(l,d.serialize());return o.push(this.result.serialize()),o}}var Wc=Ha;class qc{constructor(o,l,d){this.type=o,this.index=l,this.input=d}static parse(o,l){if(3!==o.length)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const d=l.parse(o[1],1,mt),p=l.parse(o[2],2,Yr(l.expectedType||dn));return d&&p?new qc(p.type.itemType,d,p):null}evaluate(o){const l=this.index.evaluate(o),d=this.input.evaluate(o);if(l<0)throw new fo(`Array index out of bounds: ${l} < 0.`);if(l>=d.length)throw new fo(`Array index out of bounds: ${l} > ${d.length-1}.`);if(l!==Math.floor(l))throw new fo(`Array index must be an integer, but found ${l} instead.`);return d[l]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Zc=qc;class Wu{constructor(o,l){this.type=Ct,this.needle=o,this.haystack=l}static parse(o,l){if(3!==o.length)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const d=l.parse(o[1],1,dn),p=l.parse(o[2],2,dn);return d&&p?ki(d.type,[Ct,Rn,mt,Hl,dn])?new Wu(d,p):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${An(d.type)} instead`):null}evaluate(o){const l=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(null==d)return!1;if(!mn(l,["boolean","string","number","null"]))throw new fo(`Expected first argument to be of type boolean, string, number or null, but found ${An(Tr(l))} instead.`);if(!mn(d,["string","array"]))throw new fo(`Expected second argument to be of type array or string, but found ${An(Tr(d))} instead.`);return d.indexOf(l)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var qu=Wu;class Yc{constructor(o,l,d){this.type=mt,this.needle=o,this.haystack=l,this.fromIndex=d}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const d=l.parse(o[1],1,dn),p=l.parse(o[2],2,dn);if(!d||!p)return null;if(!ki(d.type,[Ct,Rn,mt,Hl,dn]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${An(d.type)} instead`);if(4===o.length){const g=l.parse(o[3],3,mt);return g?new Yc(d,p,g):null}return new Yc(d,p)}evaluate(o){const l=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(!mn(l,["boolean","string","number","null"]))throw new fo(`Expected first argument to be of type boolean, string, number or null, but found ${An(Tr(l))} instead.`);if(!mn(d,["string","array"]))throw new fo(`Expected second argument to be of type array or string, but found ${An(Tr(d))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(o);return d.indexOf(l,p)}return d.indexOf(l)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Xc=Yc;class Zu{constructor(o,l,d,p,g,b){this.inputType=o,this.type=l,this.input=d,this.cases=p,this.outputs=g,this.otherwise=b}static parse(o,l){if(o.length<5)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return l.error("Expected an even number of arguments.");let d,p;l.expectedType&&"value"!==l.expectedType.kind&&(p=l.expectedType);const g={},b=[];for(let S=2;S<o.length-1;S+=2){let k=o[S];const O=o[S+1];Array.isArray(k)||(k=[k]);const L=l.concat(S);if(0===k.length)return L.error("Expected at least one branch label.");for(const j of k){if("number"!=typeof j&&"string"!=typeof j)return L.error("Branch labels must be numbers or strings.");if("number"==typeof j&&Math.abs(j)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof j&&Math.floor(j)!==j)return L.error("Numeric branch labels must be integer values.");if(d){if(L.checkSubtype(d,Tr(j)))return null}else d=Tr(j);if(void 0!==g[String(j)])return L.error("Branch labels must be unique.");g[String(j)]=b.length}const V=l.parse(O,S,p);if(!V)return null;p=p||V.type,b.push(V)}const w=l.parse(o[1],1,dn);if(!w)return null;const T=l.parse(o[o.length-1],o.length-1,p);return T?"value"!==w.type.kind&&l.concat(1).checkSubtype(d,w.type)?null:new Zu(d,p,w,g,b,T):null}evaluate(o){const l=this.input.evaluate(o);return(Tr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),d=[],p={};for(const b of l){const w=p[this.cases[b]];void 0===w?(p[this.cases[b]]=d.length,d.push([this.cases[b],[b]])):d[w][1].push(b)}const g=b=>"number"===this.inputType.kind?Number(b):b;for(const[b,w]of d)o.push(1===w.length?g(w[0]):w.map(g)),o.push(this.outputs[b].serialize());return o.push(this.otherwise.serialize()),o}}var cf=Zu;class To{constructor(o,l,d){this.type=o,this.branches=l,this.otherwise=d}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return l.error("Expected an odd number of arguments.");let d;l.expectedType&&"value"!==l.expectedType.kind&&(d=l.expectedType);const p=[];for(let b=1;b<o.length-1;b+=2){const w=l.parse(o[b],b,Ct);if(!w)return null;const T=l.parse(o[b+1],b+1,d);if(!T)return null;p.push([w,T]),d=d||T.type}const g=l.parse(o[o.length-1],o.length-1,d);return g?new To(d,p,g):null}evaluate(o){for(const[l,d]of this.branches)if(l.evaluate(o))return d.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[l,d]of this.branches)o(l),o(d);o(this.otherwise)}outputDefined(){return this.branches.every(([o,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(l=>{o.push(l.serialize())}),o}}var Rp=To;class $a{constructor(o,l,d,p){this.type=o,this.input=l,this.beginIndex=d,this.endIndex=p}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const d=l.parse(o[1],1,dn),p=l.parse(o[2],2,mt);if(!d||!p)return null;if(!ki(d.type,[Yr(dn),Rn,dn]))return l.error(`Expected first argument to be of type array or string, but found ${An(d.type)} instead`);if(4===o.length){const g=l.parse(o[3],3,mt);return g?new $a(d.type,d,p,g):null}return new $a(d.type,d,p)}evaluate(o){const l=this.input.evaluate(o),d=this.beginIndex.evaluate(o);if(!mn(l,["string","array"]))throw new fo(`Expected first argument to be of type array or string, but found ${An(Tr(l))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(o);return l.slice(d,p)}return l.slice(d)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var uf=$a;function Jl(a,o){return"=="===a||"!="===a?"boolean"===o.kind||"string"===o.kind||"number"===o.kind||"null"===o.kind||"value"===o.kind:"string"===o.kind||"number"===o.kind||"value"===o.kind}function df(a,o,l,d){return 0===d.compare(o,l)}function ec(a,o,l){const d="=="!==a&&"!="!==a;return class uU{constructor(g,b,w){this.type=Ct,this.lhs=g,this.rhs=b,this.collator=w,this.hasUntypedArgument="value"===g.type.kind||"value"===b.type.kind}static parse(g,b){if(3!==g.length&&4!==g.length)return b.error("Expected two or three arguments.");const w=g[0];let T=b.parse(g[1],1,dn);if(!T)return null;if(!Jl(w,T.type))return b.concat(1).error(`"${w}" comparisons are not supported for type '${An(T.type)}'.`);let S=b.parse(g[2],2,dn);if(!S)return null;if(!Jl(w,S.type))return b.concat(2).error(`"${w}" comparisons are not supported for type '${An(S.type)}'.`);if(T.type.kind!==S.type.kind&&"value"!==T.type.kind&&"value"!==S.type.kind)return b.error(`Cannot compare types '${An(T.type)}' and '${An(S.type)}'.`);d&&("value"===T.type.kind&&"value"!==S.type.kind?T=new fa(S.type,[T]):"value"!==T.type.kind&&"value"===S.type.kind&&(S=new fa(T.type,[S])));let k=null;if(4===g.length){if("string"!==T.type.kind&&"string"!==S.type.kind&&"value"!==T.type.kind&&"value"!==S.type.kind)return b.error("Cannot use collator to compare non-string types.");if(k=b.parse(g[3],3,Oc),!k)return null}return new uU(T,S,k)}evaluate(g){const b=this.lhs.evaluate(g),w=this.rhs.evaluate(g);if(d&&this.hasUntypedArgument){const T=Tr(b),S=Tr(w);if(T.kind!==S.kind||"string"!==T.kind&&"number"!==T.kind)throw new fo(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${T.kind}, ${S.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const T=Tr(b),S=Tr(w);if("string"!==T.kind||"string"!==S.kind)return o(g,b,w)}return this.collator?l(g,b,w,this.collator.evaluate(g)):o(g,b,w)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[a];return this.eachChild(b=>{g.push(b.serialize())}),g}}}const hf=ec("==",function(a,o,l){return o===l},df),ff=ec("!=",function(a,o,l){return o!==l},function(a,o,l,d){return!df(0,o,l,d)}),Yd=ec("<",function(a,o,l){return o<l},function(a,o,l,d){return d.compare(o,l)<0}),pf=ec(">",function(a,o,l){return o>l},function(a,o,l,d){return d.compare(o,l)>0}),zr=ec("<=",function(a,o,l){return o<=l},function(a,o,l,d){return d.compare(o,l)<=0}),Pp=ec(">=",function(a,o,l){return o>=l},function(a,o,l,d){return d.compare(o,l)>=0});class Xd{constructor(o,l,d,p,g,b){this.type=Rn,this.number=o,this.locale=l,this.currency=d,this.unit=p,this.minFractionDigits=g,this.maxFractionDigits=b}static parse(o,l){if(3!==o.length)return l.error("Expected two arguments.");const d=l.parse(o[1],1,mt);if(!d)return null;const p=o[2];if("object"!=typeof p||Array.isArray(p))return l.error("NumberFormat options argument must be an object.");let g=null;if(p.locale&&(g=l.parse(p.locale,1,Rn),!g))return null;let b=null;if(p.currency&&(b=l.parse(p.currency,1,Rn),!b))return null;let w=null;if(p.unit&&(w=l.parse(p.unit,1,Rn),!w))return null;let T=null;if(p["min-fraction-digits"]&&(T=l.parse(p["min-fraction-digits"],1,mt),!T))return null;let S=null;return p["max-fraction-digits"]&&(S=l.parse(p["max-fraction-digits"],1,mt),!S)?null:new Xd(d,g,b,w,T,S)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class Yu{constructor(o){this.type=mt,this.input=o}static parse(o,l){if(2!==o.length)return l.error(`Expected 1 argument, but found ${o.length-1} instead.`);const d=l.parse(o[1],1);return d?"array"!==d.type.kind&&"string"!==d.type.kind&&"value"!==d.type.kind?l.error(`Expected argument of type string or array, but found ${An(d.type)} instead.`):new Yu(d):null}evaluate(o){const l=this.input.evaluate(o);if("string"==typeof l||Array.isArray(l))return l.length;throw new fo(`Expected value to be of type string or array, but found ${An(Tr(l))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(l=>{o.push(l.serialize())}),o}}const Xn={"==":hf,"!=":ff,">":pf,"<":Yd,">=":Pp,"<=":zr,array:fa,at:Zc,boolean:fa,case:Rp,coalesce:Gu,collator:Gd,format:Nu,image:Lu,in:qu,"index-of":Xc,interpolate:No,"interpolate-hcl":No,"interpolate-lab":No,length:Yu,let:Wc,literal:Fu,match:cf,number:fa,"number-format":Xd,object:fa,slice:uf,step:ju,string:fa,"to-boolean":ri,"to-color":ri,"to-number":ri,"to-string":ri,var:Xl,within:lf};function _f(a,[o,l,d,p]){o=o.evaluate(a),l=l.evaluate(a),d=d.evaluate(a);const g=p?p.evaluate(a):1,b=Oo(o,l,d,g);if(b)throw new fo(b);return new vn(o/255*g,l/255*g,d/255*g,g)}function Kd(a,o){return a in o}function xn(a,o){const l=o[a];return void 0===l?null:l}function sr(a){return{type:a}}Tt.register(Xn,{error:[{kind:"error"},[Rn],(a,[o])=>{throw new fo(o.evaluate(a))}],typeof:[Rn,[dn],(a,[o])=>An(Tr(o.evaluate(a)))],"to-rgba":[Yr(mt,4),[es],(a,[o])=>o.evaluate(a).toArray()],rgb:[es,[mt,mt,mt],_f],rgba:[es,[mt,mt,mt,mt],_f],has:{type:Ct,overloads:[[[Rn],(a,[o])=>Kd(o.evaluate(a),a.properties())],[[Rn,ha],(a,[o,l])=>Kd(o.evaluate(a),l.evaluate(a))]]},get:{type:dn,overloads:[[[Rn],(a,[o])=>xn(o.evaluate(a),a.properties())],[[Rn,ha],(a,[o,l])=>xn(o.evaluate(a),l.evaluate(a))]]},"feature-state":[dn,[Rn],(a,[o])=>xn(o.evaluate(a),a.featureState||{})],properties:[ha,[],a=>a.properties()],"geometry-type":[Rn,[],a=>a.geometryType()],id:[dn,[],a=>a.id()],zoom:[mt,[],a=>a.globals.zoom],pitch:[mt,[],a=>a.globals.pitch||0],"distance-from-center":[mt,[],a=>a.distanceFromCenter()],"heatmap-density":[mt,[],a=>a.globals.heatmapDensity||0],"line-progress":[mt,[],a=>a.globals.lineProgress||0],"sky-radial-progress":[mt,[],a=>a.globals.skyRadialProgress||0],accumulated:[dn,[],a=>void 0===a.globals.accumulated?null:a.globals.accumulated],"+":[mt,sr(mt),(a,o)=>{let l=0;for(const d of o)l+=d.evaluate(a);return l}],"*":[mt,sr(mt),(a,o)=>{let l=1;for(const d of o)l*=d.evaluate(a);return l}],"-":{type:mt,overloads:[[[mt,mt],(a,[o,l])=>o.evaluate(a)-l.evaluate(a)],[[mt],(a,[o])=>-o.evaluate(a)]]},"/":[mt,[mt,mt],(a,[o,l])=>o.evaluate(a)/l.evaluate(a)],"%":[mt,[mt,mt],(a,[o,l])=>o.evaluate(a)%l.evaluate(a)],ln2:[mt,[],()=>Math.LN2],pi:[mt,[],()=>Math.PI],e:[mt,[],()=>Math.E],"^":[mt,[mt,mt],(a,[o,l])=>Math.pow(o.evaluate(a),l.evaluate(a))],sqrt:[mt,[mt],(a,[o])=>Math.sqrt(o.evaluate(a))],log10:[mt,[mt],(a,[o])=>Math.log(o.evaluate(a))/Math.LN10],ln:[mt,[mt],(a,[o])=>Math.log(o.evaluate(a))],log2:[mt,[mt],(a,[o])=>Math.log(o.evaluate(a))/Math.LN2],sin:[mt,[mt],(a,[o])=>Math.sin(o.evaluate(a))],cos:[mt,[mt],(a,[o])=>Math.cos(o.evaluate(a))],tan:[mt,[mt],(a,[o])=>Math.tan(o.evaluate(a))],asin:[mt,[mt],(a,[o])=>Math.asin(o.evaluate(a))],acos:[mt,[mt],(a,[o])=>Math.acos(o.evaluate(a))],atan:[mt,[mt],(a,[o])=>Math.atan(o.evaluate(a))],min:[mt,sr(mt),(a,o)=>Math.min(...o.map(l=>l.evaluate(a)))],max:[mt,sr(mt),(a,o)=>Math.max(...o.map(l=>l.evaluate(a)))],abs:[mt,[mt],(a,[o])=>Math.abs(o.evaluate(a))],round:[mt,[mt],(a,[o])=>{const l=o.evaluate(a);return l<0?-Math.round(-l):Math.round(l)}],floor:[mt,[mt],(a,[o])=>Math.floor(o.evaluate(a))],ceil:[mt,[mt],(a,[o])=>Math.ceil(o.evaluate(a))],"filter-==":[Ct,[Rn,dn],(a,[o,l])=>a.properties()[o.value]===l.value],"filter-id-==":[Ct,[dn],(a,[o])=>a.id()===o.value],"filter-type-==":[Ct,[Rn],(a,[o])=>a.geometryType()===o.value],"filter-<":[Ct,[Rn,dn],(a,[o,l])=>{const d=a.properties()[o.value],p=l.value;return typeof d==typeof p&&d<p}],"filter-id-<":[Ct,[dn],(a,[o])=>{const l=a.id(),d=o.value;return typeof l==typeof d&&l<d}],"filter->":[Ct,[Rn,dn],(a,[o,l])=>{const d=a.properties()[o.value],p=l.value;return typeof d==typeof p&&d>p}],"filter-id->":[Ct,[dn],(a,[o])=>{const l=a.id(),d=o.value;return typeof l==typeof d&&l>d}],"filter-<=":[Ct,[Rn,dn],(a,[o,l])=>{const d=a.properties()[o.value],p=l.value;return typeof d==typeof p&&d<=p}],"filter-id-<=":[Ct,[dn],(a,[o])=>{const l=a.id(),d=o.value;return typeof l==typeof d&&l<=d}],"filter->=":[Ct,[Rn,dn],(a,[o,l])=>{const d=a.properties()[o.value],p=l.value;return typeof d==typeof p&&d>=p}],"filter-id->=":[Ct,[dn],(a,[o])=>{const l=a.id(),d=o.value;return typeof l==typeof d&&l>=d}],"filter-has":[Ct,[dn],(a,[o])=>o.value in a.properties()],"filter-has-id":[Ct,[],a=>null!==a.id()&&void 0!==a.id()],"filter-type-in":[Ct,[Yr(Rn)],(a,[o])=>o.value.indexOf(a.geometryType())>=0],"filter-id-in":[Ct,[Yr(dn)],(a,[o])=>o.value.indexOf(a.id())>=0],"filter-in-small":[Ct,[Rn,Yr(dn)],(a,[o,l])=>l.value.indexOf(a.properties()[o.value])>=0],"filter-in-large":[Ct,[Rn,Yr(dn)],(a,[o,l])=>function(d,p,g,b){for(;g<=b;){const w=g+b>>1;if(p[w]===d)return!0;p[w]>d?b=w-1:g=w+1}return!1}(a.properties()[o.value],l.value,0,l.value.length-1)],all:{type:Ct,overloads:[[[Ct,Ct],(a,[o,l])=>o.evaluate(a)&&l.evaluate(a)],[sr(Ct),(a,o)=>{for(const l of o)if(!l.evaluate(a))return!1;return!0}]]},any:{type:Ct,overloads:[[[Ct,Ct],(a,[o,l])=>o.evaluate(a)||l.evaluate(a)],[sr(Ct),(a,o)=>{for(const l of o)if(l.evaluate(a))return!0;return!1}]]},"!":[Ct,[Ct],(a,[o])=>!o.evaluate(a)],"is-supported-script":[Ct,[Rn],(a,[o])=>{const l=a.globals&&a.globals.isSupportedScript;return!l||l(o.evaluate(a))}],upcase:[Rn,[Rn],(a,[o])=>o.evaluate(a).toUpperCase()],downcase:[Rn,[Rn],(a,[o])=>o.evaluate(a).toLowerCase()],concat:[Rn,sr(dn),(a,o)=>o.map(l=>Ou(l.evaluate(a))).join("")],"resolved-locale":[Rn,[Oc],(a,[o])=>o.evaluate(a).resolvedLocale()]});var Kn=Xn;function Ir(a){return{result:"success",value:a}}function Vr(a){return{result:"error",value:a}}function ks(a){return"data-driven"===a["property-type"]}function ar(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function qs(a){return!!a.expression&&a.expression.interpolated}function qn(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":null===a?"null":typeof a}function gl(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}function Op(a){return a}function Qd(a,o){const l="color"===o.type,d=a.stops&&"object"==typeof a.stops[0][0],p=d||!(d||void 0!==a.property),g=a.type||(qs(o)?"exponential":"interval");if(l&&((a=tr({},a)).stops&&(a.stops=a.stops.map(S=>[S[0],vn.parse(S[1])])),a.default=vn.parse(a.default?a.default:o.default)),a.colorSpace&&"rgb"!==a.colorSpace&&!Hu[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let b,w,T;if("exponential"===g)b=Fi;else if("interval"===g)b=Fn;else if("categorical"===g){b=jt,w=Object.create(null);for(const S of a.stops)w[S[0]]=S[1];T=typeof a.stops[0][0]}else{if("identity"!==g)throw new Error(`Unknown function type "${g}"`);b=F}if(d){const S={},k=[];for(let V=0;V<a.stops.length;V++){const j=a.stops[V],G=j[0].zoom;void 0===S[G]&&(S[G]={zoom:G,type:a.type,property:a.property,default:a.default,stops:[]},k.push(G)),S[G].stops.push([j[0].value,j[1]])}const O=[];for(const V of k)O.push([S[V].zoom,Qd(S[V],o)]);const L={name:"linear"};return{kind:"composite",interpolationType:L,interpolationFactor:No.interpolationFactor.bind(void 0,L),zoomStops:O.map(V=>V[0]),evaluate:({zoom:V},j)=>Fi({stops:O,base:a.base},o,V).evaluate(V,j)}}if(p){const S="exponential"===g?{name:"exponential",base:void 0!==a.base?a.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:No.interpolationFactor.bind(void 0,S),zoomStops:a.stops.map(k=>k[0]),evaluate:({zoom:k})=>b(a,o,k,w,T)}}return{kind:"source",evaluate(S,k){const O=k&&k.properties?k.properties[a.property]:void 0;return void 0===O?lr(a.default,o.default):b(a,o,O,w,T)}}}function lr(a,o,l){return void 0!==a?a:void 0!==o?o:void 0!==l?l:void 0}function jt(a,o,l,d,p){return lr(typeof l===p?d[l]:void 0,a.default,o.default)}function Fn(a,o,l){if("number"!==qn(l))return lr(a.default,o.default);const d=a.stops.length;if(1===d||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[d-1][0])return a.stops[d-1][1];const p=Va(a.stops.map(g=>g[0]),l);return a.stops[p][1]}function Fi(a,o,l){const d=void 0!==a.base?a.base:1;if("number"!==qn(l))return lr(a.default,o.default);const p=a.stops.length;if(1===p||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[p-1][0])return a.stops[p-1][1];const g=Va(a.stops.map(k=>k[0]),l),b=function(k,O,L,V){const j=V-L,G=k-L;return 0===j?0:1===O?G/j:(Math.pow(O,G)-1)/(Math.pow(O,j)-1)}(l,d,a.stops[g][0],a.stops[g+1][0]),w=a.stops[g][1],T=a.stops[g+1][1];let S=ja[o.type]||Op;if(a.colorSpace&&"rgb"!==a.colorSpace){const k=Hu[a.colorSpace];S=(O,L)=>k.reverse(k.interpolate(k.forward(O),k.forward(L),b))}return"function"==typeof w.evaluate?{evaluate(...k){const O=w.evaluate.apply(void 0,k),L=T.evaluate.apply(void 0,k);if(void 0!==O&&void 0!==L)return S(O,L,b)}}:S(w,T,b)}function F(a,o,l){return"color"===o.type?l=vn.parse(l):"formatted"===o.type?l=wo.fromString(l.toString()):"resolvedImage"===o.type?l=Xr.fromString(l.toString()):qn(l)===o.type||"enum"===o.type&&o.values[l]||(l=void 0),lr(l,a.default,o.default)}class N{constructor(o,l){var d;this.expression=o,this._warningHistory={},this._evaluator=new Bu,this._defaultValue=l?"color"===(d=l).type&&(gl(d.default)||Array.isArray(d.default))?new vn(0,0,0,0):"color"===d.type?vn.parse(d.default)||null:void 0===d.default?null:d.default:null,this._enumValues=l&&"enum"===l.type?l.values:null}evaluateWithoutErrorHandling(o,l,d,p,g,b,w,T){return this._evaluator.globals=o,this._evaluator.feature=l,this._evaluator.featureState=d,this._evaluator.canonical=p||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=b,this._evaluator.featureTileCoord=w||null,this._evaluator.featureDistanceData=T||null,this.expression.evaluate(this._evaluator)}evaluate(o,l,d,p,g,b,w,T){this._evaluator.globals=o,this._evaluator.feature=l||null,this._evaluator.featureState=d||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=b||null,this._evaluator.featureTileCoord=w||null,this._evaluator.featureDistanceData=T||null;try{const S=this.expression.evaluate(this._evaluator);if(null==S||"number"==typeof S&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new fo(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function W(a){return Array.isArray(a)&&a.length>0&&"string"==typeof a[0]&&a[0]in Kn}function ge(a,o){const l=new qd(Kn,[],o?function(p){const g={color:es,string:Rn,number:mt,enum:Rn,boolean:Ct,formatted:$l,resolvedImage:ui};return"array"===p.type?Yr(g[p.value]||dn,p.length):g[p.type]}(o):void 0),d=l.parse(a,void 0,void 0,void 0,o&&"string"===o.type?{typeAnnotation:"coerce"}:void 0);return d?Ir(new N(d,o)):Vr(l.errors)}class tt{constructor(o,l){this.kind=o,this._styleExpression=l,this.isStateDependent="constant"!==o&&!zu(l.expression)}evaluateWithoutErrorHandling(o,l,d,p,g,b){return this._styleExpression.evaluateWithoutErrorHandling(o,l,d,p,g,b)}evaluate(o,l,d,p,g,b){return this._styleExpression.evaluate(o,l,d,p,g,b)}}class Wt{constructor(o,l,d,p){this.kind=o,this.zoomStops=d,this._styleExpression=l,this.isStateDependent="camera"!==o&&!zu(l.expression),this.interpolationType=p}evaluateWithoutErrorHandling(o,l,d,p,g,b){return this._styleExpression.evaluateWithoutErrorHandling(o,l,d,p,g,b)}evaluate(o,l,d,p,g,b){return this._styleExpression.evaluate(o,l,d,p,g,b)}interpolationFactor(o,l,d){return this.interpolationType?No.interpolationFactor(this.interpolationType,o,l,d):0}}function xi(a,o){if("error"===(a=ge(a,o)).result)return a;const l=a.value.expression,d=Hc(l);if(!d&&!ks(o))return Vr([new Us("","data expressions not supported")]);const p=Gs(l,["zoom","pitch","distance-from-center"]);if(!p&&!ar(o))return Vr([new Us("","zoom expressions not supported")]);const g=cr(l);return g||p?g instanceof Us?Vr([g]):g instanceof No&&!qs(o)?Vr([new Us("",'"interpolate" expressions cannot be used with this property')]):Ir(g?new Wt(d?"camera":"composite",a.value,g.labels,g instanceof No?g.interpolation:void 0):new tt(d?"constant":"source",a.value)):Vr([new Us("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class sn{constructor(o,l){this._parameters=o,this._specification=l,tr(this,Qd(this._parameters,this._specification))}static deserialize(o){return new sn(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function cr(a){let o=null;if(a instanceof Wc)o=cr(a.result);else if(a instanceof Gu){for(const l of a.args)if(o=cr(l),o)break}else(a instanceof ju||a instanceof No)&&a.input instanceof Tt&&"zoom"===a.input.name&&(o=a);return o instanceof Us||a.eachChild(l=>{const d=cr(l);d instanceof Us?o=d:!o&&d?o=new Us("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&d&&o!==d&&(o=new Us("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}class St{constructor(o,l,d,p){this.message=(o?`${o}: `:"")+d,p&&(this.identifier=p),null!=l&&l.__line__&&(this.line=l.__line__)}}function jr(a){const o=a.key,l=a.value,d=a.valueSpec||{},p=a.objectElementValidators||{},g=a.style,b=a.styleSpec;let w=[];const T=qn(l);if("object"!==T)return[new St(o,l,`object expected, ${T} found`)];for(const S in l){const k=S.split(".")[0];let L;p[k]?L=p[k]:d[k]?L=rs:p["*"]?L=p["*"]:d["*"]&&(L=rs),L?w=w.concat(L({key:(o&&`${o}.`)+S,value:l[S],valueSpec:d[k]||d["*"],style:g,styleSpec:b,object:l,objectKey:S},l)):w.push(new St(o,l[S],`unknown property "${S}"`))}for(const S in d)p[S]||d[S].required&&void 0===d[S].default&&void 0===l[S]&&w.push(new St(o,l,`missing required property "${S}"`));return w}function Ur(a){const o=a.value,l=a.valueSpec,d=a.style,p=a.styleSpec,g=a.key,b=a.arrayElementValidator||rs;if("array"!==qn(o))return[new St(g,o,`array expected, ${qn(o)} found`)];if(l.length&&o.length!==l.length)return[new St(g,o,`array length ${l.length} expected, length ${o.length} found`)];if(l["min-length"]&&o.length<l["min-length"])return[new St(g,o,`array length at least ${l["min-length"]} expected, length ${o.length} found`)];let w={type:l.value,values:l.values,minimum:l.minimum,maximum:l.maximum,function:void 0};p.$version<7&&(w.function=l.function),"object"===qn(l.value)&&(w=l.value);let T=[];for(let S=0;S<o.length;S++)T=T.concat(b({array:o,arrayIndex:S,value:o[S],valueSpec:w,style:d,styleSpec:p,key:`${g}[${S}]`}));return T}function Kc(a){const o=a.key,l=a.value,d=a.valueSpec;let p=qn(l);if("number"===p&&l!=l&&(p="NaN"),"number"!==p)return[new St(o,l,`number expected, ${p} found`)];if("minimum"in d){let g=d.minimum;if("array"===qn(d.minimum)&&(g=d.minimum[a.arrayIndex]),l<g)return[new St(o,l,`${l} is less than the minimum value ${g}`)]}if("maximum"in d){let g=d.maximum;if("array"===qn(d.maximum)&&(g=d.maximum[a.arrayIndex]),l>g)return[new St(o,l,`${l} is greater than the maximum value ${g}`)]}return[]}function Ga(a){const o=a.valueSpec,l=gr(a.value.type);let d,p,g,b={};const w="categorical"!==l&&void 0===a.value.property,T=!w,S="array"===qn(a.value.stops)&&"array"===qn(a.value.stops[0])&&"object"===qn(a.value.stops[0][0]),k=jr({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(V){if("identity"===l)return[new St(V.key,V.value,'identity function may not have a "stops" property')];let j=[];const G=V.value;return j=j.concat(Ur({key:V.key,value:G,valueSpec:V.valueSpec,style:V.style,styleSpec:V.styleSpec,arrayElementValidator:O})),"array"===qn(G)&&0===G.length&&j.push(new St(V.key,G,"array must have at least one stop")),j},default:function(V){return rs({key:V.key,value:V.value,valueSpec:o,style:V.style,styleSpec:V.styleSpec})}}});return"identity"===l&&w&&k.push(new St(a.key,a.value,'missing required property "property"')),"identity"===l||a.value.stops||k.push(new St(a.key,a.value,'missing required property "stops"')),"exponential"===l&&a.valueSpec.expression&&!qs(a.valueSpec)&&k.push(new St(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(T&&!ks(a.valueSpec)?k.push(new St(a.key,a.value,"property functions not supported")):w&&!ar(a.valueSpec)&&k.push(new St(a.key,a.value,"zoom functions not supported"))),"categorical"!==l&&!S||void 0!==a.value.property||k.push(new St(a.key,a.value,'"property" property is required')),k;function O(V){let j=[];const G=V.value,Q=V.key;if("array"!==qn(G))return[new St(Q,G,`array expected, ${qn(G)} found`)];if(2!==G.length)return[new St(Q,G,`array length 2 expected, length ${G.length} found`)];if(S){if("object"!==qn(G[0]))return[new St(Q,G,`object expected, ${qn(G[0])} found`)];if(void 0===G[0].zoom)return[new St(Q,G,"object stop key must have zoom")];if(void 0===G[0].value)return[new St(Q,G,"object stop key must have value")];const ae=gr(G[0].zoom);if("number"!=typeof ae)return[new St(Q,G[0].zoom,"stop zoom values must be numbers")];if(g&&g>ae)return[new St(Q,G[0].zoom,"stop zoom values must appear in ascending order")];ae!==g&&(g=ae,p=void 0,b={}),j=j.concat(jr({key:`${Q}[0]`,value:G[0],valueSpec:{zoom:{}},style:V.style,styleSpec:V.styleSpec,objectElementValidators:{zoom:Kc,value:L}}))}else j=j.concat(L({key:`${Q}[0]`,value:G[0],valueSpec:{},style:V.style,styleSpec:V.styleSpec},G));return W(Fa(G[1]))?j.concat([new St(`${Q}[1]`,G[1],"expressions are not allowed in function stops.")]):j.concat(rs({key:`${Q}[1]`,value:G[1],valueSpec:o,style:V.style,styleSpec:V.styleSpec}))}function L(V,j){const G=qn(V.value),Q=gr(V.value),ae=null!==V.value?V.value:j;if(d){if(G!==d)return[new St(V.key,ae,`${G} stop domain type must match previous stop domain type ${d}`)]}else d=G;if("number"!==G&&"string"!==G&&"boolean"!==G&&"number"!=typeof Q&&"string"!=typeof Q&&"boolean"!=typeof Q)return[new St(V.key,ae,"stop domain value must be a number, string, or boolean")];if("number"!==G&&"categorical"!==l){let _e=`number expected, ${G} found`;return ks(o)&&void 0===l&&(_e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new St(V.key,ae,_e)]}return"categorical"!==l||"number"!==G||"number"==typeof Q&&isFinite(Q)&&Math.floor(Q)===Q?"categorical"!==l&&"number"===G&&"number"==typeof Q&&"number"==typeof p&&void 0!==p&&Q<p?[new St(V.key,ae,"stop domain values must appear in ascending order")]:(p=Q,"categorical"===l&&Q in b?[new St(V.key,ae,"stop domain values must be unique")]:(b[Q]=!0,[])):[new St(V.key,ae,`integer expected, found ${String(Q)}`)]}}function is(a){const o=("property"===a.expressionContext?xi:ge)(Fa(a.value),a.valueSpec);if("error"===o.result)return o.value.map(d=>new St(`${a.key}${d.key}`,a.value,d.message));const l=o.value.expression||o.value._styleExpression.expression;if("property"===a.expressionContext&&"text-font"===a.propertyKey&&!l.outputDefined())return[new St(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===a.expressionContext&&"layout"===a.propertyType&&!zu(l))return[new St(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===a.expressionContext)return Xu(l,a);if(a.expressionContext&&0===a.expressionContext.indexOf("cluster")){if(!Gs(l,["zoom","feature-state"]))return[new St(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===a.expressionContext&&!Hc(l))return[new St(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xu(a,o){const l=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const p of o.valueSpec.expression.parameters)l.delete(p);if(0===l.size)return[];const d=[];return a instanceof Tt&&l.has(a.name)?[new St(o.key,o.value,`["${a.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(a.eachChild(p=>{d.push(...Xu(p,o))}),d)}function Jd(a){const o=a.key,l=a.value,d=a.valueSpec,p=[];return Array.isArray(d.values)?-1===d.values.indexOf(gr(l))&&p.push(new St(o,l,`expected one of [${d.values.join(", ")}], ${JSON.stringify(l)} found`)):-1===Object.keys(d.values).indexOf(gr(l))&&p.push(new St(o,l,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(l)} found`)),p}function Wa(a){if(!0===a||!1===a)return!0;if(!Array.isArray(a)||0===a.length)return!1;switch(a[0]){case"has":return a.length>=2&&"$id"!==a[1]&&"$type"!==a[1];case"in":return a.length>=3&&("string"!=typeof a[1]||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==a.length||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const o of a.slice(1))if(!Wa(o)&&"boolean"!=typeof o)return!1;return!0;default:return!0}}function Zs(a,o="fill"){if(null==a)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Wa(a)||(a=Rs(a));const l=a;let d=!0;try{d=function(S){if(!wn(S))return S;let k=Fa(S);return nc(k),k=tc(k),k}(l)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(l,null,2)}\n        `)}const p=Ye[`filter_${o}`],g=ge(d,p);let b=null;if("error"===g.result)throw new Error(g.value.map(S=>`${S.key}: ${S.message}`).join(", "));b=(S,k,O)=>g.value.evaluate(S,k,{},O);let w=null,T=null;if(d!==l){const S=ge(l,p);if("error"===S.result)throw new Error(S.value.map(k=>`${k.key}: ${k.message}`).join(", "));w=(k,O,L,V,j)=>S.value.evaluate(k,O,{},L,void 0,void 0,V,j),T=!Hc(S.value.expression)}return{filter:b,dynamicFilter:w||void 0,needGeometry:Lp(d),needFeature:!!T}}function tc(a){if(!Array.isArray(a))return a;const o=function(l){if(Fp.has(l[0]))for(let d=1;d<l.length;d++)if(wn(l[d]))return!0;return l}(a);return!0===o?o:o.map(l=>tc(l))}function nc(a){let o=!1;const l=[];if("case"===a[0]){for(let d=1;d<a.length-1;d+=2)o=o||wn(a[d]),l.push(a[d+1]);l.push(a[a.length-1])}else if("match"===a[0]){o=o||wn(a[1]);for(let d=2;d<a.length-1;d+=2)l.push(a[d+1]);l.push(a[a.length-1])}else if("step"===a[0]){o=o||wn(a[1]);for(let d=1;d<a.length-1;d+=2)l.push(a[d+1])}o&&(a.length=0,a.push("any",...l));for(let d=1;d<a.length;d++)nc(a[d])}function wn(a){if(!Array.isArray(a))return!1;if("pitch"===(o=a[0])||"distance-from-center"===o)return!0;var o;for(let l=1;l<a.length;l++)if(wn(a[l]))return!0;return!1}const Fp=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Np(a,o){return a<o?-1:a>o?1:0}function Lp(a){if(!Array.isArray(a))return!1;if("within"===a[0])return!0;for(let o=1;o<a.length;o++)if(Lp(a[o]))return!0;return!1}function Rs(a){if(!a)return!0;const o=a[0];return a.length<=1?"any"!==o:"=="===o?Ku(a[1],a[2],"=="):"!="===o?Hr(Ku(a[1],a[2],"==")):"<"===o||">"===o||"<="===o||">="===o?Ku(a[1],a[2],o):"any"===o?(l=a.slice(1),["any"].concat(l.map(Rs))):"all"===o?["all"].concat(a.slice(1).map(Rs)):"none"===o?["all"].concat(a.slice(1).map(Rs).map(Hr)):"in"===o?xl(a[1],a.slice(2)):"!in"===o?Hr(xl(a[1],a.slice(2))):"has"===o?Qu(a[1]):"!has"===o?Hr(Qu(a[1])):"within"!==o||a;var l}function Ku(a,o,l){switch(a){case"$type":return[`filter-type-${l}`,o];case"$id":return[`filter-id-${l}`,o];default:return[`filter-${l}`,a,o]}}function xl(a,o){if(0===o.length)return!1;switch(a){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(l=>typeof l!=typeof o[0])?["filter-in-large",a,["literal",o.sort(Np)]]:["filter-in-small",a,["literal",o]]}}function Qu(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Hr(a){return["!",a]}function Rm(a){return Wa(Fa(a.value))?is(tr({},a,{expressionContext:"filter",valueSpec:a.styleSpec[`filter_${a.layerType||"fill"}`]})):fs(a)}function fs(a){const o=a.value,l=a.key;if("array"!==qn(o))return[new St(l,o,`array expected, ${qn(o)} found`)];const d=a.styleSpec;let p,g=[];if(o.length<1)return[new St(l,o,"filter array must have at least 1 element")];switch(g=g.concat(Jd({key:`${l}[0]`,value:o[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec})),gr(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&"$type"===gr(o[1])&&g.push(new St(l,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":3!==o.length&&g.push(new St(l,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(p=qn(o[1]),"string"!==p&&g.push(new St(`${l}[1]`,o[1],`string expected, ${p} found`)));for(let b=2;b<o.length;b++)p=qn(o[b]),"$type"===gr(o[1])?g=g.concat(Jd({key:`${l}[${b}]`,value:o[b],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):"string"!==p&&"number"!==p&&"boolean"!==p&&g.push(new St(`${l}[${b}]`,o[b],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let b=1;b<o.length;b++)g=g.concat(fs({key:`${l}[${b}]`,value:o[b],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":p=qn(o[1]),2!==o.length?g.push(new St(l,o,`filter array for "${o[0]}" operator must have 2 elements`)):"string"!==p&&g.push(new St(`${l}[1]`,o[1],`string expected, ${p} found`));break;case"within":p=qn(o[1]),2!==o.length?g.push(new St(l,o,`filter array for "${o[0]}" operator must have 2 elements`)):"object"!==p&&g.push(new St(`${l}[1]`,o[1],`object expected, ${p} found`))}return g}function So(a,o){const l=a.key,d=a.style,p=a.styleSpec,g=a.value,b=a.objectKey,w=p[`${o}_${a.layerType}`];if(!w)return[];const T=b.match(/^(.*)-transition$/);if("paint"===o&&T&&w[T[1]]&&w[T[1]].transition)return rs({key:l,value:g,valueSpec:p.transition,style:d,styleSpec:p});const S=a.valueSpec||w[b];if(!S)return[new St(l,g,`unknown property "${b}"`)];let k;if("string"===qn(g)&&ks(S)&&!S.tokens&&(k=/^{([^}]+)}$/.exec(g))){const L=`\`{ "type": "identity", "property": ${k?JSON.stringify(k[1]):'"_"'} }\``;return[new St(l,g,`"${b}" does not support interpolation syntax\nUse an identity property function instead: ${L}.`)]}const O=[];return"symbol"===a.layerType&&("text-field"===b&&d&&!d.glyphs&&O.push(new St(l,g,'use of "text-field" requires a style "glyphs" property')),"text-font"===b&&gl(Fa(g))&&"identity"===gr(g.type)&&O.push(new St(l,g,'"text-font" does not support identity functions'))),O.concat(rs({key:a.key,value:g,valueSpec:S,style:d,styleSpec:p,expressionContext:"property",propertyType:o,propertyKey:b}))}function mf(a){return So(a,"paint")}function yl(a){return So(a,"layout")}function Ju(a){let o=[];const l=a.value,d=a.key,p=a.style,g=a.styleSpec;l.type||l.ref||o.push(new St(d,l,'either "type" or "ref" is required'));let b=gr(l.type);const w=gr(l.ref);if(l.id){const T=gr(l.id);for(let S=0;S<a.arrayIndex;S++){const k=p.layers[S];gr(k.id)===T&&o.push(new St(d,l.id,`duplicate layer id "${l.id}", previously used at line ${k.id.__line__}`))}}if("ref"in l){let T;["type","source","source-layer","filter","layout"].forEach(S=>{S in l&&o.push(new St(d,l[S],`"${S}" is prohibited for ref layers`))}),p.layers.forEach(S=>{gr(S.id)===w&&(T=S)}),T?T.ref?o.push(new St(d,l.ref,"ref cannot reference another ref layer")):b=gr(T.type):"string"==typeof w&&o.push(new St(d,l.ref,`ref layer "${w}" not found`))}else if("background"!==b&&"sky"!==b)if(l.source){const T=p.sources&&p.sources[l.source],S=T&&gr(T.type);T?"vector"===S&&"raster"===b?o.push(new St(d,l.source,`layer "${l.id}" requires a raster source`)):"raster"===S&&"raster"!==b?o.push(new St(d,l.source,`layer "${l.id}" requires a vector source`)):"vector"!==S||l["source-layer"]?"raster-dem"===S&&"hillshade"!==b?o.push(new St(d,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==b||!l.paint||!l.paint["line-gradient"]&&!l.paint["line-trim-offset"]||"geojson"===S&&T.lineMetrics||o.push(new St(d,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new St(d,l,`layer "${l.id}" must specify a "source-layer"`)):o.push(new St(d,l.source,`source "${l.source}" not found`))}else o.push(new St(d,l,'missing required property "source"'));return o=o.concat(jr({key:d,value:l,valueSpec:g.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>rs({key:`${d}.type`,value:l.type,valueSpec:g.layer.type,style:a.style,styleSpec:a.styleSpec,object:l,objectKey:"type"}),filter:T=>Rm(tr({layerType:b},T)),layout:T=>jr({layer:l,key:T.key,value:T.value,valueSpec:{},style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":S=>yl(tr({layerType:b},S))}}),paint:T=>jr({layer:l,key:T.key,value:T.value,valueSpec:{},style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":S=>mf(tr({layerType:b},S))}})}})),o}function Lo(a){const o=a.value,l=a.key,d=qn(o);return"string"!==d?[new St(l,o,`string expected, ${d} found`)]:[]}const ed={promoteId:function({key:a,value:o}){if("string"===qn(o))return Lo({key:a,value:o});{const l=[];for(const d in o)l.push(...Lo({key:`${a}.${d}`,value:o[d]}));return l}}};function eh(a){const o=a.value,l=a.key,d=a.styleSpec,p=a.style;if(!o.type)return[new St(l,o,'"type" is required')];const g=gr(o.type);let b;switch(g){case"vector":case"raster":case"raster-dem":return b=jr({key:l,value:o,valueSpec:d[`source_${g.replace("-","_")}`],style:a.style,styleSpec:d,objectElementValidators:ed}),b;case"geojson":if(b=jr({key:l,value:o,valueSpec:d.source_geojson,style:p,styleSpec:d,objectElementValidators:ed}),o.cluster)for(const w in o.clusterProperties){const[T,S]=o.clusterProperties[w],k="string"==typeof T?[T,["accumulated"],["get",w]]:T;b.push(...is({key:`${l}.${w}.map`,value:S,expressionContext:"cluster-map"})),b.push(...is({key:`${l}.${w}.reduce`,value:k,expressionContext:"cluster-reduce"}))}return b;case"video":return jr({key:l,value:o,valueSpec:d.source_video,style:p,styleSpec:d});case"image":return jr({key:l,value:o,valueSpec:d.source_image,style:p,styleSpec:d});case"canvas":return[new St(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Jd({key:`${l}.type`,value:o.type,valueSpec:{values:Pm(d)},style:p,styleSpec:d})}}function Pm(a){return a.source.reduce((o,l)=>{const d=a[l];return"enum"===d.type.type&&(o=o.concat(Object.keys(d.type.values))),o},[])}function ix(a){const o=a.value,l=a.styleSpec,d=l.light,p=a.style;let g=[];const b=qn(o);if(void 0===o)return g;if("object"!==b)return g=g.concat([new St("light",o,`object expected, ${b} found`)]),g;for(const w in o){const T=w.match(/^(.*)-transition$/);g=g.concat(T&&d[T[1]]&&d[T[1]].transition?rs({key:w,value:o[w],valueSpec:l.transition,style:p,styleSpec:l}):d[w]?rs({key:w,value:o[w],valueSpec:d[w],style:p,styleSpec:l}):[new St(w,o[w],`unknown property "${w}"`)])}return g}function Bp(a){const o=a.value,l=a.key,d=a.style,p=a.styleSpec,g=p.terrain;let b=[];const w=qn(o);if(void 0===o)return b;if("object"!==w)return b=b.concat([new St("terrain",o,`object expected, ${w} found`)]),b;for(const T in o){const S=T.match(/^(.*)-transition$/);b=b.concat(S&&g[S[1]]&&g[S[1]].transition?rs({key:T,value:o[T],valueSpec:p.transition,style:d,styleSpec:p}):g[T]?rs({key:T,value:o[T],valueSpec:g[T],style:d,styleSpec:p}):[new St(T,o[T],`unknown property "${T}"`)])}if(o.source){const T=d.sources&&d.sources[o.source],S=T&&gr(T.type);T?"raster-dem"!==S&&b.push(new St(l,o.source,`terrain cannot be used with a source of type ${String(S)}, it only be used with a "raster-dem" source type`)):b.push(new St(l,o.source,`source "${o.source}" not found`))}else b.push(new St(l,o,'terrain is missing required property "source"'));return b}function Om(a){const o=a.value,l=a.style,d=a.styleSpec,p=d.fog;let g=[];const b=qn(o);if(void 0===o)return g;if("object"!==b)return g=g.concat([new St("fog",o,`object expected, ${b} found`)]),g;for(const w in o){const T=w.match(/^(.*)-transition$/);g=g.concat(T&&p[T[1]]&&p[T[1]].transition?rs({key:w,value:o[w],valueSpec:d.transition,style:l,styleSpec:d}):p[w]?rs({key:w,value:o[w],valueSpec:p[w],style:l,styleSpec:d}):[new St(w,o[w],`unknown property "${w}"`)])}return g}const zp={"*":()=>[],array:Ur,boolean:function(a){const o=a.value,l=a.key,d=qn(o);return"boolean"!==d?[new St(l,o,`boolean expected, ${d} found`)]:[]},number:Kc,color:function(a){const o=a.key,l=a.value,d=qn(l);return"string"!==d?[new St(o,l,`color expected, ${d} found`)]:null===Gl(l)?[new St(o,l,`color expected, "${l}" found`)]:[]},enum:Jd,filter:Rm,function:Ga,layer:Ju,object:jr,source:eh,light:ix,terrain:Bp,fog:Om,string:Lo,formatted:function(a){return 0===Lo(a).length?[]:is(a)},resolvedImage:function(a){return 0===Lo(a).length?[]:is(a)},projection:function(a){const o=a.value,l=a.styleSpec,d=l.projection,p=a.style;let g=[];const b=qn(o);if("object"===b)for(const w in o)g=g.concat(rs({key:w,value:o[w],valueSpec:d[w],style:p,styleSpec:l}));else"string"!==b&&(g=g.concat([new St("projection",o,`object or string expected, ${b} found`)]));return g}};function rs(a){const o=a.value,l=a.valueSpec,d=a.styleSpec;return l.expression&&gl(gr(o))?Ga(a):l.expression&&W(Fa(o))?is(a):l.type&&zp[l.type]?zp[l.type](a):jr(tr({},a,{valueSpec:l.type?d[l.type]:l}))}function Cv(a){const o=a.value,l=a.key,d=Lo(a);return d.length||(-1===o.indexOf("{fontstack}")&&d.push(new St(l,o,'"glyphs" url must include a "{fontstack}" token')),-1===o.indexOf("{range}")&&d.push(new St(l,o,'"glyphs" url must include a "{range}" token'))),d}function rx(a,o=Ye){return ic(rs({key:"",value:a,valueSpec:o.$root,styleSpec:o,style:a,objectElementValidators:{glyphs:Cv,"*":()=>[]}}))}const Tv=a=>ic(mf(a)),ox=a=>ic(yl(a));function ic(a){return a.slice().sort((o,l)=>o.line&&l.line?o.line-l.line:0)}function sx(a,o){let l=!1;if(o&&o.length)for(const d of o)a.fire(new Po(new Error(d.message))),l=!0;return l}var th=bl;function bl(a,o,l){var d=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var p=new Int32Array(this.arrayBuffer);a=p[0],this.d=(o=p[1])+2*(l=p[2]);for(var g=0;g<this.d*this.d;g++){var b=p[3+g],w=p[3+g+1];d.push(b===w?null:p.subarray(b,w))}var T=p[3+d.length+1];this.keys=p.subarray(p[3+d.length],T),this.bboxes=p.subarray(T),this.insert=this._insertReadonly}else{this.d=o+2*l;for(var S=0;S<this.d*this.d;S++)d.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=a,this.padding=l,this.scale=o/a,this.uid=0;var k=l/o*a;this.min=-k,this.max=a+k}bl.prototype.insert=function(a,o,l,d,p){this._forEachCell(o,l,d,p,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(p)},bl.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},bl.prototype._insertCell=function(a,o,l,d,p,g){this.cells[p].push(g)},bl.prototype.query=function(a,o,l,d,p){var g=this.min,b=this.max;if(a<=g&&o<=g&&b<=l&&b<=d&&!p)return Array.prototype.slice.call(this.keys);var w=[];return this._forEachCell(a,o,l,d,this._queryCell,w,{},p),w},bl.prototype._queryCell=function(a,o,l,d,p,g,b,w){var T=this.cells[p];if(null!==T)for(var S=this.keys,k=this.bboxes,O=0;O<T.length;O++){var L=T[O];if(void 0===b[L]){var V=4*L;(w?w(k[V+0],k[V+1],k[V+2],k[V+3]):a<=k[V+2]&&o<=k[V+3]&&l>=k[V+0]&&d>=k[V+1])?(b[L]=!0,g.push(S[L])):b[L]=!1}}},bl.prototype._forEachCell=function(a,o,l,d,p,g,b,w){for(var T=this._convertToCellCoord(a),S=this._convertToCellCoord(o),k=this._convertToCellCoord(l),O=this._convertToCellCoord(d),L=T;L<=k;L++)for(var V=S;V<=O;V++){var j=this.d*V+L;if((!w||w(this._convertFromCellCoord(L),this._convertFromCellCoord(V),this._convertFromCellCoord(L+1),this._convertFromCellCoord(V+1)))&&p.call(this,a,o,l,d,j,g,b,w))return}},bl.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},bl.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},bl.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,o=3+this.cells.length+1+1,l=0,d=0;d<this.cells.length;d++)l+=this.cells[d].length;var p=new Int32Array(o+l+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var g=o,b=0;b<a.length;b++){var w=a[b];p[3+b]=g,p.set(w,g),g+=w.length}return p[3+a.length]=g,p.set(this.keys,g),p[3+a.length+1]=g+=this.keys.length,p.set(this.bboxes,g),g+=this.bboxes.length,p.buffer};const Vp={};function Vt(a,o,l={}){Object.defineProperty(a,"_classRegistryKey",{value:o,writeable:!1}),Vp[o]={klass:a,omit:l.omit||[]}}Vt(Object,"Object"),th.serialize=function(a,o){const l=a.toArrayBuffer();return o&&o.push(l),{buffer:l}},th.deserialize=function(a){return new th(a.buffer)},Object.defineProperty(th,"name",{value:"Grid"}),Vt(th,"Grid"),Vt(vn,"Color"),Vt(Error,"Error"),Vt(Vi,"AJAXError"),Vt(Xr,"ResolvedImage"),Vt(sn,"StylePropertyFunction"),Vt(N,"StyleExpression",{omit:["_evaluator"]}),Vt(Wt,"ZoomDependentExpression"),Vt(tt,"ZoomConstantExpression"),Vt(Tt,"CompoundExpression",{omit:["_evaluate"]});for(const a in Kn)Vp[Kn[a]._classRegistryKey]||Vt(Kn[a],`Expression${a}`);function jp(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&"ArrayBuffer"===a.constructor.name)}function td(a){return Le.ImageBitmap&&a instanceof Le.ImageBitmap}function gf(a,o){if(null==a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(jp(a)||td(a))return o&&o.push(a),a;if(ArrayBuffer.isView(a)){const l=a;return o&&o.push(l.buffer),l}if(a instanceof Le.ImageData)return o&&o.push(a.data.buffer),a;if(Array.isArray(a)){const l=[];for(const d of a)l.push(gf(d,o));return l}if("object"==typeof a){const l=a.constructor,d=l._classRegistryKey;if(!d)throw new Error(`can't serialize object of unregistered class ${d}`);const p=l.serialize?l.serialize(a,o):{};if(!l.serialize){for(const g in a)a.hasOwnProperty(g)&&(Vp[d].omit.indexOf(g)>=0||(p[g]=gf(a[g],o)));a instanceof Error&&(p.message=a.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==d&&(p.$name=d),p}throw new Error("can't serialize object of type "+typeof a)}function xf(a){if(null==a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||jp(a)||td(a)||ArrayBuffer.isView(a)||a instanceof Le.ImageData)return a;if(Array.isArray(a))return a.map(xf);if("object"==typeof a){const o=a.$name||"Object",{klass:l}=Vp[o];if(!l)throw new Error(`can't deserialize unregistered class ${o}`);if(l.deserialize)return l.deserialize(a);const d=Object.create(l.prototype);for(const p of Object.keys(a))"$name"!==p&&(d[p]=xf(a[p]));return d}throw new Error("can't deserialize object of type "+typeof a)}const yf=a=>a>=1536&&a<=1791,rc=a=>a>=1872&&a<=1919,bf=a=>a>=2208&&a<=2303,ax=a=>a>=11904&&a<=12031,nh=a=>a>=12032&&a<=12255,vf=a=>a>=12272&&a<=12287,ih=a=>a>=12288&&a<=12351,wf=a=>a>=12352&&a<=12447,nd=a=>a>=12448&&a<=12543,Up=a=>a>=12544&&a<=12591,Fm=a=>a>=12704&&a<=12735,_a=a=>a>=12736&&a<=12783,id=a=>a>=12784&&a<=12799,oo=a=>a>=12800&&a<=13055,Hp=a=>a>=13056&&a<=13311,lx=a=>a>=13312&&a<=19903,rh=a=>a>=19968&&a<=40959,Ef=a=>a>=40960&&a<=42127,oh=a=>a>=42128&&a<=42191,Nm=a=>a>=44032&&a<=55215,cx=a=>a>=63744&&a<=64255,sh=a=>a>=64336&&a<=65023,Qc=a=>a>=65040&&a<=65055,m=a=>a>=65072&&a<=65103,c=a=>a>=65104&&a<=65135,h=a=>a>=65136&&a<=65279,x=a=>a>=65280&&a<=65519;function v(a){for(const o of a)if(M(o.charCodeAt(0)))return!0;return!1}function C(a){for(const o of a)if(!I(o.charCodeAt(0)))return!1;return!0}function I(a){return!(yf(a)||rc(a)||bf(a)||sh(a)||h(a))}function M(a){return!(746!==a&&747!==a&&(a<4352||!(Fm(a)||Up(a)||m(a)&&!(a>=65097&&a<=65103)||cx(a)||Hp(a)||ax(a)||_a(a)||!(!ih(a)||a>=12296&&a<=12305||a>=12308&&a<=12319||12336===a)||lx(a)||rh(a)||oo(a)||(o=a,o>=12592&&o<=12687)||(o=>o>=43360&&o<=43391)(a)||(o=>o>=55216&&o<=55295)(a)||(o=>o>=4352&&o<=4607)(a)||Nm(a)||wf(a)||vf(a)||(o=>o>=12688&&o<=12703)(a)||nh(a)||id(a)||nd(a)&&12540!==a||!(!x(a)||65288===a||65289===a||65293===a||a>=65306&&a<=65310||65339===a||65341===a||65343===a||a>=65371&&a<=65503||65507===a||a>=65512&&a<=65519)||!(!c(a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||(o=>o>=5120&&o<=5759)(a)||(o=>o>=6320&&o<=6399)(a)||Qc(a)||(o=>o>=19904&&o<=19967)(a)||Ef(a)||oh(a))));var o}function P(a){return!(M(a)||(o=a,(l=o)>=128&&l<=255&&(167===o||169===o||174===o||177===o||188===o||189===o||190===o||215===o||247===o)||(l=>l>=8192&&l<=8303)(o)&&(8214===o||8224===o||8225===o||8240===o||8241===o||8251===o||8252===o||8258===o||8263===o||8264===o||8265===o||8273===o)||(l=>l>=8448&&l<=8527)(o)||(l=>l>=8528&&l<=8591)(o)||(l=>l>=8960&&l<=9215)(o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||9003===o||o>=9085&&o<=9114||o>=9150&&o<=9165||9167===o||o>=9169&&o<=9179||o>=9186&&o<=9215)||(l=>l>=9216&&l<=9279)(o)&&9251!==o||(l=>l>=9280&&l<=9311)(o)||(l=>l>=9312&&l<=9471)(o)||(l=>l>=9632&&l<=9727)(o)||(l=>l>=9728&&l<=9983)(o)&&!(o>=9754&&o<=9759)||(l=>l>=11008&&l<=11263)(o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||ih(o)||nd(o)||(l=>l>=57344&&l<=63743)(o)||m(o)||c(o)||x(o)||8734===o||8756===o||8757===o||o>=9984&&o<=10087||o>=10102&&o<=10131||65532===o||65533===o));var o,l}function B(a){return a>=1424&&a<=2303||sh(a)||h(a)}function z(a,o){return!(!o&&B(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||(l=a,l>=6016&&l<=6143));var l}function H(a){for(const o of a)if(B(o.charCodeAt(0)))return!0;return!1}const K="deferred",J="loading",ee="loaded";let te=null,ne="unavailable",Y=null;const le=function(a){a&&"string"==typeof a&&a.indexOf("NetworkError")>-1&&(ne="error"),te&&te(a)};function ce(){de.fire(new vi("pluginStateChange",{pluginStatus:ne,pluginURL:Y}))}const de=new Jo,fe=function(){return ne},ye=function(){if(ne!==K||!Y)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ne=J,ce(),Y&&Er({url:Y},a=>{a?le(a):(ne=ee,ce())})},Ee={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ne===ee||null!=Ee.applyArabicShaping,isLoading:()=>ne===J,setState(a){ne=a.pluginStatus,Y=a.pluginURL},isParsed:()=>null!=Ee.applyArabicShaping&&null!=Ee.processBidirectionalText&&null!=Ee.processStyledBidirectionalText,getPluginURL:()=>Y};class Ie{constructor(o,l){this.zoom=o,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(o){return function(l,d){for(const p of l)if(!z(p.charCodeAt(0),d))return!1;return!0}(o,Ee.isLoaded())}}class Be{constructor(o,l){this.property=o,this.value=l,this.expression=function(d,p){if(gl(d))return new sn(d,p);if(W(d)){const g=xi(d,p);if("error"===g.result)throw new Error(g.value.map(b=>`${b.key}: ${b.message}`).join(", "));return g.value}{let g=d;return"string"==typeof d&&"color"===p.type&&(g=vn.parse(d)),{kind:"constant",evaluate:()=>g}}}(void 0===l?o.specification.default:l,o.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(o,l,d){return this.property.possiblyEvaluate(this,o,l,d)}}class Ue{constructor(o){this.property=o,this.value=new Be(o,void 0)}transitioned(o,l){return new Ae(this.property,this.value,l,bn({},o.transition,this.transition),o.now)}untransitioned(){return new Ae(this.property,this.value,null,{},0)}}class bt{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Qn(this._values[o].value.value)}setValue(o,l){this._values.hasOwnProperty(o)||(this._values[o]=new Ue(this._values[o].property)),this._values[o].value=new Be(this._values[o].property,null===l?void 0:Qn(l))}getTransition(o){return Qn(this._values[o].transition)}setTransition(o,l){this._values.hasOwnProperty(o)||(this._values[o]=new Ue(this._values[o].property)),this._values[o].transition=Qn(l)||void 0}serialize(){const o={};for(const l of Object.keys(this._values)){const d=this.getValue(l);void 0!==d&&(o[l]=d);const p=this.getTransition(l);void 0!==p&&(o[`${l}-transition`]=p)}return o}transitioned(o,l){const d=new it(this._properties);for(const p of Object.keys(this._values))d._values[p]=this._values[p].transitioned(o,l._values[p]);return d}untransitioned(){const o=new it(this._properties);for(const l of Object.keys(this._values))o._values[l]=this._values[l].untransitioned();return o}}class Ae{constructor(o,l,d,p,g){const b=p.delay||0,w=p.duration||0;g=g||0,this.property=o,this.value=l,this.begin=g+b,this.end=this.begin+w,o.specification.transition&&(p.delay||p.duration)&&(this.prior=d)}possiblyEvaluate(o,l,d){const p=o.now||0,g=this.value.possiblyEvaluate(o,l,d),b=this.prior;if(b){if(p>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(p<this.begin)return b.possiblyEvaluate(o,l,d);{const w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(o,l,d),g,Ge(w))}}return g}}class it{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,l,d){const p=new Fe(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(o,l,d);return p}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class Ze{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}getValue(o){return Qn(this._values[o].value)}setValue(o,l){this._values[o]=new Be(this._values[o].property,null===l?void 0:Qn(l))}serialize(){const o={};for(const l of Object.keys(this._values)){const d=this.getValue(l);void 0!==d&&(o[l]=d)}return o}possiblyEvaluate(o,l,d){const p=new Fe(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(o,l,d);return p}}class dt{constructor(o,l,d){this.property=o,this.value=l,this.parameters=d}isConstant(){return"constant"===this.value.kind}constantOr(o){return"constant"===this.value.kind?this.value.value:o}evaluate(o,l,d,p){return this.property.evaluate(this.value,this.parameters,o,l,d,p)}}class Fe{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Me{constructor(o){this.specification=o}possiblyEvaluate(o,l){return o.expression.evaluate(l)}interpolate(o,l,d){const p=ja[this.specification.type];return p?p(o,l,d):o}}class He{constructor(o,l){this.specification=o,this.overrides=l}possiblyEvaluate(o,l,d,p){return new dt(this,"constant"===o.expression.kind||"camera"===o.expression.kind?{kind:"constant",value:o.expression.evaluate(l,null,{},d,p)}:o.expression,l)}interpolate(o,l,d){if("constant"!==o.value.kind||"constant"!==l.value.kind)return o;if(void 0===o.value.value||void 0===l.value.value)return new dt(this,{kind:"constant",value:void 0},o.parameters);const p=ja[this.specification.type];return p?new dt(this,{kind:"constant",value:p(o.value.value,l.value.value,d)},o.parameters):o}evaluate(o,l,d,p,g,b){return"constant"===o.kind?o.value:o.evaluate(l,d,p,g,b)}}class st{constructor(o){this.specification=o}possiblyEvaluate(o,l,d,p){return!!o.expression.evaluate(l,null,{},d,p)}interpolate(){return!1}}class pt{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new Ie(0,{});for(const d in o){const p=o[d];p.specification.overridable&&this.overridableProperties.push(d);const g=this.defaultPropertyValues[d]=new Be(p,void 0),b=this.defaultTransitionablePropertyValues[d]=new Ue(p);this.defaultTransitioningPropertyValues[d]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=g.possiblyEvaluate(l)}}}function $t(a,o){return 256*(a=yn(Math.floor(a),0,255))+yn(Math.floor(o),0,255)}Vt(He,"DataDrivenProperty"),Vt(Me,"DataConstantProperty"),Vt(st,"ColorRampProperty");const Bn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ct{constructor(o,l){this._structArray=o,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Rt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,l){return o._trim(),l&&(o.isTransferred=!0,l.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const l=Object.create(this.prototype);return l.arrayBuffer=o.arrayBuffer,l.length=o.length,l.capacity=o.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Yt(a,o=1){let l=0,d=0;return{members:a.map(p=>{const g=Bn[p.type].BYTES_PER_ELEMENT,b=l=Zn(l,Math.max(o,g)),w=p.components||1;return d=Math.max(d,g),l+=g*w,{name:p.name,type:p.type,components:w,offset:b}}),size:Zn(l,Math.max(d,o)),alignment:o}}function Zn(a,o){return Math.ceil(a/o)*o}class en extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l){const d=this.length;return this.resize(d+1),this.emplace(d,o,l)}emplace(o,l,d){const p=2*o;return this.int16[p+0]=l,this.int16[p+1]=d,o}}en.prototype.bytesPerElement=4,Vt(en,"StructArrayLayout2i4");class Ei extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,d){const p=this.length;return this.resize(p+1),this.emplace(p,o,l,d)}emplace(o,l,d,p){const g=3*o;return this.int16[g+0]=l,this.int16[g+1]=d,this.int16[g+2]=p,o}}Ei.prototype.bytesPerElement=6,Vt(Ei,"StructArrayLayout3i6");class Ci extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,d,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,d,p)}emplace(o,l,d,p,g){const b=4*o;return this.int16[b+0]=l,this.int16[b+1]=d,this.int16[b+2]=p,this.int16[b+3]=g,o}}Ci.prototype.bytesPerElement=8,Vt(Ci,"StructArrayLayout4i8");class Ti extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,d,p,g,b,w){const T=this.length;return this.resize(T+1),this.emplace(T,o,l,d,p,g,b,w)}emplace(o,l,d,p,g,b,w,T){const S=6*o,k=12*o,O=3*o;return this.int16[S+0]=l,this.int16[S+1]=d,this.uint8[k+4]=p,this.uint8[k+5]=g,this.uint8[k+6]=b,this.uint8[k+7]=w,this.float32[O+2]=T,o}}Ti.prototype.bytesPerElement=12,Vt(Ti,"StructArrayLayout2i4ub1f12");class ji extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,d,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,d,p)}emplace(o,l,d,p,g){const b=4*o;return this.float32[b+0]=l,this.float32[b+1]=d,this.float32[b+2]=p,this.float32[b+3]=g,o}}ji.prototype.bytesPerElement=16,Vt(ji,"StructArrayLayout4f16");class $r extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,d,p,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,l,d,p,g)}emplace(o,l,d,p,g,b){const w=6*o,T=3*o;return this.uint16[w+0]=l,this.uint16[w+1]=d,this.uint16[w+2]=p,this.uint16[w+3]=g,this.float32[T+2]=b,o}}$r.prototype.bytesPerElement=12,Vt($r,"StructArrayLayout4ui1f12");class ps extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,d,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,d,p)}emplace(o,l,d,p,g){const b=4*o;return this.uint16[b+0]=l,this.uint16[b+1]=d,this.uint16[b+2]=p,this.uint16[b+3]=g,o}}ps.prototype.bytesPerElement=8,Vt(ps,"StructArrayLayout4ui8");class ma extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,d,p,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,l,d,p,g,b)}emplace(o,l,d,p,g,b,w){const T=6*o;return this.int16[T+0]=l,this.int16[T+1]=d,this.int16[T+2]=p,this.int16[T+3]=g,this.int16[T+4]=b,this.int16[T+5]=w,o}}ma.prototype.bytesPerElement=12,Vt(ma,"StructArrayLayout6i12");class vl extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,d,p,g,b,w,T,S,k,O,L){const V=this.length;return this.resize(V+1),this.emplace(V,o,l,d,p,g,b,w,T,S,k,O,L)}emplace(o,l,d,p,g,b,w,T,S,k,O,L,V){const j=12*o;return this.int16[j+0]=l,this.int16[j+1]=d,this.int16[j+2]=p,this.int16[j+3]=g,this.uint16[j+4]=b,this.uint16[j+5]=w,this.uint16[j+6]=T,this.uint16[j+7]=S,this.int16[j+8]=k,this.int16[j+9]=O,this.int16[j+10]=L,this.int16[j+11]=V,o}}vl.prototype.bytesPerElement=24,Vt(vl,"StructArrayLayout4i4ui4i24");class Je extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,d,p,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,l,d,p,g,b)}emplace(o,l,d,p,g,b,w){const T=10*o,S=5*o;return this.int16[T+0]=l,this.int16[T+1]=d,this.int16[T+2]=p,this.float32[S+2]=g,this.float32[S+3]=b,this.float32[S+4]=w,o}}Je.prototype.bytesPerElement=20,Vt(Je,"StructArrayLayout3i3f20");class nn extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint32[1*o+0]=l,o}}nn.prototype.bytesPerElement=4,Vt(nn,"StructArrayLayout1ul4");class hi extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,d,p,g,b,w,T,S,k,O,L,V){const j=this.length;return this.resize(j+1),this.emplace(j,o,l,d,p,g,b,w,T,S,k,O,L,V)}emplace(o,l,d,p,g,b,w,T,S,k,O,L,V,j){const G=20*o,Q=10*o;return this.int16[G+0]=l,this.int16[G+1]=d,this.int16[G+2]=p,this.int16[G+3]=g,this.int16[G+4]=b,this.float32[Q+3]=w,this.float32[Q+4]=T,this.float32[Q+5]=S,this.float32[Q+6]=k,this.int16[G+14]=O,this.uint32[Q+8]=L,this.uint16[G+18]=V,this.uint16[G+19]=j,o}}hi.prototype.bytesPerElement=40,Vt(hi,"StructArrayLayout5i4f1i1ul2ui40");class xr extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,d,p,g,b,w){const T=this.length;return this.resize(T+1),this.emplace(T,o,l,d,p,g,b,w)}emplace(o,l,d,p,g,b,w,T){const S=8*o;return this.int16[S+0]=l,this.int16[S+1]=d,this.int16[S+2]=p,this.int16[S+4]=g,this.int16[S+5]=b,this.int16[S+6]=w,this.int16[S+7]=T,o}}xr.prototype.bytesPerElement=16,Vt(xr,"StructArrayLayout3i2i2i16");class Pi extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,d,p,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,l,d,p,g)}emplace(o,l,d,p,g,b){const w=4*o,T=8*o;return this.float32[w+0]=l,this.float32[w+1]=d,this.float32[w+2]=p,this.int16[T+6]=g,this.int16[T+7]=b,o}}Pi.prototype.bytesPerElement=16,Vt(Pi,"StructArrayLayout2f1f2i16");class Hi extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,d,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,d,p)}emplace(o,l,d,p,g){const b=12*o,w=3*o;return this.uint8[b+0]=l,this.uint8[b+1]=d,this.float32[w+1]=p,this.float32[w+2]=g,o}}Hi.prototype.bytesPerElement=12,Vt(Hi,"StructArrayLayout2ub2f12");class Kr extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,d){const p=this.length;return this.resize(p+1),this.emplace(p,o,l,d)}emplace(o,l,d,p){const g=3*o;return this.float32[g+0]=l,this.float32[g+1]=d,this.float32[g+2]=p,o}}Kr.prototype.bytesPerElement=12,Vt(Kr,"StructArrayLayout3f12");class ur extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,d){const p=this.length;return this.resize(p+1),this.emplace(p,o,l,d)}emplace(o,l,d,p){const g=3*o;return this.uint16[g+0]=l,this.uint16[g+1]=d,this.uint16[g+2]=p,o}}ur.prototype.bytesPerElement=6,Vt(ur,"StructArrayLayout3ui6");class qa extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,l,d,p,g,b,w,T,S,k,O,L,V,j,G,Q,ae,_e,oe,he,be){const pe=this.length;return this.resize(pe+1),this.emplace(pe,o,l,d,p,g,b,w,T,S,k,O,L,V,j,G,Q,ae,_e,oe,he,be)}emplace(o,l,d,p,g,b,w,T,S,k,O,L,V,j,G,Q,ae,_e,oe,he,be,pe){const je=30*o,Ne=15*o,Ke=60*o;return this.int16[je+0]=l,this.int16[je+1]=d,this.int16[je+2]=p,this.float32[Ne+2]=g,this.float32[Ne+3]=b,this.uint16[je+8]=w,this.uint16[je+9]=T,this.uint32[Ne+5]=S,this.uint32[Ne+6]=k,this.uint32[Ne+7]=O,this.uint16[je+16]=L,this.uint16[je+17]=V,this.uint16[je+18]=j,this.float32[Ne+10]=G,this.float32[Ne+11]=Q,this.uint8[Ke+48]=ae,this.uint8[Ke+49]=_e,this.uint8[Ke+50]=oe,this.uint32[Ne+13]=he,this.int16[je+28]=be,this.uint8[Ke+58]=pe,o}}qa.prototype.bytesPerElement=60,Vt(qa,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class oc extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,l,d,p,g,b,w,T,S,k,O,L,V,j,G,Q,ae,_e,oe,he,be,pe,je,Ne,Ke,_t,$e,et,rt,ht){const gt=this.length;return this.resize(gt+1),this.emplace(gt,o,l,d,p,g,b,w,T,S,k,O,L,V,j,G,Q,ae,_e,oe,he,be,pe,je,Ne,Ke,_t,$e,et,rt,ht)}emplace(o,l,d,p,g,b,w,T,S,k,O,L,V,j,G,Q,ae,_e,oe,he,be,pe,je,Ne,Ke,_t,$e,et,rt,ht,gt){const We=38*o,It=19*o;return this.int16[We+0]=l,this.int16[We+1]=d,this.int16[We+2]=p,this.float32[It+2]=g,this.float32[It+3]=b,this.int16[We+8]=w,this.int16[We+9]=T,this.int16[We+10]=S,this.int16[We+11]=k,this.int16[We+12]=O,this.int16[We+13]=L,this.uint16[We+14]=V,this.uint16[We+15]=j,this.uint16[We+16]=G,this.uint16[We+17]=Q,this.uint16[We+18]=ae,this.uint16[We+19]=_e,this.uint16[We+20]=oe,this.uint16[We+21]=he,this.uint16[We+22]=be,this.uint16[We+23]=pe,this.uint16[We+24]=je,this.uint16[We+25]=Ne,this.uint16[We+26]=Ke,this.uint16[We+27]=_t,this.uint16[We+28]=$e,this.uint32[It+15]=et,this.float32[It+16]=rt,this.float32[It+17]=ht,this.float32[It+18]=gt,o}}oc.prototype.bytesPerElement=76,Vt(oc,"StructArrayLayout3i2f6i15ui1ul3f76");class Ps extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.float32[1*o+0]=l,o}}Ps.prototype.bytesPerElement=4,Vt(Ps,"StructArrayLayout1f4");class ga extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,d,p,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,l,d,p,g)}emplace(o,l,d,p,g,b){const w=5*o;return this.float32[w+0]=l,this.float32[w+1]=d,this.float32[w+2]=p,this.float32[w+3]=g,this.float32[w+4]=b,o}}ga.prototype.bytesPerElement=20,Vt(ga,"StructArrayLayout5f20");class Za extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,d,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,d,p)}emplace(o,l,d,p,g){const b=6*o;return this.uint32[3*o+0]=l,this.uint16[b+2]=d,this.uint16[b+3]=p,this.uint16[b+4]=g,o}}Za.prototype.bytesPerElement=12,Vt(Za,"StructArrayLayout1ul3ui12");class Dr extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l){const d=this.length;return this.resize(d+1),this.emplace(d,o,l)}emplace(o,l,d){const p=2*o;return this.uint16[p+0]=l,this.uint16[p+1]=d,o}}Dr.prototype.bytesPerElement=4,Vt(Dr,"StructArrayLayout2ui4");class Bo extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint16[1*o+0]=l,o}}Bo.prototype.bytesPerElement=2,Vt(Bo,"StructArrayLayout1ui2");class Jc extends Rt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l){const d=this.length;return this.resize(d+1),this.emplace(d,o,l)}emplace(o,l,d){const p=2*o;return this.float32[p+0]=l,this.float32[p+1]=d,o}}Jc.prototype.bytesPerElement=8,Vt(Jc,"StructArrayLayout2f8");class ah extends ct{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ah.prototype.size=40;class wl extends hi{get(o){return new ah(this,o)}}Vt(wl,"CollisionBoxArray");class Sv extends ct{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}Sv.prototype.size=60;class ux extends qa{get(o){return new Sv(this,o)}}Vt(ux,"PlacedSymbolArray");class Iv extends ct{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(o){this._structArray.uint32[this._pos4+15]=o}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Iv.prototype.size=76;class Dv extends oc{get(o){return new Iv(this,o)}}Vt(Dv,"SymbolInstanceArray");class Lm extends Ps{getoffsetX(o){return this.float32[1*o+0]}}Vt(Lm,"GlyphOffsetArray");class Bm extends en{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}Vt(Bm,"SymbolLineVertexArray");class dx extends ct{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}dx.prototype.size=12;class zm extends Za{get(o){return new dx(this,o)}}Vt(zm,"FeatureIndexArray");class Av extends Dr{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}Vt(Av,"FillExtrusionCentroidArray");const Mv=Yt([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),hx=Yt([{name:"a_dash",components:4,type:"Uint16"}]);var rd={},kv={get exports(){return rd},set exports(a){rd=a}},Vm={};({get exports(){return Vm},set exports(a){Vm=a}}).exports=function(a,o){var l,d,p,g,b,w,T,S;for(d=a.length-(l=3&a.length),p=o,b=3432918353,w=461845907,S=0;S<d;)T=255&a.charCodeAt(S)|(255&a.charCodeAt(++S))<<8|(255&a.charCodeAt(++S))<<16|(255&a.charCodeAt(++S))<<24,++S,p=27492+(65535&(g=5*(65535&(p=(p^=T=(65535&(T=(T=(65535&T)*b+(((T>>>16)*b&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(T=0,l){case 3:T^=(255&a.charCodeAt(S+2))<<16;case 2:T^=(255&a.charCodeAt(S+1))<<8;case 1:p^=T=(65535&(T=(T=(65535&(T^=255&a.charCodeAt(S)))*b+(((T>>>16)*b&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295}return p^=a.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var jm={};({get exports(){return jm},set exports(a){jm=a}}).exports=function(a,o){for(var l,d=a.length,p=o^d,g=0;d>=4;)l=1540483477*(65535&(l=255&a.charCodeAt(g)|(255&a.charCodeAt(++g))<<8|(255&a.charCodeAt(++g))<<16|(255&a.charCodeAt(++g))<<24))+((1540483477*(l>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),d-=4,++g;switch(d){case 3:p^=(255&a.charCodeAt(g+2))<<16;case 2:p^=(255&a.charCodeAt(g+1))<<8;case 1:p=1540483477*(65535&(p^=255&a.charCodeAt(g)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var Um=Vm,HC=jm;kv.exports=Um,rd.murmur3=Um,rd.murmur2=HC;class Hm{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,l,d,p){this.ids.push(_s(o)),this.positions.push(l,d,p)}getPositions(o){const l=_s(o);let d=0,p=this.ids.length-1;for(;d<p;){const b=d+p>>1;this.ids[b]>=l?p=b:d=b+1}const g=[];for(;this.ids[d]===l;)g.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return g}static serialize(o,l){const d=new Float64Array(o.ids),p=new Uint32Array(o.positions);return eu(d,p,0,d.length-1),l&&l.push(d.buffer,p.buffer),{ids:d,positions:p}}static deserialize(o){const l=new Hm;return l.ids=o.ids,l.positions=o.positions,l.indexed=!0,l}}function _s(a){const o=+a;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:rd(String(a))}function eu(a,o,l,d){for(;l<d;){const p=a[l+d>>1];let g=l-1,b=d+1;for(;;){do{g++}while(a[g]<p);do{b--}while(a[b]>p);if(g>=b)break;pr(a,g,b),pr(o,3*g,3*b),pr(o,3*g+1,3*b+1),pr(o,3*g+2,3*b+2)}b-l<d-b?(eu(a,o,l,b),l=b+1):(eu(a,o,b+1,d),d=b)}}function pr(a,o,l){const d=a[o];a[o]=a[l],a[l]=d}Vt(Hm,"FeaturePositionMap");class tu{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,l),this.initialized=!0),!!this.location}}class $m extends tu{constructor(o){super(o),this.current=0}set(o,l,d){this.fetchUniformLocation(o,l)&&this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))}}class Rv extends tu{constructor(o){super(o),this.current=[0,0,0,0]}set(o,l,d){this.fetchUniformLocation(o,l)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3])))}}class Pv extends tu{constructor(o){super(o),this.current=vn.transparent}set(o,l,d){this.fetchUniformLocation(o,l)&&(d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a)))}}const Ov=new Float32Array(16),Fv=new Float32Array(9),Gm=new Float32Array(4);function sc(a){return[$t(255*a.r,255*a.g),$t(255*a.b,255*a.a)]}class $p{constructor(o,l,d){this.value=o,this.uniformNames=l.map(p=>`u_${p}`),this.type=d}setUniform(o,l,d,p,g){l.set(o,g,p.constantOr(this.value))}getBinding(o,l){return"color"===this.type?new Pv(o):new $m(o)}}class nu{constructor(o,l){this.uniformNames=l.map(d=>`u_${d}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(o){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br)}setUniform(o,l,d,p,g){const b="u_pattern"===g||"u_dash"===g?this.pattern:"u_pixel_ratio"===g?this.pixelRatio:null;b&&l.set(o,g,b)}getBinding(o,l){return"u_pattern"===l||"u_dash"===l?new Rv(o):new $m(o)}}class Ya{constructor(o,l,d,p){this.expression=o,this.type=d,this.maxValue=0,this.paintVertexAttributes=l.map(g=>({name:`a_${g}`,type:"Float32",components:"color"===d?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(o,l,d,p,g,b){const w=this.paintVertexArray.length,T=this.expression.evaluate(new Ie(0),l,{},g,p,b);this.paintVertexArray.resize(o),this._setPaintValue(w,o,T)}updatePaintArray(o,l,d,p,g){const b=this.expression.evaluate({zoom:0},d,p,void 0,g);this._setPaintValue(o,l,b)}_setPaintValue(o,l,d){if("color"===this.type){const p=sc(d);for(let g=o;g<l;g++)this.paintVertexArray.emplace(g,p[0],p[1])}else{for(let p=o;p<l;p++)this.paintVertexArray.emplace(p,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ys{constructor(o,l,d,p,g,b){this.expression=o,this.uniformNames=l.map(w=>`u_${w}_t`),this.type=d,this.useIntegerZoom=p,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=l.map(w=>({name:`a_${w}`,type:"Float32",components:"color"===d?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(o,l,d,p,g,b){const w=this.expression.evaluate(new Ie(this.zoom),l,{},g,p,b),T=this.expression.evaluate(new Ie(this.zoom+1),l,{},g,p,b),S=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(S,o,w,T)}updatePaintArray(o,l,d,p,g){const b=this.expression.evaluate({zoom:this.zoom},d,p,void 0,g),w=this.expression.evaluate({zoom:this.zoom+1},d,p,void 0,g);this._setPaintValue(o,l,b,w)}_setPaintValue(o,l,d,p){if("color"===this.type){const g=sc(d),b=sc(p);for(let w=o;w<l;w++)this.paintVertexArray.emplace(w,g[0],g[1],b[0],b[1])}else{for(let g=o;g<l;g++)this.paintVertexArray.emplace(g,d,p);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(p))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,l,d,p,g){const b=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,w=yn(this.expression.interpolationFactor(b,this.zoom,this.zoom+1),0,1);l.set(o,g,w)}getBinding(o,l){return new $m(o)}}class ac{constructor(o,l,d,p,g){this.expression=o,this.layerId=g,this.paintVertexAttributes=("array"===d?hx:Mv).members;for(let b=0;b<l.length;++b);this.paintVertexArray=new p}populatePaintArray(o,l,d){const p=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(p,o,l.patterns&&l.patterns[this.layerId],d)}updatePaintArray(o,l,d,p,g,b){this._setPaintValues(o,l,d.patterns&&d.patterns[this.layerId],b)}_setPaintValues(o,l,d,p){if(!p||!d)return;const g=p[d];if(!g)return;const{tl:b,br:w,pixelRatio:T}=g;for(let S=o;S<l;S++)this.paintVertexArray.emplace(S,b[0],b[1],w[0],w[1],T)}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class iu{constructor(o,l,d=(()=>!0)){this.binders={},this._buffers=[];const p=[];for(const g in o.paint._values){if(!d(g))continue;const b=o.paint.get(g);if(!(b instanceof dt&&ks(b.property.specification)))continue;const w=Cf(g,o.type),T=b.value,S=b.property.specification.type,k=!!b.property.useIntegerZoom,O="line-dasharray"===g||g.endsWith("pattern"),L="line-dasharray"===g&&"constant"!==o.layout.get("line-cap").value.kind;if("constant"!==T.kind||L)if("source"===T.kind||L||O){const V=WC(g,S,"source");this.binders[g]=O?new ac(T,w,S,V,o.id):new Ya(T,w,S,V),p.push(`/a_${g}`)}else{const V=WC(g,S,"composite");this.binders[g]=new Ys(T,w,S,k,l,V),p.push(`/z_${g}`)}else this.binders[g]=O?new nu(T.value,w):new $p(T.value,w,S),p.push(`/u_${g}`)}this.cacheKey=p.sort().join("")}getMaxValue(o){const l=this.binders[o];return l instanceof Ya||l instanceof Ys?l.maxValue:0}populatePaintArrays(o,l,d,p,g,b){for(const w in this.binders){const T=this.binders[w];(T instanceof Ya||T instanceof Ys||T instanceof ac)&&T.populatePaintArray(o,l,d,p,g,b)}}setConstantPatternPositions(o){for(const l in this.binders){const d=this.binders[l];d instanceof nu&&d.setConstantPatternPositions(o)}}updatePaintArrays(o,l,d,p,g,b){let w=!1;for(const T in o){const S=l.getPositions(T);for(const k of S){const O=d.feature(k.index);for(const L in this.binders){const V=this.binders[L];if((V instanceof Ya||V instanceof Ys||V instanceof ac)&&!0===V.expression.isStateDependent){const j=p.paint.get(L);V.expression=j.value,V.updatePaintArray(k.start,k.end,O,o[T],g,b),w=!0}}}}return w}defines(){const o=[];for(const l in this.binders){const d=this.binders[l];(d instanceof $p||d instanceof nu)&&o.push(...d.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return o}getBinderAttributes(){const o=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof Ya||d instanceof Ys||d instanceof ac)for(let p=0;p<d.paintVertexAttributes.length;p++)o.push(d.paintVertexAttributes[p].name)}return o}getBinderUniforms(){const o=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof $p||d instanceof nu||d instanceof Ys)for(const p of d.uniformNames)o.push(p)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const l=[];for(const d in this.binders){const p=this.binders[d];if(p instanceof $p||p instanceof nu||p instanceof Ys)for(const g of p.uniformNames)l.push({name:g,property:d,binding:p.getBinding(o,g)})}return l}setUniforms(o,l,d,p,g){for(const{name:b,property:w,binding:T}of d)this.binders[w].setUniform(o,T,g,p.get(w),b)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const l=this.binders[o];(l instanceof Ya||l instanceof Ys||l instanceof ac)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(o){for(const l in this.binders){const d=this.binders[l];(d instanceof Ya||d instanceof Ys||d instanceof ac)&&d.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const l=this.binders[o];(l instanceof Ya||l instanceof Ys||l instanceof ac)&&l.destroy()}}}class od{constructor(o,l,d=(()=>!0)){this.programConfigurations={};for(const p of o)this.programConfigurations[p.id]=new iu(p,l,d);this.needsUpload=!1,this._featureMap=new Hm,this._bufferOffset=0}populatePaintArrays(o,l,d,p,g,b,w){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(o,l,p,g,b,w);void 0!==l.id&&this._featureMap.add(l.id,d,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,l,d,p,g){for(const b of d)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(o,this._featureMap,l,b,p,g)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const $C={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Cf(a,o){return $C[a]||[a.replace(`${o}-`,"").replace(/-/g,"_")]}const Gp={"line-pattern":{source:$r,composite:$r},"fill-pattern":{source:$r,composite:$r},"fill-extrusion-pattern":{source:$r,composite:$r},"line-dasharray":{source:ps,composite:ps}},GC={color:{source:Jc,composite:ji},number:{source:Ps,composite:Jc}};function WC(a,o,l){const d=Gp[a];return d&&d[l]||GC[o][l]}Vt($p,"ConstantBinder"),Vt(nu,"PatternConstantBinder"),Vt(Ya,"SourceExpressionBinder"),Vt(ac,"PatternCompositeBinder"),Vt(Ys,"CompositeExpressionBinder"),Vt(iu,"ProgramConfiguration",{omit:["_buffers"]}),Vt(od,"ProgramConfigurationSet");const Tf="-transition";class lc extends Jo{constructor(o,l){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==o.type&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,"background"!==o.type&&"sky"!==o.type&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),l.layout&&(this._unevaluatedLayout=new Ze(l.layout)),l.paint)){this._transitionablePaint=new bt(l.paint);for(const d in o.paint)this.setPaintProperty(d,o.paint[d],{validate:!1});for(const d in o.layout)this.setLayoutProperty(d,o.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Fe(l.paint)}}getLayoutProperty(o){return"visibility"===o?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,l,d={}){null!=l&&this._validate(ox,`layers.${this.id}.layout.${o}`,o,l,d)||("visibility"!==o?this._unevaluatedLayout.setValue(o,l):this.visibility=l)}getPaintProperty(o){return Yi(o,Tf)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,l,d={}){if(null!=l&&this._validate(Tv,`layers.${this.id}.paint.${o}`,o,l,d))return!1;if(Yi(o,Tf))return this._transitionablePaint.setTransition(o.slice(0,-11),l||void 0),!1;{const p=this._transitionablePaint._values[o],g=p.value.isDataDriven(),b=p.value;this._transitionablePaint.setValue(o,l),this._handleSpecialPaintPropertyUpdate(o);const w=this._transitionablePaint._values[o].value,T=w.isDataDriven(),S=Yi(o,"pattern")||"line-dasharray"===o;return T||g||S||this._handleOverridablePaintPropertyUpdate(o,b,w)}}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getProgramConfiguration(o){return null}_handleOverridablePaintPropertyUpdate(o,l,d){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||"none"===this.visibility}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,l)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),mi(o,(l,d)=>!(void 0===l||"layout"===d&&!Object.keys(l).length||"paint"===d&&!Object.keys(l).length))}_validate(o,l,d,p,g={}){return(!g||!1!==g.validate)&&sx(this,o.call(rx,{key:l,layerType:this.type,objectKey:d,value:p,styleSpec:Ye,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const l=this.paint.get(o);if(l instanceof dt&&ks(l.property.specification)&&("source"===l.value.kind||"composite"===l.value.kind)&&l.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Zs(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const qC=Yt([{name:"a_pos",components:2,type:"Int16"}],4),ZC=Yt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Qr{constructor(o=[]){this.segments=o}prepareSegment(o,l,d,p){let g=this.segments[this.segments.length-1];return o>Qr.MAX_VERTEX_ARRAY_LENGTH&&Gt(`Max vertices per segment is ${Qr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!g||g.vertexLength+o>Qr.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==p)&&(g={vertexOffset:l.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},void 0!==p&&(g.sortKey=p),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const o of this.segments)for(const l in o.vaos)o.vaos[l].destroy()}static simpleSegment(o,l,d,p){return new Qr([{vertexOffset:o,primitiveOffset:l,vertexLength:d,primitiveLength:p,vaos:{},sortKey:0}])}}Qr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Vt(Qr,"SegmentVector");var pn=8192;class ru{constructor(o,l){o&&(l?this.setSouthWest(o).setNorthEast(l):4===o.length?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof ei?new ei(o.lng,o.lat):ei.convert(o),this}setSouthWest(o){return this._sw=o instanceof ei?new ei(o.lng,o.lat):ei.convert(o),this}extend(o){const l=this._sw,d=this._ne;let p,g;if(o instanceof ei)p=o,g=o;else{if(!(o instanceof ru))return Array.isArray(o)?4===o.length||o.every(Array.isArray)?this.extend(ru.convert(o)):this.extend(ei.convert(o)):"object"==typeof o&&null!==o&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(ei.convert(o)):this;if(p=o._sw,g=o._ne,!p||!g)return this}return l||d?(l.lng=Math.min(p.lng,l.lng),l.lat=Math.min(p.lat,l.lat),d.lng=Math.max(g.lng,d.lng),d.lat=Math.max(g.lat,d.lat)):(this._sw=new ei(p.lng,p.lat),this._ne=new ei(g.lng,g.lat)),this}getCenter(){return new ei((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ei(this.getWest(),this.getNorth())}getSouthEast(){return new ei(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:l,lat:d}=ei.convert(o);let p=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&p}static convert(o){return!o||o instanceof ru?o:new ru(o)}}var lh=1e-6,Xs=typeof Float32Array<"u"?Float32Array:Array;function Wp(){var a=new Xs(9);return Xs!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function Wm(a,o,l){var d=o[0],p=o[1],g=o[2],b=o[3],w=o[4],T=o[5],S=o[6],k=o[7],O=o[8],L=l[0],V=l[1],j=l[2],G=l[3],Q=l[4],ae=l[5],_e=l[6],oe=l[7],he=l[8];return a[0]=L*d+V*b+j*S,a[1]=L*p+V*w+j*k,a[2]=L*g+V*T+j*O,a[3]=G*d+Q*b+ae*S,a[4]=G*p+Q*w+ae*k,a[5]=G*g+Q*T+ae*O,a[6]=_e*d+oe*b+he*S,a[7]=_e*p+oe*w+he*k,a[8]=_e*g+oe*T+he*O,a}function Ks(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Nv(a,o){var l=o[0],d=o[1],p=o[2],g=o[3],b=o[4],w=o[5],T=o[6],S=o[7],k=o[8],O=o[9],L=o[10],V=o[11],j=o[12],G=o[13],Q=o[14],ae=o[15],_e=l*w-d*b,oe=l*T-p*b,he=l*S-g*b,be=d*T-p*w,pe=d*S-g*w,je=p*S-g*T,Ne=k*G-O*j,Ke=k*Q-L*j,_t=k*ae-V*j,$e=O*Q-L*G,et=O*ae-V*G,rt=L*ae-V*Q,ht=_e*rt-oe*et+he*$e+be*_t-pe*Ke+je*Ne;return ht?(a[0]=(w*rt-T*et+S*$e)*(ht=1/ht),a[1]=(p*et-d*rt-g*$e)*ht,a[2]=(G*je-Q*pe+ae*be)*ht,a[3]=(L*pe-O*je-V*be)*ht,a[4]=(T*_t-b*rt-S*Ke)*ht,a[5]=(l*rt-p*_t+g*Ke)*ht,a[6]=(Q*he-j*je-ae*oe)*ht,a[7]=(k*je-L*he+V*oe)*ht,a[8]=(b*et-w*_t+S*Ne)*ht,a[9]=(d*_t-l*et-g*Ne)*ht,a[10]=(j*pe-G*he+ae*_e)*ht,a[11]=(O*he-k*pe-V*_e)*ht,a[12]=(w*Ke-b*$e-T*Ne)*ht,a[13]=(l*$e-d*Ke+p*Ne)*ht,a[14]=(G*oe-j*be-Q*_e)*ht,a[15]=(k*be-O*oe+L*_e)*ht,a):null}function sd(a,o,l){var d=o[0],p=o[1],g=o[2],b=o[3],w=o[4],T=o[5],S=o[6],k=o[7],O=o[8],L=o[9],V=o[10],j=o[11],G=o[12],Q=o[13],ae=o[14],_e=o[15],oe=l[0],he=l[1],be=l[2],pe=l[3];return a[0]=oe*d+he*w+be*O+pe*G,a[1]=oe*p+he*T+be*L+pe*Q,a[2]=oe*g+he*S+be*V+pe*ae,a[3]=oe*b+he*k+be*j+pe*_e,a[4]=(oe=l[4])*d+(he=l[5])*w+(be=l[6])*O+(pe=l[7])*G,a[5]=oe*p+he*T+be*L+pe*Q,a[6]=oe*g+he*S+be*V+pe*ae,a[7]=oe*b+he*k+be*j+pe*_e,a[8]=(oe=l[8])*d+(he=l[9])*w+(be=l[10])*O+(pe=l[11])*G,a[9]=oe*p+he*T+be*L+pe*Q,a[10]=oe*g+he*S+be*V+pe*ae,a[11]=oe*b+he*k+be*j+pe*_e,a[12]=(oe=l[12])*d+(he=l[13])*w+(be=l[14])*O+(pe=l[15])*G,a[13]=oe*p+he*T+be*L+pe*Q,a[14]=oe*g+he*S+be*V+pe*ae,a[15]=oe*b+he*k+be*j+pe*_e,a}function Sf(a,o,l){var d,p,g,b,w,T,S,k,O,L,V,j,G=l[0],Q=l[1],ae=l[2];return o===a?(a[12]=o[0]*G+o[4]*Q+o[8]*ae+o[12],a[13]=o[1]*G+o[5]*Q+o[9]*ae+o[13],a[14]=o[2]*G+o[6]*Q+o[10]*ae+o[14],a[15]=o[3]*G+o[7]*Q+o[11]*ae+o[15]):(p=o[1],g=o[2],b=o[3],w=o[4],T=o[5],S=o[6],k=o[7],O=o[8],L=o[9],V=o[10],j=o[11],a[0]=d=o[0],a[1]=p,a[2]=g,a[3]=b,a[4]=w,a[5]=T,a[6]=S,a[7]=k,a[8]=O,a[9]=L,a[10]=V,a[11]=j,a[12]=d*G+w*Q+O*ae+o[12],a[13]=p*G+T*Q+L*ae+o[13],a[14]=g*G+S*Q+V*ae+o[14],a[15]=b*G+k*Q+j*ae+o[15]),a}function ch(a,o,l){var d=l[0],p=l[1],g=l[2];return a[0]=o[0]*d,a[1]=o[1]*d,a[2]=o[2]*d,a[3]=o[3]*d,a[4]=o[4]*p,a[5]=o[5]*p,a[6]=o[6]*p,a[7]=o[7]*p,a[8]=o[8]*g,a[9]=o[9]*g,a[10]=o[10]*g,a[11]=o[11]*g,a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15],a}function Xa(a,o,l){var d=Math.sin(l),p=Math.cos(l),g=o[4],b=o[5],w=o[6],T=o[7],S=o[8],k=o[9],O=o[10],L=o[11];return o!==a&&(a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15]),a[4]=g*p+S*d,a[5]=b*p+k*d,a[6]=w*p+O*d,a[7]=T*p+L*d,a[8]=S*p-g*d,a[9]=k*p-b*d,a[10]=O*p-w*d,a[11]=L*p-T*d,a}function qm(a,o,l){var d=Math.sin(l),p=Math.cos(l),g=o[0],b=o[1],w=o[2],T=o[3],S=o[8],k=o[9],O=o[10],L=o[11];return o!==a&&(a[4]=o[4],a[5]=o[5],a[6]=o[6],a[7]=o[7],a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15]),a[0]=g*p-S*d,a[1]=b*p-k*d,a[2]=w*p-O*d,a[3]=T*p-L*d,a[8]=g*d+S*p,a[9]=b*d+k*p,a[10]=w*d+O*p,a[11]=T*d+L*p,a}function qp(a,o){return a[0]=o[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=o[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Zm(a,o,l){var d,p,g,b=l[0],w=l[1],T=l[2],S=Math.hypot(b,w,T);return S<lh?null:(b*=S=1/S,w*=S,T*=S,d=Math.sin(o),p=Math.cos(o),a[0]=b*b*(g=1-p)+p,a[1]=w*b*g+T*d,a[2]=T*b*g-w*d,a[3]=0,a[4]=b*w*g-T*d,a[5]=w*w*g+p,a[6]=T*w*g+b*d,a[7]=0,a[8]=b*T*g+w*d,a[9]=w*T*g-b*d,a[10]=T*T*g+p,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}Math.hypot||(Math.hypot=function(){for(var a=0,o=arguments.length;o--;)a+=arguments[o]*arguments[o];return Math.sqrt(a)});var Lv=sd;function Zp(){var a=new Xs(3);return Xs!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function Ym(a){var o=new Xs(3);return o[0]=a[0],o[1]=a[1],o[2]=a[2],o}function Yp(a){return Math.hypot(a[0],a[1],a[2])}function uh(a,o,l){var d=new Xs(3);return d[0]=a,d[1]=o,d[2]=l,d}function cc(a,o,l){return a[0]=o[0]+l[0],a[1]=o[1]+l[1],a[2]=o[2]+l[2],a}function Xm(a,o,l){return a[0]=o[0]-l[0],a[1]=o[1]-l[1],a[2]=o[2]-l[2],a}function fx(a,o,l){return a[0]=o[0]*l[0],a[1]=o[1]*l[1],a[2]=o[2]*l[2],a}function Xp(a,o,l){return a[0]=Math.min(o[0],l[0]),a[1]=Math.min(o[1],l[1]),a[2]=Math.min(o[2],l[2]),a}function ad(a,o,l){return a[0]=Math.max(o[0],l[0]),a[1]=Math.max(o[1],l[1]),a[2]=Math.max(o[2],l[2]),a}function Io(a,o,l){return a[0]=o[0]*l,a[1]=o[1]*l,a[2]=o[2]*l,a}function Kp(a,o,l,d){return a[0]=o[0]+l[0]*d,a[1]=o[1]+l[1]*d,a[2]=o[2]+l[2]*d,a}function os(a,o){var l=o[0],d=o[1],p=o[2],g=l*l+d*d+p*p;return g>0&&(g=1/Math.sqrt(g)),a[0]=o[0]*g,a[1]=o[1]*g,a[2]=o[2]*g,a}function xa(a,o){return a[0]*o[0]+a[1]*o[1]+a[2]*o[2]}function ld(a,o,l){var d=o[0],p=o[1],g=o[2],b=l[0],w=l[1],T=l[2];return a[0]=p*T-g*w,a[1]=g*b-d*T,a[2]=d*w-p*b,a}function Ar(a,o,l){var d=o[0],p=o[1],g=o[2],b=l[3]*d+l[7]*p+l[11]*g+l[15];return a[0]=(l[0]*d+l[4]*p+l[8]*g+l[12])/(b=b||1),a[1]=(l[1]*d+l[5]*p+l[9]*g+l[13])/b,a[2]=(l[2]*d+l[6]*p+l[10]*g+l[14])/b,a}function zo(a,o,l){var d=l[0],p=l[1],g=l[2],b=o[0],w=o[1],T=o[2],S=p*T-g*w,k=g*b-d*T,O=d*w-p*b,L=p*O-g*k,V=g*S-d*O,j=d*k-p*S,G=2*l[3];return k*=G,O*=G,V*=2,j*=2,a[0]=b+(S*=G)+(L*=2),a[1]=w+k+V,a[2]=T+O+j,a}var dh,El=Xm,Bv=fx,Km=Yp;function hh(a,o,l){return a[0]=o[0]*l,a[1]=o[1]*l,a[2]=o[2]*l,a[3]=o[3]*l,a}function fh(a,o){var l=o[0],d=o[1],p=o[2],g=o[3],b=l*l+d*d+p*p+g*g;return b>0&&(b=1/Math.sqrt(b)),a[0]=l*b,a[1]=d*b,a[2]=p*b,a[3]=g*b,a}function Ka(a,o,l){var d=o[0],p=o[1],g=o[2],b=o[3];return a[0]=l[0]*d+l[4]*p+l[8]*g+l[12]*b,a[1]=l[1]*d+l[5]*p+l[9]*g+l[13]*b,a[2]=l[2]*d+l[6]*p+l[10]*g+l[14]*b,a[3]=l[3]*d+l[7]*p+l[11]*g+l[15]*b,a}function px(){var a=new Xs(4);return Xs!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function Qm(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function ph(a,o,l){l*=.5;var d=o[0],p=o[1],g=o[2],b=o[3],w=Math.sin(l),T=Math.cos(l);return a[0]=d*T+b*w,a[1]=p*T+g*w,a[2]=g*T-p*w,a[3]=b*T-d*w,a}function YC(a,o,l){l*=.5;var d=o[0],p=o[1],g=o[2],b=o[3],w=Math.sin(l),T=Math.cos(l);return a[0]=d*T-g*w,a[1]=p*T+b*w,a[2]=g*T+d*w,a[3]=b*T-p*w,a}Zp(),dh=new Xs(4),Xs!=Float32Array&&(dh[0]=0,dh[1]=0,dh[2]=0,dh[3]=0);var XC=fh;Zp(),uh(1,0,0),uh(0,1,0),px(),px(),Wp();const wR=Yt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:KC}=wR,QC=Yt([{name:"a_pos_3",components:3,type:"Int16"}]);var Jm=Yt([{name:"a_pos",type:"Int16",components:2}]);class zv{constructor(o,l){this.pos=o,this.dir=l}intersectsPlane(o,l,d){const p=xa(l,this.dir);if(Math.abs(p)<1e-6)return!1;const g=((o[0]-this.pos[0])*l[0]+(o[1]-this.pos[1])*l[1]+(o[2]-this.pos[2])*l[2])/p;return d[0]=this.pos[0]+this.dir[0]*g,d[1]=this.pos[1]+this.dir[1]*g,d[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(o,l,d){if(G=(V=this.pos)[0],Q=V[1],ae=V[2],_e=(j=o)[0],oe=j[1],he=j[2],Math.abs(G-_e)<=lh*Math.max(1,Math.abs(G),Math.abs(_e))&&Math.abs(Q-oe)<=lh*Math.max(1,Math.abs(Q),Math.abs(oe))&&Math.abs(ae-he)<=lh*Math.max(1,Math.abs(ae),Math.abs(he))||0===l)return d[0]=d[1]=d[2]=0,!1;var V,j,G,Q,ae,_e,oe,he;const[p,g,b]=this.dir,w=this.pos[0]-o[0],T=this.pos[1]-o[1],S=this.pos[2]-o[2],k=p*p+g*g+b*b,O=2*(w*p+T*g+S*b),L=O*O-4*k*(w*w+T*T+S*S-l*l);if(L<0){const V=Math.max(-O/2,0),j=w+p*V,G=T+g*V,Q=S+b*V,ae=Math.hypot(j,G,Q);return d[0]=j*l/ae,d[1]=G*l/ae,d[2]=Q*l/ae,!1}{const V=(-O-Math.sqrt(L))/(2*k);if(V<0){const j=Math.hypot(w,T,S);return d[0]=w*l/j,d[1]=T*l/j,d[2]=S*l/j,!1}return d[0]=w+p*V,d[1]=T+g*V,d[2]=S+b*V,!0}}}class Vv{constructor(o,l,d,p,g){this.TL=o,this.TR=l,this.BR=d,this.BL=p,this.horizon=g}static fromInvProjectionMatrix(o,l,d){const p=[-1,1,1],g=[1,1,1],b=[1,-1,1],w=[-1,-1,1],T=Ar(p,p,o),S=Ar(g,g,o),k=Ar(b,b,o),O=Ar(w,w,o);return new Vv(T,S,k,O,l/d)}}class _h{constructor(o,l){this.points=o,this.planes=l}static fromInvProjectionMatrix(o,l,d,p){const g=Math.pow(2,d),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const S=Ka([],T,o),k=1/S[3]/l*g;return(O=S)[0]=(L=S)[0]*(V=[k,k,p?1/S[3]:k,k])[0],O[1]=L[1]*V[1],O[2]=L[2]*V[2],O[3]=L[3]*V[3],O;var O,L,V}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const S=os([],ld([],El([],b[T[0]],b[T[1]]),El([],b[T[2]],b[T[1]]))),k=-xa(S,b[T[1]]);return S.concat(k)});return new _h(b,w)}}class Os{static fromPoints(o){const l=[1/0,1/0,1/0],d=[-1/0,-1/0,-1/0];for(const p of o)Xp(l,l,p),ad(d,d,p);return new Os(l,d)}static applyTransform(o,l){const d=o.getCorners();for(let p=0;p<d.length;++p)Ar(d[p],d[p],l);return Os.fromPoints(d)}constructor(o,l){this.min=o,this.max=l,this.center=Io([],cc([],this.min,this.max),.5)}quadrant(o){const l=[o%2==0,o<2],d=Ym(this.min),p=Ym(this.max);for(let g=0;g<l.length;g++)d[g]=l[g]?this.min[g]:this.center[g],p[g]=l[g]?this.center[g]:this.max[g];return p[2]=this.max[2],new Os(d,p)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,l=this.max;return[[o[0],o[1],o[2]],[l[0],o[1],o[2]],[l[0],l[1],o[2]],[o[0],l[1],o[2]],[o[0],o[1],l[2]],[l[0],o[1],l[2]],[l[0],l[1],l[2]],[o[0],l[1],l[2]]]}intersects(o){const l=this.getCorners();let d=!0;for(let p=0;p<o.planes.length;p++){const g=o.planes[p];let b=0;for(let w=0;w<l.length;w++)b+=xa(g,l[w])+g[3]>=0;if(0===b)return 0;b!==l.length&&(d=!1)}if(d)return 2;for(let p=0;p<3;p++){let g=Number.MAX_VALUE,b=-Number.MAX_VALUE;for(let w=0;w<o.points.length;w++){const T=o.points[w][p]-this.min[p];g=Math.min(g,T),b=Math.max(b,T)}if(b<0||g>this.max[p]-this.min[p])return 0}return 1}}const ou=pn/Math.PI/2,Qp=[64,32,16],ms=-ou,Qa=ou,Ja=[new Os([ms,ms,ms],[Qa,Qa,Qa]),new Os([ms,ms,ms],[0,0,Qa]),new Os([0,ms,ms],[Qa,0,Qa]),new Os([ms,0,ms],[0,Qa,Qa]),new Os([0,0,ms],[Qa,Qa,Qa])];function cd(a){return a*ou/i_}function _x(a,o,l,d=!0){const p=Io([],a._camera.position,a.worldSize),g=[o,l,1,1];Ka(g,g,a.pixelMatrixInverse),hh(g,g,1/g[3]);const b=os([],El([],g,p)),w=a.globeMatrix,T=[w[12],w[13],w[14]],S=El([],T,p),k=Yp(S),O=os([],S),L=a.worldSize/(2*Math.PI),V=xa(O,b),j=Math.asin(L/k);if(j<Math.acos(V)){if(!d)return null;const _t=[],$e=[];Io(_t,b,k/V),os($e,El($e,_t,S)),os(b,cc(b,S,Io(b,$e,Math.tan(j)*k)))}const G=[];new zv(p,b).closestPointOnSphere(T,L,G);const Q=os([],Ro(w,0)),ae=os([],Ro(w,1)),_e=os([],Ro(w,2)),oe=xa(Q,G),he=xa(ae,G),be=xa(_e,G),pe=En(Math.asin(-he/L));let je=En(Math.atan2(oe,be));je=a.center.lng+function(_t,$e){const et=($e-_t+180)%360-180;return et<-180?et+360:et}(a.center.lng,je);const Ne=Cl(je),Ke=yn(dc(pe),0,1);return new Mf(Ne,Ke)}class e0{constructor(o,l,d){this.a=El([],o,d),this.b=El([],l,d),this.center=d;const p=os([],this.a),g=os([],this.b);this.angle=Math.acos(xa(p,g))}}function mh(a,o){if(0===a.angle)return null;let l;return l=0===a.a[o]?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[o]/a.a[o]/Math.sin(a.angle)-1/Math.tan(a.angle)),l<0||l>1?null:function(d,p,g,b){const w=Math.sin(g);return d*(Math.sin((1-b)*g)/w)+p*(Math.sin(b*g)/w)}(a.a[o],a.b[o],a.angle,yn(l,0,1))+a.center[o]}function uc(a){if(a.z<=1)return Ja[a.z+2*a.y+a.x];const o=ud(Df(a));return Os.fromPoints(o)}function If(a,o,l){return Io(a,a,1-l),Kp(a,a,o,l)}function jv(a,o){const l=dd(o.zoom);if(0===l)return uc(a);const d=Df(a),p=ud(d),g=Cl(d.getWest())*o.worldSize,b=Cl(d.getEast())*o.worldSize,w=dc(d.getNorth())*o.worldSize,T=dc(d.getSouth())*o.worldSize,S=[g,w,0],k=[b,w,0],O=[g,T,0],L=[b,T,0],V=Nv([],o.globeMatrix);return Ar(S,S,V),Ar(k,k,V),Ar(O,O,V),Ar(L,L,V),p[0]=If(p[0],O,l),p[1]=If(p[1],L,l),p[2]=If(p[2],k,l),p[3]=If(p[3],S,l),Os.fromPoints(p)}function JC(a,o,l){for(const d of a)Ar(d,d,o),Io(d,d,l)}function Df({x:a,y:o,z:l}){const d=1/(1<<l),p=new ei(Vo(a*d),Jr((o+1)*d)),g=new ei(Vo((a+1)*d),Jr(o*d));return new ru(p,g)}function ud(a){const o=Et(a.getNorth()),l=Et(a.getSouth()),d=Math.cos(o),p=Math.cos(l),g=Math.sin(o),b=Math.sin(l),w=a.getWest(),T=a.getEast();return[Jp(p,b,w),Jp(p,b,T),Jp(d,g,T),Jp(d,g,w)]}function Jp(a,o,l,d=ou){return l=Et(l),[a*Math.sin(l)*d,-o*d,a*Math.cos(l)*d]}function gh(a,o,l){return Jp(Math.cos(Et(a)),Math.sin(Et(a)),o,l)}function e_(a,o,l,d){const p=1<<l.z,g=(a/pn+l.x)/p;return gh(Jr((o/pn+l.y)/p),Vo(g),d)}function t0({min:a,max:o}){return 16383/Math.max(o[0]-a[0],o[1]-a[1],o[2]-a[2])}const Uv=new Float64Array(16);function t_(a){const o=t0(a),l=qp(Uv,[o,o,o]);return Sf(l,l,((d=[])[0]=-(p=a.min)[0],d[1]=-p[1],d[2]=-p[2],d));var d,p}function mx(a){const o=(d=a.min,(l=Uv)[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=d[0],l[13]=d[1],l[14]=d[2],l[15]=1,l);var l,d;const p=1/t0(a);return ch(o,o,[p,p,p])}function Hv(a,o,l,d,p){const g=function(T){const S=pn/(2*Math.PI);return T/(2*Math.PI)/S}(l),b=[a,o,-l/(2*Math.PI)],w=Ks(new Float64Array(16));return Sf(w,w,b),ch(w,w,[g,g,g]),Xa(w,w,Et(-p)),qm(w,w,Et(-d)),w}function dd(a){return rr(5,6,a)}function n_(a,o){const l=gh(o.lat,o.lng);return b=(p=Xm([],function(j){const G=gh(j._center.lat,j._center.lng);let Q=ld([],uh(0,1,0),G);const ae=Zm([],-j.angle,G);Q=Ar(Q,Q,ae),Zm(ae,-j._pitch,Q);const _e=os([],G);return Io(_e,_e,cd(j.cameraToCenterDistance/j.pixelsPerMeter)),Ar(_e,_e,ae),cc([],G,_e)}(a),l))[0],w=p[1],T=p[2],S=(g=l)[0],k=g[1],O=g[2],V=(L=Math.sqrt(b*b+w*w+T*T)*Math.sqrt(S*S+k*k+O*O))&&xa(p,g)/L,Math.acos(Math.min(Math.max(V,-1),1));var p,g,b,w,T,S,k,O,L,V}function n0(a,o){return n_(a,o)>Math.PI/2*1.01}const Gr=Et(85),eT=Math.cos(Gr),hd=Math.sin(Gr),i_=6371008.8,gx=2*Math.PI*i_;class ei{constructor(o,l){if(isNaN(o)||isNaN(l))throw new Error(`Invalid LngLat object: (${o}, ${l})`);if(this.lng=+o,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ei(In(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const l=Math.PI/180,d=this.lat*l,p=o.lat*l,g=Math.sin(d)*Math.sin(p)+Math.cos(d)*Math.cos(p)*Math.cos((o.lng-this.lng)*l);return i_*Math.acos(Math.min(g,1))}toBounds(o=0){const l=360*o/40075017,d=l/Math.cos(Math.PI/180*this.lat);return new ru(new ei(this.lng-d,this.lat-l),new ei(this.lng+d,this.lat+l))}toEcef(o){const l=cd(o);return gh(this.lat,this.lng,ou+l)}static convert(o){if(o instanceof ei)return o;if(Array.isArray(o)&&(2===o.length||3===o.length))return new ei(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&"object"==typeof o&&null!==o)return new ei(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function Af(a){return gx*Math.cos(a*Math.PI/180)}function Cl(a){return(180+a)/360}function dc(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Tl(a,o){return a/Af(o)}function Vo(a){return 360*a-180}function Jr(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function $v(a,o){return a*Af(Jr(o))}const ss=85.051129;function xx(a){return 1/Math.cos(a*Math.PI/180)}class Mf{constructor(o,l,d=0){this.x=+o,this.y=+l,this.z=+d}static fromLngLat(o,l=0){const d=ei.convert(o);return new Mf(Cl(d.lng),dc(d.lat),Tl(l,d.lat))}toLngLat(){return new ei(Vo(this.x),Jr(this.y))}toAltitude(){return $v(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/gx*xx(Jr(this.y))}}function Gv(a,o,l,d,p,g,b,w,T){const S=(o+d)/2,k=(l+p)/2,O=new ft(S,k);w(O),function(L,V,j,G,Q,ae){const _e=j-Q,oe=G-ae;return Math.abs((G-V)*_e-(j-L)*oe)/Math.hypot(_e,oe)}(O.x,O.y,g.x,g.y,b.x,b.y)>=T?(Gv(a,o,l,S,k,g,O,w,T),Gv(a,S,k,d,p,O,b,w,T)):a.push(b)}function Wv(a,o,l){let d=a[0],p=d.x,g=d.y;o(d);const b=[d];for(let w=1;w<a.length;w++){const T=a[w],{x:S,y:k}=T;o(T),Gv(b,p,g,S,k,d,T,o,l),p=S,g=k,d=T}return b}function yx(a,o,l,d){if(d(o,l)){const p=o.add(l)._mult(.5);yx(a,o,p,d),yx(a,p,l,d)}else a.push(l)}function tT(a,o){let l=a[0];const d=[l];for(let p=1;p<a.length;p++){const g=a[p];yx(d,l,g,o),l=g}return d}const kf=Math.pow(2,14)-1,bx=-kf-1;function nT(a,o){const l=Math.round(a.x*o),d=Math.round(a.y*o);return a.x=yn(l,bx,kf),a.y=yn(d,bx,kf),(l<a.x||l>a.x+1||d<a.y||d>a.y+1)&&Gt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function hc(a,o,l){const d=a.loadGeometry(),p=a.extent,g=pn/p;if(o&&l&&l.projection.isReprojectedInTileSpace){const b=1<<o.z,{scale:w,x:T,y:S,projection:k}=l,O=L=>{const V=Vo((o.x+L.x/p)/b),j=Jr((o.y+L.y/p)/b),G=k.project(V,j);L.x=(G.x*w-T)*p,L.y=(G.y*w-S)*p};for(let L=0;L<d.length;L++)if(1!==a.type)d[L]=Wv(d[L],O,1);else{const V=[];for(const j of d[L])j.x<0||j.x>=p||j.y<0||j.y>=p||(O(j),V.push(j));d[L]=V}}for(const b of d)for(const w of b)nT(w,g);return d}function Rf(a,o){return{type:a.type,id:a.id,properties:a.properties,geometry:o?hc(a):[]}}function r_(a,o,l,d,p){a.emplaceBack(2*o+(d+1)/2,2*l+(p+1)/2)}function vx(a,o,l){a.emplaceBack(o.x,o.y,o.z,16384*l[0],16384*l[1],16384*l[2])}class wx{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new en,this.indexArray=new ur,this.segments=new Qr,this.programConfigurations=new od(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,d,p){const g=this.layers[0],b=[];let w=null;"circle"===g.type&&(w=g.layout.get("circle-sort-key"));for(const{feature:S,id:k,index:O,sourceLayerIndex:L}of o){const V=this.layers[0]._featureFilter.needGeometry,j=Rf(S,V);if(!this.layers[0]._featureFilter.filter(new Ie(this.zoom),j,d))continue;const G=w?w.evaluate(j,{},d):void 0,Q={id:k,properties:S.properties,type:S.type,sourceLayerIndex:L,index:O,geometry:V?j.geometry:hc(S,d,p),patterns:{},sortKey:G};b.push(Q)}w&&b.sort((S,k)=>S.sortKey-k.sortKey);let T=null;"globe"===p.projection.name&&(this.globeExtVertexArray=new ma,T=p.projection);for(const S of b){const{geometry:k,index:O,sourceLayerIndex:L}=S,V=o[O].feature;this.addFeature(S,k,O,l.availableImages,d,T),l.featureIndex.insert(V,k,O,L,this.index)}}update(o,l,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,d,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,qC.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,ZC.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,l,d,p,g,b){for(const w of l)for(const T of w){const S=T.x,k=T.y;if(S<0||S>=pn||k<0||k>=pn)continue;if(b){const V=b.projectTilePoint(S,k,g),j=b.upVector(g,S,k),G=this.globeExtVertexArray;vx(G,V,j),vx(G,V,j),vx(G,V,j),vx(G,V,j)}const O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),L=O.vertexLength;r_(this.layoutVertexArray,S,k,-1,-1),r_(this.layoutVertexArray,S,k,1,-1),r_(this.layoutVertexArray,S,k,1,1),r_(this.layoutVertexArray,S,k,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+2,L+3),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,{},p,g)}}function qv(a,o){for(let l=0;l<a.length;l++)if(Pf(o,a[l]))return!0;for(let l=0;l<o.length;l++)if(Pf(a,o[l]))return!0;return!!o_(a,o)}function Ex(a,o,l){return!!Pf(a,o)||!!Zv(o,a,l)}function iT(a,o){if(1===a.length)return oT(o,a[0]);for(let l=0;l<o.length;l++){const d=o[l];for(let p=0;p<d.length;p++)if(Pf(a,d[p]))return!0}for(let l=0;l<a.length;l++)if(oT(o,a[l]))return!0;for(let l=0;l<o.length;l++)if(o_(a,o[l]))return!0;return!1}function ER(a,o,l){if(a.length>1){if(o_(a,o))return!0;for(let d=0;d<o.length;d++)if(Zv(o[d],a,l))return!0}for(let d=0;d<a.length;d++)if(Zv(a[d],o,l))return!0;return!1}function o_(a,o){if(0===a.length||0===o.length)return!1;for(let l=0;l<a.length-1;l++){const d=a[l],p=a[l+1];for(let g=0;g<o.length-1;g++)if(CR(d,p,o[g],o[g+1]))return!0}return!1}function CR(a,o,l,d){return Qo(a,l,d)!==Qo(o,l,d)&&Qo(a,o,l)!==Qo(a,o,d)}function Zv(a,o,l){const d=l*l;if(1===o.length)return a.distSqr(o[0])<d;for(let p=1;p<o.length;p++)if(rT(a,o[p-1],o[p])<d)return!0;return!1}function rT(a,o,l){const d=o.distSqr(l);if(0===d)return a.distSqr(o);const p=((a.x-o.x)*(l.x-o.x)+(a.y-o.y)*(l.y-o.y))/d;return a.distSqr(p<0?o:p>1?l:l.sub(o)._mult(p)._add(o))}function oT(a,o){let l,d,p,g=!1;for(let b=0;b<a.length;b++){l=a[b];for(let w=0,T=l.length-1;w<l.length;T=w++)d=l[w],p=l[T],d.y>o.y!=p.y>o.y&&o.x<(p.x-d.x)*(o.y-d.y)/(p.y-d.y)+d.x&&(g=!g)}return g}function Pf(a,o){let l=!1;for(let d=0,p=a.length-1;d<a.length;p=d++){const g=a[d],b=a[p];g.y>o.y!=b.y>o.y&&o.x<(b.x-g.x)*(o.y-g.y)/(b.y-g.y)+g.x&&(l=!l)}return l}function Yv(a,o,l,d,p){for(const b of a)if(o<=b.x&&l<=b.y&&d>=b.x&&p>=b.y)return!0;const g=[new ft(o,l),new ft(o,p),new ft(d,p),new ft(d,l)];if(a.length>2)for(const b of g)if(Pf(a,b))return!0;for(let b=0;b<a.length-1;b++)if(r0(a[b],a[b+1],g))return!0;return!1}function r0(a,o,l){const d=l[0],p=l[2];if(a.x<d.x&&o.x<d.x||a.x>p.x&&o.x>p.x||a.y<d.y&&o.y<d.y||a.y>p.y&&o.y>p.y)return!1;const g=Qo(a,o,l[0]);return g!==Qo(a,o,l[1])||g!==Qo(a,o,l[2])||g!==Qo(a,o,l[3])}function fd(a,o,l){const d=o.paint.get(a).value;return"constant"===d.kind?d.value:l.programConfigurations.get(o.id).getMaxValue(a)}function s_(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Cx(a,o,l,d,p){if(!o[0]&&!o[1])return a;const g=ft.convert(o)._mult(p);"viewport"===l&&g._rotate(-d);const b=[];for(let w=0;w<a.length;w++)b.push(a[w].sub(g));return b}function Tx(a,o,l,d){const p=ft.convert(a)._mult(d);return"viewport"===o&&p._rotate(-l),p}Vt(wx,"CircleBucket",{omit:["layers"]});const Of=new pt({"circle-sort-key":new He(Ye.layout_circle["circle-sort-key"])});var Xv={paint:new pt({"circle-radius":new He(Ye.paint_circle["circle-radius"]),"circle-color":new He(Ye.paint_circle["circle-color"]),"circle-blur":new He(Ye.paint_circle["circle-blur"]),"circle-opacity":new He(Ye.paint_circle["circle-opacity"]),"circle-translate":new Me(Ye.paint_circle["circle-translate"]),"circle-translate-anchor":new Me(Ye.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Me(Ye.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Me(Ye.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new He(Ye.paint_circle["circle-stroke-width"]),"circle-stroke-color":new He(Ye.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new He(Ye.paint_circle["circle-stroke-opacity"])}),layout:Of};function Sx(a,o,l,d,p,g,b,w,T){if(g&&a.queryGeometry.isAboveHorizon)return!1;g&&(T*=a.pixelToTileUnitsFactor);const S=a.tileID.canonical,k=l.projection.upVectorScale(S,l.center.lat,l.worldSize).metersToTile;for(const O of o)for(const L of O){const V=L.add(w),j=p&&l.elevation?l.elevation.exaggeration()*p.getElevationAt(V.x,V.y,!0):0,G=l.projection.projectTilePoint(V.x,V.y,S);if(j>0){const oe=l.projection.upVector(S,V.x,V.y);G.x+=oe[0]*k*j,G.y+=oe[1]*k*j,G.z+=oe[2]*k*j}const Q=g?V:o0(G.x,G.y,G.z,d),ae=g?a.tilespaceRays.map(oe=>sT(oe,j)):a.queryGeometry.screenGeometry,_e=Ka([],[G.x,G.y,G.z,1],d);if(!b&&g?T*=_e[3]/l.cameraToCenterDistance:b&&!g&&(T*=l.cameraToCenterDistance/_e[3]),g){const oe=Jr((L.y/pn+S.y)/(1<<S.z));T/=l.projection.pixelsPerMeter(oe,1)/Tl(1,oe)}if(Ex(ae,Q,T))return!0}return!1}function o0(a,o,l,d){const p=Ka([],[a,o,l,1],d);return new ft(p[0]/p[3],p[1]/p[3])}const a_=uh(0,0,0),Qs=uh(0,0,1);function sT(a,o){const l=Zp();return a_[2]=o,a.intersectsPlane(a_,Qs,l),new ft(l[0],l[1])}class Kv extends wx{}function Qv(a,{width:o,height:l},d,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==o*l*d)throw new RangeError("mismatched image size")}else p=new Uint8Array(o*l*d);return a.width=o,a.height=l,a.data=p,a}function Ix(a,o,l){const{width:d,height:p}=o;d===a.width&&p===a.height||(l_(a,o,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,d),height:Math.min(a.height,p)},l),a.width=d,a.height=p,a.data=o.data)}function l_(a,o,l,d,p,g){if(0===p.width||0===p.height)return o;if(p.width>a.width||p.height>a.height||l.x>a.width-p.width||l.y>a.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>o.width||p.height>o.height||d.x>o.width-p.width||d.y>o.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const b=a.data,w=o.data;for(let T=0;T<p.height;T++){const S=((l.y+T)*a.width+l.x)*g,k=((d.y+T)*o.width+d.x)*g;for(let O=0;O<p.width*g;O++)w[k+O]=b[S+O]}return o}Vt(Kv,"HeatmapBucket",{omit:["layers"]});class su{constructor(o,l){Qv(this,o,1,l)}resize(o){Ix(this,new su(o),1)}clone(){return new su({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,d,p,g){l_(o,l,d,p,g,1)}}class Js{constructor(o,l){Qv(this,o,4,l)}resize(o){Ix(this,new Js(o),4)}replace(o,l){l?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Js({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,d,p,g){l_(o,l,d,p,g,4)}}Vt(su,"AlphaImage"),Vt(Js,"RGBAImage");var aT={paint:new pt({"heatmap-radius":new He(Ye.paint_heatmap["heatmap-radius"]),"heatmap-weight":new He(Ye.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Me(Ye.paint_heatmap["heatmap-intensity"]),"heatmap-color":new st(Ye.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Me(Ye.paint_heatmap["heatmap-opacity"])})};function s0(a){const o={},l=a.resolution||256,d=a.clips?a.clips.length:1,p=a.image||new Js({width:l,height:d}),g=(b,w,T)=>{o[a.evaluationKey]=T;const S=a.expression.evaluate(o);p.data[b+w+0]=Math.floor(255*S.r/S.a),p.data[b+w+1]=Math.floor(255*S.g/S.a),p.data[b+w+2]=Math.floor(255*S.b/S.a),p.data[b+w+3]=Math.floor(255*S.a)};if(a.clips)for(let b=0,w=0;b<d;++b,w+=4*l)for(let T=0,S=0;T<l;T++,S+=4){const k=T/(l-1),{start:O,end:L}=a.clips[b];g(w,S,O*(1-k)+L*k)}else for(let b=0,w=0;b<l;b++,w+=4)g(0,w,b/(l-1));return p}var lT={paint:new pt({"hillshade-illumination-direction":new Me(Ye.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Me(Ye.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Me(Ye.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Me(Ye.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Me(Ye.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Me(Ye.paint_hillshade["hillshade-accent-color"])})};const cT=Yt([{name:"a_pos",components:2,type:"Int16"}],4),{members:ea}=cT;var pd={};function c_(a,o,l){l=l||2;var d,p,g,b,w,T,S,k=o&&o.length,O=k?o[0]*l:a.length,L=a0(a,0,O,l,!0),V=[];if(!L||L.next===L.prev)return V;if(k&&(L=function(G,Q,ae,_e){var oe,he,be,pe=[];for(oe=0,he=Q.length;oe<he;oe++)(be=a0(G,Q[oe]*_e,oe<he-1?Q[oe+1]*_e:G.length,_e,!1))===be.next&&(be.steiner=!0),pe.push(fT(be));for(pe.sort(dT),oe=0;oe<pe.length;oe++)ae=n1(pe[oe],ae);return ae}(a,o,L,l)),a.length>80*l){d=g=a[0],p=b=a[1];for(var j=l;j<O;j+=l)(w=a[j])<d&&(d=w),(T=a[j+1])<p&&(p=T),w>g&&(g=w),T>b&&(b=T);S=0!==(S=Math.max(g-d,b-p))?32767/S:0}return au(L,V,l,d,p,S,0),V}function a0(a,o,l,d,p){var g,b;if(p===h0(a,o,l,d)>0)for(g=o;g<l;g+=d)b=Mx(g,a[g],a[g+1],b);else for(g=l-d;g>=o;g-=d)b=Mx(g,a[g],a[g+1],b);return b&&c0(b,b.next)&&(fc(b),b=b.next),b}function eo(a,o){if(!a)return a;o||(o=a);var l,d=a;do{if(l=!1,d.steiner||!c0(d,d.next)&&0!==br(d.prev,d,d.next))d=d.next;else{if(fc(d),(d=o=d.prev)===d.next)break;l=!0}}while(l||d!==o);return o}function au(a,o,l,d,p,g,b){if(a){!b&&g&&function(k,O,L,V){var j=k;do{0===j.z&&(j.z=l0(j.x,j.y,O,L,V)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next}while(j!==k);j.prevZ.nextZ=null,j.prevZ=null,function(G){var Q,ae,_e,oe,he,be,pe,je,Ne=1;do{for(ae=G,G=null,he=null,be=0;ae;){for(be++,_e=ae,pe=0,Q=0;Q<Ne&&(pe++,_e=_e.nextZ);Q++);for(je=Ne;pe>0||je>0&&_e;)0!==pe&&(0===je||!_e||ae.z<=_e.z)?(oe=ae,ae=ae.nextZ,pe--):(oe=_e,_e=_e.nextZ,je--),he?he.nextZ=oe:G=oe,oe.prevZ=he,he=oe;ae=_e}he.nextZ=null,Ne*=2}while(be>1)}(j)}(a,d,p,g);for(var w,T,S=a;a.prev!==a.next;)if(w=a.prev,T=a.next,g?e1(a,d,p,g):Jv(a))o.push(w.i/l|0),o.push(a.i/l|0),o.push(T.i/l|0),fc(a),a=T.next,S=T.next;else if((a=T)===S){b?1===b?au(a=uT(eo(a),o,l),o,l,d,p,g,2):2===b&&t1(a,o,l,d,p,g):au(eo(a),o,l,d,p,g,1);break}}}function Jv(a){var o=a.prev,l=a,d=a.next;if(br(o,l,d)>=0)return!1;for(var p=o.x,g=l.x,b=d.x,w=o.y,T=l.y,S=d.y,k=p<g?p<b?p:b:g<b?g:b,O=w<T?w<S?w:S:T<S?T:S,L=p>g?p>b?p:b:g>b?g:b,V=w>T?w>S?w:S:T>S?T:S,j=d.next;j!==o;){if(j.x>=k&&j.x<=L&&j.y>=O&&j.y<=V&&Ff(p,w,g,T,b,S,j.x,j.y)&&br(j.prev,j,j.next)>=0)return!1;j=j.next}return!0}function e1(a,o,l,d){var p=a.prev,g=a,b=a.next;if(br(p,g,b)>=0)return!1;for(var w=p.x,T=g.x,S=b.x,k=p.y,O=g.y,L=b.y,V=w<T?w<S?w:S:T<S?T:S,j=k<O?k<L?k:L:O<L?O:L,G=w>T?w>S?w:S:T>S?T:S,Q=k>O?k>L?k:L:O>L?O:L,ae=l0(V,j,o,l,d),_e=l0(G,Q,o,l,d),oe=a.prevZ,he=a.nextZ;oe&&oe.z>=ae&&he&&he.z<=_e;){if(oe.x>=V&&oe.x<=G&&oe.y>=j&&oe.y<=Q&&oe!==p&&oe!==b&&Ff(w,k,T,O,S,L,oe.x,oe.y)&&br(oe.prev,oe,oe.next)>=0||(oe=oe.prevZ,he.x>=V&&he.x<=G&&he.y>=j&&he.y<=Q&&he!==p&&he!==b&&Ff(w,k,T,O,S,L,he.x,he.y)&&br(he.prev,he,he.next)>=0))return!1;he=he.nextZ}for(;oe&&oe.z>=ae;){if(oe.x>=V&&oe.x<=G&&oe.y>=j&&oe.y<=Q&&oe!==p&&oe!==b&&Ff(w,k,T,O,S,L,oe.x,oe.y)&&br(oe.prev,oe,oe.next)>=0)return!1;oe=oe.prevZ}for(;he&&he.z<=_e;){if(he.x>=V&&he.x<=G&&he.y>=j&&he.y<=Q&&he!==p&&he!==b&&Ff(w,k,T,O,S,L,he.x,he.y)&&br(he.prev,he,he.next)>=0)return!1;he=he.nextZ}return!0}function uT(a,o,l){var d=a;do{var p=d.prev,g=d.next.next;!c0(p,g)&&Nf(p,d,d.next,g)&&Lf(p,g)&&Lf(g,p)&&(o.push(p.i/l|0),o.push(d.i/l|0),o.push(g.i/l|0),fc(d),fc(d.next),d=a=g),d=d.next}while(d!==a);return eo(d)}function t1(a,o,l,d,p,g){var b=a;do{for(var w=b.next.next;w!==b.prev;){if(b.i!==w.i&&Dx(b,w)){var T=Ax(b,w);return b=eo(b,b.next),T=eo(T,T.next),au(b,o,l,d,p,g,0),void au(T,o,l,d,p,g,0)}w=w.next}b=b.next}while(b!==a)}function dT(a,o){return a.x-o.x}function n1(a,o){var l=function(p,g){var b,w=g,T=p.x,S=p.y,k=-1/0;do{if(S<=w.y&&S>=w.next.y&&w.next.y!==w.y){var O=w.x+(S-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(O<=T&&O>k&&(k=O,b=w.x<w.next.x?w:w.next,O===T))return b}w=w.next}while(w!==g);if(!b)return null;var L,V=b,j=b.x,G=b.y,Q=1/0;w=b;do{T>=w.x&&w.x>=j&&T!==w.x&&Ff(S<G?T:k,S,j,G,S<G?k:T,S,w.x,w.y)&&(L=Math.abs(S-w.y)/(T-w.x),Lf(w,p)&&(L<Q||L===Q&&(w.x>b.x||w.x===b.x&&hT(b,w)))&&(b=w,Q=L)),w=w.next}while(w!==V);return b}(a,o);if(!l)return o;var d=Ax(l,a);return eo(d,d.next),eo(l,l.next)}function hT(a,o){return br(a.prev,a,o.prev)<0&&br(o.next,a,a.next)<0}function l0(a,o,l,d,p){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-l)*p|0)|a<<8))|a<<4))|a<<2))|a<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-d)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function fT(a){var o=a,l=a;do{(o.x<l.x||o.x===l.x&&o.y<l.y)&&(l=o),o=o.next}while(o!==a);return l}function Ff(a,o,l,d,p,g,b,w){return(p-b)*(o-w)>=(a-b)*(g-w)&&(a-b)*(d-w)>=(l-b)*(o-w)&&(l-b)*(g-w)>=(p-b)*(d-w)}function Dx(a,o){return a.next.i!==o.i&&a.prev.i!==o.i&&!function(l,d){var p=l;do{if(p.i!==l.i&&p.next.i!==l.i&&p.i!==d.i&&p.next.i!==d.i&&Nf(p,p.next,l,d))return!0;p=p.next}while(p!==l);return!1}(a,o)&&(Lf(a,o)&&Lf(o,a)&&function(l,d){var p=l,g=!1,b=(l.x+d.x)/2,w=(l.y+d.y)/2;do{p.y>w!=p.next.y>w&&p.next.y!==p.y&&b<(p.next.x-p.x)*(w-p.y)/(p.next.y-p.y)+p.x&&(g=!g),p=p.next}while(p!==l);return g}(a,o)&&(br(a.prev,a,o.prev)||br(a,o.prev,o))||c0(a,o)&&br(a.prev,a,a.next)>0&&br(o.prev,o,o.next)>0)}function br(a,o,l){return(o.y-a.y)*(l.x-o.x)-(o.x-a.x)*(l.y-o.y)}function c0(a,o){return a.x===o.x&&a.y===o.y}function Nf(a,o,l,d){var p=d0(br(a,o,l)),g=d0(br(a,o,d)),b=d0(br(l,d,a)),w=d0(br(l,d,o));return p!==g&&b!==w||!(0!==p||!u0(a,l,o))||!(0!==g||!u0(a,d,o))||!(0!==b||!u0(l,a,d))||!(0!==w||!u0(l,o,d))}function u0(a,o,l){return o.x<=Math.max(a.x,l.x)&&o.x>=Math.min(a.x,l.x)&&o.y<=Math.max(a.y,l.y)&&o.y>=Math.min(a.y,l.y)}function d0(a){return a>0?1:a<0?-1:0}function Lf(a,o){return br(a.prev,a,a.next)<0?br(a,o,a.next)>=0&&br(a,a.prev,o)>=0:br(a,o,a.prev)<0||br(a,a.next,o)<0}function Ax(a,o){var l=new Bf(a.i,a.x,a.y),d=new Bf(o.i,o.x,o.y),p=a.next,g=o.prev;return a.next=o,o.prev=a,l.next=p,p.prev=l,d.next=l,l.prev=d,g.next=d,d.prev=g,d}function Mx(a,o,l,d){var p=new Bf(a,o,l);return d?(p.next=d.next,p.prev=d,d.next.prev=p,d.next=p):(p.prev=p,p.next=p),p}function fc(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Bf(a,o,l){this.i=a,this.x=o,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function h0(a,o,l,d){for(var p=0,g=o,b=l-d;g<l;g+=d)p+=(a[b]-a[g])*(a[g+1]+a[b+1]),b=g;return p}function kx(a,o,l,d,p){u_(a,o,l||0,d||a.length-1,p||pT)}function u_(a,o,l,d,p){for(;d>l;){if(d-l>600){var g=d-l+1,b=o-l+1,w=Math.log(g),T=.5*Math.exp(2*w/3),S=.5*Math.sqrt(w*T*(g-T)/g)*(b-g/2<0?-1:1);u_(a,o,Math.max(l,Math.floor(o-b*T/g+S)),Math.min(d,Math.floor(o+(g-b)*T/g+S)),p)}var k=a[o],O=l,L=d;for(d_(a,l,o),p(a[d],k)>0&&d_(a,l,d);O<L;){for(d_(a,O,L),O++,L--;p(a[O],k)<0;)O++;for(;p(a[L],k)>0;)L--}0===p(a[l],k)?d_(a,l,L):d_(a,++L,d),L<=o&&(l=L+1),o<=L&&(d=L-1)}}function d_(a,o,l){var d=a[o];a[o]=a[l],a[l]=d}function pT(a,o){return a<o?-1:a>o?1:0}function Rx(a,o){const l=a.length;if(l<=1)return[a];const d=[];let p,g;for(let b=0;b<l;b++){const w=Jn(a[b]);0!==w&&(a[b].area=Math.abs(w),void 0===g&&(g=w<0),g===w<0?(p&&d.push(p),p=[a[b]]):p.push(a[b]))}if(p&&d.push(p),o>1)for(let b=0;b<d.length;b++)d[b].length<=o||(kx(d[b],o,1,d[b].length-1,_T),d[b]=d[b].slice(0,o));return d}function _T(a,o){return o.area-a.area}function Px(a,o,l){const d=l.patternDependencies;let p=!1;for(const g of o){const b=g.paint.get(`${a}-pattern`);b.isConstant()||(p=!0);const w=b.constantOr(null);w&&(p=!0,d[w]=!0)}return p}function Ox(a,o,l,d,p){const g=p.patternDependencies;for(const b of o){const w=b.paint.get(`${a}-pattern`).value;if("constant"!==w.kind){let T=w.evaluate({zoom:d},l,{},p.availableImages);T=T&&T.name?T.name:T,g[T]=!0,l.patterns[b.id]=T}}return l}({get exports(){return pd},set exports(a){pd=a}}).exports=c_,pd.default=c_,c_.deviation=function(a,o,l,d){var p=o&&o.length,g=Math.abs(h0(a,0,p?o[0]*l:a.length,l));if(p)for(var b=0,w=o.length;b<w;b++)g-=Math.abs(h0(a,o[b]*l,b<w-1?o[b+1]*l:a.length,l));var T=0;for(b=0;b<d.length;b+=3){var S=d[b]*l,k=d[b+1]*l,O=d[b+2]*l;T+=Math.abs((a[S]-a[O])*(a[k+1]-a[S+1])-(a[S]-a[k])*(a[O+1]-a[S+1]))}return 0===g&&0===T?0:Math.abs((T-g)/g)},c_.flatten=function(a){for(var o=a[0][0].length,l={vertices:[],holes:[],dimensions:o},d=0,p=0;p<a.length;p++){for(var g=0;g<a[p].length;g++)for(var b=0;b<o;b++)l.vertices.push(a[p][g][b]);p>0&&l.holes.push(d+=a[p-1].length)}return l};class h_{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new en,this.indexArray=new ur,this.indexArray2=new Dr,this.programConfigurations=new od(o.layers,o.zoom),this.segments=new Qr,this.segments2=new Qr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=o.projection}populate(o,l,d,p){this.hasPattern=Px("fill",this.layers,l);const g=this.layers[0].layout.get("fill-sort-key"),b=[];for(const{feature:w,id:T,index:S,sourceLayerIndex:k}of o){const O=this.layers[0]._featureFilter.needGeometry,L=Rf(w,O);if(!this.layers[0]._featureFilter.filter(new Ie(this.zoom),L,d))continue;const V=g?g.evaluate(L,{},d,l.availableImages):void 0,j={id:T,properties:w.properties,type:w.type,sourceLayerIndex:k,index:S,geometry:O?L.geometry:hc(w,d,p),patterns:{},sortKey:V};b.push(j)}g&&b.sort((w,T)=>w.sortKey-T.sortKey);for(const w of b){const{geometry:T,index:S,sourceLayerIndex:k}=w;if(this.hasPattern){const O=Ox("fill",this.layers,w,this.zoom,l);this.patternFeatures.push(O)}else this.addFeature(w,T,S,d,{},l.availableImages);l.featureIndex.insert(o[S].feature,T,S,k,this.index)}}update(o,l,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,d,p)}addFeatures(o,l,d,p,g){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,l,d,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,ea),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,l,d,p,g,b=[]){for(const w of Rx(l,500)){let T=0;for(const j of w)T+=j.length;const S=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),k=S.vertexLength,O=[],L=[];for(const j of w){if(0===j.length)continue;j!==w[0]&&L.push(O.length/2);const G=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),Q=G.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(Q+j.length-1,Q),O.push(j[0].x),O.push(j[0].y);for(let ae=1;ae<j.length;ae++)this.layoutVertexArray.emplaceBack(j[ae].x,j[ae].y),this.indexArray2.emplaceBack(Q+ae-1,Q+ae),O.push(j[ae].x),O.push(j[ae].y);G.vertexLength+=j.length,G.primitiveLength+=j.length}const V=pd(O,L);for(let j=0;j<V.length;j+=3)this.indexArray.emplaceBack(k+V[j],k+V[j+1],k+V[j+2]);S.vertexLength+=T,S.primitiveLength+=V.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,g,b,p)}}Vt(h_,"FillBucket",{omit:["layers","patternFeatures"]});const Fx=new pt({"fill-sort-key":new He(Ye.layout_fill["fill-sort-key"])});var r1={paint:new pt({"fill-antialias":new Me(Ye.paint_fill["fill-antialias"]),"fill-opacity":new He(Ye.paint_fill["fill-opacity"]),"fill-color":new He(Ye.paint_fill["fill-color"]),"fill-outline-color":new He(Ye.paint_fill["fill-outline-color"]),"fill-translate":new Me(Ye.paint_fill["fill-translate"]),"fill-translate-anchor":new Me(Ye.paint_fill["fill-translate-anchor"]),"fill-pattern":new He(Ye.paint_fill["fill-pattern"])}),layout:Fx};const Nx=Yt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),mT=Yt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),gT=Yt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Lx}=Nx;var f_={},xh=ft,Bx=yh;function yh(a,o,l,d,p){this.properties={},this.extent=l,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=p,a.readFields(xT,this,o)}function xT(a,o,l){1==a?o.id=l.readVarint():2==a?function(d,p){for(var g=d.readVarint()+d.pos;d.pos<g;){var b=p._keys[d.readVarint()],w=p._values[d.readVarint()];p.properties[b]=w}}(l,o):3==a?o.type=l.readVarint():4==a&&(o._geometry=l.pos)}function TR(a){for(var o,l,d=0,p=0,g=a.length,b=g-1;p<g;b=p++)d+=((l=a[b]).x-(o=a[p]).x)*(o.y+l.y);return d}yh.types=["Unknown","Point","LineString","Polygon"],yh.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var o,l=a.readVarint()+a.pos,d=1,p=0,g=0,b=0,w=[];a.pos<l;){if(p<=0){var T=a.readVarint();d=7&T,p=T>>3}if(p--,1===d||2===d)g+=a.readSVarint(),b+=a.readSVarint(),1===d&&(o&&w.push(o),o=[]),o.push(new xh(g,b));else{if(7!==d)throw new Error("unknown command "+d);o&&o.push(o[0].clone())}}return o&&w.push(o),w},yh.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var o=a.readVarint()+a.pos,l=1,d=0,p=0,g=0,b=1/0,w=-1/0,T=1/0,S=-1/0;a.pos<o;){if(d<=0){var k=a.readVarint();l=7&k,d=k>>3}if(d--,1===l||2===l)(p+=a.readSVarint())<b&&(b=p),p>w&&(w=p),(g+=a.readSVarint())<T&&(T=g),g>S&&(S=g);else if(7!==l)throw new Error("unknown command "+l)}return[b,T,w,S]},yh.prototype.toGeoJSON=function(a,o,l){var d,p,g=this.extent*Math.pow(2,l),b=this.extent*a,w=this.extent*o,T=this.loadGeometry(),S=yh.types[this.type];function k(V){for(var j=0;j<V.length;j++){var G=V[j];V[j]=[360*(G.x+b)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(G.y+w)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(d=0;d<T.length;d++)O[d]=T[d][0];k(T=O);break;case 2:for(d=0;d<T.length;d++)k(T[d]);break;case 3:for(T=function(V){var j=V.length;if(j<=1)return[V];for(var G,Q,ae=[],_e=0;_e<j;_e++){var oe=TR(V[_e]);0!==oe&&(void 0===Q&&(Q=oe<0),Q===oe<0?(G&&ae.push(G),G=[V[_e]]):G.push(V[_e]))}return G&&ae.push(G),ae}(T),d=0;d<T.length;d++)for(p=0;p<T[d].length;p++)k(T[d][p])}1===T.length?T=T[0]:S="Multi"+S;var L={type:"Feature",geometry:{type:S,coordinates:T},properties:this.properties};return"id"in this&&(L.id=this.id),L};var f0=Bx,o1=zx;function zx(a,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(s1,this,o),this.length=this._features.length}function s1(a,o,l){15===a?o.version=l.readVarint():1===a?o.name=l.readString():5===a?o.extent=l.readVarint():2===a?o._features.push(l.pos):3===a?o._keys.push(l.readString()):4===a&&o._values.push(function(d){for(var p=null,g=d.readVarint()+d.pos;d.pos<g;){var b=d.readVarint()>>3;p=1===b?d.readString():2===b?d.readFloat():3===b?d.readDouble():4===b?d.readVarint64():5===b?d.readVarint():6===b?d.readSVarint():7===b?d.readBoolean():null}return p}(l))}zx.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var o=this._pbf.readVarint()+this._pbf.pos;return new f0(this._pbf,o,this.extent,this._keys,this._values)};var a1=o1;function Vx(a,o,l){if(3===a){var d=new a1(l,l.readVarint()+l.pos);d.length&&(o[d.name]=d)}}var p0=f_.VectorTile=function(a,o){this.layers=a.readFields(Vx,{},o)},bh=f_.VectorTileFeature=Bx;function _d(a,o,l,d){const p=[],g=0===d?(b,w,T,S,k,O)=>{b.push(new ft(O,T+(O-w)/(S-w)*(k-T)))}:(b,w,T,S,k,O)=>{b.push(new ft(w+(O-T)/(k-T)*(S-w),O))};for(const b of a){const w=[];for(const T of b){if(T.length<=2)continue;const S=[];for(let L=0;L<T.length-1;L++){const V=T[L].x,j=T[L].y,G=T[L+1].x,Q=T[L+1].y,ae=0===d?V:j,_e=0===d?G:Q;ae<o?_e>o&&g(S,V,j,G,Q,o):ae>l?_e<l&&g(S,V,j,G,Q,l):S.push(T[L]),_e<o&&ae>=o&&g(S,V,j,G,Q,o),_e>l&&ae<=l&&g(S,V,j,G,Q,l)}let k=T[T.length-1];const O=0===d?k.x:k.y;O>=o&&O<=l&&S.push(k),S.length&&(k=S[S.length-1],S[0].x===k.x&&S[0].y===k.y||S.push(S[0]),w.push(S))}w.length&&p.push(w)}return p}f_.VectorTileLayer=o1;const l1=bh.types,jx=Math.pow(2,13);function md(a,o,l,d,p,g,b,w){a.emplaceBack((o<<1)+b,(l<<1)+g,(Math.floor(d*jx)<<1)+p,Math.round(w))}function zf(a,o,l){a.emplaceBack(o.x,o.y,o.z,16384*l[0],16384*l[1],16384*l[2])}class _0{constructor(){this.acc=new ft(0,0),this.polyCount=[]}startRing(o){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ft(o.x,o.y),this.max=new ft(o.x,o.y))}append(o,l){this.currentPolyCount.edges++,this.acc._add(o);const d=this.min,p=this.max;o.x<d.x?d.x=o.x:o.x>p.x&&(p.x=o.x),o.y<d.y?d.y=o.y:o.y>p.y&&(p.y=o.y),((0===o.x||o.x===pn)&&o.x===l.x)!=((0===o.y||o.y===pn)&&o.y===l.y)&&this.processBorderOverlap(o,l),l.x<0!=o.x<0&&this.addBorderIntersection(0,On(l.y,o.y,(0-l.x)/(o.x-l.x))),l.x>pn!=o.x>pn&&this.addBorderIntersection(1,On(l.y,o.y,(pn-l.x)/(o.x-l.x))),l.y<0!=o.y<0&&this.addBorderIntersection(2,On(l.x,o.x,(0-l.y)/(o.y-l.y))),l.y>pn!=o.y>pn&&this.addBorderIntersection(3,On(l.x,o.x,(pn-l.y)/(o.y-l.y)))}addBorderIntersection(o,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const d=this.borders[o];l<d[0]&&(d[0]=l),l>d[1]&&(d[1]=l)}processBorderOverlap(o,l){if(o.x===l.x){if(o.y===l.y)return;const d=0===o.x?0:1;this.addBorderIntersection(d,l.y),this.addBorderIntersection(d,o.y)}else{const d=0===o.y?2:3;this.addBorderIntersection(d,l.x),this.addBorderIntersection(d,o.x)}}centroid(){const o=this.polyCount.reduce((l,d)=>l+d.edges,0);return 0!==o?this.acc.div(o)._round():new ft(0,0)}span(){return new ft(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((o,l)=>o+ +(l[0]!==Number.MAX_VALUE),0)}}class lu{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.layoutVertexArray=new Ci,this.centroidVertexArray=new Av,this.indexArray=new ur,this.programConfigurations=new od(o.layers,o.zoom),this.segments=new Qr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.enableTerrain=o.enableTerrain}populate(o,l,d,p){this.features=[],this.hasPattern=Px("fill-extrusion",this.layers,l),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const b=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*b/(b*b+1)/pn/(1<<g.z)}(d),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:b,index:w,sourceLayerIndex:T}of o){const S=this.layers[0]._featureFilter.needGeometry,k=Rf(g,S);if(!this.layers[0]._featureFilter.filter(new Ie(this.zoom),k,d))continue;const O={id:b,sourceLayerIndex:T,index:w,geometry:S?k.geometry:hc(g,d,p),properties:g.properties,type:g.type,patterns:{}},L=this.layoutVertexArray.length;this.hasPattern?this.features.push(Ox("fill-extrusion",this.layers,O,this.zoom,l)):this.addFeature(O,O.geometry,w,d,{},l.availableImages,p),l.featureIndex.insert(g,O.geometry,w,T,this.index,L)}this.sortBorders()}addFeatures(o,l,d,p,g){for(const b of this.features){const{geometry:w}=b;this.addFeature(b,w,b.index,l,d,p,g)}this.sortBorders()}update(o,l,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,d,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Lx),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,gT.members,!0))),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,mT.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,l,d,p,g,b,w){const T=[new ft(0,0),new ft(pn,pn)],S=w.projection,k="globe"===S.name,O=this.enableTerrain&&!k?new _0:null,L="Polygon"===l1[o.type];k&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ma);const V=Rx(l,500);for(let ae=V.length-1;ae>=0;ae--){const _e=V[ae];(0===_e.length||(j=_e[0]).every(oe=>oe.x<=0)||j.every(oe=>oe.x>=pn)||j.every(oe=>oe.y<=0)||j.every(oe=>oe.y>=pn))&&V.splice(ae,1)}var j;let G;if(k)G=p_(V,T,p);else{G=[];for(const ae of V)G.push({polygon:ae,bounds:T})}const Q=L?this.edgeRadius:0;for(const{polygon:ae,bounds:_e}of G){let oe=0,he=0;for(const pe of ae)L&&!pe[0].equals(pe[pe.length-1])&&pe.push(pe[0]),he+=L?pe.length-1:pe.length;const be=this.segments.prepareSegment((L?5:4)*he,this.layoutVertexArray,this.indexArray);if(L){const pe=[],je=[];oe=be.vertexLength;for(const Ke of ae){let _t,$e;Ke.length&&Ke!==ae[0]&&je.push(pe.length/2),_t=Ke[1].sub(Ke[0])._perp()._unit();for(let et=1;et<Ke.length;et++){const rt=Ke[et],ht=Ke[et===Ke.length-1?1:et+1];let{x:gt,y:We}=rt;if(Q){$e=ht.sub(rt)._perp()._unit();const It=_t.add($e)._unit(),rn=Q*Math.min(4,1/(_t.x*It.x+_t.y*It.y));gt+=rn*It.x,We+=rn*It.y,_t=$e}md(this.layoutVertexArray,gt,We,0,0,1,1,0),be.vertexLength++,pe.push(rt.x,rt.y),k&&zf(this.layoutVertexExtArray,S.projectTilePoint(gt,We,p),S.upVector(p,gt,We))}}const Ne=pd(pe,je);for(let Ke=0;Ke<Ne.length;Ke+=3)this.indexArray.emplaceBack(oe+Ne[Ke],oe+Ne[Ke+2],oe+Ne[Ke+1]),be.primitiveLength++}for(const pe of ae){O&&pe.length&&O.startRing(pe[0]);let je,Ne,Ke,_t=pe.length>4&&f1(pe[pe.length-2],pe[0],pe[1]),$e=Q?u1(pe[pe.length-2],pe[0],pe[1],Q):0;Ne=pe[1].sub(pe[0])._perp()._unit();let et=!0;for(let rt=1,ht=0;rt<pe.length;rt++){let gt=pe[rt-1],We=pe[rt];const It=pe[rt===pe.length-1?1:rt+1];if(O&&L&&O.currentPolyCount.top++,h1(We,gt,_e)){Q&&(Ne=It.sub(We)._perp()._unit(),et=!et);continue}O&&O.append(We,gt);const rn=We.sub(gt)._perp(),kt=rn.x/(Math.abs(rn.x)+Math.abs(rn.y)),Ut=rn.y>0?1:0,At=gt.dist(We);if(ht+At>32768&&(ht=0),Q){Ke=It.sub(We)._perp()._unit();let zn=d1(gt,We,It,c1(Ne,Ke),Q);isNaN(zn)&&(zn=0);const hn=We.sub(gt)._unit();gt=gt.add(hn.mult($e))._round(),We=We.add(hn.mult(-zn))._round(),$e=zn,Ne=Ke}const un=be.vertexLength,Yn=pe.length>4&&f1(gt,We,It);let Cn=Ux(ht,_t,et);if(md(this.layoutVertexArray,gt.x,gt.y,kt,Ut,0,0,Cn),md(this.layoutVertexArray,gt.x,gt.y,kt,Ut,0,1,Cn),ht+=At,Cn=Ux(ht,Yn,!et),_t=Yn,md(this.layoutVertexArray,We.x,We.y,kt,Ut,0,0,Cn),md(this.layoutVertexArray,We.x,We.y,kt,Ut,0,1,Cn),be.vertexLength+=4,this.indexArray.emplaceBack(un+0,un+1,un+2),this.indexArray.emplaceBack(un+1,un+3,un+2),be.primitiveLength+=2,Q){const zn=oe+(1===rt?pe.length-2:rt-2),hn=1===rt?oe:zn+1;if(this.indexArray.emplaceBack(un+1,zn,un+3),this.indexArray.emplaceBack(zn,hn,un+3),be.primitiveLength+=2,void 0===je&&(je=un),!h1(It,pe[rt],_e)){const Ii=rt===pe.length-1?je:be.vertexLength;this.indexArray.emplaceBack(un+2,un+3,Ii),this.indexArray.emplaceBack(un+3,Ii+1,Ii),this.indexArray.emplaceBack(un+3,hn,Ii+1),be.primitiveLength+=3}et=!et}if(k){const zn=this.layoutVertexExtArray,hn=S.projectTilePoint(gt.x,gt.y,p),Ii=S.projectTilePoint(We.x,We.y,p),Tn=S.upVector(p,gt.x,gt.y),$n=S.upVector(p,We.x,We.y);zf(zn,hn,Tn),zf(zn,hn,Tn),zf(zn,Ii,$n),zf(zn,Ii,$n)}}L&&(oe+=pe.length-1)}}if(O&&O.polyCount.length>0){if(O.borders){O.vertexArrayOffset=this.centroidVertexArray.length;const ae=O.borders,_e=this.featuresOnBorder.push(O)-1;for(let oe=0;oe<4;oe++)ae[oe][0]!==Number.MAX_VALUE&&this.borders[oe].push(_e)}this.encodeCentroid(O.borders?void 0:O.centroid(),O)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,g,b,p)}sortBorders(){for(let o=0;o<4;o++)this.borders[o].sort((l,d)=>this.featuresOnBorder[l].borders[o][0]-this.featuresOnBorder[d].borders[o][0])}encodeCentroid(o,l,d=!0){let p,g;if(o)if(0!==o.y){const w=l.span()._mult(this.tileToMeter);p=(Math.max(o.x,1)<<3)+Math.min(7,Math.round(w.x/10)),g=(Math.max(o.y,1)<<3)+Math.min(7,Math.round(w.y/10))}else p=Math.ceil(7*(o.x+450)),g=0;else p=0,g=+d;let b=d?this.centroidVertexArray.length:l.vertexArrayOffset;for(const w of l.polyCount){d&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*w.edges+w.top);for(let T=0;T<w.top;T++)this.centroidVertexArray.emplace(b++,p,g);for(let T=0;T<2*w.edges;T++)this.centroidVertexArray.emplace(b++,0,g),this.centroidVertexArray.emplace(b++,p,g)}}}function c1(a,o){const l=a.add(o)._unit();return a.x*l.x+a.y*l.y}function u1(a,o,l,d){const p=o.sub(a)._perp()._unit(),g=l.sub(o)._perp()._unit();return d1(a,o,l,c1(p,g),d)}function d1(a,o,l,d,p){const g=Math.sqrt(1-d*d);return Math.min(a.dist(o)/3,o.dist(l)/3,p*g/d)}function h1(a,o,l){return a.x<l[0].x&&o.x<l[0].x||a.x>l[1].x&&o.x>l[1].x||a.y<l[0].y&&o.y<l[0].y||a.y>l[1].y&&o.y>l[1].y}function f1(a,o,l){if(a.x<0||a.x>=pn||o.x<0||o.x>=pn||l.x<0||l.x>=pn)return!1;const d=l.sub(o),p=d.perp(),g=a.sub(o);return(d.x*g.x+d.y*g.y)/Math.sqrt((d.x*d.x+d.y*d.y)*(g.x*g.x+g.y*g.y))>-.866&&p.x*g.x+p.y*g.y<0}function Ux(a,o,l){const d=o?2|a:-3&a;return l?1|d:-2&d}function Hx(){const a=Math.PI/32,o=Math.tan(a),l=i_;return l*Math.sqrt(1+2*o*o)-l}function p_(a,o,l){const d=1<<l.z,p=Vo(l.x/d),g=Vo((l.x+1)/d),b=Jr(l.y/d),w=Jr((l.y+1)/d);return function(T,S,k,O,L=0,V){const j=[];if(!T.length||!k||!O)return j;const G=(pe,je)=>{for(const Ne of pe)j.push({polygon:Ne,bounds:je})},Q=Math.ceil(Math.log2(k)),ae=Math.ceil(Math.log2(O)),_e=Q-ae,oe=[];for(let pe=0;pe<Math.abs(_e);pe++)oe.push(_e>0?0:1);for(let pe=0;pe<Math.min(Q,ae);pe++)oe.push(0),oe.push(1);let he=T;if(he=_d(he,S[0].y-L,S[1].y+L,1),he=_d(he,S[0].x-L,S[1].x+L,0),!he.length)return j;const be=[];for(oe.length?be.push({polygons:he,bounds:S,depth:0}):G(he,S);be.length;){const pe=be.pop(),je=pe.depth,Ne=oe[je],Ke=pe.bounds[0],_t=pe.bounds[1],$e=0===Ne?Ke.x:Ke.y,et=0===Ne?_t.x:_t.y,rt=V?V(Ne,$e,et):.5*($e+et),ht=_d(pe.polygons,$e-L,rt+L,Ne),gt=_d(pe.polygons,rt-L,et+L,Ne);if(ht.length){const We=[Ke,new ft(0===Ne?rt:_t.x,1===Ne?rt:_t.y)];oe.length>je+1?be.push({polygons:ht,bounds:We,depth:je+1}):G(ht,We)}if(gt.length){const We=[new ft(0===Ne?rt:Ke.x,1===Ne?rt:Ke.y),_t];oe.length>je+1?be.push({polygons:gt,bounds:We,depth:je+1}):G(gt,We)}}return j}(a,o,Math.ceil((g-p)/11.25),Math.ceil((b-w)/11.25),1,(T,S,k)=>{if(0===T)return.5*(S+k);{const O=Jr((l.y+S/pn)/d);return(dc(.5*(Jr((l.y+k/pn)/d)+O))*d-l.y)*pn}})}Vt(lu,"FillExtrusionBucket",{omit:["layers","features"]}),Vt(_0,"PartMetadata");const $x=new pt({"fill-extrusion-edge-radius":new Me(Ye["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Vf={paint:new pt({"fill-extrusion-opacity":new Me(Ye["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new He(Ye["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Me(Ye["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Me(Ye["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new He(Ye["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new He(Ye["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new He(Ye["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Me(Ye["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Me(Ye["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Me(Ye["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:$x};function p1(a,o,l){var d=2*Math.PI*6378137/256/Math.pow(2,l);return[a*d-2*Math.PI*6378137/2,o*d-2*Math.PI*6378137/2]}class m0{constructor(o,l,d){this.z=o,this.x=l,this.y=d,this.key=vh(0,o,o,l,d)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,l){const d=(b=this.y,w=this.z,T=p1(256*(g=this.x),256*(b=Math.pow(2,w)-b-1),w),S=p1(256*(g+1),256*(b+1),w),T[0]+","+T[1]+","+S[0]+","+S[1]),p=function(g,b,w){let T,S="";for(let k=g;k>0;k--)T=1<<k-1,S+=(b&T?1:0)+(w&T?2:0);return S}(this.z,this.x,this.y);var g,b,w,T,S;return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===l?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",p).replace("{bbox-epsg-3857}",d)}toString(){return`${this.z}/${this.x}/${this.y}`}}class yT{constructor(o,l){this.wrap=o,this.canonical=l,this.key=vh(o,l.z,l.z,l.x,l.y)}}class gs{constructor(o,l,d,p,g){this.overscaledZ=o,this.wrap=l,this.canonical=new m0(d,+p,+g),this.key=0===l&&o===d?this.canonical.key:vh(l,o,d,p,g)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const l=this.canonical.z-o;return o>this.canonical.z?new gs(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new gs(o,this.wrap,o,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(o,l=!0){if(this.overscaledZ===o&&l)return this.key;if(o>this.canonical.z)return vh(this.wrap*+l,o,this.canonical.z,this.canonical.x,this.canonical.y);{const d=this.canonical.z-o;return vh(this.wrap*+l,o,o,this.canonical.x>>d,this.canonical.y>>d)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const l=this.canonical.z-o.canonical.z;return 0===o.overscaledZ||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>l&&o.canonical.y===this.canonical.y>>l}children(o){if(this.overscaledZ>=o)return[new gs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,d=2*this.canonical.x,p=2*this.canonical.y;return[new gs(l,this.wrap,l,d,p),new gs(l,this.wrap,l,d+1,p),new gs(l,this.wrap,l,d,p+1),new gs(l,this.wrap,l,d+1,p+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new gs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new gs(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new yT(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function vh(a,o,l,d,p){const g=1<<Math.min(l,22);let b=g*(p%g)+d%g;return a&&l<22&&(b+=g*g*((a<0?-2*a-1:2*a)%(1<<2*(22-l)))),16*(32*b+l)+(o-l)}Vt(m0,"CanonicalTileID"),Vt(gs,"OverscaledTileID",{omit:["projMatrix"]});class jf extends ft{constructor(o,l,d){super(o,l),this.z=d}}function cu(a,o){return a.x*o.x+a.y*o.y}function __(a,o){if(1===a.length){let l=0;const d=o[l++];let p;for(;!p||d.equals(p);)if(p=o[l++],!p)return 1/0;for(;l<o.length;l++){const g=o[l],b=a[0],w=p.sub(d),T=g.sub(d),S=b.sub(d),k=cu(w,w),O=cu(w,T),L=cu(T,T),V=cu(S,w),j=cu(S,T),G=k*L-O*O,Q=(L*V-O*j)/G,ae=(k*j-O*V)/G,_e=d.z*(1-Q-ae)+p.z*Q+g.z*ae;if(isFinite(_e))return _e}return 1/0}{let l=1/0;for(const d of o)l=Math.min(l,d.z);return l}}function g0(a,o,l,d,p,g,b,w){const T=b*p.getElevationAt(a,o,!0,!0),S=0!==g[0],k=S?0===g[1]?b*(g[0]/7-450):b*function(O,L,V){const j=Math.floor(L[0]/8),G=Math.floor(L[1]/8),Q=10*(L[0]-8*j),ae=10*(L[1]-8*G),_e=O.getElevationAt(j,G,!0,!0),oe=O.getMeterToDEM(V),he=Math.floor(.5*(Q*oe-1)),be=Math.floor(.5*(ae*oe-1)),pe=O.tileCoordToPixel(j,G),je=2*he+1,Ne=2*be+1,Ke=(rn=je,kt=Ne,[(gt=O).getElevationAtPixel(We=pe.x-he,It=pe.y-be,!0),gt.getElevationAtPixel(We+kt,It,!0),gt.getElevationAtPixel(We,It+kt,!0),gt.getElevationAtPixel(We+rn,It+kt,!0)]),_t=Math.abs(Ke[0]-Ke[1]),$e=Math.abs(Ke[2]-Ke[3]),et=Math.abs(Ke[0]-Ke[2])+Math.abs(Ke[1]-Ke[3]),rt=Math.min(.25,.5*oe*(_t+$e)/je),ht=Math.min(.25,.5*oe*et/Ne);var gt,We,It,rn,kt;return _e+Math.max(rt*Q,ht*ae)}(p,g,w):T;return{base:T+(0===l)?-1:l,top:S?Math.max(k+d,T+l+2):T+d}}const _1=Yt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:m1}=_1,g1=Yt([{name:"a_packed",components:4,type:"Float32"}]),{members:wh}=g1,bT=bh.types,vT=Math.cos(Math.PI/180*37.5);class x0{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Ti,this.layoutVertexArray2=new ji,this.indexArray=new ur,this.programConfigurations=new od(o.layers,o.zoom),this.segments=new Qr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,d,p){this.hasPattern=Px("line",this.layers,l);const g=this.layers[0].layout.get("line-sort-key"),b=[];for(const{feature:k,id:O,index:L,sourceLayerIndex:V}of o){const j=this.layers[0]._featureFilter.needGeometry,G=Rf(k,j);if(!this.layers[0]._featureFilter.filter(new Ie(this.zoom),G,d))continue;const Q=g?g.evaluate(G,{},d):void 0,ae={id:O,properties:k.properties,type:k.type,sourceLayerIndex:V,index:L,geometry:j?G.geometry:hc(k,d,p),patterns:{},sortKey:Q};b.push(ae)}g&&b.sort((k,O)=>k.sortKey-O.sortKey);const{lineAtlas:w,featureIndex:T}=l,S=this.addConstantDashes(w);for(const k of b){const{geometry:O,index:L,sourceLayerIndex:V}=k;if(S&&this.addFeatureDashes(k,w),this.hasPattern){const j=Ox("line",this.layers,k,this.zoom,l);this.patternFeatures.push(j)}else this.addFeature(k,O,L,d,w.positions,l.availableImages);T.insert(o[L].feature,O,L,V,this.index)}}addConstantDashes(o){let l=!1;for(const d of this.layers){const p=d.paint.get("line-dasharray").value,g=d.layout.get("line-cap").value;if("constant"!==p.kind||"constant"!==g.kind)l=!0;else{const b=g.value,w=p.value;if(!w)continue;o.addDash(w,b)}}return l}addFeatureDashes(o,l){const d=this.zoom;for(const p of this.layers){const g=p.paint.get("line-dasharray").value,b=p.layout.get("line-cap").value;if("constant"===g.kind&&"constant"===b.kind)continue;let w,T;if("constant"===g.kind){if(w=g.value,!w)continue}else w=g.evaluate({zoom:d},o);T="constant"===b.kind?b.value:b.evaluate({zoom:d},o),l.addDash(w,T),o.patterns[p.id]=l.getKey(w,T)}}update(o,l,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,d,p)}addFeatures(o,l,d,p,g){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,l,d,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,wh)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,m1),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,l,d,p,g,b){const w=this.layers[0].layout,T=w.get("line-join").evaluate(o,{}),S=w.get("line-cap").evaluate(o,{}),k=w.get("line-miter-limit"),O=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const L of l)this.addLine(L,o,T,S,k,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,g,b,p)}addLine(o,l,d,p,g,b){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ae=0;ae<o.length-1;ae++)this.totalDistance+=o[ae].dist(o[ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w="Polygon"===bT[l.type];let T=o.length;for(;T>=2&&o[T-1].equals(o[T-2]);)T--;let S=0;for(;S<T-1&&o[S].equals(o[S+1]);)S++;if(T<(w?3:2))return;"bevel"===d&&(g=1.05);const k=this.overscaling<=16?122880/(512*this.overscaling):0,O=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let L,V,j,G,Q;this.e1=this.e2=-1,w&&(L=o[T-2],Q=o[S].sub(L)._unit()._perp());for(let ae=S;ae<T;ae++){if(j=ae===T-1?w?o[S+1]:void 0:o[ae+1],j&&o[ae].equals(j))continue;Q&&(G=Q),L&&(V=L),L=o[ae],Q=j?j.sub(L)._unit()._perp():G,G=G||Q;let _e=G.add(Q);0===_e.x&&0===_e.y||_e._unit();const oe=G.x*Q.x+G.y*Q.y,he=_e.x*Q.x+_e.y*Q.y,be=0!==he?1/he:1/0,pe=2*Math.sqrt(2-2*he),je=he<vT&&V&&j,Ne=G.x*Q.y-G.y*Q.x>0;if(je&&ae>S){const $e=L.dist(V);if($e>2*k){const et=L.sub(L.sub(V)._mult(k/$e)._round());this.updateDistance(V,et),this.addCurrentVertex(et,G,0,0,O),V=et}}const Ke=V&&j;let _t=Ke?d:w?"butt":p;if(Ke&&"round"===_t&&(be<b?_t="miter":be<=2&&(_t="fakeround")),"miter"===_t&&be>g&&(_t="bevel"),"bevel"===_t&&(be>2&&(_t="flipbevel"),be<g&&(_t="miter")),V&&this.updateDistance(V,L),"miter"===_t)_e._mult(be),this.addCurrentVertex(L,_e,0,0,O);else if("flipbevel"===_t){if(be>100)_e=Q.mult(-1);else{const $e=be*G.add(Q).mag()/G.sub(Q).mag();_e._perp()._mult($e*(Ne?-1:1))}this.addCurrentVertex(L,_e,0,0,O),this.addCurrentVertex(L,_e.mult(-1),0,0,O)}else if("bevel"===_t||"fakeround"===_t){const $e=-Math.sqrt(be*be-1),et=Ne?$e:0,rt=Ne?0:$e;if(V&&this.addCurrentVertex(L,G,et,rt,O),"fakeround"===_t){const ht=Math.round(180*pe/Math.PI/20);for(let gt=1;gt<ht;gt++){let We=gt/ht;if(.5!==We){const rn=We-.5;We+=We*rn*(We-1)*((1.0904+oe*(oe*(3.55645-1.43519*oe)-3.2452))*rn*rn+(.848013+oe*(.215638*oe-1.06021)))}const It=Q.sub(G)._mult(We)._add(G)._unit()._mult(Ne?-1:1);this.addHalfVertex(L,It.x,It.y,!1,Ne,0,O)}}j&&this.addCurrentVertex(L,Q,-et,-rt,O)}else if("butt"===_t)this.addCurrentVertex(L,_e,0,0,O);else if("square"===_t){const $e=V?1:-1;V||this.addCurrentVertex(L,_e,$e,$e,O),this.addCurrentVertex(L,_e,0,0,O),V&&this.addCurrentVertex(L,_e,$e,$e,O)}else"round"===_t&&(V&&(this.addCurrentVertex(L,G,0,0,O),this.addCurrentVertex(L,G,1,1,O,!0)),j&&(this.addCurrentVertex(L,Q,-1,-1,O,!0),this.addCurrentVertex(L,Q,0,0,O)));if(je&&ae<T-1){const $e=L.dist(j);if($e>2*k){const et=L.add(j.sub(L)._mult(k/$e)._round());this.updateDistance(L,et),this.addCurrentVertex(et,Q,0,0,O),L=et}}}}addCurrentVertex(o,l,d,p,g,b=!1){const w=l.y*p-l.x,T=-l.y-l.x*p;this.addHalfVertex(o,l.x+l.y*d,l.y-l.x*d,b,!1,d,g),this.addHalfVertex(o,w,T,b,!0,-p,g)}addHalfVertex({x:o,y:l},d,p,g,b,w,T){this.layoutVertexArray.emplaceBack((o<<1)+(g?1:0),(l<<1)+(b?1:0),Math.round(63*d)+128,Math.round(63*p)+128,1+(0===w?0:w<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const S=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,S),T.primitiveLength++),b?this.e2=S:this.e1=S}updateScaledDistance(){if(this.lineClips){const o=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=o*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(o,l){this.distance+=o.dist(l),this.updateScaledDistance()}}Vt(x0,"LineBucket",{omit:["layers","patternFeatures"]});const wT=new pt({"line-cap":new He(Ye.layout_line["line-cap"]),"line-join":new He(Ye.layout_line["line-join"]),"line-miter-limit":new Me(Ye.layout_line["line-miter-limit"]),"line-round-limit":new Me(Ye.layout_line["line-round-limit"]),"line-sort-key":new He(Ye.layout_line["line-sort-key"])});var x1={paint:new pt({"line-opacity":new He(Ye.paint_line["line-opacity"]),"line-color":new He(Ye.paint_line["line-color"]),"line-translate":new Me(Ye.paint_line["line-translate"]),"line-translate-anchor":new Me(Ye.paint_line["line-translate-anchor"]),"line-width":new He(Ye.paint_line["line-width"]),"line-gap-width":new He(Ye.paint_line["line-gap-width"]),"line-offset":new He(Ye.paint_line["line-offset"]),"line-blur":new He(Ye.paint_line["line-blur"]),"line-dasharray":new He(Ye.paint_line["line-dasharray"]),"line-pattern":new He(Ye.paint_line["line-pattern"]),"line-gradient":new st(Ye.paint_line["line-gradient"]),"line-trim-offset":new Me(Ye.paint_line["line-trim-offset"])}),layout:wT};const ta=new class extends He{possiblyEvaluate(a,o){return o=new Ie(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,transition:o.transition}),super.possiblyEvaluate(a,o)}evaluate(a,o,l,d){return o=bn({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(a,o,l,d)}}(x1.paint.properties["line-width"].specification);function Sl(a,o){return o>0?o+2*a:a}ta.useIntegerZoom=!0;const ET=Yt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),CT=Yt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),TT=Yt([{name:"a_projected_pos",components:4,type:"Float32"}],4);Yt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ST=Yt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),IT=Yt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Yt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const y1=Yt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),b1=Yt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Yt([{name:"triangle",components:3,type:"Uint16"}]),Yt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Yt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Yt([{type:"Float32",name:"offsetX"}]),Yt([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var jo=24;const pc=128;function Gx(a,o){const{expression:l}=o;if("constant"===l.kind)return{kind:"constant",layoutSize:l.evaluate(new Ie(a+1))};if("source"===l.kind)return{kind:"source"};{const{zoomStops:d,interpolationType:p}=l;let g=0;for(;g<d.length&&d[g]<=a;)g++;g=Math.max(0,g-1);let b=g;for(;b<d.length&&d[b]<a+1;)b++;b=Math.min(d.length-1,b);const w=d[g],T=d[b];return"composite"===l.kind?{kind:"composite",minZoom:w,maxZoom:T,interpolationType:p}:{kind:"camera",minZoom:w,maxZoom:T,minSize:l.evaluate(new Ie(w)),maxSize:l.evaluate(new Ie(T)),interpolationType:p}}}function y0(a,{uSize:o,uSizeT:l},{lowerSize:d,upperSize:p}){return"source"===a.kind?d/pc:"composite"===a.kind?On(d/pc,p/pc,l):o}function uu(a,o){let l=0,d=0;if("constant"===a.kind)d=a.layoutSize;else if("source"!==a.kind){const{interpolationType:p,minZoom:g,maxZoom:b}=a,w=p?yn(No.interpolationFactor(p,o,g,b),0,1):0;"camera"===a.kind?d=On(a.minSize,a.maxSize,w):l=w}return{uSizeT:l,uSize:d}}var du=Object.freeze({__proto__:null,getSizeData:Gx,evaluateSizeForFeature:y0,evaluateSizeForZoom:uu,SIZE_PACK_FACTOR:pc});function m_(a,o,l){return a.sections.forEach(d=>{d.text=function(p,g,b){const w=g.layout.get("text-transform").evaluate(b,{});return"uppercase"===w?p=p.toLocaleUpperCase():"lowercase"===w&&(p=p.toLocaleLowerCase()),Ee.applyArabicShaping&&(p=Ee.applyArabicShaping(p)),p}(d.text,o,l)}),a}const Uf={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function v1(a){return"\ufe36"===a||"\ufe48"===a||"\ufe38"===a||"\ufe44"===a||"\ufe42"===a||"\ufe3e"===a||"\ufe3c"===a||"\ufe3a"===a||"\ufe18"===a||"\ufe40"===a||"\ufe10"===a||"\ufe13"===a||"\ufe14"===a||"\uff40"===a||"\uffe3"===a||"\ufe11"===a||"\ufe12"===a}function w1(a){return"\ufe35"===a||"\ufe47"===a||"\ufe37"===a||"\ufe43"===a||"\ufe41"===a||"\ufe3d"===a||"\ufe3b"===a||"\ufe39"===a||"\ufe17"===a||"\ufe3f"===a}var b0=Ni,DT=function(a,o,l,d,p){var g,b,w=8*p-d-1,T=(1<<w)-1,S=T>>1,k=-7,O=l?p-1:0,L=l?-1:1,V=a[o+O];for(O+=L,g=V&(1<<-k)-1,V>>=-k,k+=w;k>0;g=256*g+a[o+O],O+=L,k-=8);for(b=g&(1<<-k)-1,g>>=-k,k+=d;k>0;b=256*b+a[o+O],O+=L,k-=8);if(0===g)g=1-S;else{if(g===T)return b?NaN:1/0*(V?-1:1);b+=Math.pow(2,d),g-=S}return(V?-1:1)*b*Math.pow(2,g-d)},AT=function(a,o,l,d,p,g){var b,w,T,S=8*g-p-1,k=(1<<S)-1,O=k>>1,L=23===p?Math.pow(2,-24)-Math.pow(2,-77):0,V=d?0:g-1,j=d?1:-1,G=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,b=k):(b=Math.floor(Math.log(o)/Math.LN2),o*(T=Math.pow(2,-b))<1&&(b--,T*=2),(o+=b+O>=1?L/T:L*Math.pow(2,1-O))*T>=2&&(b++,T/=2),b+O>=k?(w=0,b=k):b+O>=1?(w=(o*T-1)*Math.pow(2,p),b+=O):(w=o*Math.pow(2,O-1)*Math.pow(2,p),b=0));p>=8;a[l+V]=255&w,V+=j,w/=256,p-=8);for(b=b<<p|w,S+=p;S>0;a[l+V]=255&b,V+=j,b/=256,S-=8);a[l+V-j]|=128*G};function Ni(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Ni.Varint=0,Ni.Fixed64=1,Ni.Bytes=2,Ni.Fixed32=5;var g_=4294967296,MT=1/g_,kT=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function _c(a){return a.type===Ni.Bytes?a.readVarint()+a.pos:a.pos+1}function E1(a,o,l){var d=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));l.realloc(d);for(var p=l.pos-1;p>=a;p--)l.buf[p+d]=l.buf[p]}function RT(a,o){for(var l=0;l<a.length;l++)o.writeVarint(a[l])}function PT(a,o){for(var l=0;l<a.length;l++)o.writeSVarint(a[l])}function C1(a,o){for(var l=0;l<a.length;l++)o.writeFloat(a[l])}function v0(a,o){for(var l=0;l<a.length;l++)o.writeDouble(a[l])}function T1(a,o){for(var l=0;l<a.length;l++)o.writeBoolean(a[l])}function Wx(a,o){for(var l=0;l<a.length;l++)o.writeFixed32(a[l])}function OT(a,o){for(var l=0;l<a.length;l++)o.writeSFixed32(a[l])}function $i(a,o){for(var l=0;l<a.length;l++)o.writeFixed64(a[l])}function FT(a,o){for(var l=0;l<a.length;l++)o.writeSFixed64(a[l])}function w0(a,o){return(a[o]|a[o+1]<<8|a[o+2]<<16)+16777216*a[o+3]}function gd(a,o,l){a[l]=o,a[l+1]=o>>>8,a[l+2]=o>>>16,a[l+3]=o>>>24}function E0(a,o){return(a[o]|a[o+1]<<8|a[o+2]<<16)+(a[o+3]<<24)}function NT(a,o,l){o.glyphs=[],1===a&&l.readMessage(LT,o)}function LT(a,o,l){if(3===a){const{id:d,bitmap:p,width:g,height:b,left:w,top:T,advance:S}=l.readMessage(BT,{});o.glyphs.push({id:d,bitmap:new su({width:g+6,height:b+6},p),metrics:{width:g,height:b,left:w,top:T,advance:S}})}else 4===a?o.ascender=l.readSVarint():5===a&&(o.descender=l.readSVarint())}function BT(a,o,l){1===a?o.id=l.readVarint():2===a?o.bitmap=l.readBytes():3===a?o.width=l.readVarint():4===a?o.height=l.readVarint():5===a?o.left=l.readSVarint():6===a?o.top=l.readSVarint():7===a&&(o.advance=l.readVarint())}function qx(a){let o=0,l=0;for(const b of a)o+=b.w*b.h,l=Math.max(l,b.w);a.sort((b,w)=>w.h-b.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),l),h:1/0}];let p=0,g=0;for(const b of a)for(let w=d.length-1;w>=0;w--){const T=d[w];if(!(b.w>T.w||b.h>T.h)){if(b.x=T.x,b.y=T.y,g=Math.max(g,b.y+b.h),p=Math.max(p,b.x+b.w),b.w===T.w&&b.h===T.h){const S=d.pop();w<d.length&&(d[w]=S)}else b.h===T.h?(T.x+=b.w,T.w-=b.w):b.w===T.w?(T.y+=b.h,T.h-=b.h):(d.push({x:T.x+b.w,y:T.y,w:T.w-b.w,h:b.h}),T.y+=b.h,T.h-=b.h);break}}return{w:p,h:g,fill:o/(p*g)||0}}Ni.prototype={destroy:function(){this.buf=null},readFields:function(a,o,l){for(l=l||this.length;this.pos<l;){var d=this.readVarint(),p=d>>3,g=this.pos;this.type=7&d,a(p,o,this),this.pos===g&&this.skip(d)}return o},readMessage:function(a,o){return this.readFields(a,o,this.readVarint()+this.pos)},readFixed32:function(){var a=w0(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=E0(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=w0(this.buf,this.pos)+w0(this.buf,this.pos+4)*g_;return this.pos+=8,a},readSFixed64:function(){var a=w0(this.buf,this.pos)+E0(this.buf,this.pos+4)*g_;return this.pos+=8,a},readFloat:function(){var a=DT(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=DT(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var o,l,d=this.buf;return o=127&(l=d[this.pos++]),l<128?o:(o|=(127&(l=d[this.pos++]))<<7,l<128?o:(o|=(127&(l=d[this.pos++]))<<14,l<128?o:(o|=(127&(l=d[this.pos++]))<<21,l<128?o:function(p,g,b){var w,T,S=b.buf;if(w=(112&(T=S[b.pos++]))>>4,T<128||(w|=(127&(T=S[b.pos++]))<<3,T<128)||(w|=(127&(T=S[b.pos++]))<<10,T<128)||(w|=(127&(T=S[b.pos++]))<<17,T<128)||(w|=(127&(T=S[b.pos++]))<<24,T<128)||(w|=(1&(T=S[b.pos++]))<<31,T<128))return function Hf(a,o,l){return l?4294967296*o+(a>>>0):4294967296*(o>>>0)+(a>>>0)}(p,w,g);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(l=d[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,o=this.pos;return this.pos=a,a-o>=12&&kT?kT.decode(this.buf.subarray(o,a)):function(l,d,p){for(var g="",b=d;b<p;){var w,T,S,k=l[b],O=null,L=k>239?4:k>223?3:k>191?2:1;if(b+L>p)break;1===L?k<128&&(O=k):2===L?128==(192&(w=l[b+1]))&&(O=(31&k)<<6|63&w)<=127&&(O=null):3===L?(T=l[b+2],128==(192&(w=l[b+1]))&&128==(192&T)&&((O=(15&k)<<12|(63&w)<<6|63&T)<=2047||O>=55296&&O<=57343)&&(O=null)):4===L&&(T=l[b+2],S=l[b+3],128==(192&(w=l[b+1]))&&128==(192&T)&&128==(192&S)&&((O=(15&k)<<18|(63&w)<<12|(63&T)<<6|63&S)<=65535||O>=1114112)&&(O=null)),null===O?(O=65533,L=1):O>65535&&(O-=65536,g+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),g+=String.fromCharCode(O),b+=L}return g}(this.buf,o,a)},readBytes:function(){var a=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,a);return this.pos=a,o},readPackedVarint:function(a,o){if(this.type!==Ni.Bytes)return a.push(this.readVarint(o));var l=_c(this);for(a=a||[];this.pos<l;)a.push(this.readVarint(o));return a},readPackedSVarint:function(a){if(this.type!==Ni.Bytes)return a.push(this.readSVarint());var o=_c(this);for(a=a||[];this.pos<o;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Ni.Bytes)return a.push(this.readBoolean());var o=_c(this);for(a=a||[];this.pos<o;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Ni.Bytes)return a.push(this.readFloat());var o=_c(this);for(a=a||[];this.pos<o;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Ni.Bytes)return a.push(this.readDouble());var o=_c(this);for(a=a||[];this.pos<o;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Ni.Bytes)return a.push(this.readFixed32());var o=_c(this);for(a=a||[];this.pos<o;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Ni.Bytes)return a.push(this.readSFixed32());var o=_c(this);for(a=a||[];this.pos<o;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Ni.Bytes)return a.push(this.readFixed64());var o=_c(this);for(a=a||[];this.pos<o;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Ni.Bytes)return a.push(this.readSFixed64());var o=_c(this);for(a=a||[];this.pos<o;)a.push(this.readSFixed64());return a},skip:function(a){var o=7&a;if(o===Ni.Varint)for(;this.buf[this.pos++]>127;);else if(o===Ni.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Ni.Fixed32)this.pos+=4;else{if(o!==Ni.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(a,o){this.writeVarint(a<<3|o)},realloc:function(a){for(var o=this.length||16;o<this.pos+a;)o*=2;if(o!==this.length){var l=new Uint8Array(o);l.set(this.buf),this.buf=l,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),gd(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),gd(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),gd(this.buf,-1&a,this.pos),gd(this.buf,Math.floor(a*MT),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),gd(this.buf,-1&a,this.pos),gd(this.buf,Math.floor(a*MT),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(o,l){var d,p,g,w;if(o>=0?(d=o%4294967296|0,p=o/4294967296|0):(p=~(-o/4294967296),4294967295^(d=~(-o%4294967296))?d=d+1|0:(d=0,p=p+1|0)),o>=0x10000000000000000||o<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),g=d,(w=l).buf[w.pos++]=127&g|128,g>>>=7,w.buf[w.pos++]=127&g|128,g>>>=7,w.buf[w.pos++]=127&g|128,g>>>=7,w.buf[w.pos++]=127&g|128,w.buf[w.pos]=127&(g>>>=7),function(g,b){var w=(7&g)<<4;b.buf[b.pos++]|=w|((g>>>=3)?128:0),g&&(b.buf[b.pos++]=127&g|((g>>>=7)?128:0),g&&(b.buf[b.pos++]=127&g|((g>>>=7)?128:0),g&&(b.buf[b.pos++]=127&g|((g>>>=7)?128:0),g&&(b.buf[b.pos++]=127&g|((g>>>=7)?128:0),g&&(b.buf[b.pos++]=127&g)))))}(p,l)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var o=this.pos;this.pos=function(d,p,g){for(var b,w,T=0;T<p.length;T++){if((b=p.charCodeAt(T))>55295&&b<57344){if(!w){b>56319||T+1===p.length?(d[g++]=239,d[g++]=191,d[g++]=189):w=b;continue}if(b<56320){d[g++]=239,d[g++]=191,d[g++]=189,w=b;continue}b=w-55296<<10|b-56320|65536,w=null}else w&&(d[g++]=239,d[g++]=191,d[g++]=189,w=null);b<128?d[g++]=b:(b<2048?d[g++]=b>>6|192:(b<65536?d[g++]=b>>12|224:(d[g++]=b>>18|240,d[g++]=b>>12&63|128),d[g++]=b>>6&63|128),d[g++]=63&b|128)}return g}(this.buf,a,this.pos);var l=this.pos-o;l>=128&&E1(o,l,this),this.pos=o-1,this.writeVarint(l),this.pos+=l},writeFloat:function(a){this.realloc(4),AT(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),AT(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var o=a.length;this.writeVarint(o),this.realloc(o);for(var l=0;l<o;l++)this.buf[this.pos++]=a[l]},writeRawMessage:function(a,o){this.pos++;var l=this.pos;a(o,this);var d=this.pos-l;d>=128&&E1(l,d,this),this.pos=l-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,o,l){this.writeTag(a,Ni.Bytes),this.writeRawMessage(o,l)},writePackedVarint:function(a,o){o.length&&this.writeMessage(a,RT,o)},writePackedSVarint:function(a,o){o.length&&this.writeMessage(a,PT,o)},writePackedBoolean:function(a,o){o.length&&this.writeMessage(a,T1,o)},writePackedFloat:function(a,o){o.length&&this.writeMessage(a,C1,o)},writePackedDouble:function(a,o){o.length&&this.writeMessage(a,v0,o)},writePackedFixed32:function(a,o){o.length&&this.writeMessage(a,Wx,o)},writePackedSFixed32:function(a,o){o.length&&this.writeMessage(a,OT,o)},writePackedFixed64:function(a,o){o.length&&this.writeMessage(a,$i,o)},writePackedSFixed64:function(a,o){o.length&&this.writeMessage(a,FT,o)},writeBytesField:function(a,o){this.writeTag(a,Ni.Bytes),this.writeBytes(o)},writeFixed32Field:function(a,o){this.writeTag(a,Ni.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(a,o){this.writeTag(a,Ni.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(a,o){this.writeTag(a,Ni.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(a,o){this.writeTag(a,Ni.Fixed64),this.writeSFixed64(o)},writeVarintField:function(a,o){this.writeTag(a,Ni.Varint),this.writeVarint(o)},writeSVarintField:function(a,o){this.writeTag(a,Ni.Varint),this.writeSVarint(o)},writeStringField:function(a,o){this.writeTag(a,Ni.Bytes),this.writeString(o)},writeFloatField:function(a,o){this.writeTag(a,Ni.Fixed32),this.writeFloat(o)},writeDoubleField:function(a,o){this.writeTag(a,Ni.Fixed64),this.writeDouble(o)},writeBooleanField:function(a,o){this.writeVarintField(a,!!o)}};class C0{constructor(o,{pixelRatio:l,version:d,stretchX:p,stretchY:g,content:b}){this.paddedRect=o,this.pixelRatio=l,this.stretchX=p,this.stretchY=g,this.content=b,this.version=d}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class zT{constructor(o,l){const d={},p={};this.haveRenderCallbacks=[];const g=[];this.addImages(o,d,g),this.addImages(l,p,g);const{w:b,h:w}=qx(g),T=new Js({width:b||1,height:w||1});for(const S in o){const k=o[S],O=d[S].paddedRect;Js.copy(k.data,T,{x:0,y:0},{x:O.x+1,y:O.y+1},k.data)}for(const S in l){const k=l[S],O=p[S].paddedRect,L=O.x+1,V=O.y+1,j=k.data.width,G=k.data.height;Js.copy(k.data,T,{x:0,y:0},{x:L,y:V},k.data),Js.copy(k.data,T,{x:0,y:G-1},{x:L,y:V-1},{width:j,height:1}),Js.copy(k.data,T,{x:0,y:0},{x:L,y:V+G},{width:j,height:1}),Js.copy(k.data,T,{x:j-1,y:0},{x:L-1,y:V},{width:1,height:G}),Js.copy(k.data,T,{x:0,y:0},{x:L+j,y:V},{width:1,height:G})}this.image=T,this.iconPositions=d,this.patternPositions=p}addImages(o,l,d){for(const p in o){const g=o[p],b={x:0,y:0,w:g.data.width+2,h:g.data.height+2};d.push(b),l[p]=new C0(b,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(o,l){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(d=>o.hasImage(d)),o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in o.updatedImages)this.patchUpdatedImage(this.iconPositions[d],o.getImage(d),l),this.patchUpdatedImage(this.patternPositions[d],o.getImage(d),l)}patchUpdatedImage(o,l,d){if(!o||!l||o.version===l.version)return;o.version=l.version;const[p,g]=o.tl;d.update(l.data,void 0,{x:p,y:g})}}Vt(C0,"ImagePosition"),Vt(zT,"ImageAtlas");const el={horizontal:1,vertical:2,horizontalOnly:3};class hu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,l){const d=new hu;return d.scale=o||1,d.fontStack=l,d}static forImage(o){const l=new hu;return l.imageName=o,l}}class vt{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,l){const d=new vt;for(let p=0;p<o.sections.length;p++){const g=o.sections[p];g.image?d.addImageSection(g):d.addTextSection(g,l)}return d}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(o){this.text=function(l,d){let p="";for(let g=0;g<l.length;g++){const b=l.charCodeAt(g+1)||null,w=l.charCodeAt(g-1)||null;p+=!d&&(b&&P(b)&&!Uf[l[g+1]]||w&&P(w)&&!Uf[l[g-1]])||!Uf[l[g]]?l[g]:Uf[l[g]]}return p}(this.text,o)}trim(){let o=0;for(let d=0;d<this.text.length&&x_[this.text.charCodeAt(d)];d++)o++;let l=this.text.length;for(let d=this.text.length-1;d>=0&&d>=o&&x_[this.text.charCodeAt(d)];d--)l--;this.text=this.text.substring(o,l),this.sectionIndex=this.sectionIndex.slice(o,l)}substring(o,l){const d=new vt;return d.text=this.text.substring(o,l),d.sectionIndex=this.sectionIndex.slice(o,l),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,l)=>Math.max(o,this.sections[l].scale),0)}addTextSection(o,l){this.text+=o.text,this.sections.push(hu.forText(o.scale,o.fontStack||l));const d=this.sections.length-1;for(let p=0;p<o.text.length;++p)this.sectionIndex.push(d)}addImageSection(o){const l=o.image?o.image.name:"";if(0===l.length)return void Gt("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(hu.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Gt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Eh(a,o,l,d,p,g,b,w,T,S,k,O,L,V,j){const G=vt.fromFeature(a,p);O===el.vertical&&G.verticalizePunctuation(L);let Q=[];const ae=function(pe,je,Ne,Ke,_t,$e){if(!pe)return[];const et=[],rt=function(It,rn,kt,Ut,At,un){let Yn=0;for(let Cn=0;Cn<It.length();Cn++){const zn=It.getSection(Cn);Yn+=Zx(It.getCharCode(Cn),zn,Ut,At,rn,un)}return Yn/Math.max(1,Math.ceil(Yn/kt))}(pe,je,Ne,Ke,_t,$e),ht=pe.text.indexOf("\u200b")>=0;let gt=0;for(let It=0;It<pe.length();It++){const rn=pe.getSection(It),kt=pe.getCharCode(It);if(x_[kt]||(gt+=Zx(kt,rn,Ke,_t,je,$e)),It<pe.length()-1){const Ut=!((We=kt)<11904||!(Fm(We)||Up(We)||m(We)||cx(We)||Hp(We)||ax(We)||_a(We)||ih(We)||lx(We)||rh(We)||oo(We)||x(We)||wf(We)||vf(We)||nh(We)||id(We)||nd(We)||Qc(We)||oh(We)||Ef(We)));(S1[kt]||Ut||rn.imageName)&&et.push(Yx(It+1,gt,rt,et,VT(kt,pe.getCharCode(It+1),Ut&&ht),!1))}}var We;return Xx(Yx(pe.length(),gt,rt,et,0,!0))}(G,S,g,o,d,V),{processBidirectionalText:_e,processStyledBidirectionalText:oe}=Ee;if(_e&&1===G.sections.length){const pe=_e(G.toString(),ae);for(const je of pe){const Ne=new vt;Ne.text=je,Ne.sections=G.sections;for(let Ke=0;Ke<je.length;Ke++)Ne.sectionIndex.push(0);Q.push(Ne)}}else if(oe){const pe=oe(G.text,G.sectionIndex,ae);for(const je of pe){const Ne=new vt;Ne.text=je[0],Ne.sectionIndex=je[1],Ne.sections=G.sections,Q.push(Ne)}}else Q=function(pe,je){const Ne=[],Ke=pe.text;let _t=0;for(const $e of je)Ne.push(pe.substring(_t,$e)),_t=$e;return _t<Ke.length&&Ne.push(pe.substring(_t,Ke.length)),Ne}(G,ae);const he=[],be={positionedLines:he,text:G.toString(),top:k[1],bottom:k[1],left:k[0],right:k[0],writingMode:O,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(pe,je,Ne,Ke,_t,$e,et,rt,ht,gt,We,It){let rn=0,kt=0,Ut=0;const At="right"===rt?1:"left"===rt?0:.5;let un=!1;for(const Tn of _t){const $n=Tn.getSections();for(const Oi of $n){if(Oi.imageName)continue;const Li=je[Oi.fontStack];if(Li&&(un=void 0!==Li.ascender&&void 0!==Li.descender,!un))break}if(!un)break}let Yn=0;for(const Tn of _t){Tn.trim();const $n=Tn.getMaxScale(),Oi=($n-1)*jo,Li={positionedGlyphs:[],lineOffset:0};pe.positionedLines[Yn]=Li;const Bi=Li.positionedGlyphs;let nr=0;if(!Tn.length()){kt+=$e,++Yn;continue}let Xi=0,_r=0;for(let Di=0;Di<Tn.length();Di++){const Mr=Tn.getSection(Di),Gi=Tn.getSectionIndex(Di),fi=Tn.getCharCode(Di);let dr=Mr.scale,Wr=null,zi=null,kr=null,ls=jo,Uo=0;const _o=!(ht===el.horizontal||!We&&!M(fi)||We&&(x_[fi]||(Cn=fi,yf(Cn)||rc(Cn)||bf(Cn)||sh(Cn)||h(Cn))));if(Mr.imageName){const ys=Ke[Mr.imageName];if(!ys)continue;kr=Mr.imageName,pe.iconsInText=pe.iconsInText||!0,zi=ys.paddedRect;const no=ys.displaySize;dr=dr*jo/It,Wr={width:no[0],height:no[1],left:1,top:-3,advance:_o?no[1]:no[0],localGlyph:!1},Uo=un?-Wr.height*dr:$n*jo-17-no[1]*dr,ls=Wr.advance;const ba=(_o?no[0]:no[1])*dr-jo*$n;ba>0&&ba>nr&&(nr=ba)}else{const ys=Ne[Mr.fontStack];if(!ys)continue;ys[fi]&&(zi=ys[fi]);const no=je[Mr.fontStack];if(!no)continue;const ba=no.glyphs[fi];if(!ba)continue;if(Wr=ba.metrics,ls=8203!==fi?jo:0,un){const mu=void 0!==no.ascender?Math.abs(no.ascender):0,G0=void 0!==no.descender?Math.abs(no.descender):0,A_=(mu+G0)*dr;Xi<A_&&(Xi=A_,_r=(mu-G0)/2*dr),Uo=-mu*dr}else Uo=($n-dr)*jo-17}_o?(pe.verticalizable=!0,Bi.push({glyph:fi,imageName:kr,x:rn,y:kt+Uo,vertical:_o,scale:dr,localGlyph:Wr.localGlyph,fontStack:Mr.fontStack,sectionIndex:Gi,metrics:Wr,rect:zi}),rn+=ls*dr+gt):(Bi.push({glyph:fi,imageName:kr,x:rn,y:kt+Uo,vertical:_o,scale:dr,localGlyph:Wr.localGlyph,fontStack:Mr.fontStack,sectionIndex:Gi,metrics:Wr,rect:zi}),rn+=Wr.advance*dr+gt)}0!==Bi.length&&(Ut=Math.max(rn-gt,Ut),un?jT(Bi,At,nr,_r,$e*$n/2):jT(Bi,At,nr,0,$e/2)),rn=0;const po=$e*$n+nr;Li.lineOffset=Math.max(nr,Oi),kt+=po,++Yn}var Cn;const zn=kt,{horizontalAlign:hn,verticalAlign:Ii}=y_(et);(function(Tn,$n,Oi,Li,Bi,nr){const Xi=($n-Oi)*Bi,_r=-nr*Li;for(const po of Tn)for(const Di of po.positionedGlyphs)Di.x+=Xi,Di.y+=_r})(pe.positionedLines,At,hn,Ii,Ut,zn),pe.top+=-Ii*zn,pe.bottom=pe.top+zn,pe.left+=-hn*Ut,pe.right=pe.left+Ut,pe.hasBaseline=un}(be,o,l,d,Q,b,w,T,O,S,L,j),!function(pe){for(const je of pe)if(0!==je.positionedGlyphs.length)return!1;return!0}(he)&&be}const x_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},S1={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Zx(a,o,l,d,p,g){if(o.imageName){const b=d[o.imageName];return b?b.displaySize[0]*o.scale*jo/g+p:0}{const b=l[o.fontStack],w=b&&b.glyphs[a];return w?w.metrics.advance*o.scale+p:0}}function T0(a,o,l,d){const p=Math.pow(a-o,2);return d?a<o?p/2:2*p:p+Math.abs(l)*l}function VT(a,o,l){let d=0;return 10===a&&(d-=1e4),l&&(d+=150),40!==a&&65288!==a||(d+=50),41!==o&&65289!==o||(d+=50),d}function Yx(a,o,l,d,p,g){let b=null,w=T0(o,l,p,g);for(const T of d){const S=T0(o-T.x,l,p,g)+T.badness;S<=w&&(b=T,w=S)}return{index:a,x:o,priorBreak:b,badness:w}}function Xx(a){return a?Xx(a.priorBreak).concat(a.index):[]}function y_(a){let o=.5,l=.5;switch(a){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:o,verticalAlign:l}}function jT(a,o,l,d,p){if(!(o||l||d||p))return;const g=a.length-1,b=a[g],w=(b.x+b.metrics.advance*b.scale)*o;for(let T=0;T<=g;T++)a[T].x-=w,a[T].y+=l+d+p}function Kx(a,o,l){const{horizontalAlign:d,verticalAlign:p}=y_(l),g=o[0]-a.displaySize[0]*d,b=o[1]-a.displaySize[1]*p;return{image:a,top:b,bottom:b+a.displaySize[1],left:g,right:g+a.displaySize[0]}}function I1(a,o,l,d,p,g){const b=a.image;let w;if(b.content){const Q=b.content,ae=b.pixelRatio||1;w=[Q[0]/ae,Q[1]/ae,b.displaySize[0]-Q[2]/ae,b.displaySize[1]-Q[3]/ae]}const T=o.left*g,S=o.right*g;let k,O,L,V;"width"===l||"both"===l?(V=p[0]+T-d[3],O=p[0]+S+d[1]):(V=p[0]+(T+S-b.displaySize[0])/2,O=V+b.displaySize[0]);const j=o.top*g,G=o.bottom*g;return"height"===l||"both"===l?(k=p[1]+j-d[0],L=p[1]+G+d[2]):(k=p[1]+(j+G-b.displaySize[1])/2,L=k+b.displaySize[1]),{image:b,top:k,right:O,bottom:L,left:V,collisionPadding:w}}class Il extends ft{constructor(o,l,d,p,g){super(o,l),this.angle=p,this.z=d,void 0!==g&&(this.segment=g)}clone(){return new Il(this.x,this.y,this.z,this.angle,this.segment)}}function Qx(a,o,l,d,p){if(void 0===o.segment)return!0;let g=o,b=o.segment+1,w=0;for(;w>-l/2;){if(b--,b<0)return!1;w-=a[b].dist(g),g=a[b]}w+=a[b].dist(a[b+1]),b++;const T=[];let S=0;for(;w<l/2;){const k=a[b],O=a[b+1];if(!O)return!1;let L=a[b-1].angleTo(k)-k.angleTo(O);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:w,angleDelta:L}),S+=L;w-T[0].distance>d;)S-=T.shift().angleDelta;if(S>p)return!1;b++,w+=k.dist(O)}return!0}function Jx(a){let o=0;for(let l=0;l<a.length-1;l++)o+=a[l].dist(a[l+1]);return o}function xd(a,o,l){return a?.6*o*l:0}function D1(a,o){return Math.max(a?a.right-a.left:0,o?o.right-o.left:0)}function ey(a,o,l,d,p,g){const b=xd(l,p,g),w=D1(l,d)*g;let T=0;const S=Jx(a)/2;for(let k=0;k<a.length-1;k++){const O=a[k],L=a[k+1],V=O.dist(L);if(T+V>S){const j=(S-T)/V,G=On(O.x,L.x,j),Q=On(O.y,L.y,j),ae=new Il(G,Q,0,L.angleTo(O),k);return!b||Qx(a,ae,w,b,o)?ae:void 0}T+=V}}function S0(a,o,l,d,p,g,b,w,T){const S=xd(d,g,b),k=D1(d,p),O=k*b,L=0===a[0].x||a[0].x===T||0===a[0].y||a[0].y===T;return o-O<o/4&&(o=O+o/4),A1(a,L?o/2*w%o:(k/2+2*g)*b*w%o,o,S,l,O,L,!1,T)}function A1(a,o,l,d,p,g,b,w,T){const S=g/2,k=Jx(a);let O=0,L=o-l,V=[];for(let j=0;j<a.length-1;j++){const G=a[j],Q=a[j+1],ae=G.dist(Q),_e=Q.angleTo(G);for(;L+l<O+ae;){L+=l;const oe=(L-O)/ae,he=On(G.x,Q.x,oe),be=On(G.y,Q.y,oe);if(he>=0&&he<T&&be>=0&&be<T&&L-S>=0&&L+S<=k){const pe=new Il(he,be,0,_e,j);pe._round(),d&&!Qx(a,pe,g,d,p)||V.push(pe)}}O+=ae}return w||V.length||b||(V=A1(a,O/2,l,d,p,g,b,!0,T)),V}function I0(a,o,l,d,p){const g=[];for(let b=0;b<a.length;b++){const w=a[b];let T;for(let S=0;S<w.length-1;S++){let k=w[S],O=w[S+1];k.x<o&&O.x<o||(k.x<o?k=new ft(o,k.y+(o-k.x)/(O.x-k.x)*(O.y-k.y))._round():O.x<o&&(O=new ft(o,k.y+(o-k.x)/(O.x-k.x)*(O.y-k.y))._round()),k.y<l&&O.y<l||(k.y<l?k=new ft(k.x+(l-k.y)/(O.y-k.y)*(O.x-k.x),l)._round():O.y<l&&(O=new ft(k.x+(l-k.y)/(O.y-k.y)*(O.x-k.x),l)._round()),k.x>=d&&O.x>=d||(k.x>=d?k=new ft(d,k.y+(d-k.x)/(O.x-k.x)*(O.y-k.y))._round():O.x>=d&&(O=new ft(d,k.y+(d-k.x)/(O.x-k.x)*(O.y-k.y))._round()),k.y>=p&&O.y>=p||(k.y>=p?k=new ft(k.x+(p-k.y)/(O.y-k.y)*(O.x-k.x),p)._round():O.y>=p&&(O=new ft(k.x+(p-k.y)/(O.y-k.y)*(O.x-k.x),p)._round()),T&&k.equals(T[T.length-1])||(T=[k],g.push(T)),T.push(O)))))}}return g}Vt(Il,"Anchor");const yd=1e20;function mc(a,o,l,d,p,g,b,w,T){for(let S=o;S<o+d;S++)D0(a,l*g+S,g,p,b,w,T);for(let S=l;S<l+p;S++)D0(a,S*g+o,1,d,b,w,T)}function D0(a,o,l,d,p,g,b){g[0]=0,b[0]=-yd,b[1]=yd,p[0]=a[o];for(let w=1,T=0,S=0;w<d;w++){p[w]=a[o+w*l];const k=w*w;do{const O=g[T];S=(p[w]-p[O]+k-O*O)/(w-O)/2}while(S<=b[T]&&--T>-1);T++,g[T]=w,b[T]=S,b[T+1]=yd}for(let w=0,T=0;w<d;w++){for(;b[T+1]<w;)T++;const S=g[T],k=w-S;a[o+w*l]=p[S]+k*k}}const b_={none:0,ideographs:1,all:2};class $f{constructor(o,l,d){this.requestManager=o,this.localGlyphMode=l,this.localFontFamily=d,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o){this.url=o}getGlyphs(o,l){const d=[];for(const p in o)for(const g of o[p])d.push({stack:p,id:g});Xo(d,({stack:p,id:g},b)=>{let w=this.entries[p];w||(w=this.entries[p]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let T=w.glyphs[g];if(void 0!==T)return void b(null,{stack:p,id:g,glyph:T});if(T=this._tinySDF(w,p,g),T)return w.glyphs[g]=T,void b(null,{stack:p,id:g,glyph:T});const S=Math.floor(g/256);if(256*S>65535)return void b(new Error("glyphs > 65535 not supported"));if(w.ranges[S])return void b(null,{stack:p,id:g,glyph:T});let k=w.requests[S];k||(k=w.requests[S]=[],$f.loadGlyphRange(p,S,this.url,this.requestManager,(O,L)=>{if(L){w.ascender=L.ascender,w.descender=L.descender;for(const V in L.glyphs)this._doesCharSupportLocalGlyph(+V)||(w.glyphs[+V]=L.glyphs[+V]);w.ranges[S]=!0}for(const V of k)V(O,L);delete w.requests[S]})),k.push((O,L)=>{O?b(O):L&&b(null,{stack:p,id:g,glyph:L.glyphs[g]||null})})},(p,g)=>{if(p)l(p);else if(g){const b={};for(const{stack:w,id:T,glyph:S}of g)void 0===b[w]&&(b[w]={}),void 0===b[w].glyphs&&(b[w].glyphs={}),b[w].glyphs[T]=S&&{id:S.id,bitmap:S.bitmap.clone(),metrics:S.metrics},b[w].ascender=this.entries[w].ascender,b[w].descender=this.entries[w].descender;l(null,b)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==b_.none&&(this.localGlyphMode===b_.all?!!this.localFontFamily:!!this.localFontFamily&&(rh(o)||Nm(o)||wf(o)||nd(o)||ih(o)))}_tinySDF(o,l,d){const p=this.localFontFamily;if(!p||!this._doesCharSupportLocalGlyph(d))return;let g=o.tinySDF;if(!g){let G="400";/bold/i.test(l)?G="900":/medium/i.test(l)?G="500":/light/i.test(l)&&(G="200"),g=o.tinySDF=new $f.TinySDF({fontFamily:p,fontWeight:G,fontSize:48,buffer:6,radius:16}),g.fontWeight=G}if(this.localGlyphs[g.fontWeight][d])return this.localGlyphs[g.fontWeight][d];const b=String.fromCharCode(d),{data:w,width:T,height:S,glyphWidth:k,glyphHeight:O,glyphLeft:L,glyphTop:V,glyphAdvance:j}=g.draw(b);return this.localGlyphs[g.fontWeight][d]={id:d,bitmap:new su({width:T,height:S},w),metrics:{width:k/2,height:O/2,left:L/2,top:V/2-27,advance:j/2,localGlyph:!0}}}}function M1(a,o,l,d){const p=[],g=a.image,b=g.pixelRatio,w=g.paddedRect.w-2,T=g.paddedRect.h-2,S=a.right-a.left,k=a.bottom-a.top,O=g.stretchX||[[0,w]],L=g.stretchY||[[0,T]],V=($e,et)=>$e+et[1]-et[0],j=O.reduce(V,0),G=L.reduce(V,0),Q=w-j,ae=T-G;let _e=0,oe=j,he=0,be=G,pe=0,je=Q,Ne=0,Ke=ae;if(g.content&&d){const $e=g.content;_e=v_(O,0,$e[0]),he=v_(L,0,$e[1]),oe=v_(O,$e[0],$e[2]),be=v_(L,$e[1],$e[3]),pe=$e[0]-_e,Ne=$e[1]-he,je=$e[2]-$e[0]-oe,Ke=$e[3]-$e[1]-be}const _t=($e,et,rt,ht)=>{const gt=A0($e.stretch-_e,oe,S,a.left),We=M0($e.fixed-pe,je,$e.stretch,j),It=A0(et.stretch-he,be,k,a.top),rn=M0(et.fixed-Ne,Ke,et.stretch,G),kt=A0(rt.stretch-_e,oe,S,a.left),Ut=M0(rt.fixed-pe,je,rt.stretch,j),At=A0(ht.stretch-he,be,k,a.top),un=M0(ht.fixed-Ne,Ke,ht.stretch,G),Yn=new ft(gt,It),Cn=new ft(kt,It),zn=new ft(kt,At),hn=new ft(gt,At),Ii=new ft(We/b,rn/b),Tn=new ft(Ut/b,un/b),$n=o*Math.PI/180;if($n){const Bi=Math.sin($n),nr=Math.cos($n),Xi=[nr,-Bi,Bi,nr];Yn._matMult(Xi),Cn._matMult(Xi),hn._matMult(Xi),zn._matMult(Xi)}const Oi=$e.stretch+$e.fixed,Li=et.stretch+et.fixed;return{tl:Yn,tr:Cn,bl:hn,br:zn,tex:{x:g.paddedRect.x+1+Oi,y:g.paddedRect.y+1+Li,w:rt.stretch+rt.fixed-Oi,h:ht.stretch+ht.fixed-Li},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ii,pixelOffsetBR:Tn,minFontScaleX:je/b/S,minFontScaleY:Ke/b/k,isSDF:l}};if(d&&(g.stretchX||g.stretchY)){const $e=Ch(O,Q,j),et=Ch(L,ae,G);for(let rt=0;rt<$e.length-1;rt++){const ht=$e[rt],gt=$e[rt+1];for(let We=0;We<et.length-1;We++)p.push(_t(ht,et[We],gt,et[We+1]))}}else p.push(_t({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:T+1}));return p}function v_(a,o,l){let d=0;for(const p of a)d+=Math.max(o,Math.min(l,p[1]))-Math.max(o,Math.min(l,p[0]));return d}function Ch(a,o,l){const d=[{fixed:-1,stretch:0}];for(const[p,g]of a){const b=d[d.length-1];d.push({fixed:p-b.stretch,stretch:b.stretch}),d.push({fixed:p-b.stretch,stretch:b.stretch+(g-p)})}return d.push({fixed:o+1,stretch:l}),d}function A0(a,o,l,d){return a/o*l+d}function M0(a,o,l,d){return a-o*l/d}function UT(a,o,l,d){const p=o+a.positionedLines[d].lineOffset;return 0===d?l+p/2:l+(p+(o+a.positionedLines[d-1].lineOffset))/2}$f.loadGlyphRange=function(a,o,l,d,p){const g=256*o,b=g+255,w=d.transformRequest(d.normalizeGlyphsURL(l).replace("{fontstack}",a).replace("{range}",`${g}-${b}`),fr.Glyphs);Er(w,(T,S)=>{if(T)p(T);else if(S){const k={},O=new b0(S).readFields(NT,{});for(const L of O.glyphs)k[L.id]=L;p(null,{glyphs:k,ascender:O.ascender,descender:O.descender})}})},$f.TinySDF=class{constructor({fontSize:a=24,buffer:o=3,radius:l=8,cutoff:d=.25,fontFamily:p="sans-serif",fontWeight:g="normal",fontStyle:b="normal"}={}){this.buffer=o,this.cutoff=d,this.radius=l;const w=this.size=a+4*o,T=this._createCanvas(w),S=this.ctx=T.getContext("2d",{willReadFrequently:!0});S.font=`${b} ${g} ${a}px ${p}`,S.textBaseline="alphabetic",S.textAlign="left",S.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Uint16Array(w)}_createCanvas(a){const o=document.createElement("canvas");return o.width=o.height=a,o}draw(a){const{width:o,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:p,actualBoundingBoxRight:g}=this.ctx.measureText(a),b=Math.ceil(l),w=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-p))),T=Math.min(this.size-this.buffer,b+Math.ceil(d)),S=w+2*this.buffer,k=T+2*this.buffer,O=Math.max(S*k,0),L=new Uint8ClampedArray(O),V={data:L,width:S,height:k,glyphWidth:w,glyphHeight:T,glyphTop:b,glyphLeft:0,glyphAdvance:o};if(0===w||0===T)return V;const{ctx:j,buffer:G,gridInner:Q,gridOuter:ae}=this;j.clearRect(G,G,w,T),j.fillText(a,G,G+b);const _e=j.getImageData(G,G,w,T);ae.fill(yd,0,O),Q.fill(0,0,O);for(let oe=0;oe<T;oe++)for(let he=0;he<w;he++){const be=_e.data[4*(oe*w+he)+3]/255;if(0===be)continue;const pe=(oe+G)*S+he+G;if(1===be)ae[pe]=0,Q[pe]=yd;else{const je=.5-be;ae[pe]=je>0?je*je:0,Q[pe]=je<0?je*je:0}}mc(ae,0,0,S,k,S,this.f,this.v,this.z),mc(Q,G,G,w,T,S,this.f,this.v,this.z);for(let oe=0;oe<O;oe++){const he=Math.sqrt(ae[oe])-Math.sqrt(Q[oe]);L[oe]=Math.round(255-255*(he/this.radius+this.cutoff))}return V}};class ty{constructor(o=[],l=k0){if(this.data=o,this.length=this.data.length,this.compare=l,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const o=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:l,compare:d}=this,p=l[o];for(;o>0;){const g=o-1>>1,b=l[g];if(d(p,b)>=0)break;l[o]=b,o=g}l[o]=p}_down(o){const{data:l,compare:d}=this,p=this.length>>1,g=l[o];for(;o<p;){let b=1+(o<<1),w=l[b];const T=b+1;if(T<this.length&&d(l[T],w)<0&&(b=T,w=l[T]),d(w,g)>=0)break;l[o]=w,o=b}l[o]=g}}function k0(a,o){return a<o?-1:a>o?1:0}function HT(a,o=1,l=!1){let d=1/0,p=1/0,g=-1/0,b=-1/0;const w=a[0];for(let V=0;V<w.length;V++){const j=w[V];(!V||j.x<d)&&(d=j.x),(!V||j.y<p)&&(p=j.y),(!V||j.x>g)&&(g=j.x),(!V||j.y>b)&&(b=j.y)}const T=Math.min(g-d,b-p);let S=T/2;const k=new ty([],k1);if(0===T)return new ft(d,p);for(let V=d;V<g;V+=T)for(let j=p;j<b;j+=T)k.push(new xs(V+S,j+S,S,a));let O=function(V){let j=0,G=0,Q=0;const ae=V[0];for(let _e=0,oe=ae.length,he=oe-1;_e<oe;he=_e++){const be=ae[_e],pe=ae[he],je=be.x*pe.y-pe.x*be.y;G+=(be.x+pe.x)*je,Q+=(be.y+pe.y)*je,j+=3*je}return new xs(G/j,Q/j,0,V)}(a),L=k.length;for(;k.length;){const V=k.pop();(V.d>O.d||!O.d)&&(O=V,l&&console.log("found best %d after %d probes",Math.round(1e4*V.d)/1e4,L)),V.max-O.d<=o||(S=V.h/2,k.push(new xs(V.p.x-S,V.p.y-S,S,a)),k.push(new xs(V.p.x+S,V.p.y-S,S,a)),k.push(new xs(V.p.x-S,V.p.y+S,S,a)),k.push(new xs(V.p.x+S,V.p.y+S,S,a)),L+=4)}return l&&(console.log(`num probes: ${L}`),console.log(`best distance: ${O.d}`)),O.p}function k1(a,o){return o.max-a.max}class xs{constructor(o,l,d,p){this.p=new ft(o,l),this.h=d,this.d=function(g,b){let w=!1,T=1/0;for(let S=0;S<b.length;S++){const k=b[S];for(let O=0,L=k.length,V=L-1;O<L;V=O++){const j=k[O],G=k[V];j.y>g.y!=G.y>g.y&&g.x<(G.x-j.x)*(g.y-j.y)/(G.y-j.y)+j.x&&(w=!w),T=Math.min(T,rT(g,j,G))}}return(w?1:-1)*Math.sqrt(T)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}}const R1=Number.POSITIVE_INFINITY,ny=Math.sqrt(2);function iy(a,[o,l]){let d=0,p=0;if(l===R1){o<0&&(o=0);const g=o/ny;switch(a){case"top-right":case"top-left":p=g-7;break;case"bottom-right":case"bottom-left":p=7-g;break;case"bottom":p=7-o;break;case"top":p=o-7}switch(a){case"top-right":case"bottom-right":d=-g;break;case"top-left":case"bottom-left":d=g;break;case"left":d=o;break;case"right":d=-o}}else{switch(o=Math.abs(o),l=Math.abs(l),a){case"top-right":case"top-left":case"top":p=l-7;break;case"bottom-right":case"bottom-left":case"bottom":p=7-l}switch(a){case"top-right":case"bottom-right":case"right":d=-o;break;case"top-left":case"bottom-left":case"left":d=o}}return[d,p]}function $T(a,o,l,d,p,g,b,w,T,S){a.createArrays(),a.tilePixelRatio=pn/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const k=a.layers[0].layout,O=a.layers[0]._unevaluatedLayout._values,L={};if("composite"===a.textSizeData.kind){const{minZoom:G,maxZoom:Q}=a.textSizeData;L.compositeTextSizes=[O["text-size"].possiblyEvaluate(new Ie(G),w),O["text-size"].possiblyEvaluate(new Ie(Q),w)]}if("composite"===a.iconSizeData.kind){const{minZoom:G,maxZoom:Q}=a.iconSizeData;L.compositeIconSizes=[O["icon-size"].possiblyEvaluate(new Ie(G),w),O["icon-size"].possiblyEvaluate(new Ie(Q),w)]}L.layoutTextSize=O["text-size"].possiblyEvaluate(new Ie(T+1),w),L.layoutIconSize=O["icon-size"].possiblyEvaluate(new Ie(T+1),w),L.textMaxSize=O["text-size"].possiblyEvaluate(new Ie(18),w);const V="map"===k.get("text-rotation-alignment")&&"point"!==k.get("symbol-placement"),j=k.get("text-size");for(const G of a.features){const Q=k.get("text-font").evaluate(G,{},w).join(","),ae=j.evaluate(G,{},w),_e=L.layoutTextSize.evaluate(G,{},w),oe=(L.layoutIconSize.evaluate(G,{},w),{horizontal:{},vertical:void 0}),he=G.text;let be,pe=[0,0];if(he){const Ke=he.toString(),_t=k.get("text-letter-spacing").evaluate(G,{},w)*jo,$e=k.get("text-line-height").evaluate(G,{},w)*jo,et=C(Ke)?_t:0,rt=k.get("text-anchor").evaluate(G,{},w),ht=k.get("text-variable-anchor");if(!ht){const kt=k.get("text-radial-offset").evaluate(G,{},w);pe=kt?iy(rt,[kt*jo,R1]):k.get("text-offset").evaluate(G,{},w).map(Ut=>Ut*jo)}let gt=V?"center":k.get("text-justify").evaluate(G,{},w);const We="point"===k.get("symbol-placement"),It=We?k.get("text-max-width").evaluate(G,{},w)*jo:1/0,rn=kt=>{a.allowVerticalPlacement&&v(Ke)&&(oe.vertical=Eh(he,o,l,p,Q,It,$e,rt,kt,et,pe,el.vertical,!0,_e,ae))};if(!V&&ht){const kt="auto"===gt?ht.map(At=>P1(At)):[gt];let Ut=!1;for(let At=0;At<kt.length;At++){const un=kt[At];if(!oe.horizontal[un])if(Ut)oe.horizontal[un]=oe.horizontal[0];else{const Yn=Eh(he,o,l,p,Q,It,$e,"center",un,et,pe,el.horizontal,!1,_e,ae);Yn&&(oe.horizontal[un]=Yn,Ut=1===Yn.positionedLines.length)}}rn("left")}else{if("auto"===gt&&(gt=P1(rt)),We||k.get("text-writing-mode").indexOf("horizontal")>=0||!v(Ke)){const kt=Eh(he,o,l,p,Q,It,$e,rt,gt,et,pe,el.horizontal,!1,_e,ae);kt&&(oe.horizontal[gt]=kt)}rn(We?"left":gt)}}let je=!1;if(G.icon&&G.icon.name){const Ke=d[G.icon.name];Ke&&(be=Kx(p[G.icon.name],k.get("icon-offset").evaluate(G,{},w),k.get("icon-anchor").evaluate(G,{},w)),je=Ke.sdf,void 0===a.sdfIcons?a.sdfIcons=Ke.sdf:a.sdfIcons!==Ke.sdf&&Gt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ke.pixelRatio!==a.pixelRatio||0!==k.get("icon-rotate").constantOr(1))&&(a.iconsNeedLinear=!0))}const Ne=R0(oe.horizontal)||oe.vertical;a.iconsInText||(a.iconsInText=!!Ne&&Ne.iconsInText),(Ne||be)&&SR(a,G,oe,be,d,L,_e,0,pe,je,b,w,S)}g&&a.generateCollisionDebugBuffers(T,a.collisionBoxArray)}function P1(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function SR(a,o,l,d,p,g,b,w,T,S,k,O,L){let V=g.textMaxSize.evaluate(o,{},O);void 0===V&&(V=b);const j=a.layers[0].layout,G=j.get("icon-offset").evaluate(o,{},O),Q=R0(l.horizontal)||l.vertical,ae="globe"===L.name,_e=b/24,oe=a.tilePixelRatio*V/24,he=(et=a.overscaling,a.zoom>18&&et>2&&(et>>=1),Math.max(pn/(512*et),1)*j.get("symbol-spacing")),be=j.get("text-padding")*a.tilePixelRatio,pe=j.get("icon-padding")*a.tilePixelRatio,je=Et(j.get("text-max-angle")),Ne="map"===j.get("text-rotation-alignment")&&"point"!==j.get("symbol-placement"),Ke="map"===j.get("icon-rotation-alignment")&&"point"!==j.get("symbol-placement"),_t=j.get("symbol-placement"),$e=he/2;var et;const rt=j.get("icon-text-fit");let ht;d&&"none"!==rt&&(a.allowVerticalPlacement&&l.vertical&&(ht=I1(d,l.vertical,rt,j.get("icon-text-fit-padding"),G,_e)),Q&&(d=I1(d,Q,rt,j.get("icon-text-fit-padding"),G,_e)));const gt=(We,It,rn)=>{if(It.x<0||It.x>=pn||It.y<0||It.y>=pn)return;let kt=null;if(ae){const{x:Ut,y:At,z:un}=L.projectTilePoint(It.x,It.y,rn);kt={anchor:new Il(Ut,At,un,0,void 0),up:L.upVector(rn,It.x,It.y)}}!function(Ut,At,un,Yn,Cn,zn,hn,Ii,Tn,$n,Oi,Li,Bi,nr,Xi,_r,po,Di,Mr,Gi,fi,dr,Wr,zi,kr){const ls=Ut.addToLineVertexArray(At,Yn);let Uo,_o,ys,no,ba,mu,G0,A_=0,my=0,gy=0,n2=0,xy=-1,W0=-1;const Rl={};let Yf=rd("");const kh=un?un.anchor:At;let q0=0,Z0=0;if(void 0===Tn._unevaluatedLayout.getValue("text-radial-offset")?[q0,Z0]=Tn.layout.get("text-offset").evaluate(fi,{},kr).map(na=>na*jo):(q0=Tn.layout.get("text-radial-offset").evaluate(fi,{},kr)*jo,Z0=R1),Ut.allowVerticalPlacement&&Cn.vertical){const na=Cn.vertical;if(Xi)mu=Th(na),Ii&&(G0=Th(Ii));else{const va=Tn.layout.get("text-rotate").evaluate(fi,{},kr)+90;ys=Gf($n,kh,At,Oi,Li,Bi,na,nr,va,_r),Ii&&(no=Gf($n,kh,At,Oi,Li,Bi,Ii,Di,va))}}if(zn){const na=Tn.layout.get("icon-rotate").evaluate(fi,{},kr),va="none"!==Tn.layout.get("icon-text-fit"),k_=M1(zn,na,Wr,va),by=Ii?M1(Ii,na,Wr,va):void 0;_o=Gf($n,kh,At,Oi,Li,Bi,zn,Di,na),A_=4*k_.length;const r2=Ut.iconSizeData;let Rh=null;"source"===r2.kind?(Rh=[pc*Tn.layout.get("icon-size").evaluate(fi,{},kr)],Rh[0]>Dl&&Gt(`${Ut.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===r2.kind&&(Rh=[pc*dr.compositeIconSizes[0].evaluate(fi,{},kr),pc*dr.compositeIconSizes[1].evaluate(fi,{},kr)],(Rh[0]>Dl||Rh[1]>Dl)&&Gt(`${Ut.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ut.addSymbols(Ut.icon,k_,Rh,Gi,Mr,fi,!1,un,At,ls.lineStartIndex,ls.lineLength,-1,zi,kr),xy=Ut.icon.placedSymbolArray.length-1,by&&(my=4*by.length,Ut.addSymbols(Ut.icon,by,Rh,Gi,Mr,fi,el.vertical,un,At,ls.lineStartIndex,ls.lineLength,-1,zi,kr),W0=Ut.icon.placedSymbolArray.length-1)}for(const na in Cn.horizontal){const va=Cn.horizontal[na];Uo||(Yf=rd(va.text),Xi?ba=Th(va):Uo=Gf($n,kh,At,Oi,Li,Bi,va,nr,Tn.layout.get("text-rotate").evaluate(fi,{},kr),_r));const k_=1===va.positionedLines.length;if(gy+=O1(Ut,un,At,va,hn,Tn,Xi,fi,_r,ls,Cn.vertical?el.horizontal:el.horizontalOnly,k_?Object.keys(Cn.horizontal):[na],Rl,xy,dr,zi,kr),k_)break}Cn.vertical&&(n2+=O1(Ut,un,At,Cn.vertical,hn,Tn,Xi,fi,_r,ls,el.vertical,["vertical"],Rl,W0,dr,zi,kr));let Ed=-1;const yy=(na,va)=>na?Math.max(na,va):va;Ed=yy(ba,Ed),Ed=yy(mu,Ed),Ed=yy(G0,Ed);const M_=Ed>-1?1:0;Ut.glyphOffsetArray.length>=nl.MAX_GLYPHS&&Gt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==fi.sortKey&&Ut.addToSortKeyRanges(Ut.symbolInstances.length,fi.sortKey),Ut.symbolInstances.emplaceBack(kh.x,kh.y,kh.z,At.x,At.y,Rl.right>=0?Rl.right:-1,Rl.center>=0?Rl.center:-1,Rl.left>=0?Rl.left:-1,Rl.vertical>=0?Rl.vertical:-1,xy,W0,Yf,void 0!==Uo?Uo:Ut.collisionBoxArray.length,void 0!==Uo?Uo+1:Ut.collisionBoxArray.length,void 0!==ys?ys:Ut.collisionBoxArray.length,void 0!==ys?ys+1:Ut.collisionBoxArray.length,void 0!==_o?_o:Ut.collisionBoxArray.length,void 0!==_o?_o+1:Ut.collisionBoxArray.length,no||Ut.collisionBoxArray.length,no?no+1:Ut.collisionBoxArray.length,Oi,gy,n2,A_,my,M_,0,q0,Z0,Ed)}(a,It,kt,We,l,d,p,ht,a.layers[0],a.collisionBoxArray,o.index,o.sourceLayerIndex,a.index,be,Ne,T,0,pe,Ke,G,o,g,S,k,O)};if("line"===_t)for(const We of I0(o.geometry,0,0,pn,pn)){const It=S0(We,he,je,l.vertical||Q,d,24,oe,a.overscaling,pn);for(const rn of It)Q&&ry(a,Q.text,$e,rn)||gt(We,rn,O)}else if("line-center"===_t){for(const We of o.geometry)if(We.length>1){const It=ey(We,je,l.vertical||Q,d,24,oe);It&&gt(We,It,O)}}else if("Polygon"===o.type)for(const We of Rx(o.geometry,0)){const It=HT(We,16);gt(We[0],new Il(It.x,It.y,0,0,void 0),O)}else if("LineString"===o.type)for(const We of o.geometry)gt(We,new Il(We[0].x,We[0].y,0,0,void 0),O);else if("Point"===o.type)for(const We of o.geometry)for(const It of We)gt([It],new Il(It.x,It.y,0,0,void 0),O)}const Dl=32640;function O1(a,o,l,d,p,g,b,w,T,S,k,O,L,V,j,G,Q){const ae=function(he,be,pe,je,Ne,Ke,_t,$e){const et=[];if(0===be.positionedLines.length)return et;const rt=je.layout.get("text-rotate").evaluate(Ke,{})*Math.PI/180,ht=function(kt){const Ut=kt[0],At=kt[1],un=Ut*At;return un>0?[Ut,-At]:un<0?[-Ut,At]:0===Ut?[At,Ut]:[At,-Ut]}(pe);let gt=Math.abs(be.top-be.bottom);for(const kt of be.positionedLines)gt-=kt.lineOffset;const We=be.positionedLines.length,It=gt/We;let rn=be.top-pe[1];for(let kt=0;kt<We;++kt){const Ut=be.positionedLines[kt];rn=UT(be,It,rn,kt);for(const At of Ut.positionedGlyphs){if(!At.rect)continue;const un=At.rect||{};let Yn=4,Cn=!0,zn=1,hn=0;if(At.imageName){const zi=_t[At.imageName];if(!zi)continue;if(zi.sdf){Gt("SDF images are not supported in formatted text and will be ignored.");continue}Cn=!1,zn=zi.pixelRatio,Yn=1/zn}const Ii=(Ne||$e)&&At.vertical,Tn=At.metrics.advance*At.scale/2,$n=At.metrics,Oi=At.rect;if(null===Oi)continue;$e&&be.verticalizable&&(hn=At.imageName?Tn-At.metrics.width*At.scale/2:0);const Li=Ne?[At.x+Tn,At.y]:[0,0];let Bi=[0,0],nr=[0,0],Xi=!1;Ne||(Ii?(nr=[At.x+Tn+ht[0],At.y+ht[1]-hn],Xi=!0):Bi=[At.x+Tn+pe[0],At.y+pe[1]-hn]);const _r=Oi.w*At.scale/(zn*(At.localGlyph?2:1)),po=Oi.h*At.scale/(zn*(At.localGlyph?2:1));let Di,Mr,Gi,fi;if(Ii){const zi=At.y-rn,kr=new ft(-Tn,Tn-zi),ls=-Math.PI/2,Uo=new ft(...nr);Di=new ft(-Tn+Bi[0],Bi[1]),Di._rotateAround(ls,kr)._add(Uo),Di.x+=-zi+Tn,Di.y-=($n.left-Yn)*At.scale;const _o=At.imageName?$n.advance*At.scale:jo*At.scale,ys=String.fromCharCode(At.glyph);v1(ys)?Di.x+=(1-Yn)*At.scale:w1(ys)?Di.x+=_o-$n.height*At.scale+(-Yn-1)*At.scale:Di.x+=At.imageName||$n.width+2*Yn===Oi.w&&$n.height+2*Yn===Oi.h?(_o-po)/2:(_o-($n.height+2*Yn)*At.scale)/2,Mr=new ft(Di.x,Di.y-_r),Gi=new ft(Di.x+po,Di.y),fi=new ft(Di.x+po,Di.y-_r)}else{const zi=($n.left-Yn)*At.scale-Tn+Bi[0],kr=(-$n.top-Yn)*At.scale+Bi[1],ls=zi+_r,Uo=kr+po;Di=new ft(zi,kr),Mr=new ft(ls,kr),Gi=new ft(zi,Uo),fi=new ft(ls,Uo)}if(rt){let zi;zi=Ne?new ft(0,0):Xi?new ft(ht[0],ht[1]):new ft(pe[0],pe[1]),Di._rotateAround(rt,zi),Mr._rotateAround(rt,zi),Gi._rotateAround(rt,zi),fi._rotateAround(rt,zi)}const dr=new ft(0,0),Wr=new ft(0,0);et.push({tl:Di,tr:Mr,bl:Gi,br:fi,tex:un,writingMode:be.writingMode,glyphOffset:Li,sectionIndex:At.sectionIndex,isSDF:Cn,pixelOffsetTL:dr,pixelOffsetBR:Wr,minFontScaleX:0,minFontScaleY:0})}}return et}(0,d,T,g,b,w,p,a.allowVerticalPlacement),_e=a.textSizeData;let oe=null;"source"===_e.kind?(oe=[pc*g.layout.get("text-size").evaluate(w,{},Q)],oe[0]>Dl&&Gt(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===_e.kind&&(oe=[pc*j.compositeTextSizes[0].evaluate(w,{},Q),pc*j.compositeTextSizes[1].evaluate(w,{},Q)],(oe[0]>Dl||oe[1]>Dl)&&Gt(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,ae,oe,T,b,w,k,o,l,S.lineStartIndex,S.lineLength,V,G,Q);for(const he of O)L[he]=a.text.placedSymbolArray.length-1;return 4*ae.length}function R0(a){for(const o in a)return a[o];return null}function Gf(a,o,l,d,p,g,b,w,T,S){let k=b.top,O=b.bottom,L=b.left,V=b.right;const j=b.collisionPadding;if(j&&(L-=j[0],k-=j[1],V+=j[2],O+=j[3]),T){const G=new ft(L,k),Q=new ft(V,k),ae=new ft(L,O),_e=new ft(V,O),oe=Et(T);let he=new ft(0,0);S&&(he=new ft(S[0],S[1])),G._rotateAround(oe,he),Q._rotateAround(oe,he),ae._rotateAround(oe,he),_e._rotateAround(oe,he),L=Math.min(G.x,Q.x,ae.x,_e.x),V=Math.max(G.x,Q.x,ae.x,_e.x),k=Math.min(G.y,Q.y,ae.y,_e.y),O=Math.max(G.y,Q.y,ae.y,_e.y)}return a.emplaceBack(o.x,o.y,o.z,l.x,l.y,L,k,V,O,w,d,p,g),a.length-1}function Th(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const o=a.bottom-a.top;return o>0?Math.max(10,o):null}function ry(a,o,l,d){const p=a.compareText;if(o in p){const g=p[o];for(let b=g.length-1;b>=0;b--)if(d.dist(g[b])<l)return!0}else p[o]=[];return p[o].push(d),!1}function P0(a,o){const l=a.fovAboveCenter,d=a.elevation?a.elevation.getMinElevationBelowMSL()*o:0,p=(a._camera.position[2]*a.worldSize-d)/Math.cos(a._pitch),g=Math.sin(l)*p/Math.sin(Math.max(Math.PI/2-a._pitch-l,.01)),b=Math.sin(a._pitch)*g+p;return Math.min(1.01*b,p*(1/a._horizonShift))}function Al(a,o){if(!o.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:o};const l=Math.pow(2,-a.z),d=a.x*l,p=(a.x+1)*l,g=a.y*l,b=(a.y+1)*l,w=Vo(d),T=Vo(p),S=Jr(g),k=Jr(b),O=o.project(w,S),L=o.project(T,S),V=o.project(T,k),j=o.project(w,k);let G=Math.min(O.x,L.x,V.x,j.x),Q=Math.min(O.y,L.y,V.y,j.y),ae=Math.max(O.x,L.x,V.x,j.x),_e=Math.max(O.y,L.y,V.y,j.y);const oe=l/16;function he(pe,je,Ne,Ke,_t,$e){const et=(Ne+_t)/2,rt=(Ke+$e)/2,ht=o.project(Vo(et),Jr(rt)),gt=Math.max(0,G-ht.x,Q-ht.y,ht.x-ae,ht.y-_e);G=Math.min(G,ht.x),ae=Math.max(ae,ht.x),Q=Math.min(Q,ht.y),_e=Math.max(_e,ht.y),gt>oe&&(he(pe,ht,Ne,Ke,et,rt),he(ht,je,et,rt,_t,$e))}he(O,L,d,g,p,g),he(L,V,p,g,p,b),he(V,j,p,b,d,b),he(j,O,d,b,d,g),G-=oe,Q-=oe,ae+=oe,_e+=oe;const be=1/Math.max(ae-G,_e-Q);return{scale:be,x:G*be,y:Q*be,x2:ae*be,y2:_e*be,projection:o}}const O0=Ks(new Float32Array(16));class tl{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,l){return{x:0,y:0,z:0}}unproject(o,l){return new ei(0,0)}projectTilePoint(o,l,d){return{x:o,y:l,z:0}}locationPoint(o,l,d=!0){return o._coordinatePoint(o.locationCoordinate(l),d)}pixelsPerMeter(o,l){return Tl(1,o)*l}pixelSpaceConversion(o,l,d){return 1}farthestPixelDistance(o){return P0(o,o.pixelsPerMeter)}pointCoordinate(o,l,d,p){const g=o.horizonLineFromTop(!1),b=new ft(l,Math.max(g,d));return o.rayIntersectionCoordinate(o.pointRayIntersection(b,p))}pointCoordinate3D(o,l,d){const p=new ft(l,d);if(o.elevation)return o.elevation.pointCoordinate(p);{const g=this.pointCoordinate(o,p.x,p.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(o,l){if(o.elevation)return!this.pointCoordinate3D(o,l.x,l.y);const d=o.horizonLineFromTop();return l.y<d}createInversionMatrix(o,l){return O0}createTileMatrix(o,l,d){let p,g,b;const w=d.canonical,T=Ks(new Float64Array(16));if(this.isReprojectedInTileSpace){const S=Al(w,this);p=1,g=S.x+d.wrap*S.scale,b=S.y,ch(T,T,[p/S.scale,p/S.scale,o.pixelsPerMeter/l])}else p=l/o.zoomScale(w.z),g=(w.x+Math.pow(2,w.z)*d.wrap)*p,b=w.y*p;return Sf(T,T,[g,b,0]),ch(T,T,[p/pn,p/pn,1]),T}upVector(o,l,d){return[0,0,1]}upVectorScale(o,l,d){return{metersToTile:1}}}class F1 extends tl{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[l,d]=this.parallels=o.parallels||[29.5,45.5],p=Math.sin(Et(l));this.n=(p+Math.sin(Et(d)))/2,this.c=1+p*(2*this.n-p),this.r0=Math.sqrt(this.c)/this.n}project(o,l){const{n:d,c:p,r0:g}=this,b=Et(o-this.center[0]),w=Et(l),T=Math.sqrt(p-2*d*Math.sin(w))/d;return{x:T*Math.sin(b*d),y:T*Math.cos(b*d)-g,z:0}}unproject(o,l){const{n:d,c:p,r0:g}=this,b=g+l;let w=Math.atan2(o,Math.abs(b))*Math.sign(b);b*d<0&&(w-=Math.PI*Math.sign(o)*Math.sign(b));const T=Et(this.center[0])*d;w=In(w,-Math.PI-T,Math.PI-T);const S=yn(En(w/d)+this.center[0],-180,180),k=Math.asin(yn((p-(o*o+b*b)*d*d)/(2*d),-1,1)),O=yn(En(k),-ss,ss);return new ei(S,O)}}const Sh=1.340264,bd=-.081106,F0=893e-6,Ih=.003796,Wf=Math.sqrt(3)/2;class N1 extends tl{project(o,l){l=l/180*Math.PI,o=o/180*Math.PI;const d=Math.asin(Wf*Math.sin(l)),p=d*d,g=p*p*p;return{x:.5*(o*Math.cos(d)/(Wf*(Sh+3*bd*p+g*(7*F0+9*Ih*p)))/Math.PI+.5),y:1-.5*(d*(Sh+bd*p+g*(F0+Ih*p))/Math.PI+1),z:0}}unproject(o,l){o=(2*o-.5)*Math.PI;let d=l=(2*(1-l)-1)*Math.PI,p=d*d,g=p*p*p;for(let k,O,L,V=0;V<12&&(O=d*(Sh+bd*p+g*(F0+Ih*p))-l,L=Sh+3*bd*p+g*(7*F0+9*Ih*p),k=O/L,d=yn(d-k,-Math.PI/3,Math.PI/3),p=d*d,g=p*p*p,!(Math.abs(k)<1e-12));++V);const b=Wf*o*(Sh+3*bd*p+g*(7*F0+9*Ih*p))/Math.cos(d),w=Math.asin(Math.sin(d)/Wf),T=yn(180*b/Math.PI,-180,180),S=yn(180*w/Math.PI,-ss,ss);return new ei(T,S)}}class GT extends tl{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,l){return{x:.5+o/360,y:.5-l/360,z:0}}unproject(o,l){const d=360*(o-.5),p=yn(360*(.5-l),-ss,ss);return new ei(d,p)}}const qf=Math.PI/2;function w_(a){return Math.tan((qf+a)/2)}class L1 extends tl{constructor(o){super(o),this.center=o.center||[0,30];const[l,d]=this.parallels=o.parallels||[30,30];let p=Et(l),g=Et(d);this.southernCenter=p+g<0,this.southernCenter&&(p=-p,g=-g);const b=Math.cos(p),w=w_(p);this.n=p===g?Math.sin(p):Math.log(b/Math.cos(g))/Math.log(w_(g)/w),this.f=b*Math.pow(w_(p),this.n)/this.n}project(o,l){l=Et(l),this.southernCenter&&(l=-l),o=Et(o-this.center[0]);const d=1e-6,{n:p,f:g}=this;g>0?l<-qf+d&&(l=-qf+d):l>qf-d&&(l=qf-d);const b=g/Math.pow(w_(l),p);let w=b*Math.sin(p*o),T=g-b*Math.cos(p*o);return w=.5*(w/Math.PI+.5),T=.5*(T/Math.PI+.5),{x:w,y:this.southernCenter?T:1-T,z:0}}unproject(o,l){o=(2*o-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:d,f:p}=this,g=p-l,b=Math.sign(g),w=Math.sign(d)*Math.sqrt(o*o+g*g);let T=Math.atan2(o,Math.abs(g))*b;g*d<0&&(T-=Math.PI*Math.sign(o)*b);const S=yn(En(T/d)+this.center[0],-180,180),k=yn(En(2*Math.atan(Math.pow(p/w,1/d))-qf),-ss,ss);return new ei(S,this.southernCenter?-k:k)}}class B1 extends tl{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,l){return{x:Cl(o),y:dc(l),z:0}}unproject(o,l){const d=Vo(o),p=Jr(l);return new ei(d,p)}}const z1=Et(ss);class IR extends tl{project(o,l){const d=(l=Et(l))*l,p=d*d;return{x:.5*((o=Et(o))*(.8707-.131979*d+p*(p*(.003971*d-.001529*p)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+d*(.015085+p*(.028874*d-.044475-.005916*p)))/Math.PI+1),z:0}}unproject(o,l){o=(2*o-.5)*Math.PI;let d=l=(2*(1-l)-1)*Math.PI,p=25,g=0,b=d*d;do{b=d*d;const S=b*b;g=(d*(1.007226+b*(.015085+S*(.028874*b-.044475-.005916*S)))-l)/(1.007226+b*(.045255+S*(.259866*b-.311325-.005916*11*S))),d=yn(d-g,-z1,z1)}while(Math.abs(g)>1e-6&&--p>0);b=d*d;const w=yn(En(o/(.8707+b*(b*(b*b*b*(.003971-.001529*b)-.013791)-.131979))),-180,180),T=En(d);return new ei(w,T)}}const V1=Et(ss);class oy extends tl{project(o,l){l=Et(l),o=Et(o);const d=Math.cos(l),p=2/Math.PI,g=Math.acos(d*Math.cos(o/2)),b=Math.sin(g)/g,w=.5*(o*p+2*d*Math.sin(o/2)/b)||0,T=.5*(l+Math.sin(l)/b)||0;return{x:.5*(w/Math.PI+.5),y:1-.5*(T/Math.PI+1),z:0}}unproject(o,l){let d=o=(2*o-.5)*Math.PI,p=l=(2*(1-l)-1)*Math.PI,g=25;const b=1e-6;let w=0,T=0;do{const S=Math.cos(p),k=Math.sin(p),O=2*k*S,L=k*k,V=S*S,j=Math.cos(d/2),G=Math.sin(d/2),Q=2*j*G,ae=G*G,_e=1-V*j*j,oe=_e?1/_e:0,he=_e?Math.acos(S*j)*Math.sqrt(1/_e):0,be=.5*(2*he*S*G+2*d/Math.PI)-o,pe=.5*(he*k+p)-l,je=.5*oe*(V*ae+he*S*j*L)+1/Math.PI,Ne=oe*(Q*O/4-he*k*G),Ke=.125*oe*(O*G-he*k*V*Q),_t=.5*oe*(L*j+he*ae*S)+.5,$e=Ne*Ke-_t*je;w=(pe*Ne-be*_t)/$e,T=(be*Ke-pe*je)/$e,d=yn(d-w,-Math.PI,Math.PI),p=yn(p-T,-V1,V1)}while((Math.abs(w)>b||Math.abs(T)>b)&&--g>0);return new ei(En(d),En(p))}}class N0 extends tl{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Et(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,l){const{scale:d,cosPhi:p}=this;return{x:Et(o)*p*d+.5,y:-Math.sin(Et(l))/p*d+.5,z:0}}unproject(o,l){const{scale:d,cosPhi:p}=this,g=-(l-.5)/d,b=yn(En((o-.5)/d)/p,-180,180),w=Math.asin(yn(g*p,-1,1)),T=yn(En(w),-ss,ss);return new ei(b,T)}}class WT extends B1{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,l,d){const p=e_(o,l,d);return Ar(p,p,t_(uc(d))),{x:p[0],y:p[1],z:p[2]}}locationPoint(o,l){const d=gh(l.lat,l.lng),p=os([],d),g=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(l),o._centerAltitude):o._centerAltitude;Kp(d,d,p,Tl(1,0)*pn*g);const b=Ks(new Float64Array(16));return sd(b,o.pixelMatrix,o.globeMatrix),Ar(d,d,b),new ft(d[0],d[1])}pixelsPerMeter(o,l){return Tl(1,0)*l}pixelSpaceConversion(o,l,d){const p=Tl(1,o)*l,g=On(Tl(1,45)*l,p,d);return this.pixelsPerMeter(o,l)/g}createTileMatrix(o,l,d){const p=mx(uc(d.canonical));return sd(new Float64Array(16),o.globeMatrix,p)}createInversionMatrix(o,l){const{center:d}=o,p=t_(uc(l));return qm(p,p,Et(d.lng)),Xa(p,p,Et(d.lat)),ch(p,p,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(p)}pointCoordinate(o,l,d,p){return _x(o,l,d,!0)||new Mf(0,0)}pointCoordinate3D(o,l,d){const p=this.pointCoordinate(o,l,d,0);return[p.x,p.y,p.z]}isPointAboveHorizon(o,l){return!_x(o,l.x,l.y,!1)}farthestPixelDistance(o){const l=function(p,g){const b=p.cameraToCenterDistance,w=p._centerAltitude*g,T=p._camera,S=p._camera.forward(),k=cc([],Io([],S,-b),[0,0,w]),O=p.worldSize/(2*Math.PI),L=[0,0,-O],V=p.width/p.height,j=Math.tan(p.fovAboveCenter),G=Io([],T.up(),j),Q=Io([],T.right(),j*V),ae=os([],cc([],cc([],S,G),Q)),_e=[];let oe;if(new zv(k,ae).closestPointOnSphere(L,O,_e)){const he=cc([],_e,L),be=El([],he,k);oe=Math.cos(p.fovAboveCenter)*Yp(be)}else{const he=El([],k,L),be=El([],L,k);os(be,be);const pe=Yp(he)-O;oe=Math.sqrt(pe*(pe+2*O));const je=Math.acos(oe/(O+pe))-Math.acos(xa(S,be));oe*=Math.cos(je)}return 1.01*oe}(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),d=dd(o.zoom);if(d>0){const p=P0(o,Tl(1,o.center.lat)*o.worldSize),g=o.worldSize/(2*Math.PI),b=Math.max(o.width,o.height)/o.worldSize*Math.PI;return On(l,p+g*(1-Math.cos(b)),Math.pow(d,10))}return l}upVector(o,l,d){return e_(l,d,o,1)}upVectorScale(o){return{metersToTile:cd(t0(uc(o)))}}}function sy(a){const o=a.parallels,l=!!o&&Math.abs(o[0]+o[1])<.01;switch(a.name){case"mercator":return new B1(a);case"equirectangular":return new GT(a);case"naturalEarth":return new IR(a);case"equalEarth":return new N1(a);case"winkelTripel":return new oy(a);case"albers":return l?new N0(a):new F1(a);case"lambertConformalConic":return l?new N0(a):new L1(a);case"globe":return new WT(a)}throw new Error(`Invalid projection name: ${a.name}`)}const ay=bh.types,L0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function B0(a,o,l,d,p,g,b,w,T,S,k,O,L){const V=w?Math.min(Dl,Math.round(w[0])):0,j=w?Math.min(Dl,Math.round(w[1])):0;a.emplaceBack(o,l,Math.round(32*d),Math.round(32*p),g,b,(V<<1)+(T?1:0),j,16*S,16*k,256*O,256*L)}function E_(a,o,l,d,p,g,b){a.emplaceBack(o,l,d,p,g,b)}function z0(a,o,l,d,p){a.emplaceBack(o,l,d,p),a.emplaceBack(o,l,d,p),a.emplaceBack(o,l,d,p),a.emplaceBack(o,l,d,p)}function j1(a){for(const o of a.sections)if(H(o.text))return!0;return!1}class U1{constructor(o){this.layoutVertexArray=new vl,this.indexArray=new ur,this.programConfigurations=o,this.segments=new Qr,this.dynamicLayoutVertexArray=new ji,this.opacityVertexArray=new nn,this.placedSymbolArray=new ux,this.globeExtVertexArray=new Je}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(o,l,d,p){this.isEmpty()||(d&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,ET.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,TT.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,L0,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,CT.members,!0)),this.opacityVertexBuffer.itemSize=1),(d||p)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Vt(U1,"SymbolBuffers");class ly{constructor(o,l,d){this.layoutVertexArray=new o,this.layoutAttributes=l,this.indexArray=new d,this.segments=new Qr,this.collisionVertexArray=new Hi,this.collisionVertexArrayExt=new Kr}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,ST.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,IT.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Vt(ly,"CollisionBuffers");class nl{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(b=>b.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ks([]),this.placementViewportMatrix=Ks([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Gx(this.zoom,l["text-size"]),this.iconSizeData=Gx(this.zoom,l["icon-size"]);const d=this.layers[0].layout,p=d.get("symbol-sort-key"),g=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==g&&void 0!==p.constantOr(1),this.sortFeaturesByY=("viewport-y"===g||"auto"===g&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=d.get("text-writing-mode").map(b=>el[b]),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=o.sourceID,this.projection=o.projection}createArrays(){this.text=new U1(new od(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new U1(new od(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new Lm,this.lineVertexArray=new Bm,this.symbolInstances=new Dv}calculateGlyphDependencies(o,l,d,p,g){for(let b=0;b<o.length;b++)if(l[o.charCodeAt(b)]=!0,p&&g){const w=Uf[o.charAt(b)];w&&(l[w.charCodeAt(0)]=!0)}}populate(o,l,d,p){const g=this.layers[0],b=g.layout,w="globe"===this.projection.name,T=b.get("text-font"),S=b.get("text-field"),k=b.get("icon-image"),O=("constant"!==S.value.kind||S.value.value instanceof wo&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&("constant"!==T.value.kind||T.value.value.length>0),L="constant"!==k.value.kind||!!k.value.value||Object.keys(k.parameters).length>0,V=b.get("symbol-sort-key");if(this.features=[],!O&&!L)return;const j=l.iconDependencies,G=l.glyphDependencies,Q=l.availableImages,ae=new Ie(this.zoom);for(const{feature:_e,id:oe,index:he,sourceLayerIndex:be}of o){const pe=g._featureFilter.needGeometry,je=Rf(_e,pe);if(!g._featureFilter.filter(ae,je,d))continue;if(pe||(je.geometry=hc(_e,d,p)),w&&1!==_e.type&&d.z<=5){const $e=je.geometry,et=.98078528056,rt=(ht,gt)=>xa(e_(ht.x,ht.y,d,1),e_(gt.x,gt.y,d,1))<et;for(let ht=0;ht<$e.length;ht++)$e[ht]=tT($e[ht],rt)}let Ne,Ke;if(O){const $e=g.getValueAndResolveTokens("text-field",je,d,Q),et=wo.factory($e);j1(et)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===fe()||this.hasRTLText&&Ee.isParsed())&&(Ne=m_(et,g,je))}if(L){const $e=g.getValueAndResolveTokens("icon-image",je,d,Q);Ke=$e instanceof Xr?$e:Xr.fromString($e)}if(!Ne&&!Ke)continue;const _t=this.sortFeaturesByKey?V.evaluate(je,{},d):void 0;if(this.features.push({id:oe,text:Ne,icon:Ke,index:he,sourceLayerIndex:be,geometry:je.geometry,properties:_e.properties,type:ay[_e.type],sortKey:_t}),Ke&&(j[Ke.name]=!0),Ne){const $e=T.evaluate(je,{},d).join(","),et="map"===b.get("text-rotation-alignment")&&"point"!==b.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(el.vertical)>=0;for(const rt of Ne.sections)if(rt.image)j[rt.image.name]=!0;else{const ht=v(Ne.toString()),gt=rt.fontStack||$e,We=G[gt]=G[gt]||{};this.calculateGlyphDependencies(rt.text,We,et,this.allowVerticalPlacement,ht)}}}"line"===b.get("symbol-placement")&&(this.features=function(_e){const oe={},he={},be=[];let pe=0;function je($e){be.push(_e[$e]),pe++}function Ne($e,et,rt){const ht=he[$e];return delete he[$e],he[et]=ht,be[ht].geometry[0].pop(),be[ht].geometry[0]=be[ht].geometry[0].concat(rt[0]),ht}function Ke($e,et,rt){const ht=oe[et];return delete oe[et],oe[$e]=ht,be[ht].geometry[0].shift(),be[ht].geometry[0]=rt[0].concat(be[ht].geometry[0]),ht}function _t($e,et,rt){const ht=rt?et[0][et[0].length-1]:et[0][0];return`${$e}:${ht.x}:${ht.y}`}for(let $e=0;$e<_e.length;$e++){const et=_e[$e],rt=et.geometry,ht=et.text?et.text.toString():null;if(!ht){je($e);continue}const gt=_t(ht,rt),We=_t(ht,rt,!0);if(gt in he&&We in oe&&he[gt]!==oe[We]){const It=Ke(gt,We,rt),rn=Ne(gt,We,be[It].geometry);delete oe[gt],delete he[We],he[_t(ht,be[rn].geometry,!0)]=rn,be[It].geometry=null}else gt in he?Ne(gt,We,rt):We in oe?Ke(gt,We,rt):(je($e),oe[gt]=pe-1,he[We]=pe-1)}return be.filter($e=>$e.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((_e,oe)=>_e.sortKey-oe.sortKey)}update(o,l,d,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,l,this.layers,d,p),this.icon.programConfigurations.updatePaintArrays(o,l,this.layers,d,p))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=sy(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,l){const d=this.lineVertexArray.length;if(void 0!==o.segment)for(const{x:p,y:g}of l)this.lineVertexArray.emplaceBack(p,g);return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(o,l,d,p,g,b,w,T,S,k,O,L,V,j){const G=o.indexArray,Q=o.layoutVertexArray,ae=o.globeExtVertexArray,_e=o.segments.prepareSegment(4*l.length,Q,G,this.canOverlap?b.sortKey:void 0),oe=this.glyphOffsetArray.length,he=_e.vertexLength,be=this.allowVerticalPlacement&&w===el.vertical?Math.PI/2:0,pe=b.text&&b.text.sections;for(let Ne=0;Ne<l.length;Ne++){const{tl:Ke,tr:_t,bl:$e,br:et,tex:rt,pixelOffsetTL:ht,pixelOffsetBR:gt,minFontScaleX:We,minFontScaleY:It,glyphOffset:rn,isSDF:kt,sectionIndex:Ut}=l[Ne],At=_e.vertexLength,un=rn[1];if(B0(Q,S.x,S.y,Ke.x,un+Ke.y,rt.x,rt.y,d,kt,ht.x,ht.y,We,It),B0(Q,S.x,S.y,_t.x,un+_t.y,rt.x+rt.w,rt.y,d,kt,gt.x,ht.y,We,It),B0(Q,S.x,S.y,$e.x,un+$e.y,rt.x,rt.y+rt.h,d,kt,ht.x,gt.y,We,It),B0(Q,S.x,S.y,et.x,un+et.y,rt.x+rt.w,rt.y+rt.h,d,kt,gt.x,gt.y,We,It),T){const{x:Yn,y:Cn,z:zn}=T.anchor,[hn,Ii,Tn]=T.up;E_(ae,Yn,Cn,zn,hn,Ii,Tn),E_(ae,Yn,Cn,zn,hn,Ii,Tn),E_(ae,Yn,Cn,zn,hn,Ii,Tn),E_(ae,Yn,Cn,zn,hn,Ii,Tn),z0(o.dynamicLayoutVertexArray,Yn,Cn,zn,be)}else z0(o.dynamicLayoutVertexArray,S.x,S.y,S.z,be);G.emplaceBack(At,At+1,At+2),G.emplaceBack(At+1,At+2,At+3),_e.vertexLength+=4,_e.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(rn[0]),Ne!==l.length-1&&Ut===l[Ne+1].sectionIndex||o.programConfigurations.populatePaintArrays(Q.length,b,b.index,{},V,j,pe&&pe[Ut])}const je=T?T.anchor:S;o.placedSymbolArray.emplaceBack(je.x,je.y,je.z,S.x,S.y,oe,this.glyphOffsetArray.length-oe,he,k,O,S.segment,d?d[0]:0,d?d[1]:0,p[0],p[1],w,0,!1,0,L,0)}_commitLayoutVertex(o,l,d,p,g,b,w){o.emplaceBack(l,d,p,g,b,Math.round(w.x),Math.round(w.y))}_addCollisionDebugVertices(o,l,d,p,g,b,w){const T=d.segments.prepareSegment(4,d.layoutVertexArray,d.indexArray),S=T.vertexLength,k=w.tileAnchorX,O=w.tileAnchorY;for(let V=0;V<4;V++)d.collisionVertexArray.emplaceBack(0,0,0,0);d.collisionVertexArrayExt.emplaceBack(l,-o.padding,-o.padding),d.collisionVertexArrayExt.emplaceBack(l,o.padding,-o.padding),d.collisionVertexArrayExt.emplaceBack(l,o.padding,o.padding),d.collisionVertexArrayExt.emplaceBack(l,-o.padding,o.padding),this._commitLayoutVertex(d.layoutVertexArray,p,g,b,k,O,new ft(o.x1,o.y1)),this._commitLayoutVertex(d.layoutVertexArray,p,g,b,k,O,new ft(o.x2,o.y1)),this._commitLayoutVertex(d.layoutVertexArray,p,g,b,k,O,new ft(o.x2,o.y2)),this._commitLayoutVertex(d.layoutVertexArray,p,g,b,k,O,new ft(o.x1,o.y2)),T.vertexLength+=4;const L=d.indexArray;L.emplaceBack(S,S+1),L.emplaceBack(S+1,S+2),L.emplaceBack(S+2,S+3),L.emplaceBack(S+3,S),T.primitiveLength+=4}_addTextDebugCollisionBoxes(o,l,d,p,g,b){for(let w=p;w<g;w++){const T=d.get(w),S=this.getSymbolInstanceTextSize(o,b,l,w);this._addCollisionDebugVertices(T,S,this.textCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,b)}}_addIconDebugCollisionBoxes(o,l,d,p,g,b){for(let w=p;w<g;w++){const T=d.get(w),S=this.getSymbolInstanceIconSize(o,l,b.placedIconSymbolIndex);this._addCollisionDebugVertices(T,S,this.iconCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,b)}}generateCollisionDebugBuffers(o,l){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ly(xr,y1.members,Dr),this.iconCollisionBox=new ly(xr,y1.members,Dr);const d=uu(this.iconSizeData,o),p=uu(this.textSizeData,o);for(let g=0;g<this.symbolInstances.length;g++){const b=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(p,o,l,b.textBoxStartIndex,b.textBoxEndIndex,b),this._addTextDebugCollisionBoxes(p,o,l,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._addIconDebugCollisionBoxes(d,o,l,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._addIconDebugCollisionBoxes(d,o,l,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}}getSymbolInstanceTextSize(o,l,d,p){const g=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:p),b=y0(this.textSizeData,o,g)/jo;return this.tilePixelRatio*b}getSymbolInstanceIconSize(o,l,d){const p=this.icon.placedSymbolArray.get(d),g=y0(this.iconSizeData,o,p);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(o,l,d){o.emplaceBack(l,-d,-d),o.emplaceBack(l,d,-d),o.emplaceBack(l,d,d),o.emplaceBack(l,-d,d)}_updateTextDebugCollisionBoxes(o,l,d,p,g,b){for(let w=p;w<g;w++){const T=d.get(w),S=this.getSymbolInstanceTextSize(o,b,l,w);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,S,T.padding)}}_updateIconDebugCollisionBoxes(o,l,d,p,g,b){for(let w=p;w<g;w++){const T=d.get(w),S=this.getSymbolInstanceIconSize(o,l,b);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,S,T.padding)}}updateCollisionDebugBuffers(o,l){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const d=uu(this.iconSizeData,o),p=uu(this.textSizeData,o);for(let g=0;g<this.symbolInstances.length;g++){const b=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(p,o,l,b.textBoxStartIndex,b.textBoxEndIndex,b),this._updateTextDebugCollisionBoxes(p,o,l,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._updateIconDebugCollisionBoxes(d,o,l,b.iconBoxStartIndex,b.iconBoxEndIndex,b.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(d,o,l,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,l,d,p,g,b,w,T,S){const k={};if(l<d){const{x1:O,y1:L,x2:V,y2:j,padding:G,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:_e,tileAnchorX:oe,tileAnchorY:he,featureIndex:be}=o.get(l);k.textBox={x1:O,y1:L,x2:V,y2:j,padding:G,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:_e,tileAnchorX:oe,tileAnchorY:he},k.textFeatureIndex=be}if(p<g){const{x1:O,y1:L,x2:V,y2:j,padding:G,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:_e,tileAnchorX:oe,tileAnchorY:he,featureIndex:be}=o.get(p);k.verticalTextBox={x1:O,y1:L,x2:V,y2:j,padding:G,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:_e,tileAnchorX:oe,tileAnchorY:he},k.verticalTextFeatureIndex=be}if(b<w){const{x1:O,y1:L,x2:V,y2:j,padding:G,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:_e,tileAnchorX:oe,tileAnchorY:he,featureIndex:be}=o.get(b);k.iconBox={x1:O,y1:L,x2:V,y2:j,padding:G,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:_e,tileAnchorX:oe,tileAnchorY:he},k.iconFeatureIndex=be}if(T<S){const{x1:O,y1:L,x2:V,y2:j,padding:G,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:_e,tileAnchorX:oe,tileAnchorY:he,featureIndex:be}=o.get(T);k.verticalIconBox={x1:O,y1:L,x2:V,y2:j,padding:G,projectedAnchorX:Q,projectedAnchorY:ae,projectedAnchorZ:_e,tileAnchorX:oe,tileAnchorY:he},k.verticalIconFeatureIndex=be}return k}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const d=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,l){const d=o.placedSymbolArray.get(l),p=d.vertexStartIndex+4*d.numGlyphs;for(let g=d.vertexStartIndex;g<p;g+=4)o.indexArray.emplaceBack(g,g+1,g+2),o.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const l=Math.sin(o),d=Math.cos(o),p=[],g=[],b=[];for(let w=0;w<this.symbolInstances.length;++w){b.push(w);const T=this.symbolInstances.get(w);p.push(0|Math.round(l*T.tileAnchorX+d*T.tileAnchorY)),g.push(T.featureIndex)}return b.sort((w,T)=>p[w]-p[T]||g[T]-g[w]),b}addToSortKeyRanges(o,l){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===l?d.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const d=this.symbolInstances.get(l);this.featureSortOrder.push(d.featureIndex);const{rightJustifiedTextSymbolIndex:p,centerJustifiedTextSymbolIndex:g,leftJustifiedTextSymbolIndex:b,verticalPlacedTextSymbolIndex:w,placedIconSymbolIndex:T,verticalPlacedIconSymbolIndex:S}=d;p>=0&&this.addIndicesForPlacedSymbol(this.text,p),g>=0&&g!==p&&this.addIndicesForPlacedSymbol(this.text,g),b>=0&&b!==g&&b!==p&&this.addIndicesForPlacedSymbol(this.text,b),w>=0&&this.addIndicesForPlacedSymbol(this.text,w),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T),S>=0&&this.addIndicesForPlacedSymbol(this.icon,S)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Vt(nl,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),nl.MAX_GLYPHS=65535,nl.addDynamicAttributes=z0;const qT=new pt({"symbol-placement":new Me(Ye.layout_symbol["symbol-placement"]),"symbol-spacing":new Me(Ye.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Me(Ye.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new He(Ye.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Me(Ye.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Me(Ye.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Me(Ye.layout_symbol["icon-ignore-placement"]),"icon-optional":new Me(Ye.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Me(Ye.layout_symbol["icon-rotation-alignment"]),"icon-size":new He(Ye.layout_symbol["icon-size"]),"icon-text-fit":new Me(Ye.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Me(Ye.layout_symbol["icon-text-fit-padding"]),"icon-image":new He(Ye.layout_symbol["icon-image"]),"icon-rotate":new He(Ye.layout_symbol["icon-rotate"]),"icon-padding":new Me(Ye.layout_symbol["icon-padding"]),"icon-keep-upright":new Me(Ye.layout_symbol["icon-keep-upright"]),"icon-offset":new He(Ye.layout_symbol["icon-offset"]),"icon-anchor":new He(Ye.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Me(Ye.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Me(Ye.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Me(Ye.layout_symbol["text-rotation-alignment"]),"text-field":new He(Ye.layout_symbol["text-field"]),"text-font":new He(Ye.layout_symbol["text-font"]),"text-size":new He(Ye.layout_symbol["text-size"]),"text-max-width":new He(Ye.layout_symbol["text-max-width"]),"text-line-height":new He(Ye.layout_symbol["text-line-height"]),"text-letter-spacing":new He(Ye.layout_symbol["text-letter-spacing"]),"text-justify":new He(Ye.layout_symbol["text-justify"]),"text-radial-offset":new He(Ye.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Me(Ye.layout_symbol["text-variable-anchor"]),"text-anchor":new He(Ye.layout_symbol["text-anchor"]),"text-max-angle":new Me(Ye.layout_symbol["text-max-angle"]),"text-writing-mode":new Me(Ye.layout_symbol["text-writing-mode"]),"text-rotate":new He(Ye.layout_symbol["text-rotate"]),"text-padding":new Me(Ye.layout_symbol["text-padding"]),"text-keep-upright":new Me(Ye.layout_symbol["text-keep-upright"]),"text-transform":new He(Ye.layout_symbol["text-transform"]),"text-offset":new He(Ye.layout_symbol["text-offset"]),"text-allow-overlap":new Me(Ye.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Me(Ye.layout_symbol["text-ignore-placement"]),"text-optional":new Me(Ye.layout_symbol["text-optional"])});var vd={paint:new pt({"icon-opacity":new He(Ye.paint_symbol["icon-opacity"]),"icon-color":new He(Ye.paint_symbol["icon-color"]),"icon-halo-color":new He(Ye.paint_symbol["icon-halo-color"]),"icon-halo-width":new He(Ye.paint_symbol["icon-halo-width"]),"icon-halo-blur":new He(Ye.paint_symbol["icon-halo-blur"]),"icon-translate":new Me(Ye.paint_symbol["icon-translate"]),"icon-translate-anchor":new Me(Ye.paint_symbol["icon-translate-anchor"]),"text-opacity":new He(Ye.paint_symbol["text-opacity"]),"text-color":new He(Ye.paint_symbol["text-color"],{runtimeType:es,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new He(Ye.paint_symbol["text-halo-color"]),"text-halo-width":new He(Ye.paint_symbol["text-halo-width"]),"text-halo-blur":new He(Ye.paint_symbol["text-halo-blur"]),"text-translate":new Me(Ye.paint_symbol["text-translate"]),"text-translate-anchor":new Me(Ye.paint_symbol["text-translate-anchor"])}),layout:qT};class to{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:Hl,this.defaultValue=o}evaluate(o){if(o.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(o.formattedSection))return l.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Vt(to,"FormatSectionOverride",{omit:["defaultValue"]});class V0 extends lc{constructor(o){super(o,vd)}recalculate(o,l){super.recalculate(o,l),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const d=this.layout.get("text-writing-mode");if(d){const p=[];for(const g of d)p.indexOf(g)<0&&p.push(g);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(o,l,d,p){const g=this.layout.get(o).evaluate(l,{},d,p),b=this._unevaluatedLayout._values[o];return b.isDataDriven()||W(b.value)||!g?g:(w=l.properties,g.replace(/{([^{}]+)}/g,(S,k)=>k in w?String(w[k]):""));var w}createBucket(o){return new nl(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of vd.paint.overridableProperties){if(!V0.hasPaintOverride(this.layout,o))continue;const l=this.paint.get(o),d=new to(l),p=new N(d,l.property.specification);let g=null;g="constant"===l.value.kind||"source"===l.value.kind?new tt("source",p):new Wt("composite",p,l.value.zoomStops,l.value._interpolationType),this.paint._values[o]=new dt(l.property,g,l.parameters)}}_handleOverridablePaintPropertyUpdate(o,l,d){return!(!this.layout||l.isDataDriven()||d.isDataDriven())&&V0.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,l){const d=o.get("text-field"),p=vd.paint.properties[l];let g=!1;const b=w=>{for(const T of w)if(p.overrides&&p.overrides.hasOverride(T))return void(g=!0)};if("constant"===d.value.kind&&d.value.value instanceof wo)b(d.value.value.sections);else if("source"===d.value.kind){const w=S=>{g||(S instanceof Fu&&Tr(S.value)===$l?b(S.value.sections):S instanceof Nu?b(S.sections):S.eachChild(w))},T=d.value;T._styleExpression&&w(T._styleExpression.expression)}return g}getProgramConfiguration(o){return new iu(this,o)}}var C_={paint:new pt({"background-color":new Me(Ye.paint_background["background-color"]),"background-pattern":new Me(Ye.paint_background["background-pattern"]),"background-opacity":new Me(Ye.paint_background["background-opacity"])})},fu={paint:new pt({"raster-opacity":new Me(Ye.paint_raster["raster-opacity"]),"raster-hue-rotate":new Me(Ye.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Me(Ye.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Me(Ye.paint_raster["raster-brightness-max"]),"raster-saturation":new Me(Ye.paint_raster["raster-saturation"]),"raster-contrast":new Me(Ye.paint_raster["raster-contrast"]),"raster-resampling":new Me(Ye.paint_raster["raster-resampling"]),"raster-fade-duration":new Me(Ye.paint_raster["raster-fade-duration"])})};class ZT extends lc{constructor(o){super(o,{}),this.implementation=o}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}var YT={paint:new pt({"sky-type":new Me(Ye.paint_sky["sky-type"]),"sky-atmosphere-sun":new Me(Ye.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Me(Ye.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Me(Ye.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Me(Ye.paint_sky["sky-gradient-radius"]),"sky-gradient":new st(Ye.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Me(Ye.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Me(Ye.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Me(Ye.paint_sky["sky-opacity"])})};function gc(a,o,l){const d=[0,0,1],p=Qm([]);return YC(p,p,l?-Et(a)+Math.PI:Et(a)),ph(p,p,-Et(o)),zo(d,d,p),os(d,d)}const H1={circle:class extends lc{constructor(a){super(a,Xv)}createBucket(a){return new wx(a)}queryRadius(a){const o=a;return fd("circle-radius",this,o)+fd("circle-stroke-width",this,o)+s_(this.paint.get("circle-translate"))}queryIntersectsFeature(a,o,l,d,p,g,b,w){const T=Tx(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),S=this.paint.get("circle-radius").evaluate(o,l)+this.paint.get("circle-stroke-width").evaluate(o,l);return Sx(a,d,g,b,w,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),T,S)}getProgramIds(){return["circle"]}getProgramConfiguration(a){return new iu(this,a)}},heatmap:class extends lc{createBucket(a){return new Kv(a)}constructor(a){super(a,aT),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){"heatmap-color"===a&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=s0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return fd("heatmap-radius",this,a)}queryIntersectsFeature(a,o,l,d,p,g,b,w){const T=this.paint.get("heatmap-radius").evaluate(o,l);return Sx(a,d,g,b,w,!0,!0,new ft(0,0),T)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(a){return new iu(this,a)}},hillshade:class extends lc{constructor(a){super(a,lT)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends lc{constructor(a){super(a,r1)}getProgramIds(){const a=this.paint.get("fill-pattern"),o=a&&a.constantOr(1),l=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getProgramConfiguration(a){return new iu(this,a)}recalculate(a,o){super.recalculate(a,o);const l=this.paint._values["fill-outline-color"];"constant"===l.value.kind&&void 0===l.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new h_(a)}queryRadius(){return s_(this.paint.get("fill-translate"))}queryIntersectsFeature(a,o,l,d,p,g){return!a.queryGeometry.isAboveHorizon&&iT(Cx(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),d)}isTileClipped(){return!0}},"fill-extrusion":class extends lc{constructor(a){super(a,Vf)}createBucket(a){return new lu(a)}queryRadius(){return s_(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(a){return new iu(this,a)}queryIntersectsFeature(a,o,l,d,p,g,b,w,T){const S=Tx(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),k=this.paint.get("fill-extrusion-height").evaluate(o,l),O=this.paint.get("fill-extrusion-base").evaluate(o,l),L=[0,0],V=w&&g.elevation,j=g.elevation?g.elevation.exaggeration():1,G=a.tile.getBucket(this);if(V&&G instanceof lu){const he=G.centroidVertexArray,be=T+1;be<he.length&&(L[0]=he.geta_centroid_pos0(be),L[1]=he.geta_centroid_pos1(be))}if(0===L[0]&&1===L[1])return!1;"globe"===g.projection.name&&(d=p_([d],[new ft(0,0),new ft(pn,pn)],a.tileID.canonical).map(he=>he.polygon).flat());const Q=V?w:null,[ae,_e]=(be=d,pe=O,je=k,Ne=S,Ke=b,_t=Q,$e=L,et=j,rt=g.center.lat,"globe"===(he=g).projection.name?function(gt,We,It,rn,kt,Ut,At,un,Yn,Cn,zn){const hn=[],Ii=[],Tn=gt.projection.upVectorScale(zn,gt.center.lat,gt.worldSize).metersToTile,$n=[0,0,0,1],Oi=[0,0,0,1],Li=(nr,Xi,_r,po)=>{nr[0]=Xi,nr[1]=_r,nr[2]=po,nr[3]=1},Bi=Hx();It>0&&(It+=Bi),rn+=Bi;for(const nr of We){const Xi=[],_r=[];for(const po of nr){const Di=po.x+kt.x,Mr=po.y+kt.y,Gi=gt.projection.projectTilePoint(Di,Mr,zn),fi=gt.projection.upVector(zn,po.x,po.y);let dr=It,Wr=rn;if(At){const zi=g0(Di,Mr,It,rn,At,un,Yn,Cn);dr+=zi.base,Wr+=zi.top}0!==It?Li($n,Gi.x+fi[0]*Tn*dr,Gi.y+fi[1]*Tn*dr,Gi.z+fi[2]*Tn*dr):Li($n,Gi.x,Gi.y,Gi.z),Li(Oi,Gi.x+fi[0]*Tn*Wr,Gi.y+fi[1]*Tn*Wr,Gi.z+fi[2]*Tn*Wr),Ar($n,$n,Ut),Ar(Oi,Oi,Ut),Xi.push(new jf($n[0],$n[1],$n[2])),_r.push(new jf(Oi[0],Oi[1],Oi[2]))}hn.push(Xi),Ii.push(_r)}return[hn,Ii]}(he,be,pe,je,Ne,Ke,_t,$e,et,rt,a.tileID.canonical):_t?function(gt,We,It,rn,kt,Ut,At,un,Yn){const Cn=[],zn=[],hn=[0,0,0,1];for(const Ii of gt){const Tn=[],$n=[];for(const Oi of Ii){const Li=Oi.x+rn.x,Bi=Oi.y+rn.y,nr=g0(Li,Bi,We,It,Ut,At,un,Yn);hn[0]=Li,hn[1]=Bi,hn[2]=nr.base,hn[3]=1,Ka(hn,hn,kt),hn[3]=Math.max(hn[3],1e-5);const Xi=new jf(hn[0]/hn[3],hn[1]/hn[3],hn[2]/hn[3]);hn[0]=Li,hn[1]=Bi,hn[2]=nr.top,hn[3]=1,Ka(hn,hn,kt),hn[3]=Math.max(hn[3],1e-5);const _r=new jf(hn[0]/hn[3],hn[1]/hn[3],hn[2]/hn[3]);Tn.push(Xi),$n.push(_r)}Cn.push(Tn),zn.push($n)}return[Cn,zn]}(be,pe,je,Ne,Ke,_t,$e,et,rt):function(gt,We,It,rn,kt){const Ut=[],At=[],un=kt[8]*We,Yn=kt[9]*We,Cn=kt[10]*We,zn=kt[11]*We,hn=kt[8]*It,Ii=kt[9]*It,Tn=kt[10]*It,$n=kt[11]*It;for(const Oi of gt){const Li=[],Bi=[];for(const nr of Oi){const Xi=nr.x+rn.x,_r=nr.y+rn.y,po=kt[0]*Xi+kt[4]*_r+kt[12],Di=kt[1]*Xi+kt[5]*_r+kt[13],Mr=kt[2]*Xi+kt[6]*_r+kt[14],Gi=kt[3]*Xi+kt[7]*_r+kt[15],fi=po+un,dr=Di+Yn,Wr=Mr+Cn,zi=Math.max(Gi+zn,1e-5),kr=po+hn,ls=Di+Ii,Uo=Mr+Tn,_o=Math.max(Gi+$n,1e-5);Li.push(new jf(fi/zi,dr/zi,Wr/zi)),Bi.push(new jf(kr/_o,ls/_o,Uo/_o))}Ut.push(Li),At.push(Bi)}return[Ut,At]}(be,pe,je,Ne,Ke)),oe=a.queryGeometry;var he,be,pe,je,Ne,Ke,_t,$e,et,rt;return function(he,be,pe){let je=1/0;iT(pe,be)&&(je=__(pe,be[0]));for(let Ne=0;Ne<be.length;Ne++){const Ke=be[Ne],_t=he[Ne];for(let $e=0;$e<Ke.length-1;$e++){const et=Ke[$e],rt=[et,Ke[$e+1],_t[$e+1],_t[$e],et];qv(pe,rt)&&(je=Math.min(je,__(pe,rt)))}}return je!==1/0&&je}(ae,_e,oe.isPointQuery()?oe.screenBounds:oe.screenGeometry)}},line:class extends lc{constructor(a){super(a,x1),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){if("line-gradient"===a){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof ju,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,o){super.recalculate(a,o),this.paint._values["line-floorwidth"]=ta.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new x0(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(a){return new iu(this,a)}queryRadius(a){const o=a,l=Sl(fd("line-width",this,o),fd("line-gap-width",this,o)),d=fd("line-offset",this,o);return l/2+Math.abs(d)+s_(this.paint.get("line-translate"))}queryIntersectsFeature(a,o,l,d,p,g){if(a.queryGeometry.isAboveHorizon)return!1;const b=Cx(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),w=a.pixelToTileUnitsFactor/2*Sl(this.paint.get("line-width").evaluate(o,l),this.paint.get("line-gap-width").evaluate(o,l)),T=this.paint.get("line-offset").evaluate(o,l);return T&&(d=function(S,k){const O=[],L=new ft(0,0);for(let V=0;V<S.length;V++){const j=S[V],G=[];for(let Q=0;Q<j.length;Q++){const _e=j[Q],oe=j[Q+1],he=0===Q?L:_e.sub(j[Q-1])._unit()._perp(),be=Q===j.length-1?L:oe.sub(_e)._unit()._perp(),pe=he._add(be)._unit();pe._mult(1/(pe.x*be.x+pe.y*be.y)),G.push(pe._mult(k)._add(_e))}O.push(G)}return O}(d,T*a.pixelToTileUnitsFactor)),function(S,k,O){for(let L=0;L<k.length;L++){const V=k[L];if(S.length>=3)for(let j=0;j<V.length;j++)if(Pf(S,V[j]))return!0;if(ER(S,V,O))return!0}return!1}(b,d,w)}isTileClipped(){return!0}},symbol:V0,background:class extends lc{constructor(a){super(a,C_)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends lc{constructor(a){super(a,fu)}getProgramIds(){return["raster"]}},sky:class extends lc{constructor(a){super(a,YT),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){"sky-gradient"===a?this._updateColorRamp():"sky-atmosphere-sun"!==a&&"sky-atmosphere-halo-color"!==a&&"sky-atmosphere-color"!==a&&"sky-atmosphere-sun-intensity"!==a||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=s0({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(a,o){if("atmosphere"===this.paint.get("sky-type")){const d=this.paint.get("sky-atmosphere-sun"),p=!d,g=a.style.light,b=g.properties.get("position");return p&&"viewport"===g.properties.get("anchor")&&Gt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),p?gc(b.azimuthal,90-b.polar,o):gc(d[0],90-d[1],o)}const l=this.paint.get("sky-gradient-center");return gc(l[0],90-l[1],o)}is3D(){return!1}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return"atmosphere"===a?["skyboxCapture","skybox"]:"gradient"===a?["skyboxGradient"]:null}}};class Dh{constructor(o,l,d,p){this.context=o,this.format=d,this.texture=o.gl.createTexture(),this.update(l,p)}update(o,l,d){const{width:p,height:g}=o,{context:b}=this,{gl:w}=b,{HTMLImageElement:T,HTMLCanvasElement:S,HTMLVideoElement:k,ImageData:O,ImageBitmap:L}=Le;if(w.bindTexture(w.TEXTURE_2D,this.texture),b.pixelStoreUnpackFlipY.set(!1),b.pixelStoreUnpack.set(1),b.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA&&(!l||!1!==l.premultiply)),d||this.size&&this.size[0]===p&&this.size[1]===g){const{x:V,y:j}=d||{x:0,y:0};o instanceof T||o instanceof S||o instanceof k||o instanceof O||L&&o instanceof L?w.texSubImage2D(w.TEXTURE_2D,0,V,j,w.RGBA,w.UNSIGNED_BYTE,o):w.texSubImage2D(w.TEXTURE_2D,0,V,j,p,g,w.RGBA,w.UNSIGNED_BYTE,o.data)}else this.size=[p,g],o instanceof T||o instanceof S||o instanceof k||o instanceof O||L&&o instanceof L?w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,w.UNSIGNED_BYTE,o):w.texImage2D(w.TEXTURE_2D,0,this.format,p,g,0,this.format,w.UNSIGNED_BYTE,o.data);this.useMipmap=!!(l&&l.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&w.generateMipmap(w.TEXTURE_2D)}bind(o,l){const{context:d}=this,{gl:p}=d;p.bindTexture(p.TEXTURE_2D,this.texture),o!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,o),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.useMipmap?o===p.NEAREST?p.NEAREST_MIPMAP_NEAREST:p.LINEAR_MIPMAP_NEAREST:o),this.filter=o),l!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,l),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class T_{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class $1{constructor(){this.tasks={},this.taskQueue=[],ca(["process"],this),this.invoker=new T_(this.process),this.nextId=0}add(o,l){const d=this.nextId++,p=function({type:g,isSymbolTile:b,zoom:w}){return w=w||0,"message"===g?0:"maybePrepare"!==g||b?"parseTile"!==g||b?"parseTile"===g&&b?300-w:"maybePrepare"===g&&b?400-w:500:200-w:100-w}(l);if(0===p){bo();try{o()}finally{}return{cancel:()=>{}}}return this.tasks[d]={fn:o,metadata:l,priority:p,id:d},this.taskQueue.push(d),this.invoker.trigger(),{cancel:()=>{delete this.tasks[d]}}}process(){bo();try{if(this.taskQueue=this.taskQueue.filter(d=>!!this.tasks[d]),!this.taskQueue.length)return;const o=this.pick();if(null===o)return;const l=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let o=null,l=1/0;for(let p=0;p<this.taskQueue.length;p++){const g=this.tasks[this.taskQueue[p]];g.priority<l&&(l=g.priority,o=p)}if(null===o)return null;const d=this.taskQueue[o];return this.taskQueue.splice(o,1),d}remove(){this.invoker.remove()}}class XT{constructor(o){this._stringToNumber={},this._numberToString=[];for(let l=0;l<o.length;l++){const d=o[l];this._stringToNumber[d]=l,this._numberToString[l]=d}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const cy=["tile","layer","source","sourceLayer","state"];class xc{constructor(o,l,d,p,g){this.type="Feature",this._vectorTileFeature=o,this._z=l,this._x=d,this._y=p,this.properties=o.properties,this.id=g}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(o.id=this.id);for(const l of cy)void 0!==this[l]&&(o[l]=this[l]);return o}}const pu=new Uint16Array(8184);for(let a=0;a<2046;a++){let o=a+2,l=0,d=0,p=0,g=0,b=0,w=0;for(1&o?p=g=b=32:l=d=w=32;(o>>=1)>1;){const S=l+p>>1,k=d+g>>1;1&o?(p=l,g=d,l=b,d=w):(l=p,d=g,p=b,g=w),b=S,w=k}const T=4*a;pu[T+0]=l,pu[T+1]=d,pu[T+2]=p,pu[T+3]=g}const yc=new Uint16Array(2178),wd=new Uint8Array(1089),j0=new Uint16Array(1089);function G1(a){return 0===a?-.03125:32===a?.03125:0}var W1=Yt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const q1={type:2,extent:pn,loadGeometry:()=>[[new ft(0,0),new ft(8193,0),new ft(8193,8193),new ft(0,8193),new ft(0,0)]]};class U0{constructor(o,l,d,p,g){this.tileID=o,this.uid=cl(),this.uses=0,this.tileSize=l,this.tileZoom=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",p&&p.transform&&(this.projection=p.transform.projection)}registerFadeDuration(o){const l=o+this.timeAdded;l<li.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Al(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,l,d){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(p,g){const b={};if(!g)return b;for(const w of p){const T=w.layerIds.map(S=>g.getLayer(S)).filter(Boolean);if(0!==T.length){w.layers=T,w.stateDependentLayerIds&&(w.stateDependentLayers=w.stateDependentLayerIds.map(S=>T.filter(k=>k.id===S)[0]));for(const S of T)b[S.id]=w}}return b}(o.buckets,l.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const g=this.buckets[p];if(g instanceof nl){if(this.hasSymbolBuckets=!0,!d)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const g=this.buckets[p];if(g instanceof nl&&g.hasRTLText){this.hasRTLText=!0,Ee.isLoading()||Ee.isLoaded()||"deferred"!==fe()||ye();break}}this.queryPadding=0;for(const p in this.buckets){const g=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(p).queryRadius(g))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas)}else this.collisionBoxArray=new wl}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(o){return this.buckets[o.id]}upload(o){for(const d in this.buckets){const p=this.buckets[d];p.uploadPending()&&p.upload(o)}const l=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Dh(o,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Dh(o,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Dh(o,this.lineAtlas.image,l.ALPHA),this.lineAtlas.uploaded=!0)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,l,d,p,g,b,w,T){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:p,pixelPosMatrix:w,transform:b,params:g,tileTransform:this.tileTransform},o,l,d):{}}querySourceFeatures(o,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const p=d.loadVTLayers(),g=l?l.sourceLayer:"",b=p._geojsonTileLayer||p[g];if(!b)return;const w=Zs(l&&l.filter),{z:T,x:S,y:k}=this.tileID.canonical,O={z:T,x:S,y:k};for(let L=0;L<b.length;L++){const V=b.feature(L);if(w.needGeometry){const Q=Rf(V,!0);if(!w.filter(new Ie(this.tileID.overscaledZ),Q,this.tileID.canonical))continue}else if(!w.filter(new Ie(this.tileID.overscaledZ),V))continue;const j=d.getId(V,g),G=new xc(V,T,S,k,j);G.tile=O,o.push(G)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const l=this.expirationTime;if(o.cacheControl){const d=Mo(o.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const d=Date.now();let p=!1;if(this.expirationTime>d)p=!1;else if(l)if(this.expirationTime<l)p=!0;else{const g=this.expirationTime-l;g?this.expirationTime=d+Math.max(g,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(o,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(o).length||!l)return;const d=this.latestFeatureIndex.loadVTLayers(),p=l.style.listImages();for(const g in this.buckets){if(!l.style.hasLayer(g))continue;const b=this.buckets[g],w=b.layers[0].sourceLayer||"_geojsonTileLayer",T=d[w],S=o[w];if(!T||!S||0===Object.keys(S).length)continue;if(b.update(S,T,p,this.imageAtlas&&this.imageAtlas.patternPositions||{}),b instanceof x0||b instanceof h_){const O=l.style._getSourceCache(b.layers[0].source);l._terrain&&l._terrain.enabled&&O&&b.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile(O.id,this.tileID)}const k=l&&l.style&&l.style.getLayer(g);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(b)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<li.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=li.now()+o}setTexture(o,l){const d=l.context,p=d.gl;this.texture=this.texture||l.getTileTexture(o.width),this.texture?this.texture.update(o,{useMipmap:!0}):(this.texture=new Dh(d,o,p.RGBA,{useMipmap:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE))}setDependencies(o,l){const d={};for(const p of l)d[p]=!0;this.dependencies[o]=d}hasDependency(o,l){for(const d of o){const p=this.dependencies[d];if(p)for(const g of l)if(p[g])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,l){if(!l||"mercator"===l.name||this._tileDebugBuffer)return;const d=hc(q1,this.tileID.canonical,this.tileTransform)[0],p=new en,g=new Bo;for(let b=0;b<d.length;b++){const{x:w,y:T}=d[b];p.emplaceBack(w,T),g.emplaceBack(b)}g.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(g),this._tileDebugBuffer=o.createVertexBuffer(p,Jm.members),this._tileDebugSegments=Qr.simpleSegment(0,0,p.length,g.length)}_makeTileBoundsBuffers(o,l){if(this._tileBoundsBuffer||!l||"mercator"===l.name)return;const d=hc(q1,this.tileID.canonical,this.tileTransform)[0];let p,g;if(this.isRaster){const b=function(w,T){const S=Al(w,T),k=Math.pow(2,w.z);for(let Q=0;Q<33;Q++)for(let ae=0;ae<33;ae++){const _e=Vo((w.x+(ae+G1(ae))/32)/k),oe=Jr((w.y+(Q+G1(Q))/32)/k),he=T.project(_e,oe),be=33*Q+ae;yc[2*be+0]=Math.round((he.x*S.scale-S.x)*pn),yc[2*be+1]=Math.round((he.y*S.scale-S.y)*pn)}wd.fill(0),j0.fill(0);for(let Q=2045;Q>=0;Q--){const ae=4*Q,_e=pu[ae+0],oe=pu[ae+1],he=pu[ae+2],be=pu[ae+3],pe=_e+he>>1,je=oe+be>>1,Ne=pe+je-oe,Ke=je+_e-pe,_t=33*oe+_e,$e=33*be+he,et=33*je+pe,rt=Math.hypot((yc[2*_t+0]+yc[2*$e+0])/2-yc[2*et+0],(yc[2*_t+1]+yc[2*$e+1])/2-yc[2*et+1])>=16;wd[et]=wd[et]||(rt?1:0),Q<1022&&(wd[et]=wd[et]||wd[33*(oe+Ke>>1)+(_e+Ne>>1)]||wd[33*(be+Ke>>1)+(he+Ne>>1)])}const O=new Ci,L=new ur;let V=0;function j(Q,ae){const _e=33*ae+Q;return 0===j0[_e]&&(O.emplaceBack(yc[2*_e+0],yc[2*_e+1],Q*pn/32,ae*pn/32),j0[_e]=++V),j0[_e]-1}function G(Q,ae,_e,oe,he,be){const pe=Q+_e>>1,je=ae+oe>>1;if(Math.abs(Q-he)+Math.abs(ae-be)>1&&wd[33*je+pe])G(he,be,Q,ae,pe,je),G(_e,oe,he,be,pe,je);else{const Ne=j(Q,ae),Ke=j(_e,oe),_t=j(he,be);L.emplaceBack(Ne,Ke,_t)}}return G(0,0,32,32,32,0),G(32,32,0,0,0,32),{vertices:O,indices:L}}(this.tileID.canonical,l);p=b.vertices,g=b.indices}else{p=new Ci,g=new ur;for(const{x:w,y:T}of d)p.emplaceBack(w,T,0,0);const b=pd(p.int16,void 0,4);for(let w=0;w<b.length;w+=3)g.emplaceBack(b[w],b[w+1],b[w+2])}this._tileBoundsBuffer=o.createVertexBuffer(p,W1.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(g),this._tileBoundsSegments=Qr.simpleSegment(0,0,p.length,g.length)}_makeGlobeTileDebugBuffers(o,l){const d=l.projection;if(!d||"globe"!==d.name||l.freezeTileCoverage)return;const p=this.tileID.canonical,g=t_(jv(p,l)),b=dd(l.zoom);let w;b>0&&(w=Nv(new Float64Array(16),l.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,p,l,g,w,b),this._makeGlobeTileDebugTextBuffer(o,p,l,g,w,b)}_globePoint(o,l,d,p,g,b,w){let T=e_(o,l,d);if(b){const S=1<<d.z,k=Cl(p.center.lng),O=dc(p.center.lat),L=(d.x+.5)/S-k;let V=0;L>.5?V=-1:L<-.5&&(V=1);let j=(o/pn+d.x)/S+V,G=(l/pn+d.y)/S;j=(j-k)*p._pixelsPerMercatorPixel+k,G=(G-O)*p._pixelsPerMercatorPixel+O;const Q=[j*p.worldSize,G*p.worldSize,0];Ar(Q,Q,b),T=If(T,Q,w)}return Ar(T,T,g)}_makeGlobeTileDebugBorderBuffer(o,l,d,p,g,b){const w=new en,T=new Bo,S=new Ei,k=(L,V,j,G,Q)=>{const ae=(j-L)/(Q-1),_e=(G-V)/(Q-1),oe=w.length;for(let he=0;he<Q;he++){const be=L+he*ae,pe=V+he*_e;w.emplaceBack(be,pe);const je=this._globePoint(be,pe,l,d,p,g,b);S.emplaceBack(je[0],je[1],je[2]),T.emplaceBack(oe+he)}},O=pn;k(0,0,O,0,16),k(O,0,O,O,16),k(O,O,0,O,16),k(0,O,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(T),this._tileDebugBuffer=o.createVertexBuffer(w,Jm.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(S,QC.members),this._tileDebugSegments=Qr.simpleSegment(0,0,w.length,T.length)}_makeGlobeTileDebugTextBuffer(o,l,d,p,g,b){const w=new en,T=new ur,S=new Ei,k=25;T.reserve(32),w.reserve(k),S.reserve(k);const O=(L,V)=>k*L+V;for(let L=0;L<k;L++){const V=2048*L;for(let j=0;j<k;j++){const G=2048*j;w.emplaceBack(G,V);const Q=this._globePoint(G,V,l,d,p,g,b);S.emplaceBack(Q[0],Q[1],Q[2])}}for(let L=0;L<4;L++)for(let V=0;V<4;V++){const j=O(L,V),G=O(L,V+1),Q=O(L+1,V),ae=O(L+1,V+1);T.emplaceBack(j,G,Q),T.emplaceBack(Q,G,ae)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(T),this._tileDebugTextBuffer=o.createVertexBuffer(w,Jm.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(S,QC.members),this._tileDebugTextSegments=Qr.simpleSegment(0,0,k,32)}}class Zf{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,l,d){const p=String(l);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][p]=this.stateChanges[o][p]||{},bn(this.stateChanges[o][p],d),null===this.deletedStates[o]){this.deletedStates[o]={};for(const g in this.state[o])g!==p&&(this.deletedStates[o][g]=null)}else if(this.deletedStates[o]&&null===this.deletedStates[o][p]){this.deletedStates[o][p]={};for(const g in this.state[o][p])d[g]||(this.deletedStates[o][p][g]=null)}else for(const g in d)this.deletedStates[o]&&this.deletedStates[o][p]&&null===this.deletedStates[o][p][g]&&delete this.deletedStates[o][p][g]}removeFeatureState(o,l,d){if(null===this.deletedStates[o])return;const p=String(l);if(this.deletedStates[o]=this.deletedStates[o]||{},d&&void 0!==l)null!==this.deletedStates[o][p]&&(this.deletedStates[o][p]=this.deletedStates[o][p]||{},this.deletedStates[o][p][d]=null);else if(void 0!==l)if(this.stateChanges[o]&&this.stateChanges[o][p])for(d in this.deletedStates[o][p]={},this.stateChanges[o][p])this.deletedStates[o][p][d]=null;else this.deletedStates[o][p]=null;else this.deletedStates[o]=null}getState(o,l){const d=String(l),p=bn({},(this.state[o]||{})[d],(this.stateChanges[o]||{})[d]);if(null===this.deletedStates[o])return{};if(this.deletedStates[o]){const g=this.deletedStates[o][l];if(null===g)return{};for(const b in g)delete p[b]}return p}initializeTileState(o,l){o.setFeatureState(this.state,l)}coalesceChanges(o,l){const d={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const g={};for(const b in this.stateChanges[p])this.state[p][b]||(this.state[p][b]={}),bn(this.state[p][b],this.stateChanges[p][b]),g[b]=this.state[p][b];d[p]=g}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const g={};if(null===this.deletedStates[p])for(const b in this.state[p])g[b]={},this.state[p][b]={};else for(const b in this.deletedStates[p]){if(null===this.deletedStates[p][b])this.state[p][b]={};else if(this.state[p][b])for(const w of Object.keys(this.deletedStates[p][b]))delete this.state[p][b][w];g[b]=this.state[p][b]}d[p]=d[p]||{},bn(d[p],g)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(d).length)for(const p in o)o[p].setFeatureState(d,l)}}class bc{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,l){const d=this.toIdx(o,l);return{min:this.minimums[d],max:this.maximums[d]}}isLeaf(o,l){return this.leaves[this.toIdx(o,l)]}toIdx(o,l){return l*this.size+o}}function uy(a,o,l,d){let p=0,g=Number.MAX_VALUE;for(let b=0;b<3;b++)if(Math.abs(d[b])<1e-15){if(l[b]<a[b]||l[b]>o[b])return null}else{const w=1/d[b];let T=(a[b]-l[b])*w,S=(o[b]-l[b])*w;if(T>S){const k=T;T=S,S=k}if(T>p&&(p=T),S<g&&(g=S),p>g)return null}return p}function KT(a,o,l,d,p,g,b,w,T,S,k){const O=d-a,L=p-o,V=g-l,j=b-a,G=w-o,Q=T-l,ae=k[1]*Q-k[2]*G,_e=k[2]*j-k[0]*Q,oe=k[0]*G-k[1]*j,he=O*ae+L*_e+V*oe;if(Math.abs(he)<1e-15)return null;const be=1/he,pe=S[0]-a,je=S[1]-o,Ne=S[2]-l,Ke=(pe*ae+je*_e+Ne*oe)*be;if(Ke<0||Ke>1)return null;const _t=je*V-Ne*L,$e=Ne*O-pe*V,et=pe*L-je*O,rt=(k[0]*_t+k[1]*$e+k[2]*et)*be;return rt<0||Ke+rt>1?null:(j*_t+G*$e+Q*et)*be}function Z1(a,o,l){return(a-o)/(l-o)}function QT(a,o,l,d,p,g,b,w,T){const S=1<<l,k=g-d,O=b-p,L=(a+1)/S*k+d,V=(o+0)/S*O+p,j=(o+1)/S*O+p;w[0]=(a+0)/S*k+d,w[1]=V,T[0]=L,T[1]=j}class JT{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(g){const b=Math.ceil(Math.log2(g.dim/8)),w=[];let T=Math.ceil(Math.pow(2,b));const S=1/T,k=(V,j,G,Q,ae)=>{const _e=Q?1:0,oe=(V+1)*G-_e,he=j*G,be=(j+1)*G-_e;ae[0]=V*G,ae[1]=he,ae[2]=oe,ae[3]=be};let O=new bc(T);const L=[];for(let V=0;V<T*T;V++){k(V%T,Math.floor(V/T),S,!1,L);const j=_u(L[0],L[1],g),G=_u(L[2],L[1],g),Q=_u(L[2],L[3],g),ae=_u(L[0],L[3],g);O.minimums.push(Math.min(j,G,Q,ae)),O.maximums.push(Math.max(j,G,Q,ae)),O.leaves.push(1)}for(w.push(O),T/=2;T>=1;T/=2){const V=w[w.length-1];O=new bc(T);for(let j=0;j<T*T;j++){k(j%T,Math.floor(j/T),2,!0,L);const G=V.getElevation(L[0],L[1]),Q=V.getElevation(L[2],L[1]),ae=V.getElevation(L[2],L[3]),_e=V.getElevation(L[0],L[3]),oe=V.isLeaf(L[0],L[1]),he=V.isLeaf(L[2],L[1]),be=V.isLeaf(L[2],L[3]),pe=V.isLeaf(L[0],L[3]),je=Math.min(G.min,Q.min,ae.min,_e.min),Ne=Math.max(G.max,Q.max,ae.max,_e.max),Ke=oe&&he&&be&&pe;O.maximums.push(Ne),O.minimums.push(je),O.leaves.push(Ne-je<=5&&Ke?1:0)}w.push(O)}return w}(this.dem),d=l.length-1,p=l[d];this._addNode(p.minimums[0],p.maximums[0],p.leaves[0]),this._construct(l,0,0,d,0)}raycastRoot(o,l,d,p,g,b,w=1){return uy([o,l,-100],[d,p,this.maximums[0]*w],g,b)}raycast(o,l,d,p,g,b,w=1){if(!this.nodeCount)return null;const T=this.raycastRoot(o,l,d,p,g,b,w);if(null==T)return null;const S=[],k=[],O=[],L=[],V=[{idx:0,t:T,nodex:0,nodey:0,depth:0}];for(;V.length>0;){const{idx:j,t:G,nodex:Q,nodey:ae,depth:_e}=V.pop();if(this.leaves[j]){QT(Q,ae,_e,o,l,d,p,O,L);const he=1<<_e,be=(Q+0)/he,pe=(Q+1)/he,je=(ae+0)/he,Ne=(ae+1)/he,Ke=_u(be,je,this.dem)*w,_t=_u(pe,je,this.dem)*w,$e=_u(pe,Ne,this.dem)*w,et=_u(be,Ne,this.dem)*w,rt=KT(O[0],O[1],Ke,L[0],O[1],_t,L[0],L[1],$e,g,b),ht=KT(L[0],L[1],$e,O[0],L[1],et,O[0],O[1],Ke,g,b),gt=Math.min(null!==rt?rt:Number.MAX_VALUE,null!==ht?ht:Number.MAX_VALUE);if(gt!==Number.MAX_VALUE)return gt;{const We=Kp([],g,b,G);if(dy(Ke,_t,et,$e,Z1(We[0],O[0],L[0]),Z1(We[1],O[1],L[1]))>=We[2])return G}continue}let oe=0;for(let he=0;he<this._siblingOffset.length;he++){QT((Q<<1)+this._siblingOffset[he][0],(ae<<1)+this._siblingOffset[he][1],_e+1,o,l,d,p,O,L),O[2]=-100,L[2]=this.maximums[this.childOffsets[j]+he]*w;const be=uy(O,L,g,b);if(null!=be){const pe=be;S[he]=pe;let je=!1;for(let Ne=0;Ne<oe&&!je;Ne++)pe>=S[k[Ne]]&&(k.splice(Ne,0,he),je=!0);je||(k[oe]=he),oe++}}for(let he=0;he<oe;he++){const be=k[he];V.push({idx:this.childOffsets[j]+be,t:S[be],nodex:(Q<<1)+this._siblingOffset[be][0],nodey:(ae<<1)+this._siblingOffset[be][1],depth:_e+1})}}return null}_addNode(o,l,d){return this.minimums.push(o),this.maximums.push(l),this.leaves.push(d),this.childOffsets.push(0),this.nodeCount++}_construct(o,l,d,p,g){if(1===o[p].isLeaf(l,d))return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const b=p-1,w=o[b];let T=0,S=0;for(let k=0;k<this._siblingOffset.length;k++){const O=2*l+this._siblingOffset[k][0],L=2*d+this._siblingOffset[k][1],V=w.getElevation(O,L),j=w.isLeaf(O,L),G=this._addNode(V.min,V.max,j);j&&(T|=1<<k),S||(S=G)}for(let k=0;k<this._siblingOffset.length;k++)T&1<<k||this._construct(o,2*l+this._siblingOffset[k][0],2*d+this._siblingOffset[k][1],b,S+k)}}function dy(a,o,l,d,p,g){return On(On(a,l,g),On(o,d,g),p)}function _u(a,o,l){const d=l.dim,p=yn(a*d-.5,0,d-1),g=yn(o*d-.5,0,d-1),b=Math.floor(p),w=Math.floor(g),T=Math.min(b+1,d-1),S=Math.min(w+1,d-1);return dy(l.get(b,w),l.get(T,w),l.get(b,S),l.get(T,S),p-b,g-w)}const eS={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Y1(a,o,l){return(256*a*256+256*o+l)/10-1e4}function H0(a,o,l){return 256*a+o+l/256-32768}class S_{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,l,d,p=!1,g=!1){if(this.uid=o,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(d&&"mapbox"!==d&&"terrarium"!==d)return Gt(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const b=this.dim=l.height-2,w=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.encoding=d||"mapbox",this.borderReady=p,!p){for(let T=0;T<b;T++)w[this._idx(-1,T)]=w[this._idx(0,T)],w[this._idx(b,T)]=w[this._idx(b-1,T)],w[this._idx(T,-1)]=w[this._idx(T,0)],w[this._idx(T,b)]=w[this._idx(T,b-1)];w[this._idx(-1,-1)]=w[this._idx(0,0)],w[this._idx(b,-1)]=w[this._idx(b-1,0)],w[this._idx(-1,b)]=w[this._idx(0,b-1)],w[this._idx(b,b)]=w[this._idx(b-1,b-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new JT(this)}get(o,l,d=!1){d&&(o=yn(o,-1,this.dim),l=yn(l,-1,this.dim));const p=4*this._idx(o,l);return("terrarium"===this.encoding?H0:Y1)(this.pixels[p],this.pixels[p+1],this.pixels[p+2])}static getUnpackVector(o){return eS[o]}get unpackVector(){return eS[this.encoding]}_idx(o,l){if(o<-1||o>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(o+1)}static pack(o,l){const d=[0,0,0,0],p=S_.getUnpackVector(l);let g=Math.floor((o+p[3])/p[2]);return d[2]=g%256,g=Math.floor(g/256),d[1]=g%256,g=Math.floor(g/256),d[0]=g,d}getPixels(){return new Js({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,l,d){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let p=l*this.dim,g=l*this.dim+this.dim,b=d*this.dim,w=d*this.dim+this.dim;switch(l){case-1:p=g-1;break;case 1:g=p+1}switch(d){case-1:b=w-1;break;case 1:w=b+1}const T=-l*this.dim,S=-d*this.dim;for(let k=b;k<w;k++)for(let O=p;O<g;O++){const L=4*this._idx(O,k),V=4*this._idx(O+T,k+S);this.pixels[L+0]=o.pixels[V+0],this.pixels[L+1]=o.pixels[V+1],this.pixels[L+2]=o.pixels[V+2],this.pixels[L+3]=o.pixels[V+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Vt(S_,"DEMData"),Vt(JT,"DemMinMaxQuadTree",{omit:["dem"]});class X1{constructor(o,l){this.max=o,this.onRemove=l,this.reset()}reset(){for(const o in this.data)for(const l of this.data[o])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(o,l,d){const p=o.wrapped().key;void 0===this.data[p]&&(this.data[p]=[]);const g={value:l,timeout:void 0};if(void 0!==d&&(g.timeout=setTimeout(()=>{this.remove(o,g)},d)),this.data[p].push(g),this.order.push(p),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const l=this.data[o].shift();return l.timeout&&clearTimeout(l.timeout),0===this.data[o].length&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),l.value}getByKey(o){const l=this.data[o];return l?l[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,l){if(!this.has(o))return this;const d=o.wrapped().key,p=void 0===l?0:this.data[d].indexOf(l),g=this.data[d][p];return this.data[d].splice(p,1),g.timeout&&clearTimeout(g.timeout),0===this.data[d].length&&delete this.data[d],this.onRemove(g.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(o){const l=[];for(const d in this.data)for(const p of this.data[d])o(p.value)||l.push(p);for(const d of l)this.remove(d.value.tileID,d)}}class Ah{constructor(o,l,d){this.func=o,this.mask=l,this.range=d}}Ah.ReadOnly=!1,Ah.ReadWrite=!0,Ah.disabled=new Ah(519,Ah.ReadOnly,[0,1]);class oi{constructor(o,l,d,p,g,b){this.test=o,this.ref=l,this.mask=d,this.fail=p,this.depthFail=g,this.pass=b}}oi.disabled=new oi({func:519,mask:0},0,0,7680,7680,7680);class kl{constructor(o,l,d){this.blendFunction=o,this.blendColor=l,this.mask=d}}kl.Replace=[1,0],kl.disabled=new kl(kl.Replace,vn.transparent,[!1,!1,!1,!1]),kl.unblended=new kl(kl.Replace,vn.transparent,[!0,!0,!0,!0]),kl.alphaBlended=new kl([1,771],vn.transparent,[!0,!0,!0,!0]);class il{constructor(o,l,d){this.enable=o,this.mode=l,this.frontFace=d}}il.disabled=new il(!1,1029,2305),il.backCCW=new il(!0,1029,2305),il.backCW=new il(!0,1029,2304),il.frontCW=new il(!0,1028,2304),il.frontCCW=new il(!0,1028,2305);class Mh extends Jo{constructor(o,l,d){super(),this.id=o,this._onlySymbols=d,l.on("data",p=>{"source"===p.dataType&&"metadata"===p.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===p.dataType&&"content"===p.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),l.on("error",()=>{this._sourceErrored=!0}),this._source=l,this._tiles={},this._cache=new X1(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=l.minTileCacheSize,this._maxTileCacheSize=l.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Zf,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(o){this.map=o,this._minTileCacheSize=void 0===this._minTileCacheSize&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const l=this._tiles[o];if("loaded"!==l.state&&"errored"!==l.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,l){return o.isSymbolTile=this._onlySymbols,this._source.loadTile(o,l)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o,()=>{})}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(o),d.prepare(this.map.style.imageManager)}}getIds(){return Vs(this._tiles).map(o=>o.tileID).sort(Q1).map(o=>o.key)}getRenderableIds(o){const l=[];for(const d in this._tiles)this._isIdRenderable(+d,o)&&l.push(this._tiles[d]);return o?l.sort((d,p)=>{const g=d.tileID,b=p.tileID,w=new ft(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),T=new ft(b.canonical.x,b.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-b.overscaledZ||T.y-w.y||T.x-w.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(Q1).map(d=>d.key)}hasRenderableParent(o){const l=this.findLoadedParent(o,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(o,l){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(l||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)"errored"!==this._tiles[o].state&&this._reloadTile(+o,"reloading")}}_reloadTile(o,l){const d=this._tiles[o];d&&("loading"!==d.state&&(d.state=l),this._loadTile(d,this._tileLoaded.bind(this,d,o,l)))}_tileLoaded(o,l,d,p){if(p)if(o.state="errored",404!==p.status)this._source.fire(new Po(p,{tile:o}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else o.timeAdded=li.now(),"expired"===d&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(l,o),"raster-dem"===this._source.type&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new vi("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const l=this.getRenderableIds();for(let p=0;p<l.length;p++){const g=l[p];if(o.neighboringTiles&&o.neighboringTiles[g]){const b=this.getTileByID(g);d(o,b),d(b,o)}}function d(p,g){if(!p.dem||p.dem.borderReady)return;p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0;let b=g.tileID.canonical.x-p.tileID.canonical.x;const w=g.tileID.canonical.y-p.tileID.canonical.y,T=Math.pow(2,p.tileID.canonical.z),S=g.tileID.key;0===b&&0===w||Math.abs(w)>1||(Math.abs(b)>1&&(1===Math.abs(b+T)?b+=T:1===Math.abs(b-T)&&(b-=T)),g.dem&&p.dem&&(p.dem.backfillBorder(g.dem,b,w),p.neighboringTiles&&p.neighboringTiles[S]&&(p.neighboringTiles[S].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,l,d,p){for(const g in this._tiles){let b=this._tiles[g];if(p[g]||!b.hasData()||b.tileID.overscaledZ<=l||b.tileID.overscaledZ>d)continue;let w=b.tileID;for(;b&&b.tileID.overscaledZ>l+1;){const S=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[S.key],b&&b.hasData()&&(w=S)}let T=w;for(;T.overscaledZ>l;)if(T=T.scaledTo(T.overscaledZ-1),o[T.key]){p[w.key]=w;break}}}findLoadedParent(o,l){if(o.key in this._loadedParentTiles){const d=this._loadedParentTiles[o.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=o.overscaledZ-1;d>=l;d--){const p=o.scaledTo(d),g=this._getLoadedTile(p);if(g)return g}}_getLoadedTile(o){const l=this._tiles[o.key];return l&&l.hasData()?l:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,l){l=l||this._source.tileSize;const d=Math.ceil(o.width/l)+1,p=Math.ceil(o.height/l)+1,g=Math.floor(d*p*5),b="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,g):g,w="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(w)}handleWrapJump(o){const l=Math.round((o-(void 0===this._prevLng?o:this._prevLng))/360);if(this._prevLng=o,l){const d={};for(const p in this._tiles){const g=this._tiles[p];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+l),d[g.tileID.key]=g}this._tiles=d;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(+p,this._tiles[p])}}update(o,l,d){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!d)return;let p;this.updateCacheSize(o,l),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(w=>new gs(w.canonical.z,w.wrap,w.canonical.z,w.canonical.x,w.canonical.y)):(p=o.coveringTiles({tileSize:l||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!d,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(p=p.filter(w=>this._source.hasTile(w)))):p=[];const g=this._updateRetainedTiles(p);if(fy(this._source.type)&&0!==p.length){const w={},T={},S=Object.keys(g);for(const O of S){const L=g[O],V=this._tiles[O];if(!V||V.fadeEndTime&&V.fadeEndTime<=li.now())continue;const j=this.findLoadedParent(L,Math.max(L.overscaledZ-Mh.maxOverzooming,this._source.minzoom));j&&(this._addTile(j.tileID),w[j.tileID.key]=j.tileID),T[O]=L}const k=p[p.length-1].overscaledZ;for(const O in this._tiles){const L=this._tiles[O];if(g[O]||!L.hasData())continue;let V=L.tileID;for(;V.overscaledZ>k;){V=V.scaledTo(V.overscaledZ-1);const j=this._tiles[V.key];if(j&&j.hasData()&&T[V.key]){g[O]=L.tileID;break}}}for(const O in w)g[O]||(this._coveredTiles[O]=!0,g[O]=w[O])}for(const w in g)this._tiles[w].clearFadeHold();const b=function(w,T){const S=[];for(const k in w)k in T||S.push(k);return S}(this._tiles,g);for(const w of b){const T=this._tiles[w];T.hasSymbolBuckets&&!T.holdingForFade()?T.setHoldDuration(this.map._fadeDuration):T.hasSymbolBuckets&&!T.symbolFadeFinished()||this._removeTile(+w)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const l={};if(0===o.length)return l;const d={},p=o.reduce((S,k)=>Math.min(S,k.overscaledZ),1/0),g=o[0].overscaledZ,b=Math.max(g-Mh.maxOverzooming,this._source.minzoom),w=Math.max(g+Mh.maxUnderzooming,this._source.minzoom),T={};for(const S of o){const k=this._addTile(S);l[S.key]=S,k.hasData()||p<this._source.maxzoom&&(T[S.key]=S)}this._retainLoadedChildren(T,p,w,l);for(const S of o){let k=this._tiles[S.key];if(k.hasData())continue;if(S.canonical.z>=this._source.maxzoom){const L=S.children(this._source.maxzoom)[0],V=this.getTile(L);if(V&&V.hasData()){l[L.key]=L;continue}}else{const L=S.children(this._source.maxzoom);if(l[L[0].key]&&l[L[1].key]&&l[L[2].key]&&l[L[3].key])continue}let O=k.wasRequested();for(let L=S.overscaledZ-1;L>=b;--L){const V=S.scaledTo(L);if(d[V.key]||(d[V.key]=!0,k=this.getTile(V),!k&&O&&(k=this._addTile(V)),k&&(l[V.key]=V,O=k.wasRequested(),k.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const l=[];let d,p=this._tiles[o].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){d=this._loadedParentTiles[p.key];break}l.push(p.key);const g=p.scaledTo(p.overscaledZ-1);if(d=this._getLoadedTile(g),d)break;p=g}for(const g of l)this._loadedParentTiles[g]=d}}_addTile(o){let l=this._tiles[o.key];if(l)return l;l=this._cache.getAndRemove(o),l&&(this._setTileReloadTimer(o.key,l),l.tileID=o,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,l)));const d=!!l;if(!d){const p=this.map?this.map.painter:null;l=new U0(o,this._source.tileSize*o.overscaleFactor(),this.transform.tileZoom,p,this._isRaster),this._loadTile(l,this._tileLoaded.bind(this,l,o.key,l.state))}return l?(l.uses++,this._tiles[o.key]=l,d||this._source.fire(new vi("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null}_setTileReloadTimer(o,l){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const d=l.getExpiryTimeout();d&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},d))}_removeTile(o){const l=this._tiles[o];l&&(l.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),l.uses>0||(l.hasData()&&"reloading"!==l.state?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,l,d){const p=[],g=this.transform;if(!g)return p;const b="globe"===g.projection.name,w=Cl(g.center.lng);for(const T in this._tiles){const S=this._tiles[T];if(d&&S.clearQueryDebugViz(),S.holdingForFade())continue;let k;if(b){const O=S.tileID.canonical;if(0===O.z){const L=[Math.abs(yn(w,...I_(O,-1))-w),Math.abs(yn(w,...I_(O,1))-w)];k=[0,2*L.indexOf(Math.min(...L))-1]}else{const L=[Math.abs(yn(w,...I_(O,-1))-w),Math.abs(yn(w,...I_(O,0))-w),Math.abs(yn(w,...I_(O,1))-w)];k=[L.indexOf(Math.min(...L))-1]}}else k=[0];for(const O of k){const L=o.containsTile(S,g,l,O);L&&p.push(L)}}return p}getVisibleCoordinates(o){const l=this.getRenderableIds(o).map(d=>this._tiles[d].tileID);for(const d of l)d.projMatrix=this.transform.calculateProjMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(fy(this._source.type))for(const o in this._tiles){const l=this._tiles[o];if(void 0!==l.fadeEndTime&&l.fadeEndTime>=li.now())return!0}return!1}setFeatureState(o,l,d){this._state.updateState(o=o||"_geojsonTileLayer",l,d)}removeFeatureState(o,l,d){this._state.removeFeatureState(o=o||"_geojsonTileLayer",l,d)}getFeatureState(o,l){return this._state.getState(o=o||"_geojsonTileLayer",l)}setDependencies(o,l,d){const p=this._tiles[o];p&&p.setDependencies(l,d)}reloadTilesForDependencies(o,l){for(const d in this._tiles)this._tiles[d].hasDependency(o,l)&&this._reloadTile(+d,"reloading");this._cache.filter(d=>!d.hasDependency(o,l))}_preloadTiles(o,l){const d=new Map,p=Array.isArray(o)?o:[o],g=this.map.painter.terrain,b=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const w of p){const T=w.coveringTiles({tileSize:b,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const S of T)d.set(S.key,S);this.usedForTerrain&&w.updateElevation(!1)}Xo(Array.from(d.values()),(w,T)=>{const S=new U0(w,this._source.tileSize*w.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(S,k=>{"raster-dem"===this._source.type&&S.dem&&this._backfillDEM(S),T(k,S)})},l)}}function Q1(a,o){const l=Math.abs(2*a.wrap)-+(a.wrap<0),d=Math.abs(2*o.wrap)-+(o.wrap<0);return a.overscaledZ-o.overscaledZ||d-l||o.canonical.y-a.canonical.y||o.canonical.x-a.canonical.x}function fy(a){return"raster"===a||"image"===a||"video"===a||"custom"===a}function I_(a,o){const l=1<<a.z;return[a.x/l+o,(a.x+1)/l+o]}Mh.maxOverzooming=10,Mh.maxUnderzooming=3;class D_{constructor(o,l,d){this._demTile=o,this._dem=this._demTile.dem,this._scale=l,this._offset=d}static create(o,l,d){const p=d||o.findDEMTileFor(l);if(!p||!p.dem)return;const g=p.dem,b=p.tileID,w=1<<l.canonical.z-b.canonical.z;return new D_(p,p.tileSize/pn/w,[(l.canonical.x/w-b.canonical.x)*g.dim,(l.canonical.y/w-b.canonical.y)*g.dim])}tileCoordToPixel(o,l){const d=l*this._scale+this._offset[1],p=Math.floor(o*this._scale+this._offset[0]),g=Math.floor(d);return new ft(p,g)}getElevationAt(o,l,d,p){const g=o*this._scale+this._offset[0],b=l*this._scale+this._offset[1],w=Math.floor(g),T=Math.floor(b),S=this._dem;return p=!!p,d?On(On(S.get(w,T,p),S.get(w,T+1,p),b-T),On(S.get(w+1,T,p),S.get(w+1,T+1,p),b-T),g-w):S.get(w,T,p)}getElevationAtPixel(o,l,d){return this._dem.get(o,l,!!d)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*Tl(1,o)*this._dem.stride}}class J1{constructor(o,l){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new th(pn,16,0),this.featureIndexArray=new zm,this.promoteId=l}insert(o,l,d,p,g,b=0){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,p,g,b);const T=this.grid;for(let S=0;S<l.length;S++){const k=l[S],O=[1/0,1/0,-1/0,-1/0];for(let L=0;L<k.length;L++){const V=k[L];O[0]=Math.min(O[0],V.x),O[1]=Math.min(O[1],V.y),O[2]=Math.max(O[2],V.x),O[3]=Math.max(O[3],V.y)}O[0]<pn&&O[1]<pn&&O[2]>=0&&O[3]>=0&&T.insert(w,O[0],O[1],O[2],O[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new p0(new b0(this.rawTileData)).layers,this.sourceLayerCoder=new XT(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,l,d,p){this.loadVTLayers();const g=o.params||{},b=Zs(g.filter),w=o.tileResult,T=o.transform,S=w.bufferedTilespaceBounds,k=this.grid.query(S.min.x,S.min.y,S.max.x,S.max.y,(j,G,Q,ae)=>Yv(w.bufferedTilespaceGeometry,j,G,Q,ae));k.sort(DR);let O=null;T.elevation&&k.length>0&&(O=D_.create(T.elevation,this.tileID));const L={};let V;for(let j=0;j<k.length;j++){const G=k[j];if(G===V)continue;V=G;const Q=this.featureIndexArray.get(G);let ae=null;this.loadMatchingFeature(L,Q,b,g.layers,g.availableImages,l,d,p,(_e,oe,he,be=0)=>(ae||(ae=hc(_e,this.tileID.canonical,o.tileTransform)),oe.queryIntersectsFeature(w,_e,he,ae,this.z,o.transform,o.pixelPosMatrix,O,be)))}return L}loadMatchingFeature(o,l,d,p,g,b,w,T,S){const{featureIndex:k,bucketIndex:O,sourceLayerIndex:L,layoutVertexArrayOffset:V}=l,j=this.bucketLayerIDs[O];if(p&&!function(_e,oe){for(let he=0;he<_e.length;he++)if(oe.indexOf(_e[he])>=0)return!0;return!1}(p,j))return;const G=this.sourceLayerCoder.decode(L),Q=this.vtLayers[G].feature(k);if(d.needGeometry){const _e=Rf(Q,!0);if(!d.filter(new Ie(this.tileID.overscaledZ),_e,this.tileID.canonical))return}else if(!d.filter(new Ie(this.tileID.overscaledZ),Q))return;const ae=this.getId(Q,G);for(let _e=0;_e<j.length;_e++){const oe=j[_e];if(p&&p.indexOf(oe)<0)continue;const he=b[oe];if(!he)continue;let be={};void 0!==ae&&T&&(be=T.getState(he.sourceLayer||"_geojsonTileLayer",ae));const pe=bn({},w[oe]);pe.paint=e2(pe.paint,he.paint,Q,be,g),pe.layout=e2(pe.layout,he.layout,Q,be,g);const je=!S||S(Q,he,be,V);if(!je)continue;const Ne=new xc(Q,this.z,this.x,this.y,ae);Ne.layer=pe;let Ke=o[oe];void 0===Ke&&(Ke=o[oe]=[]),Ke.push({featureIndex:k,feature:Ne,intersectionZ:je})}}lookupSymbolFeatures(o,l,d,p,g,b,w,T){const S={};this.loadVTLayers();const k=Zs(g);for(const O of o)this.loadMatchingFeature(S,{bucketIndex:d,sourceLayerIndex:p,featureIndex:O,layoutVertexArrayOffset:0},k,b,w,T,l);return S}loadFeature(o){const{featureIndex:l,sourceLayerIndex:d}=o;this.loadVTLayers();const p=this.sourceLayerCoder.decode(d),g=this.vtFeatures[p];if(g[l])return g[l];const b=this.vtLayers[p].feature(l);return g[l]=b,b}hasLayer(o){for(const l of this.bucketLayerIDs)for(const d of l)if(o===d)return!0;return!1}getId(o,l){let d=o.id;if(this.promoteId){const p="string"==typeof this.promoteId?this.promoteId:this.promoteId[l];null!=p&&(d=o.properties[p]),"boolean"==typeof d&&(d=Number(d))}return d}}function e2(a,o,l,d,p){return ho(a,(g,b)=>{const w=o instanceof Fe?o.get(b):null;return w&&w.evaluate?w.evaluate(l,d,p):w})}function DR(a,o){return o-a}Vt(J1,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class py{constructor(o,l){this.width=o,this.height=l,this.nextRow=0,this.image=new su({width:o,height:l}),this.positions={},this.uploaded=!1}getDash(o,l){const d=this.getKey(o,l);return this.positions[d]}trim(){const o=this.width,l=this.height=wr(this.nextRow);this.image.resize({width:o,height:l})}getKey(o,l){return o.join(",")+l}getDashRanges(o,l,d){const p=[];let g=o.length%2==1?-o[o.length-1]*d:0,b=o[0]*d,w=!0;p.push({left:g,right:b,isDash:w,zeroLength:0===o[0]});let T=o[0];for(let S=1;S<o.length;S++){w=!w;const k=o[S];g=T*d,T+=k,b=T*d,p.push({left:g,right:b,isDash:w,zeroLength:0===k})}return p}addRoundDash(o,l,d){const p=l/2;for(let g=-d;g<=d;g++){const b=this.width*(this.nextRow+d+g);let w=0,T=o[w];for(let S=0;S<this.width;S++){S/T.right>1&&(T=o[++w]);const k=Math.abs(S-T.left),O=Math.abs(S-T.right),L=Math.min(k,O);let V;const j=g/d*(p+1);if(T.isDash){const G=p-Math.abs(j);V=Math.sqrt(L*L+G*G)}else V=p-Math.sqrt(L*L+j*j);this.image.data[b+S]=Math.max(0,Math.min(255,V+128))}}}addRegularDash(o,l){for(let T=o.length-1;T>=0;--T){const S=o[T],k=o[T+1];S.zeroLength?o.splice(T,1):k&&k.isDash===S.isDash&&(k.left=S.left,o.splice(T,1))}const d=o[0],p=o[o.length-1];d.isDash===p.isDash&&(d.left=p.left-this.width,p.right=d.right+this.width);const g=this.width*this.nextRow;let b=0,w=o[b];for(let T=0;T<this.width;T++){T/w.right>1&&(w=o[++b]);const S=Math.abs(T-w.left),k=Math.abs(T-w.right),O=Math.min(S,k);this.image.data[g+T]=Math.max(0,Math.min(255,(w.isDash?O:-O)+l+128))}}addDash(o,l){const d=this.getKey(o,l);if(this.positions[d])return this.positions[d];const p="round"===l,g=p?7:0,b=2*g+1;if(this.nextRow+b>this.height)return Gt("LineAtlas out of space"),null;0===o.length&&o.push(1);let w=0;for(let k=0;k<o.length;k++)o[k]<0&&(Gt("Negative value is found in line dasharray, replacing values with 0"),o[k]=0),w+=o[k];if(0!==w){const k=this.width/w,O=this.getDashRanges(o,this.width,k);p?this.addRoundDash(O,k,g):this.addRegularDash(O,"square"===l?.5*k:0)}const T=this.nextRow+g;this.nextRow+=b;const S={tl:[T,g],br:[w,0]};return this.positions[d]=S,S}}Vt(py,"LineAtlas");class _y{constructor(o){const l={},d=[];for(const w in o){const T=o[w],S=l[w]={};for(const k in T.glyphs){const O=T.glyphs[+k];if(!O||0===O.bitmap.width||0===O.bitmap.height)continue;const L=O.metrics.localGlyph?2:1,V={x:0,y:0,w:O.bitmap.width+2*L,h:O.bitmap.height+2*L};d.push(V),S[k]=V}}const{w:p,h:g}=qx(d),b=new su({width:p||1,height:g||1});for(const w in o){const T=o[w];for(const S in T.glyphs){const k=T.glyphs[+S];if(!k||0===k.bitmap.width||0===k.bitmap.height)continue;const O=l[w][S],L=k.metrics.localGlyph?2:1;su.copy(k.bitmap,b,{x:0,y:0},{x:O.x+L,y:O.y+L},k.bitmap)}}this.image=b,this.positions=l}}Vt(_y,"GlyphAtlas");class as{constructor(o){this.tileID=new gs(o.tileID.overscaledZ,o.tileID.wrap,o.tileID.canonical.z,o.tileID.canonical.x,o.tileID.canonical.y),this.tileZoom=o.tileZoom,this.uid=o.uid,this.zoom=o.zoom,this.canonical=o.tileID.canonical,this.pixelRatio=o.pixelRatio,this.tileSize=o.tileSize,this.source=o.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=o.showCollisionBoxes,this.collectResourceTiming=!!o.collectResourceTiming,this.returnDependencies=!!o.returnDependencies,this.promoteId=o.promoteId,this.enableTerrain=!!o.enableTerrain,this.isSymbolTile=o.isSymbolTile,this.tileTransform=Al(o.tileID.canonical,o.projection),this.projection=o.projection}parse(o,l,d,p,g){this.status="parsing",this.data=o,this.collisionBoxArray=new wl;const b=new XT(Object.keys(o.layers).sort()),w=new J1(this.tileID,this.promoteId);w.bucketLayerIDs=[];const T={},S=new py(256,256),k={featureIndex:w,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:S,availableImages:d},O=l.familiesBySource[this.source];for(const be in O){const pe=o.layers[be];if(!pe)continue;let je=!1,Ne=!1;for(const $e of O[be])"symbol"===$e[0].type?je=!0:Ne=!0;if(!0===this.isSymbolTile&&!je||!1===this.isSymbolTile&&!Ne)continue;1===pe.version&&Gt(`Vector tile source "${this.source}" layer "${be}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ke=b.encode(be),_t=[];for(let $e=0;$e<pe.length;$e++){const et=pe.feature($e),rt=w.getId(et,be);_t.push({feature:et,id:rt,index:$e,sourceLayerIndex:Ke})}for(const $e of O[be]){const et=$e[0];void 0!==this.isSymbolTile&&"symbol"===et.type!==this.isSymbolTile||et.minzoom&&this.zoom<Math.floor(et.minzoom)||et.maxzoom&&this.zoom>=et.maxzoom||"none"!==et.visibility&&(nt($e,this.zoom,d),(T[et.id]=et.createBucket({index:w.bucketLayerIDs.length,layers:$e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ke,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:d})).populate(_t,k,this.tileID.canonical,this.tileTransform),w.bucketLayerIDs.push($e.map(rt=>rt.id)))}}let L,V,j,G;S.trim();const Q={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ae=ho(k.glyphDependencies,be=>Object.keys(be).map(Number));Object.keys(ae).length?p.send("getGlyphs",{uid:this.uid,stacks:ae},(be,pe)=>{L||(L=be,V=pe,he.call(this))},void 0,!1,Q):V={};const _e=Object.keys(k.iconDependencies);_e.length?p.send("getImages",{icons:_e,source:this.source,tileID:this.tileID,type:"icons"},(be,pe)=>{L||(L=be,j=pe,he.call(this))},void 0,!1,Q):j={};const oe=Object.keys(k.patternDependencies);function he(){if(L)return g(L);if(V&&j&&G){const be=new _y(V),pe=new zT(j,G);for(const je in T){const Ne=T[je];Ne instanceof nl?(nt(Ne.layers,this.zoom,d),$T(Ne,V,be.positions,j,pe.iconPositions,this.showCollisionBoxes,d,this.tileID.canonical,this.tileZoom,this.projection)):Ne.hasPattern&&(Ne instanceof x0||Ne instanceof h_||Ne instanceof lu)&&(nt(Ne.layers,this.zoom,d),Ne.addFeatures(k,this.tileID.canonical,pe.patternPositions,d,this.tileTransform))}this.status="done",g(null,{buckets:Vs(T).filter(je=>!je.isEmpty()),featureIndex:w,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:be.image,lineAtlas:S,imageAtlas:pe,glyphMap:this.returnDependencies?V:null,iconMap:this.returnDependencies?j:null,glyphPositions:this.returnDependencies?be.positions:null})}}oe.length?p.send("getImages",{icons:oe,source:this.source,tileID:this.tileID,type:"patterns"},(be,pe)=>{L||(L=be,G=pe,he.call(this))},void 0,!1,Q):G={},he.call(this)}}function nt(a,o,l){const d=new Ie(o);for(const p of a)p.recalculate(d,l)}class $0{constructor(o){this.entries={},this.scheduler=o}request(o,l,d,p){const g=this.entries[o]=this.entries[o]||{callbacks:[]};if(g.result){const[b,w]=g.result;return this.scheduler?this.scheduler.add(()=>{p(b,w)},l):p(b,w),()=>{}}return g.callbacks.push(p),g.cancel||(g.cancel=d((b,w)=>{g.result=[b,w];for(const T of g.callbacks)this.scheduler?this.scheduler.add(()=>{T(b,w)},l):T(b,w);setTimeout(()=>delete this.entries[o],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(b=>b!==p),g.callbacks.length||(g.cancel(),delete this.entries[o]))}}}function t2(a,o,l){const d=JSON.stringify(a.request);return a.data&&(this.deduped.entries[d]={result:[null,a.data]}),this.deduped.request(d,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},p=>{const g=Er(a.request,(b,w,T,S)=>{b?p(b):w&&p(null,{vectorTile:l?void 0:new p0(new b0(w)),rawData:w,cacheControl:T,expires:S})});return()=>{g.cancel(),p()}},o)}f.ARRAY_TYPE=Xs,f.AUTH_ERR_MSG=Ra,f.Aabb=Os,f.Actor=class{constructor(a,o,l){this.target=a,this.parent=o,this.mapId=l,this.callbacks={},this.cancelCallbacks={},ca(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=bo()?a:Le,this.scheduler=new $1}send(a,o,l,d,p=!1,g){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(l.metadata=g,this.callbacks[b]=l);const w=ko(this.globalScope)?void 0:[];return this.target.postMessage({id:b,type:a,hasCallback:!!l,targetMapId:d,mustQueue:p,sourceMapId:this.mapId,data:gf(o,w)},w),{cancel:()=>{l&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(a){const o=a.data,l=o.id;if(l&&(!o.targetMapId||this.mapId===o.targetMapId))if("<cancel>"===o.type){const d=this.cancelCallbacks[l];delete this.cancelCallbacks[l],d&&d.cancel()}else if(o.mustQueue||bo()){const d=this.callbacks[l];this.cancelCallbacks[l]=this.scheduler.add(()=>this.processTask(l,o),d&&d.metadata||{type:"message"})}else this.processTask(l,o)}processTask(a,o){if("<response>"===o.type){const l=this.callbacks[a];delete this.callbacks[a],l&&(o.error?l(xf(o.error)):l(null,xf(o.data)))}else{const l=ko(this.globalScope)?void 0:[],d=o.hasCallback?(g,b)=>{delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:g?gf(g):null,data:gf(b,l)},l)}:g=>{},p=xf(o.data);if(this.parent[o.type])this.parent[o.type](o.sourceMapId,p,d);else if(this.parent.getWorkerSource){const g=o.type.split(".");this.parent.getWorkerSource(o.sourceMapId,g[0],p.source)[g[1]](p,d)}else d(new Error(`Could not find function ${o.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},f.CanonicalTileID=m0,f.Color=vn,f.ColorMode=kl,f.CullFaceMode=il,f.DEMData=S_,f.DataConstantProperty=Me,f.DedupedRequest=$0,f.DepthMode=Ah,f.EXTENT=pn,f.Elevation=class{isDataAvailableAtPoint(a){const o=this._source();if(this.isUsingMockSource()||!o||a.y<0||a.y>1)return!1;const l=o.getSource().maxzoom,d=1<<l,p=Math.floor(a.x),g=Math.floor((a.x-p)*d),b=Math.floor(a.y*d),w=this.findDEMTileFor(new gs(l,p,l,g,b));return!(!w||!w.dem)}getAtPointOrZero(a,o=0){return this.getAtPoint(a,o)||0}getAtPoint(a,o,l=!0){if(this.isUsingMockSource())return null;null==o&&(o=null);const d=this._source();if(!d||a.y<0||a.y>1)return o;const p=d.getSource().maxzoom,g=1<<p,b=Math.floor(a.x),w=a.x-b,T=new gs(p,b,p,Math.floor(w*g),Math.floor(a.y*g)),S=this.findDEMTileFor(T);if(!S||!S.dem)return o;const k=S.dem,O=1<<S.tileID.canonical.z,L=(w*O-S.tileID.canonical.x)*k.dim,V=(a.y*O-S.tileID.canonical.y)*k.dim,j=Math.floor(L),G=Math.floor(V);return(l?this.exaggeration():1)*On(On(k.get(j,G),k.get(j,G+1),V-G),On(k.get(j+1,G),k.get(j+1,G+1),V-G),L-j)}getAtTileOffset(a,o,l){const d=1<<a.canonical.z;return this.getAtPointOrZero(new Mf(a.wrap+(a.canonical.x+o/pn)/d,(a.canonical.y+l/pn)/d))}getAtTileOffsetFunc(a,o,l,d){return p=>{const g=this.getAtTileOffset(a,p.x,p.y),b=d.upVector(a.canonical,p.x,p.y);return Io(b,b,g*d.upVectorScale(a.canonical,o,l).metersToTile),b}}getForTilePoints(a,o,l,d){if(this.isUsingMockSource())return!1;const p=D_.create(this,a,d);return!!p&&(o.forEach(g=>{g[2]=this.exaggeration()*p.getElevationAt(g[0],g[1],l)}),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(a);if(!o||!o.dem)return null;const l=o.dem.tree,d=o.tileID,p=1<<a.canonical.z-d.canonical.z;let g=a.canonical.x/p-d.canonical.x,b=a.canonical.y/p-d.canonical.y,w=0;for(let T=0;T<a.canonical.z-d.canonical.z&&!l.leaves[w];T++){g*=2,b*=2;const S=2*Math.floor(b)+Math.floor(g);w=l.childOffsets[w]+S,g%=1,b%=1}return{min:this.exaggeration()*l.minimums[w],max:this.exaggeration()*l.maximums[w]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,o,l){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},f.ErrorEvent=Po,f.EvaluationParameters=Ie,f.Event=vi,f.Evented=Jo,f.FillExtrusionBucket=lu,f.Frustum=_h,f.FrustumCorners=Vv,f.GLOBE_RADIUS=ou,f.GLOBE_SCALE_MATCH_LATITUDE=45,f.GLOBE_ZOOM_THRESHOLD_MAX=6,f.GLOBE_ZOOM_THRESHOLD_MIN=5,f.GlobeSharedBuffers=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const a of this._wireframeSegments)a.destroy()}}_fillGridMeshWithLods(a,o){const l=new en,d=new ur,p=[],g=a+1+2,b=o[0]+1,w=o[0]+1+(1+o.length),T=(S,k,O)=>{let L=S===g-1?S-2:0===S?S:S-1;return L+=O?24575:0,[L,k]};for(let S=0;S<g;++S)l.emplaceBack(...T(S,0,!0));for(let S=0;S<b;++S)for(let k=0;k<g;++k)l.emplaceBack(...T(k,S,(0===k||k===g-1)&&!0));for(let S=0;S<o.length;++S){const k=o[S];for(let O=0;O<g;++O)l.emplaceBack(...T(O,k,!0))}for(let S=0;S<o.length;++S){const k=d.length,O=o[S]+1+2,L=new ur;for(let G=0;G<O-1;G++){const Q=G===O-2,ae=Q?g*(w-o.length+S-G):g;for(let _e=0;_e<g-1;_e++){const oe=G*g+_e;0===G||Q||0===_e||_e===g-2?(L.emplaceBack(oe+1,oe,oe+ae),L.emplaceBack(oe+ae,oe+ae+1,oe+1)):(d.emplaceBack(oe+1,oe,oe+ae),d.emplaceBack(oe+ae,oe+ae+1,oe+1))}}const V=Qr.simpleSegment(0,k,l.length,d.length-k);for(let G=0;G<L.uint16.length;G+=3)d.emplaceBack(L.uint16[G],L.uint16[G+1],L.uint16[G+2]);const j=Qr.simpleSegment(0,k,l.length,d.length-k);p.push({withoutSkirts:V,withSkirts:j})}return{vertices:l,indices:d,segments:p}}_createGrid(a){const o=this._fillGridMeshWithLods(64,Qp);this._gridSegments=o.segments,this._gridBuffer=a.createVertexBuffer(o.vertices,Jm.members),this._gridIndexBuffer=a.createIndexBuffer(o.indices,!0)}_createPoles(a){const o=new ur;for(let p=0;p<=64;p++)o.emplaceBack(0,p+1,p+2);this._poleIndexBuffer=a.createIndexBuffer(o,!0);const l=new ga,d=new ga;this._poleSegments=[];for(let p=0,g=0;p<5;p++){const b=360/(1<<p);l.emplaceBack(0,-ou,0,.5,0),d.emplaceBack(0,-ou,0,.5,1);for(let w=0;w<=64;w++){const T=w/64,S=On(0,b,T),[k,O,L]=Jp(eT,hd,S,ou);l.emplaceBack(k,O,L,T,0),d.emplaceBack(k,O,L,T,1)}this._poleSegments.push(Qr.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(l,KC,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(d,KC,!1)}getGridBuffers(a,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}getWirefameBuffers(a,o){if(!this._wireframeSegments){const l=new Dr,d=64,p=d+1+2,g=1;this._wireframeSegments=[];for(let b=0,w=0;b<Qp.length;b++){const T=Qp[b];for(let k=g;k<T+g;k++)for(let O=g;O<d+g;O++){const L=k*p+O;l.emplaceBack(L,L+1),l.emplaceBack(L,L+p),l.emplaceBack(L,L+p+1)}const S=T*d*3;this._wireframeSegments.push(Qr.simpleSegment(0,w,(T+1)*p,S)),w+=S}this._wireframeIndexBuffer=a.createIndexBuffer(l)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[o]]}},f.GlyphManager=$f,f.ImagePosition=C0,f.LivePerformanceUtils=ot,f.LngLat=ei,f.LngLatBounds=ru,f.LocalGlyphMode=b_,f.MAX_MERCATOR_LATITUDE=ss,f.MercatorCoordinate=Mf,f.ONE_EM=jo,f.OverscaledTileID=gs,f.PerformanceMarkers=Oe,f.Properties=pt,f.RGBAImage=Js,f.Ray=zv,f.RequestManager=class{constructor(a,o,l){this._transformRequestFn=a,this._customAccessToken=o,this._silenceAuthErrors=!!l,this._createSkuToken()}_createSkuToken(){const a=function(){let o="";for(let l=0;l<10;l++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",yt,o].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,o){return this._transformRequestFn&&this._transformRequestFn(a,o)||{url:a}}normalizeStyleURL(a,o){if(!Ds(a))return a;const l=Cr(a);return l.path=`/styles/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||o)}normalizeGlyphsURL(a,o){if(!Ds(a))return a;const l=Cr(a);return l.path=`/fonts/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||o)}normalizeSourceURL(a,o,l,d){if(!Ds(a))return a;const p=Cr(a);return p.path=`/v4/${p.authority}.json`,p.params.push("secure"),l&&p.params.push(`language=${l}`),d&&p.params.push(`worldview=${d}`),this._makeAPIURL(p,this._customAccessToken||o)}normalizeSpriteURL(a,o,l,d){const p=Cr(a);return Ds(a)?(p.path=`/styles/v1${p.path}/sprite${o}${l}`,this._makeAPIURL(p,this._customAccessToken||d)):(p.path+=`${o}${l}`,da(p))}normalizeTileURL(a,o,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!Ds(a))return a;const d=Cr(a);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||l&&"raster"!==d.authority&&512===l?"@2x":""}${qe.supported?".webp":"$1"}`),"raster"===d.authority?d.path=`/${Dt.RASTER_URL_PREFIX}${d.path}`:(d.path=d.path.replace(/^.+\/v4\//,"/"),d.path=`/${Dt.TILE_URL_VERSION}${d.path}`);const p=this._customAccessToken||function(g){for(const b of g){const w=b.match(/^access_token=(.*)$/);if(w)return w[1]}return null}(d.params)||Dt.ACCESS_TOKEN;return Dt.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&d.params.push(`sku=${this._skuToken}`),this._makeAPIURL(d,p)}canonicalizeTileURL(a,o){const l=Cr(a);if(!l.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!l.path.match(/\.[\w]+$/))return a;let d="mapbox://";l.path.match(/^\/raster\/v1\//)?d+=`raster/${l.path.replace(`/${Dt.RASTER_URL_PREFIX}/`,"")}`:d+=`tiles/${l.path.replace(`/${Dt.TILE_URL_VERSION}/`,"")}`;let p=l.params;return o&&(p=p.filter(g=>!g.match(/^access_token=/))),p.length&&(d+=`?${p.join("&")}`),d}canonicalizeTileset(a,o){const l=!!o&&Ds(o),d=[];for(const p of a.tiles||[])Dn(p)?d.push(this.canonicalizeTileURL(p,l)):d.push(p);return d}_makeAPIURL(a,o){const l="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",d=Cr(Dt.API_URL);if(a.protocol=d.protocol,a.authority=d.authority,"http"===a.protocol){const p=a.params.indexOf("secure");p>=0&&a.params.splice(p,1)}if("/"!==d.path&&(a.path=`${d.path}${a.path}`),!Dt.REQUIRE_ACCESS_TOKEN)return da(a);if(o=o||Dt.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${l}`);if("s"===o[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${l}`)}return a.params=a.params.filter(p=>-1===p.indexOf("access_token")),a.params.push(`access_token=${o||""}`),da(a)}},f.ResourceType=fr,f.SegmentVector=Qr,f.SourceCache=Mh,f.StencilMode=oi,f.StructArrayLayout1ui2=Bo,f.StructArrayLayout2f1f2i16=Pi,f.StructArrayLayout2i4=en,f.StructArrayLayout2ui4=Dr,f.StructArrayLayout3f12=Kr,f.StructArrayLayout3ui6=ur,f.StructArrayLayout4i8=Ci,f.StructArrayLayout5f20=ga,f.Texture=Dh,f.Tile=U0,f.Transitionable=bt,f.Uniform1f=$m,f.Uniform1i=class extends tu{constructor(a){super(a),this.current=0}set(a,o,l){this.fetchUniformLocation(a,o)&&this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},f.Uniform2f=class extends tu{constructor(a){super(a),this.current=[0,0]}set(a,o,l){this.fetchUniformLocation(a,o)&&(l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1])))}},f.Uniform3f=class extends tu{constructor(a){super(a),this.current=[0,0,0]}set(a,o,l){this.fetchUniformLocation(a,o)&&(l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2])))}},f.Uniform4f=Rv,f.UniformColor=Pv,f.UniformMatrix2f=class extends tu{constructor(a){super(a),this.current=Gm}set(a,o,l){if(this.fetchUniformLocation(a,o))for(let d=0;d<4;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix2fv(this.location,!1,l);break}}},f.UniformMatrix3f=class extends tu{constructor(a){super(a),this.current=Fv}set(a,o,l){if(this.fetchUniformLocation(a,o))for(let d=0;d<9;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}},f.UniformMatrix4f=class extends tu{constructor(a){super(a),this.current=Ov}set(a,o,l){if(this.fetchUniformLocation(a,o)){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let d=1;d<16;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}}},f.UnwrappedTileID=yT,f.ValidationError=St,f.VectorTileFeature=bh,f.VectorTileWorkerSource=class extends Jo{constructor(a,o,l,d,p){super(),this.actor=a,this.layerIndex=o,this.availableImages=l,this.loadVectorData=p||t2,this.loading={},this.loaded={},this.deduped=new $0(a.scheduler),this.isSpriteLoaded=d,this.scheduler=a.scheduler}loadTile(a,o){const l=a.uid,d=a&&a.request,p=d&&d.collectResourceTiming,g=this.loading[l]=new as(a);g.abort=this.loadVectorData(a,(b,w)=>{const T=!this.loading[l];if(delete this.loading[l],T||b||!w)return g.status="done",T||(this.loaded[l]=g),o(b);const S=w.rawData,k={};w.expires&&(k.expires=w.expires),w.cacheControl&&(k.cacheControl=w.cacheControl),g.vectorTile=w.vectorTile||new p0(new b0(S));const O=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(L,V)=>{if(L||!V)return o(L);const j={};if(p){const G=tn(d);G.length>0&&(j.resourceTiming=JSON.parse(JSON.stringify(G)))}o(null,bn({rawTileData:S.slice(0)},V,k,j))})};this.isSpriteLoaded?O():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(O,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom}):O()}),this.loaded=this.loaded||{},this.loaded[l]=g})}reloadTile(a,o){const l=this.loaded,d=a.uid,p=this;if(l&&l[d]){const g=l[d];g.showCollisionBoxes=a.showCollisionBoxes,g.enableTerrain=!!a.enableTerrain,g.projection=a.projection,g.tileTransform=Al(a.tileID.canonical,a.projection);const b=(w,T)=>{const S=g.reloadCallback;S&&(delete g.reloadCallback,g.parse(g.vectorTile,p.layerIndex,this.availableImages,p.actor,S)),o(w,T)};"parsing"===g.status?g.reloadCallback=b:"done"===g.status&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,b):b())}}abortTile(a,o){const l=a.uid,d=this.loading[l];d&&(d.abort&&d.abort(),delete this.loading[l]),o()}removeTile(a,o){const l=this.loaded,d=a.uid;l&&l[d]&&delete l[d],o()}},f.WritingMode=el,f.ZoomDependentExpression=Wt,f.add=cc,f.addDynamicAttributes=z0,f.adjoint=function(a,o){var l=o[0],d=o[1],p=o[2],g=o[3],b=o[4],w=o[5],T=o[6],S=o[7],k=o[8];return a[0]=b*k-w*S,a[1]=p*S-d*k,a[2]=d*w-p*b,a[3]=w*T-g*k,a[4]=l*k-p*T,a[5]=p*g-l*w,a[6]=g*S-b*T,a[7]=d*T-l*S,a[8]=l*b-d*g,a},f.asyncAll=Xo,f.bezier=Ji,f.bindAll=ca,f.boundsAttributes=W1,f.bufferConvexPolygon=function(a,o){const l=[];for(let d=0;d<a.length;d++){const p=In(d-1,-1,a.length-1),g=In(d+1,-1,a.length-1),b=a[d],w=a[g],T=a[p].sub(b).unit(),S=w.sub(b).unit(),k=S.angleWithSep(T.x,T.y),O=T.add(S).unit().mult(-1*o/Math.sin(k/2));l.push(b.add(O))}return l},f.cacheEntryPossiblyAdded=function(a){Is++,Is>dl&&(a.getActor().send("enforceCacheSizeLimit",Ma),Is=0)},f.calculateGlobeLabelMatrix=function(a,o){const{x:l,y:d}=a.point,p=Hv(l,d,a.worldSize/a._pixelsPerMercatorPixel,0,0);return sd(p,p,mx(uc(o)))},f.calculateGlobeMatrix=function(a){const{x:o,y:l}=a.point,{lng:d,lat:p}=a._center;return Hv(o,l,a.worldSize,d,p)},f.calculateGlobeMercatorMatrix=function(a){const o=a.pixelsPerMeter,l=o/Tl(1,a.center.lat),d=Ks(new Float64Array(16));return Sf(d,d,[a.point.x,a.point.y,0]),ch(d,d,[l,l,o]),Float32Array.from(d)},f.circumferenceAtLatitude=Af,f.clamp=yn,f.clearTileCache=function(a){if(!Wn())return;const o=Le.caches.delete(Mc);a&&o.catch(a).then(()=>a())},f.clipLine=I0,f.clone=function(a){var o=new Xs(16);return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],o},f.clone$1=Qn,f.collisionCircleLayout=b1,f.config=Dt,f.conjugate=function(a,o){return a[0]=-o[0],a[1]=-o[1],a[2]=-o[2],a[3]=o[3],a},f.create=function(){var a=new Xs(16);return Xs!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},f.create$1=Wp,f.createExpression=ge,f.createLayout=Yt,f.createStyleLayer=function(a){return"custom"===a.type?new ZT(a):new H1[a.type](a)},f.cross=ld,f.degToRad=Et,f.distance=function(a,o){return Math.hypot(o[0]-a[0],o[1]-a[1],o[2]-a[2])},f.div=function(a,o,l){return a[0]=o[0]/l[0],a[1]=o[1]/l[1],a[2]=o[2]/l[2],a},f.dot=xa,f.earthRadius=i_,f.ease=er,f.easeCubicInOut=Ge,f.ecefToLatLng=function([a,o,l]){const d=Math.hypot(a,o,l),p=Math.atan2(a,l),g=.5*Math.PI-Math.acos(-o/d);return new ei(En(p),En(g))},f.emitValidationErrors=sx,f.endsWith=Yi,f.enforceCacheSizeLimit=function(a){ro(),mr&&mr.then(o=>{o.keys().then(l=>{for(let d=0;d<l.length-a;d++)o.delete(l[d])})})},f.evaluateSizeForFeature=y0,f.evaluateSizeForZoom=uu,f.evaluateVariableOffset=iy,f.evented=de,f.exactEquals=function(a,o){return a[0]===o[0]&&a[1]===o[1]&&a[2]===o[2]&&a[3]===o[3]},f.exactEquals$1=function(a,o){return a[0]===o[0]&&a[1]===o[1]&&a[2]===o[2]},f.exported=li,f.exported$1=qe,f.extend=bn,f.extend$1=tr,f.fillExtrusionHeightLift=Hx,f.filterObject=mi,f.fromMat4=function(a,o){return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[4],a[4]=o[5],a[5]=o[6],a[6]=o[8],a[7]=o[9],a[8]=o[10],a},f.fromQuat=function(a,o){var l=o[0],d=o[1],p=o[2],g=o[3],b=l+l,w=d+d,T=p+p,S=l*b,k=d*b,O=d*w,L=p*b,V=p*w,j=p*T,G=g*b,Q=g*w,ae=g*T;return a[0]=1-O-j,a[1]=k+ae,a[2]=L-Q,a[3]=0,a[4]=k-ae,a[5]=1-S-j,a[6]=V+G,a[7]=0,a[8]=L+Q,a[9]=V-G,a[10]=1-S-O,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},f.fromRotation=function(a,o){var l=Math.sin(o),d=Math.cos(o);return a[0]=d,a[1]=l,a[2]=0,a[3]=-l,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},f.fromScaling=qp,f.furthestTileCorner=function(a){const o=Math.round((a+45+360)%360/90)%4;return Mi[o]},f.getAABBPointSquareDist=function(a,o,l){let d=0;for(let p=0;p<2;++p){const g=l?l[p]:0;a[p]>g&&(d+=(a[p]-g)*(a[p]-g)),o[p]<g&&(d+=(g-o[p])*(g-o[p]))}return d},f.getAnchorAlignment=y_,f.getAnchorJustification=P1,f.getBounds=function(a){let o=1/0,l=1/0,d=-1/0,p=-1/0;for(const g of a)o=Math.min(o,g.x),l=Math.min(l,g.y),d=Math.max(d,g.x),p=Math.max(p,g.y);return{min:new ft(o,l),max:new ft(d,p)}},f.getColumn=Ro,f.getGridMatrix=function(a,o,l,d){const p=o.getNorth(),g=o.getSouth(),b=o.getWest(),w=o.getEast(),T=1<<a.z,S=w-b,k=p-g,O=S/64,L=-k/Qp[l],V=[0,O,0,L,0,0,p,b,0];if(a.z>0){const j=180/d;Wm(V,V,[j/S+1,0,0,0,j/k+1,0,-.5*j/O,.5*j/L,1])}return V[2]=T,V[5]=a.x,V[8]=a.y,V},f.getImage=Rc,f.getJSON=function(a,o){return Zr(bn(a,{type:"json"}),o)},f.getLatitudinalLod=function(a){const o=ss-5;a=yn(a,-o,o)/o*90;const l=Math.pow(Math.abs(Math.sin(Et(a))),3);return Math.round(l*(Qp.length-1))},f.getMapSessionAPI=ke,f.getPerformanceMeasurement=tn,f.getProjection=sy,f.getRTLTextPluginStatus=fe,f.getReferrer=Ul,f.getTilePoint=function(a,{x:o,y:l},d=0){return new ft(((o-d)*a.scale-a.x)*pn,(l*a.scale-a.y)*pn)},f.getTileVec3=function(a,o,l=0){return uh(((o.x-l)*a.scale-a.x)*pn,(o.y*a.scale-a.y)*pn,$v(o.z,o.y))},f.getVideo=function(a,o){const l=Le.document.createElement("video");l.muted=!0,l.onloadstart=function(){o(null,l)};for(let d=0;d<a.length;d++){const p=Le.document.createElement("source");kc(a[d])||(l.crossOrigin="Anonymous"),p.src=a[d],l.appendChild(p)}return{cancel:()=>{}}},f.globeCenterToScreenPoint=function(a){const o=[0,0,0],l=Ks(new Float64Array(16));return sd(l,a.pixelMatrix,a.globeMatrix),Ar(o,o,l),new ft(o[0],o[1])},f.globeDenormalizeECEF=mx,f.globeECEFOrigin=function(a,o){const l=[0,0,0];return Ar(l,l,t_(uc(o.canonical))),Ar(l,l,a),l},f.globeMetersToEcef=cd,f.globeNormalizeECEF=t_,f.globePixelsToTileUnits=function(a,o){return pn/(512*Math.pow(2,a))*t0(uc(o))},f.globePoleMatrixForTile=function(a,o,l){const d=Ks(new Float64Array(16)),p=(o/(1<<a)-.5)*Math.PI*2;return qm(d,l.globeMatrix,p),Float32Array.from(d)},f.globeTileBounds=uc,f.globeTiltAtLngLat=n_,f.globeToMercatorTransition=dd,f.globeUseCustomAntiAliasing=function(a,o,l){const d=dd(l.zoom),p=a.style.map._antialias,g=!!o.extStandardDerivatives,b=o.extStandardDerivativesForceOff||a.terrain&&a.terrain.exaggeration()>0;return 0===d&&!p&&!b&&g},f.identity=Ks,f.identity$1=Qm,f.invert=Nv,f.isFullscreen=function(){return!!Le.document.fullscreenElement||!!Le.document.webkitFullscreenElement},f.isLngLatBehindGlobe=n0,f.isMapAuthenticated=function(a){return Te.has(a)},f.isMapboxURL=Ds,f.isSafariWithAntialiasingBug=function(a){const o=a.navigator?a.navigator.userAgent:null;return!!ko(a)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},f.latFromMercatorY=Jr,f.latLngToECEF=gh,f.len=Km,f.length=Yp,f.length$1=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},f.lngFromMercatorX=Vo,f.loadVectorTile=t2,f.makeRequest=Zr,f.mapValue=function(a,o,l,d,p){return yn((a-o)/(l-o)*(p-d)+d,d,p)},f.mercatorScale=xx,f.mercatorXfromLng=Cl,f.mercatorYfromLat=dc,f.mercatorZfromAltitude=Tl,f.mul=Lv,f.mul$1=Bv,f.multiply=sd,f.multiply$1=Wm,f.multiply$2=fx,f.nextPowerOfTwo=wr,f.normalize=os,f.normalize$1=XC,f.normalize$2=fh,f.number=On,f.ortho=function(a,o,l,d,p,g,b){var w=1/(o-l),T=1/(d-p),S=1/(g-b);return a[0]=-2*w,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*T,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*S,a[11]=0,a[12]=(o+l)*w,a[13]=(p+d)*T,a[14]=(b+g)*S,a[15]=1,a},f.pbf=b0,f.perspective=function(a,o,l,d,p){var g,b=1/Math.tan(o/2);return a[0]=b/l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,null!=p&&p!==1/0?(a[10]=(p+d)*(g=1/(d-p)),a[14]=2*p*d*g):(a[10]=-1,a[14]=-2*d),a},f.pick=function(a,o){const l={};for(let d=0;d<o.length;d++){const p=o[d];p in a&&(l[p]=a[p])}return l},f.plugin=Ee,f.pointGeometry=ft,f.polesInViewport=function(a){const o=Ks(new Float64Array(16));sd(o,a.pixelMatrix,a.globeMatrix);const l=[0,ms,0],d=[0,Qa,0];return Ar(l,l,o),Ar(d,d,o),[l[0]>0&&l[0]<=a.width&&l[1]>0&&l[1]<=a.height&&!n0(a,new ei(a.center.lat,90)),d[0]>0&&d[0]<=a.width&&d[1]>0&&d[1]<=a.height&&!n0(a,new ei(a.center.lat,-90))]},f.polygonContainsPoint=Pf,f.polygonIntersectsBox=Yv,f.polygonIntersectsPolygon=qv,f.polygonizeBounds=function(a,o,l=0,d=!0){const p=new ft(l,l),g=a.sub(p),b=o.add(p),w=[g,new ft(b.x,g.y),b,new ft(g.x,b.y)];return d&&w.push(g.clone()),w},f.posAttributes=Jm,f.postMapLoadEvent=re,f.postPerformanceEvent=we,f.postTurnstileEvent=$,f.potpack=qx,f.prevPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},f.radToDeg=En,f.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],f.registerForPluginStateChange=function(a){return a({pluginStatus:ne,pluginURL:Y}),de.on("pluginStateChange",a),a},f.removeAuthState=function(a){Te.delete(a)},f.renderColorRamp=s0,f.resample=Wv,f.rotateX=Xa,f.rotateX$1=ph,f.rotateY=qm,f.rotateY$1=YC,f.rotateZ=function(a,o,l){var d=Math.sin(l),p=Math.cos(l),g=o[0],b=o[1],w=o[2],T=o[3],S=o[4],k=o[5],O=o[6],L=o[7];return o!==a&&(a[8]=o[8],a[9]=o[9],a[10]=o[10],a[11]=o[11],a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15]),a[0]=g*p+S*d,a[1]=b*p+k*d,a[2]=w*p+O*d,a[3]=T*p+L*d,a[4]=S*p-g*d,a[5]=k*p-b*d,a[6]=O*p-w*d,a[7]=L*p-T*d,a},f.rotateZ$1=function(a,o,l){l*=.5;var d=o[0],p=o[1],g=o[2],b=o[3],w=Math.sin(l),T=Math.cos(l);return a[0]=d*T+p*w,a[1]=p*T-d*w,a[2]=g*T+b*w,a[3]=b*T-g*w,a},f.scale=ch,f.scale$1=hh,f.scale$2=Io,f.scaleAndAdd=Kp,f.set=function(a,o,l,d){return a[0]=o,a[1]=l,a[2]=d,a},f.setCacheLimits=function(a,o){Ma=a,dl=o},f.setColumn=function(a,o,l){a[4*o+0]=l[0],a[4*o+1]=l[1],a[4*o+2]=l[2],a[4*o+3]=l[3]},f.setRTLTextPlugin=function(a,o,l=!1){if(ne===K||ne===J||ne===ee)throw new Error("setRTLTextPlugin cannot be called multiple times.");Y=li.resolveURL(a),ne=K,te=o,ce(),l||ye()},f.smoothstep=rr,f.spec=Ye,f.squaredLength=function(a){var o=a[0],l=a[1],d=a[2];return o*o+l*l+d*d},f.storeAuthState=function(a,o){o?Te.add(a):Te.delete(a)},f.sub=El,f.subtract=Xm,f.symbolSize=du,f.tileAABB=function(a,o,l,d,p,g,b,w,T){if("globe"===T.name)return function ya(a,o,l){const d=o/a.worldSize,p=a.globeMatrix;if(l.z<=1){const Ne=uc(l).getCorners();return JC(Ne,p,d),Os.fromPoints(Ne)}const g=Df(l),b=ud(g);JC(b,p,d);const w=Number.MAX_VALUE,T=[-w,-w,-w],S=[w,w,w];if(g.contains(a.center)){for(const _t of b)Xp(S,S,_t),ad(T,T,_t);T[2]=0;const Ne=a.point,Ke=[Ne.x*d,Ne.y*d,0];return Xp(S,S,Ke),ad(T,T,Ke),new Os(S,T)}const k=[p[12]*d,p[13]*d,p[14]*d],O=g.getCenter(),L=yn(a.center.lat,-ss,ss),V=yn(O.lat,-ss,ss),j=Cl(a.center.lng),G=dc(L);let Q=j-Cl(O.lng);const ae=G-dc(V);Q>.5?Q-=1:Q<-.5&&(Q+=1);let _e=0;Math.abs(Q)>Math.abs(ae)?_e=Q>=0?1:3:(_e=ae>=0?0:2,Kp(k,k,[p[4]*d,p[5]*d,p[6]*d],-Math.sin(Et(ae>=0?g.getSouth():g.getNorth()))*ou));const oe=b[_e],he=b[(_e+1)%4],be=new e0(oe,he,k),pe=[mh(be,0)||oe[0],mh(be,1)||oe[1],mh(be,2)||oe[2]],je=dd(a.zoom);if(je>0){const Ne=function({x:_t,y:$e,z:et},rt,ht,gt,We){const It=1/(1<<et);let rn=_t*It,kt=rn+It,Ut=$e*It,At=Ut+It,un=0;const Yn=(rn+kt)/2-gt;return Yn>.5?un=-1:Yn<-.5&&(un=1),rn=((rn+un)*rt-(gt*=rt))*ht+gt,kt=((kt+un)*rt-gt)*ht+gt,Ut=(Ut*rt-(We*=rt))*ht+We,At=(At*rt-We)*ht+We,[[rn,At,0],[kt,At,0],[kt,Ut,0],[rn,Ut,0]]}(l,o,a._pixelsPerMercatorPixel,j,G);for(let _t=0;_t<b.length;_t++)If(b[_t],Ne[_t],je);const Ke=cc([],Ne[_e],Ne[(_e+1)%4]);Io(Ke,Ke,.5),If(pe,Ke,je)}for(const Ne of b)Xp(S,S,Ne),ad(T,T,Ne);return S[2]=Math.min(oe[2],he[2]),Xp(S,S,pe),ad(T,T,pe),new Os(S,T)}(a,o,new m0(l,d,p));const S=Al({z:l,x:d,y:p},T);return new Os([(g+S.x/S.scale)*o,o*(S.y/S.scale),b],[(g+S.x2/S.scale)*o,o*(S.y2/S.scale),w])},f.tileCornersToBounds=Df,f.tileTransform=Al,f.transformMat3=function(a,o,l){var d=o[0],p=o[1],g=o[2];return a[0]=d*l[0]+p*l[3]+g*l[6],a[1]=d*l[1]+p*l[4]+g*l[7],a[2]=d*l[2]+p*l[5]+g*l[8],a},f.transformMat4=Ar,f.transformMat4$1=Ka,f.transformQuat=zo,f.transitionTileAABBinECEF=jv,f.translate=Sf,f.transpose=function(a,o){if(a===o){var l=o[1],d=o[2],p=o[5];a[1]=o[3],a[2]=o[6],a[3]=l,a[5]=o[7],a[6]=d,a[7]=p}else a[0]=o[0],a[1]=o[3],a[2]=o[6],a[3]=o[1],a[4]=o[4],a[5]=o[7],a[6]=o[2],a[7]=o[5],a[8]=o[8];return a},f.triggerPluginCompletionEvent=le,f.uniqueId=cl,f.updateGlobeVertexNormal=function(a,o,l,d,p){const g=5*o+2;a.float32[g+0]=l,a.float32[g+1]=d,a.float32[g+2]=p},f.validateCustomStyleLayer=function(a){const o=[],l=a.id;return void 0===l&&o.push({message:`layers.${l}: missing required property "id"`}),void 0===a.render&&o.push({message:`layers.${l}: missing required method "render"`}),a.renderingMode&&"2d"!==a.renderingMode&&"3d"!==a.renderingMode&&o.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),o},f.validateFilter=a=>ic(Rm(a)),f.validateFog=a=>ic(Om(a)),f.validateLayer=a=>ic(Ju(a)),f.validateLight=a=>ic(ix(a)),f.validateSource=a=>ic(eh(a)),f.validateStyle=rx,f.validateTerrain=a=>ic(Bp(a)),f.values=Vs,f.vectorTile=f_,f.version=Jt,f.warnOnce=Gt,f.window=Le,f.wrap=In}),Un(0,function(f){function Le(se){if("number"==typeof se||"boolean"==typeof se||"string"==typeof se||null==se)return JSON.stringify(se);if(Array.isArray(se)){let q="[";for(const re of se)q+=`${Le(re)},`;return`${q}]`}let $="{";for(const q of Object.keys(se).sort())$+=`${q}:${Le(se[q])},`;return`${$}}`}function Jt(se){let $="";for(const q of f.refProperties)$+=`/${Le(se[q])}`;return $}class qt{constructor($){this.keyCache={},$&&this.replace($)}replace($){this._layerConfigs={},this._layers={},this.update($,[])}update($,q){for(const ue of $)this._layerConfigs[ue.id]=ue,(this._layers[ue.id]=f.createStyleLayer(ue)).compileFilter(),this.keyCache[ue.id]&&delete this.keyCache[ue.id];for(const ue of q)delete this.keyCache[ue],delete this._layerConfigs[ue],delete this._layers[ue];this.familiesBySource={};const re=function(ue,we){const Re={};for(let Te=0;Te<ue.length;Te++){const Oe=we&&we[ue[Te].id]||Jt(ue[Te]);we&&(we[ue[Te].id]=Oe);let ot=Re[Oe];ot||(ot=Re[Oe]=[]),ot.push(ue[Te])}const ke=[];for(const Te in Re)ke.push(Re[Te]);return ke}(f.values(this._layerConfigs),this.keyCache);for(const ue of re){const we=ue.map(Mt=>this._layers[Mt.id]),Re=we[0];if("none"===Re.visibility)continue;const ke=Re.source||"";let Te=this.familiesBySource[ke];Te||(Te=this.familiesBySource[ke]={});const Oe=Re.sourceLayer||"_geojsonTileLayer";let ot=Te[Oe];ot||(ot=Te[Oe]=[]),ot.push(we)}}}class Dt{loadTile($,q){const{uid:re,encoding:ue,rawImageData:we,padding:Re,buildQuadTree:ke}=$,Te=f.window.ImageBitmap&&we instanceof f.window.ImageBitmap?this.getImageData(we,Re):we;q(null,new f.DEMData(re,Te,ue,Re<1,ke))}getImageData($,q){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas($.width,$.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=$.width,this.offscreenCanvas.height=$.height,this.offscreenCanvasContext.drawImage($,0,0,$.width,$.height);const re=this.offscreenCanvasContext.getImageData(-q,-q,$.width+2*q,$.height+2*q);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),re}}var qe=function se($,q){var re,ue=$&&$.type;if("FeatureCollection"===ue)for(re=0;re<$.features.length;re++)se($.features[re],q);else if("GeometryCollection"===ue)for(re=0;re<$.geometries.length;re++)se($.geometries[re],q);else if("Feature"===ue)se($.geometry,q);else if("Polygon"===ue)wt($.coordinates,q);else if("MultiPolygon"===ue)for(re=0;re<$.coordinates.length;re++)wt($.coordinates[re],q);return $};function wt(se,$){if(0!==se.length){Ft(se[0],$);for(var q=1;q<se.length;q++)Ft(se[q],!$)}}function Ft(se,$){for(var q=0,re=0,ue=0,we=se.length,Re=we-1;ue<we;Re=ue++){var ke=(se[ue][0]-se[Re][0])*(se[Re][1]+se[ue][1]),Te=q+ke;re+=Math.abs(q)>=Math.abs(ke)?q-Te+ke:ke-Te+q,q=Te}q+re>=0!=!!$&&se.reverse()}const an=f.VectorTileFeature.prototype.toGeoJSON;class ai{constructor($){this._feature=$,this.extent=f.EXTENT,this.type=$.type,this.properties=$.tags,"id"in $&&!isNaN($.id)&&(this.id=parseInt($.id,10))}loadGeometry(){if(1===this._feature.type){const $=[];for(const q of this._feature.geometry)$.push([new f.pointGeometry(q[0],q[1])]);return $}{const $=[];for(const q of this._feature.geometry){const re=[];for(const ue of q)re.push(new f.pointGeometry(ue[0],ue[1]));$.push(re)}return $}}toGeoJSON($,q,re){return an.call(this,$,q,re)}}class Nt{constructor($){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.EXTENT,this.length=$.length,this._features=$}feature($){return new ai(this._features[$])}}var yt={},kn={get exports(){return yt},set exports(se){yt=se}},ln=f.pointGeometry,ft=f.vectorTile.VectorTileFeature,me=De;function De(se,$){this.options=$||{},this.features=se,this.length=se.length}function at(se,$){this.id="number"==typeof se.id?se.id:void 0,this.type=se.type,this.rawGeometry=1===se.type?[se.geometry]:se.geometry,this.properties=se.tags,this.extent=$||4096}De.prototype.feature=function(se){return new at(this.features[se],this.options.extent)},at.prototype.loadGeometry=function(){var se=this.rawGeometry;this.geometry=[];for(var $=0;$<se.length;$++){for(var q=se[$],re=[],ue=0;ue<q.length;ue++)re.push(new ln(q[ue][0],q[ue][1]));this.geometry.push(re)}return this.geometry},at.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var se=this.geometry,$=1/0,q=-1/0,re=1/0,ue=-1/0,we=0;we<se.length;we++)for(var Re=se[we],ke=0;ke<Re.length;ke++){var Te=Re[ke];$=Math.min($,Te.x),q=Math.max(q,Te.x),re=Math.min(re,Te.y),ue=Math.max(ue,Te.y)}return[$,re,q,ue]},at.prototype.toGeoJSON=ft.prototype.toGeoJSON;var Et=f.pbf,En=me;function Mi(se){var $=new Et;return function(q,re){for(var ue in q.layers)re.writeMessage(3,Ge,q.layers[ue])}(se,$),$.finish()}function Ge(se,$){var q;$.writeVarintField(15,se.version||1),$.writeStringField(1,se.name||""),$.writeVarintField(5,se.extent||4096);var re={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<se.length;q++)re.feature=se.feature(q),$.writeMessage(2,Ji,re);var ue=re.keys;for(q=0;q<ue.length;q++)$.writeStringField(3,ue[q]);var we=re.values;for(q=0;q<we.length;q++)$.writeMessage(4,Xo,we[q])}function Ji(se,$){var q=se.feature;void 0!==q.id&&$.writeVarintField(1,q.id),$.writeMessage(2,er,se),$.writeVarintField(3,q.type),$.writeMessage(4,In,q)}function er(se,$){var q=se.feature,re=se.keys,ue=se.values,we=se.keycache,Re=se.valuecache;for(var ke in q.properties){var Te=q.properties[ke],Oe=we[ke];if(null!==Te){void 0===Oe&&(re.push(ke),we[ke]=Oe=re.length-1),$.writeVarint(Oe);var ot=typeof Te;"string"!==ot&&"boolean"!==ot&&"number"!==ot&&(Te=JSON.stringify(Te));var Mt=ot+":"+Te,ut=Re[Mt];void 0===ut&&(ue.push(Te),Re[Mt]=ut=ue.length-1),$.writeVarint(ut)}}}function yn(se,$){return($<<3)+(7&se)}function rr(se){return se<<1^se>>31}function In(se,$){for(var q=se.loadGeometry(),re=se.type,ue=0,we=0,Re=q.length,ke=0;ke<Re;ke++){var Te=q[ke],Oe=1;1===re&&(Oe=Te.length),$.writeVarint(yn(1,Oe));for(var ot=3===re?Te.length-1:Te.length,Mt=0;Mt<ot;Mt++){1===Mt&&1!==re&&$.writeVarint(yn(2,ot-1));var ut=Te[Mt].x-ue,tn=Te[Mt].y-we;$.writeVarint(rr(ut)),$.writeVarint(rr(tn)),ue+=ut,we+=tn}3===re&&$.writeVarint(yn(7,1))}}function Xo(se,$){var q=typeof se;"string"===q?$.writeStringField(1,se):"boolean"===q?$.writeBooleanField(7,se):"number"===q&&(se%1!=0?$.writeDoubleField(3,se):se<0?$.writeSVarintField(6,se):$.writeVarintField(5,se))}function Vs(se,$,q,re,ue,we){if(ue-re<=q)return;const Re=re+ue>>1;bn(se,$,Re,re,ue,we%2),Vs(se,$,q,re,Re-1,we+1),Vs(se,$,q,Re+1,ue,we+1)}function bn(se,$,q,re,ue,we){for(;ue>re;){if(ue-re>600){const Oe=ue-re+1,ot=q-re+1,Mt=Math.log(Oe),ut=.5*Math.exp(2*Mt/3),tn=.5*Math.sqrt(Mt*ut*(Oe-ut)/Oe)*(ot-Oe/2<0?-1:1);bn(se,$,q,Math.max(re,Math.floor(q-ot*ut/Oe+tn)),Math.min(ue,Math.floor(q+(Oe-ot)*ut/Oe+tn)),we)}const Re=$[2*q+we];let ke=re,Te=ue;for(js(se,$,re,q),$[2*ue+we]>Re&&js(se,$,re,ue);ke<Te;){for(js(se,$,ke,Te),ke++,Te--;$[2*ke+we]<Re;)ke++;for(;$[2*Te+we]>Re;)Te--}$[2*re+we]===Re?js(se,$,re,Te):(Te++,js(se,$,Te,ue)),Te<=q&&(re=Te+1),q<=Te&&(ue=Te-1)}}function js(se,$,q,re){cl(se,q,re),cl($,2*q,2*re),cl($,2*q+1,2*re+1)}function cl(se,$,q){const re=se[$];se[$]=se[q],se[q]=re}function Ko(se,$,q,re){const ue=se-q,we=$-re;return ue*ue+we*we}kn.exports=Mi,yt.fromVectorTileJs=Mi,yt.fromGeojsonVt=function(se,$){$=$||{};var q={};for(var re in se)q[re]=new En(se[re].features,$),q[re].name=re,q[re].version=$.version,q[re].extent=$.extent;return Mi({layers:q})},yt.GeoJSONWrapper=En;const wr=se=>se[0],Gn=se=>se[1];class ca{constructor($,q=wr,re=Gn,ue=64,we=Float64Array){this.nodeSize=ue,this.points=$;const Re=$.length<65536?Uint16Array:Uint32Array,ke=this.ids=new Re($.length),Te=this.coords=new we(2*$.length);for(let Oe=0;Oe<$.length;Oe++)ke[Oe]=Oe,Te[2*Oe]=q($[Oe]),Te[2*Oe+1]=re($[Oe]);Vs(ke,Te,ue,0,ke.length-1,0)}range($,q,re,ue){return function(we,Re,ke,Te,Oe,ot,Mt){const ut=[0,we.length-1,0],tn=[];let Pt,xt;for(;ut.length;){const Zt=ut.pop(),Ln=ut.pop(),li=ut.pop();if(Ln-li<=Mt){for(let vi=li;vi<=Ln;vi++)Pt=Re[2*vi],xt=Re[2*vi+1],Pt>=ke&&Pt<=Oe&&xt>=Te&&xt<=ot&&tn.push(we[vi]);continue}const on=Math.floor((li+Ln)/2);Pt=Re[2*on],xt=Re[2*on+1],Pt>=ke&&Pt<=Oe&&xt>=Te&&xt<=ot&&tn.push(we[on]);const gi=(Zt+1)%2;(0===Zt?ke<=Pt:Te<=xt)&&(ut.push(li),ut.push(on-1),ut.push(gi)),(0===Zt?Oe>=Pt:ot>=xt)&&(ut.push(on+1),ut.push(Ln),ut.push(gi))}return tn}(this.ids,this.coords,$,q,re,ue,this.nodeSize)}within($,q,re){return function(ue,we,Re,ke,Te,Oe){const ot=[0,ue.length-1,0],Mt=[],ut=Te*Te;for(;ot.length;){const tn=ot.pop(),Pt=ot.pop(),xt=ot.pop();if(Pt-xt<=Oe){for(let gi=xt;gi<=Pt;gi++)Ko(we[2*gi],we[2*gi+1],Re,ke)<=ut&&Mt.push(ue[gi]);continue}const Zt=Math.floor((xt+Pt)/2),Ln=we[2*Zt],li=we[2*Zt+1];Ko(Ln,li,Re,ke)<=ut&&Mt.push(ue[Zt]);const on=(tn+1)%2;(0===tn?Re-Te<=Ln:ke-Te<=li)&&(ot.push(xt),ot.push(Zt-1),ot.push(on)),(0===tn?Re+Te>=Ln:ke+Te>=li)&&(ot.push(Zt+1),ot.push(Pt),ot.push(on))}return Mt}(this.ids,this.coords,$,q,re,this.nodeSize)}}const Yi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:se=>se},ho=Math.fround||(mi=new Float32Array(1),se=>(mi[0]=+se,mi[0]));var mi;class Qn{constructor($){this.options=ko(Object.create(Yi),$),this.trees=new Array(this.options.maxZoom+1)}load($){const{log:q,minZoom:re,maxZoom:ue,nodeSize:we}=this.options;q&&console.time("total time");const Re=`prepare ${$.length} points`;q&&console.time(Re),this.points=$;let ke=[];for(let Te=0;Te<$.length;Te++)$[Te].geometry&&ke.push(Gt($[Te],Te));this.trees[ue+1]=new ca(ke,Lr,Ro,we,Float32Array),q&&console.timeEnd(Re);for(let Te=ue;Te>=re;Te--){const Oe=+Date.now();ke=this._cluster(ke,Te),this.trees[Te]=new ca(ke,Lr,Ro,we,Float32Array),q&&console.log("z%d: %d clusters in %dms",Te,ke.length,+Date.now()-Oe)}return q&&console.timeEnd("total time"),this}getClusters($,q){let re=(($[0]+180)%360+360)%360-180;const ue=Math.max(-90,Math.min(90,$[1]));let we=180===$[2]?180:(($[2]+180)%360+360)%360-180;const Re=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)re=-180,we=180;else if(re>we){const ot=this.getClusters([re,ue,180,Re],q),Mt=this.getClusters([-180,ue,we,Re],q);return ot.concat(Mt)}const ke=this.trees[this._limitZoom(q)],Te=ke.range(bo(re),Mo(Re),bo(we),Mo(ue)),Oe=[];for(const ot of Te){const Mt=ke.points[ot];Oe.push(Mt.numPoints?Qo(Mt):this.points[Mt.index])}return Oe}getChildren($){const q=this._getOriginId($),re=this._getOriginZoom($),ue="No cluster with the specified id.",we=this.trees[re];if(!we)throw new Error(ue);const Re=we.points[q];if(!Re)throw new Error(ue);const ke=this.options.radius/(this.options.extent*Math.pow(2,re-1)),Te=we.within(Re.x,Re.y,ke),Oe=[];for(const ot of Te){const Mt=we.points[ot];Mt.parentId===$&&Oe.push(Mt.numPoints?Qo(Mt):this.points[Mt.index])}if(0===Oe.length)throw new Error(ue);return Oe}getLeaves($,q,re){const ue=[];return this._appendLeaves(ue,$,q=q||10,re=re||0,0),ue}getTile($,q,re){const ue=this.trees[this._limitZoom($)],we=Math.pow(2,$),{extent:Re,radius:ke}=this.options,Te=ke/Re,Oe=(re-Te)/we,ot=(re+1+Te)/we,Mt={features:[]};return this._addTileFeatures(ue.range((q-Te)/we,Oe,(q+1+Te)/we,ot),ue.points,q,re,we,Mt),0===q&&this._addTileFeatures(ue.range(1-Te/we,Oe,1,ot),ue.points,we,re,we,Mt),q===we-1&&this._addTileFeatures(ue.range(0,Oe,Te/we,ot),ue.points,-1,re,we,Mt),Mt.features.length?Mt:null}getClusterExpansionZoom($){let q=this._getOriginZoom($)-1;for(;q<=this.options.maxZoom;){const re=this.getChildren($);if(q++,1!==re.length)break;$=re[0].properties.cluster_id}return q}_appendLeaves($,q,re,ue,we){const Re=this.getChildren(q);for(const ke of Re){const Te=ke.properties;if(Te&&Te.cluster?we+Te.point_count<=ue?we+=Te.point_count:we=this._appendLeaves($,Te.cluster_id,re,ue,we):we<ue?we++:$.push(ke),$.length===re)break}return we}_addTileFeatures($,q,re,ue,we,Re){for(const ke of $){const Te=q[ke],Oe=Te.numPoints;let ot,Mt,ut;if(Oe)ot=Jn(Te),Mt=Te.x,ut=Te.y;else{const xt=this.points[Te.index];ot=xt.properties,Mt=bo(xt.geometry.coordinates[0]),ut=Mo(xt.geometry.coordinates[1])}const tn={type:1,geometry:[[Math.round(this.options.extent*(Mt*we-re)),Math.round(this.options.extent*(ut*we-ue))]],tags:ot};let Pt;Oe?Pt=Te.id:this.options.generateId?Pt=Te.index:this.points[Te.index].id&&(Pt=this.points[Te.index].id),void 0!==Pt&&(tn.id=Pt),Re.features.push(tn)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(Math.floor(+$),this.options.maxZoom+1))}_cluster($,q){const re=[],{radius:ue,extent:we,reduce:Re,minPoints:ke}=this.options,Te=ue/(we*Math.pow(2,q));for(let Oe=0;Oe<$.length;Oe++){const ot=$[Oe];if(ot.zoom<=q)continue;ot.zoom=q;const Mt=this.trees[q+1],ut=Mt.within(ot.x,ot.y,Te),tn=ot.numPoints||1;let Pt=tn;for(const xt of ut){const Zt=Mt.points[xt];Zt.zoom>q&&(Pt+=Zt.numPoints||1)}if(Pt>tn&&Pt>=ke){let xt=ot.x*tn,Zt=ot.y*tn,Ln=Re&&tn>1?this._map(ot,!0):null;const li=(Oe<<5)+(q+1)+this.points.length;for(const on of ut){const gi=Mt.points[on];if(gi.zoom<=q)continue;gi.zoom=q;const vi=gi.numPoints||1;xt+=gi.x*vi,Zt+=gi.y*vi,gi.parentId=li,Re&&(Ln||(Ln=this._map(ot,!0)),Re(Ln,this._map(gi)))}ot.parentId=li,re.push(ul(xt/Pt,Zt/Pt,li,Pt,Ln))}else if(re.push(ot),Pt>1)for(const xt of ut){const Zt=Mt.points[xt];Zt.zoom<=q||(Zt.zoom=q,re.push(Zt))}}return re}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,q){if($.numPoints)return q?ko({},$.properties):$.properties;const re=this.points[$.index].properties,ue=this.options.map(re);return q&&ue===re?ko({},ue):ue}}function ul(se,$,q,re,ue){return{x:ho(se),y:ho($),zoom:1/0,id:q,parentId:-1,numPoints:re,properties:ue}}function Gt(se,$){const[q,re]=se.geometry.coordinates;return{x:ho(bo(q)),y:ho(Mo(re)),zoom:1/0,index:$,parentId:-1}}function Qo(se){return{type:"Feature",id:se.id,properties:Jn(se),geometry:{type:"Point",coordinates:[($=se.x,360*($-.5)),Ac(se.y)]}};var $}function Jn(se){const $=se.numPoints,q=$>=1e4?`${Math.round($/1e3)}k`:$>=1e3?Math.round($/100)/10+"k":$;return ko(ko({},se.properties),{cluster:!0,cluster_id:se.id,point_count:$,point_count_abbreviated:q})}function bo(se){return se/360+.5}function Mo(se){const $=Math.sin(se*Math.PI/180),q=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return q<0?0:q>1?1:q}function Ac(se){const $=(180-360*se)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function ko(se,$){for(const q in $)se[q]=$[q];return se}function Lr(se){return se.x}function Ro(se){return se.y}function Mc(se,$,q,re){for(var ue,we=re,Re=q-$>>1,ke=q-$,Te=se[$],Oe=se[$+1],ot=se[q],Mt=se[q+1],ut=$+3;ut<q;ut+=3){var tn=mr(se[ut],se[ut+1],Te,Oe,ot,Mt);if(tn>we)ue=ut,we=tn;else if(tn===we){var Pt=Math.abs(ut-Re);Pt<ke&&(ue=ut,ke=Pt)}}we>re&&(ue-$>3&&Mc(se,$,ue,re),se[ue+2]=we,q-ue>3&&Mc(se,ue,q,re))}function mr(se,$,q,re,ue,we){var Re=ue-q,ke=we-re;if(0!==Re||0!==ke){var Te=((se-q)*Re+($-re)*ke)/(Re*Re+ke*ke);Te>1?(q=ue,re=we):Te>0&&(q+=Re*Te,re+=ke*Te)}return(Re=se-q)*Re+(ke=$-re)*ke}function hs(se,$,q,re){var ue={id:void 0===se?null:se,type:$,geometry:q,tags:re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(we){var Re=we.geometry,ke=we.type;if("Point"===ke||"MultiPoint"===ke||"LineString"===ke)Ma(we,Re);else if("Polygon"===ke||"MultiLineString"===ke)for(var Te=0;Te<Re.length;Te++)Ma(we,Re[Te]);else if("MultiPolygon"===ke)for(Te=0;Te<Re.length;Te++)for(var Oe=0;Oe<Re[Te].length;Oe++)Ma(we,Re[Te][Oe])}(ue),ue}function Ma(se,$){for(var q=0;q<$.length;q+=3)se.minX=Math.min(se.minX,$[q]),se.minY=Math.min(se.minY,$[q+1]),se.maxX=Math.max(se.maxX,$[q]),se.maxY=Math.max(se.maxY,$[q+1])}function dl(se,$,q,re){if($.geometry){var ue=$.geometry.coordinates,we=$.geometry.type,Re=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2),ke=[],Te=$.id;if(q.promoteId?Te=$.properties[q.promoteId]:q.generateId&&(Te=re||0),"Point"===we)Wn(ue,ke);else if("MultiPoint"===we)for(var Oe=0;Oe<ue.length;Oe++)Wn(ue[Oe],ke);else if("LineString"===we)ro(ue,ke,Re,!1);else if("MultiLineString"===we){if(q.lineMetrics){for(Oe=0;Oe<ue.length;Oe++)ro(ue[Oe],ke=[],Re,!1),se.push(hs(Te,"LineString",ke,$.properties));return}vo(ue,ke,Re,!1)}else if("Polygon"===we)vo(ue,ke,Re,!0);else{if("MultiPolygon"!==we){if("GeometryCollection"===we){for(Oe=0;Oe<$.geometry.geometries.length;Oe++)dl(se,{id:Te,geometry:$.geometry.geometries[Oe],properties:$.properties},q,re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Oe=0;Oe<ue.length;Oe++){var ot=[];vo(ue[Oe],ot,Re,!0),ke.push(ot)}}se.push(hs(Te,we,ke,$.properties))}}function Wn(se,$){$.push(Is(se[0])),$.push(fr(se[1])),$.push(0)}function ro(se,$,q,re){for(var ue,we,Re=0,ke=0;ke<se.length;ke++){var Te=Is(se[ke][0]),Oe=fr(se[ke][1]);$.push(Te),$.push(Oe),$.push(0),ke>0&&(Re+=re?(ue*Oe-Te*we)/2:Math.sqrt(Math.pow(Te-ue,2)+Math.pow(Oe-we,2))),ue=Te,we=Oe}var ot=$.length-3;$[2]=1,Mc($,0,ot,q),$[ot+2]=1,$.size=Math.abs(Re),$.start=0,$.end=$.size}function vo(se,$,q,re){for(var ue=0;ue<se.length;ue++){var we=[];ro(se[ue],we,q,re),$.push(we)}}function Is(se){return se/360+.5}function fr(se){var $=Math.sin(se*Math.PI/180),q=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return q<0?0:q>1?1:q}function Vi(se,$,q,re,ue,we,Re,ke){if(re/=$,we>=(q/=$)&&Re<re)return se;if(Re<q||we>=re)return null;for(var Te=[],Oe=0;Oe<se.length;Oe++){var ot=se[Oe],Mt=ot.geometry,ut=ot.type,tn=0===ue?ot.minX:ot.minY,Pt=0===ue?ot.maxX:ot.maxY;if(tn>=q&&Pt<re)Te.push(ot);else if(!(Pt<q||tn>=re)){var xt=[];if("Point"===ut||"MultiPoint"===ut)Ul(Mt,xt,q,re,ue);else if("LineString"===ut)Zr(Mt,xt,q,re,ue,!1,ke.lineMetrics);else if("MultiLineString"===ut)kc(Mt,xt,q,re,ue,!1);else if("Polygon"===ut)kc(Mt,xt,q,re,ue,!0);else if("MultiPolygon"===ut)for(var Zt=0;Zt<Mt.length;Zt++){var Ln=[];kc(Mt[Zt],Ln,q,re,ue,!0),Ln.length&&xt.push(Ln)}if(xt.length){if(ke.lineMetrics&&"LineString"===ut){for(Zt=0;Zt<xt.length;Zt++)Te.push(hs(ot.id,ut,xt[Zt],ot.tags));continue}"LineString"!==ut&&"MultiLineString"!==ut||(1===xt.length?(ut="LineString",xt=xt[0]):ut="MultiLineString"),"Point"!==ut&&"MultiPoint"!==ut||(ut=3===xt.length?"Point":"MultiPoint"),Te.push(hs(ot.id,ut,xt,ot.tags))}}}return Te.length?Te:null}function Ul(se,$,q,re,ue){for(var we=0;we<se.length;we+=3){var Re=se[we+ue];Re>=q&&Re<=re&&($.push(se[we]),$.push(se[we+1]),$.push(se[we+2]))}}function Zr(se,$,q,re,ue,we,Re){for(var ke,Te,Oe=Er(se),ot=0===ue?hl:ua,Mt=se.start,ut=0;ut<se.length-3;ut+=3){var tn=se[ut],Pt=se[ut+1],xt=se[ut+2],Zt=se[ut+3],Ln=se[ut+4],li=0===ue?tn:Pt,on=0===ue?Zt:Ln,gi=!1;Re&&(ke=Math.sqrt(Math.pow(tn-Zt,2)+Math.pow(Pt-Ln,2))),li<q?on>q&&(Te=ot(Oe,tn,Pt,Zt,Ln,q),Re&&(Oe.start=Mt+ke*Te)):li>re?on<re&&(Te=ot(Oe,tn,Pt,Zt,Ln,re),Re&&(Oe.start=Mt+ke*Te)):ka(Oe,tn,Pt,xt),on<q&&li>=q&&(Te=ot(Oe,tn,Pt,Zt,Ln,q),gi=!0),on>re&&li<=re&&(Te=ot(Oe,tn,Pt,Zt,Ln,re),gi=!0),!we&&gi&&(Re&&(Oe.end=Mt+ke*Te),$.push(Oe),Oe=Er(se)),Re&&(Mt+=ke)}var vi=se.length-3;tn=se[vi],Pt=se[vi+1],xt=se[vi+2],(li=0===ue?tn:Pt)>=q&&li<=re&&ka(Oe,tn,Pt,xt),vi=Oe.length-3,we&&vi>=3&&(Oe[vi]!==Oe[0]||Oe[vi+1]!==Oe[1])&&ka(Oe,Oe[0],Oe[1],Oe[2]),Oe.length&&$.push(Oe)}function Er(se){var $=[];return $.size=se.size,$.start=se.start,$.end=se.end,$}function kc(se,$,q,re,ue,we){for(var Re=0;Re<se.length;Re++)Zr(se[Re],$,q,re,ue,we,!1)}function ka(se,$,q,re){se.push($),se.push(q),se.push(re)}function hl(se,$,q,re,ue,we){var Re=(we-$)/(re-$);return se.push(we),se.push(q+(ue-q)*Re),se.push(1),Re}function ua(se,$,q,re,ue,we){var Re=(we-q)/(ue-q);return se.push($+(re-$)*Re),se.push(we),se.push(1),Re}function Rc(se,$){for(var q=[],re=0;re<se.length;re++){var ue,we=se[re],Re=we.type;if("Point"===Re||"MultiPoint"===Re||"LineString"===Re)ue=Ra(we.geometry,$);else if("MultiLineString"===Re||"Polygon"===Re){ue=[];for(var ke=0;ke<we.geometry.length;ke++)ue.push(Ra(we.geometry[ke],$))}else if("MultiPolygon"===Re)for(ue=[],ke=0;ke<we.geometry.length;ke++){for(var Te=[],Oe=0;Oe<we.geometry[ke].length;Oe++)Te.push(Ra(we.geometry[ke][Oe],$));ue.push(Te)}q.push(hs(we.id,Re,ue,we.tags))}return q}function Ra(se,$){var q=[];q.size=se.size,void 0!==se.start&&(q.start=se.start,q.end=se.end);for(var re=0;re<se.length;re+=3)q.push(se[re]+$,se[re+1],se[re+2]);return q}function Ds(se,$){if(se.transformed)return se;var q,re,ue,we=1<<se.z,Re=se.x,ke=se.y;for(q=0;q<se.features.length;q++){var Te=se.features[q],Oe=Te.geometry,ot=Te.type;if(Te.geometry=[],1===ot)for(re=0;re<Oe.length;re+=2)Te.geometry.push(Dn(Oe[re],Oe[re+1],$,we,Re,ke));else for(re=0;re<Oe.length;re++){var Mt=[];for(ue=0;ue<Oe[re].length;ue+=2)Mt.push(Dn(Oe[re][ue],Oe[re][ue+1],$,we,Re,ke));Te.geometry.push(Mt)}}return se.transformed=!0,se}function Dn(se,$,q,re,ue,we){return[Math.round(q*(se*re-ue)),Math.round(q*($*re-we))]}function ku(se,$,q,re,ue){for(var we=$===ue.maxZoom?0:ue.tolerance/((1<<$)*ue.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:q,y:re,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ke=0;ke<se.length;ke++){Re.numFeatures++,Ud(Re,se[ke],we,ue);var Te=se[ke].minX,Oe=se[ke].minY,ot=se[ke].maxX,Mt=se[ke].maxY;Te<Re.minX&&(Re.minX=Te),Oe<Re.minY&&(Re.minY=Oe),ot>Re.maxX&&(Re.maxX=ot),Mt>Re.maxY&&(Re.maxY=Mt)}return Re}function Ud(se,$,q,re){var ue=$.geometry,we=$.type,Re=[];if("Point"===we||"MultiPoint"===we)for(var ke=0;ke<ue.length;ke+=3)Re.push(ue[ke]),Re.push(ue[ke+1]),se.numPoints++,se.numSimplified++;else if("LineString"===we)Pa(Re,ue,se,q,!1,!1);else if("MultiLineString"===we||"Polygon"===we)for(ke=0;ke<ue.length;ke++)Pa(Re,ue[ke],se,q,"Polygon"===we,0===ke);else if("MultiPolygon"===we)for(var Te=0;Te<ue.length;Te++){var Oe=ue[Te];for(ke=0;ke<Oe.length;ke++)Pa(Re,Oe[ke],se,q,!0,0===ke)}if(Re.length){var ot=$.tags||null;if("LineString"===we&&re.lineMetrics){for(var Mt in ot={},$.tags)ot[Mt]=$.tags[Mt];ot.mapbox_clip_start=ue.start/ue.size,ot.mapbox_clip_end=ue.end/ue.size}var ut={geometry:Re,type:"Polygon"===we||"MultiPolygon"===we?3:"LineString"===we||"MultiLineString"===we?2:1,tags:ot};null!==$.id&&(ut.id=$.id),se.features.push(ut)}}function Pa(se,$,q,re,ue,we){var Re=re*re;if(re>0&&$.size<(ue?Re:re))q.numPoints+=$.length/3;else{for(var ke=[],Te=0;Te<$.length;Te+=3)(0===re||$[Te+2]>Re)&&(q.numSimplified++,ke.push($[Te]),ke.push($[Te+1])),q.numPoints++;ue&&function(Oe,ot){for(var Mt=0,ut=0,tn=Oe.length,Pt=tn-2;ut<tn;Pt=ut,ut+=2)Mt+=(Oe[ut]-Oe[Pt])*(Oe[ut+1]+Oe[Pt+1]);if(Mt>0===ot)for(ut=0,tn=Oe.length;ut<tn/2;ut+=2){var xt=Oe[ut],Zt=Oe[ut+1];Oe[ut]=Oe[tn-2-ut],Oe[ut+1]=Oe[tn-1-ut],Oe[tn-2-ut]=xt,Oe[tn-1-ut]=Zt}}(ke,we),se.push(ke)}}function Oa(se,$){var q=($=this.options=function(ue,we){for(var Re in we)ue[Re]=we[Re];return ue}(Object.create(this.options),$)).debug;if(q&&console.time("preprocess data"),$.maxZoom<0||$.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");var ue,we,Re,ke,Te,Oe,re=function(ue,we){var Re=[];if("FeatureCollection"===ue.type)for(var ke=0;ke<ue.features.length;ke++)dl(Re,ue.features[ke],we,ke);else dl(Re,"Feature"===ue.type?ue:{geometry:ue},we);return Re}(se,$);this.tiles={},this.tileCoords=[],q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ke=ue=re,Te=Vi(ue,1,-1-(Re=(we=$).buffer/we.extent),Re,0,-1,2,we),Oe=Vi(ue,1,1-Re,2+Re,0,-1,2,we),(Te||Oe)&&(ke=Vi(ue,1,-Re,1+Re,0,-1,2,we)||[],Te&&(ke=Rc(Te,1).concat(ke)),Oe&&(ke=ke.concat(Rc(Oe,-1)))),(re=ke).length&&this.splitTile(re,0,0,0),q&&(re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Cr(se,$,q){return 32*((1<<se)*q+$)+se}function da(se,$){const q=se.tileID.canonical;if(!this._geoJSONIndex)return $(null,null);const re=this._geoJSONIndex.getTile(q.z,q.x,q.y);if(!re)return $(null,null);const ue=new Nt(re.features);let we=yt(ue);0===we.byteOffset&&we.byteLength===we.buffer.byteLength||(we=new Uint8Array(we)),$(null,{vectorTile:ue,rawData:we.buffer})}Oa.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Oa.prototype.splitTile=function(se,$,q,re,ue,we,Re){for(var ke=[se,$,q,re],Te=this.options,Oe=Te.debug;ke.length;){re=ke.pop(),q=ke.pop(),$=ke.pop(),se=ke.pop();var ot=1<<$,Mt=Cr($,q,re),ut=this.tiles[Mt];if(!ut&&(Oe>1&&console.time("creation"),ut=this.tiles[Mt]=ku(se,$,q,re,Te),this.tileCoords.push({z:$,x:q,y:re}),Oe)){Oe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,q,re,ut.numFeatures,ut.numPoints,ut.numSimplified),console.timeEnd("creation"));var tn="z"+$;this.stats[tn]=(this.stats[tn]||0)+1,this.total++}if(ut.source=se,ue){if($===Te.maxZoom||$===ue)continue;var Pt=1<<ue-$;if(q!==Math.floor(we/Pt)||re!==Math.floor(Re/Pt))continue}else if($===Te.indexMaxZoom||ut.numPoints<=Te.indexMaxPoints)continue;if(ut.source=null,0!==se.length){Oe>1&&console.time("clipping");var xt,Zt,Ln,li,on,gi,vi=.5*Te.buffer/Te.extent,Po=.5-vi,Jo=.5+vi,Ye=1+vi;xt=Zt=Ln=li=null,on=Vi(se,ot,q-vi,q+Jo,0,ut.minX,ut.maxX,Te),gi=Vi(se,ot,q+Po,q+Ye,0,ut.minX,ut.maxX,Te),se=null,on&&(xt=Vi(on,ot,re-vi,re+Jo,1,ut.minY,ut.maxY,Te),Zt=Vi(on,ot,re+Po,re+Ye,1,ut.minY,ut.maxY,Te),on=null),gi&&(Ln=Vi(gi,ot,re-vi,re+Jo,1,ut.minY,ut.maxY,Te),li=Vi(gi,ot,re+Po,re+Ye,1,ut.minY,ut.maxY,Te),gi=null),Oe>1&&console.timeEnd("clipping"),ke.push(xt||[],$+1,2*q,2*re),ke.push(Zt||[],$+1,2*q,2*re+1),ke.push(Ln||[],$+1,2*q+1,2*re),ke.push(li||[],$+1,2*q+1,2*re+1)}}},Oa.prototype.getTile=function(se,$,q){var re=this.options,ue=re.extent,we=re.debug;if(se<0||se>24)return null;var Re=1<<se,ke=Cr(se,$=($%Re+Re)%Re,q);if(this.tiles[ke])return Ds(this.tiles[ke],ue);we>1&&console.log("drilling down to z%d-%d-%d",se,$,q);for(var Te,Oe=se,ot=$,Mt=q;!Te&&Oe>0;)Oe--,ot=Math.floor(ot/2),Mt=Math.floor(Mt/2),Te=this.tiles[Cr(Oe,ot,Mt)];return Te&&Te.source?(we>1&&console.log("found parent tile z%d-%d-%d",Oe,ot,Mt),we>1&&console.time("drilling down"),this.splitTile(Te.source,Oe,ot,Mt,se,$,q),we>1&&console.timeEnd("drilling down"),this.tiles[ke]?Ds(this.tiles[ke],ue):null):null};class Pc extends f.VectorTileWorkerSource{constructor($,q,re,ue,we){super($,q,re,ue,da),we&&(this.loadGeoJSON=we)}loadData($,q){const re=$&&$.request,ue=re&&re.collectResourceTiming;this.loadGeoJSON($,(we,Re)=>{if(we||!Re)return q(we);if("object"!=typeof Re)return q(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`));{qe(Re,!0);try{if($.filter){const Te=f.createExpression($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Te.result)throw new Error(Te.value.map(ot=>`${ot.key}: ${ot.message}`).join(", "));Re={type:"FeatureCollection",features:Re.features.filter(ot=>Te.value.evaluate({zoom:0},ot))}}this._geoJSONIndex=$.cluster?new Qn(function({superclusterOptions:Te,clusterProperties:Oe}){if(!Oe||!Te)return Te;const ot={},Mt={},ut={accumulated:null,zoom:0},tn={properties:null},Pt=Object.keys(Oe);for(const xt of Pt){const[Zt,Ln]=Oe[xt],li=f.createExpression(Ln),on=f.createExpression("string"==typeof Zt?[Zt,["accumulated"],["get",xt]]:Zt);ot[xt]=li.value,Mt[xt]=on.value}return Te.map=xt=>{tn.properties=xt;const Zt={};for(const Ln of Pt)Zt[Ln]=ot[Ln].evaluate(ut,tn);return Zt},Te.reduce=(xt,Zt)=>{tn.properties=Zt;for(const Ln of Pt)ut.accumulated=xt[Ln],xt[Ln]=Mt[Ln].evaluate(ut,tn)},Te}($)).load(Re.features):new Oa(Te=Re,$.geojsonVtOptions)}catch(Te){return q(Te)}this.loaded={};const ke={};if(ue){const Te=f.getPerformanceMeasurement(re);Te&&(ke.resourceTiming={},ke.resourceTiming[$.source]=JSON.parse(JSON.stringify(Te)))}q(null,ke)}var Te})}reloadTile($,q){const re=this.loaded;return re&&re[$.uid]?super.reloadTile($,q):this.loadTile($,q)}loadGeoJSON($,q){if($.request)f.getJSON($.request,q);else{if("string"!=typeof $.data)return q(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`));try{return q(null,JSON.parse($.data))}catch{return q(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom($,q){try{q(null,this._geoJSONIndex.getClusterExpansionZoom($.clusterId))}catch(re){q(re)}}getClusterChildren($,q){try{q(null,this._geoJSONIndex.getChildren($.clusterId))}catch(re){q(re)}}getClusterLeaves($,q){try{q(null,this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset))}catch(re){q(re)}}}class fl{constructor($){this.self=$,this.actor=new f.Actor($,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=f.getProjection({name:"mercator"}),this.workerSourceTypes={vector:f.VectorTileWorkerSource,geojson:Pc},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(q,re)=>{if(this.workerSourceTypes[q])throw new Error(`Worker source with name "${q}" already registered.`);this.workerSourceTypes[q]=re},this.self.registerRTLTextPlugin=q=>{if(f.plugin.isParsed())throw new Error("RTL text plugin already registered.");f.plugin.applyArabicShaping=q.applyArabicShaping,f.plugin.processBidirectionalText=q.processBidirectionalText,f.plugin.processStyledBidirectionalText=q.processStyledBidirectionalText}}clearCaches($,q,re){delete this.layerIndexes[$],delete this.availableImages[$],delete this.workerSources[$],delete this.demWorkerSources[$],re()}checkIfReady($,q,re){re()}setReferrer($,q){this.referrer=q}spriteLoaded($,q){this.isSpriteLoaded[$]=q;for(const re in this.workerSources[$]){const ue=this.workerSources[$][re];for(const we in ue)ue[we]instanceof f.VectorTileWorkerSource&&(ue[we].isSpriteLoaded=q,ue[we].fire(new f.Event("isSpriteLoaded")))}}setImages($,q,re){this.availableImages[$]=q;for(const ue in this.workerSources[$]){const we=this.workerSources[$][ue];for(const Re in we)we[Re].availableImages=q}re()}enableTerrain($,q,re){this.terrain=q,re()}setProjection($,q){this.projections[$]=f.getProjection(q)}setLayers($,q,re){this.getLayerIndex($).replace(q),re()}updateLayers($,q,re){this.getLayerIndex($).update(q.layers,q.removedIds),re()}loadTile($,q,re){const ue=this.enableTerrain?f.extend({enableTerrain:this.terrain},q):q;ue.projection=this.projections[$]||this.defaultProjection,this.getWorkerSource($,q.type,q.source).loadTile(ue,re)}loadDEMTile($,q,re){const ue=this.enableTerrain?f.extend({buildQuadTree:this.terrain},q):q;this.getDEMWorkerSource($,q.source).loadTile(ue,re)}reloadTile($,q,re){const ue=this.enableTerrain?f.extend({enableTerrain:this.terrain},q):q;ue.projection=this.projections[$]||this.defaultProjection,this.getWorkerSource($,q.type,q.source).reloadTile(ue,re)}abortTile($,q,re){this.getWorkerSource($,q.type,q.source).abortTile(q,re)}removeTile($,q,re){this.getWorkerSource($,q.type,q.source).removeTile(q,re)}removeSource($,q,re){if(!this.workerSources[$]||!this.workerSources[$][q.type]||!this.workerSources[$][q.type][q.source])return;const ue=this.workerSources[$][q.type][q.source];delete this.workerSources[$][q.type][q.source],void 0!==ue.removeSource?ue.removeSource(q,re):re()}loadWorkerSource($,q,re){try{this.self.importScripts(q.url),re()}catch(ue){re(ue.toString())}}syncRTLPluginState($,q,re){try{f.plugin.setState(q);const ue=f.plugin.getPluginURL();if(f.plugin.isLoaded()&&!f.plugin.isParsed()&&null!=ue){this.self.importScripts(ue);const we=f.plugin.isParsed();re(we?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ue}`),we)}}catch(ue){re(ue.toString())}}getAvailableImages($){let q=this.availableImages[$];return q||(q=[]),q}getLayerIndex($){let q=this.layerIndexes[$];return q||(q=this.layerIndexes[$]=new qt),q}getWorkerSource($,q,re){return this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][q]||(this.workerSources[$][q]={}),this.workerSources[$][q][re]||(this.workerSources[$][q][re]=new this.workerSourceTypes[q]({send:(we,Re,ke,Te,Oe,ot)=>{this.actor.send(we,Re,ke,$,Oe,ot)},scheduler:this.actor.scheduler},this.getLayerIndex($),this.getAvailableImages($),this.isSpriteLoaded[$])),this.workerSources[$][q][re]}getDEMWorkerSource($,q){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][q]||(this.demWorkerSources[$][q]=new Dt),this.demWorkerSources[$][q]}enforceCacheSizeLimit($,q){f.enforceCacheSizeLimit(q)}getWorkerPerformanceMetrics($,q,re){re(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new fl(self)),fl}),Un(0,function(f){function Le(m,c){if(Array.isArray(m)){if(!Array.isArray(c)||m.length!==c.length)return!1;for(let h=0;h<m.length;h++)if(!Le(m[h],c[h]))return!1;return!0}if("object"==typeof m&&null!==m&&null!==c){if("object"!=typeof c||Object.keys(m).length!==Object.keys(c).length)return!1;for(const h in m)if(!Le(m[h],c[h]))return!1;return!0}return m===c}var Jt=qt;function qt(m){return c=m,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var x,v,C=new Blob([""],{type:"text/javascript"}),I=URL.createObjectURL(C);try{v=new Worker(I),x=!0}catch{x=!1}return v&&v.terminate(),URL.revokeObjectURL(I),x}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var x=document.createElement("canvas");x.width=x.height=1;var v=x.getContext("2d");if(!v)return!1;var C=v.getImageData(0,0,1,1);return C&&C.width===x.width}()||(void 0===Dt[h=c&&c.failIfMajorPerformanceCaveat]&&(Dt[h]=function(x){var v,I,M,P,C=(I=x,M=document.createElement("canvas"),(P=Object.create(qt.webGLContextAttributes)).failIfMajorPerformanceCaveat=I,M.getContext("webgl",P)||M.getContext("experimental-webgl",P));if(!C)return!1;try{v=C.createShader(C.VERTEX_SHADER)}catch{return!1}return!(!v||C.isContextLost())&&(C.shaderSource(v,"void main() {}"),C.compileShader(v),!0===C.getShaderParameter(v,C.COMPILE_STATUS))}(h)),!Dt[h]||document.documentMode));var c,h}var Dt={};function qe(m,c,h){const x=f.window.document.createElement(m);return void 0!==c&&(x.className=c),h&&h.appendChild(x),x}function wt(m,c,h){const x=f.window.document.createElementNS("http://www.w3.org/2000/svg",m);for(const v of Object.keys(c))x.setAttributeNS(null,v,c[v]);return h&&h.appendChild(x),x}qt.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Ft=f.window.document&&f.window.document.documentElement.style,an=Ft&&void 0!==Ft.userSelect?"userSelect":"WebkitUserSelect";let ai;function Nt(){Ft&&an&&(ai=Ft[an],Ft[an]="none")}function yt(){Ft&&an&&(Ft[an]=ai)}function kn(m){m.preventDefault(),m.stopPropagation(),f.window.removeEventListener("click",kn,!0)}function ln(){f.window.addEventListener("click",kn,!0),f.window.setTimeout(()=>{f.window.removeEventListener("click",kn,!0)},0)}function ft(m,c){const h=m.getBoundingClientRect();return at(m,h,c)}function me(m,c){const h=m.getBoundingClientRect(),x=[];for(let v=0;v<c.length;v++)x.push(at(m,h,c[v]));return x}function De(m){return void 0!==f.window.InstallTrigger&&2===m.button&&m.ctrlKey&&f.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function at(m,c,h){const x=m.offsetWidth===c.width?1:m.offsetWidth/c.width;return new f.pointGeometry((h.clientX-c.left)*x,(h.clientY-c.top)*x)}function Et(m,c){var h=c[0],x=c[1],v=c[2],C=c[3],I=h*C-v*x;return I?(m[0]=C*(I=1/I),m[1]=-x*I,m[2]=-v*I,m[3]=h*I,m):null}function En(m){const{userImage:c}=m;return!!(c&&c.render&&c.render())&&(m.data.replace(new Uint8Array(c.data.buffer)),!0)}class Mi extends f.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new f.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:h,callback:x}of this.requestors)this._notify(h,x);this.requestors=[]}}hasImage(c){return!!this.getImage(c)}getImage(c){return this.images[c]}addImage(c,h){this._validate(c,h)&&(this.images[c]=h)}_validate(c,h){let x=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new f.ErrorEvent(new Error(`Image "${c}" has invalid "stretchX" value`))),x=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new f.ErrorEvent(new Error(`Image "${c}" has invalid "stretchY" value`))),x=!1),this._validateContent(h.content,h)||(this.fire(new f.ErrorEvent(new Error(`Image "${c}" has invalid "content" value`))),x=!1),x}_validateStretch(c,h){if(!c)return!0;let x=0;for(const v of c){if(v[0]<x||v[1]<v[0]||h<v[1])return!1;x=v[1]}return!0}_validateContent(c,h){return!(c&&(4!==c.length||c[0]<0||h.data.width<c[0]||c[1]<0||h.data.height<c[1]||c[2]<0||h.data.width<c[2]||c[3]<0||h.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,h){h.version=this.images[c].version+1,this.images[c]=h,this.updatedImages[c]=!0}removeImage(c){const h=this.images[c];delete this.images[c],delete this.patterns[c],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c,h){let x=!0;if(!this.isLoaded())for(const v of c)this.images[v]||(x=!1);this.isLoaded()||x?this._notify(c,h):this.requestors.push({ids:c,callback:h})}_notify(c,h){const x={};for(const v of c){this.images[v]||this.fire(new f.Event("styleimagemissing",{id:v}));const C=this.images[v];C?x[v]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:!(!C.userImage||!C.userImage.render)}:f.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,x)}getPixelSize(){const{width:c,height:h}=this.atlasImage;return{width:c,height:h}}getPattern(c){const h=this.patterns[c],x=this.getImage(c);if(!x)return null;if(h&&h.position.version===x.version)return h.position;if(h)h.position.version=x.version;else{const v={w:x.data.width+2,h:x.data.height+2,x:0,y:0},C=new f.ImagePosition(v,x);this.patterns[c]={bin:v,position:C}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const h=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new f.Texture(c,this.atlasImage,h.RGBA),this.atlasTexture&&this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const C in this.patterns)c.push(this.patterns[C].bin);const{w:h,h:x}=f.potpack(c),v=this.atlasImage;v.resize({width:h||1,height:x||1});for(const C in this.patterns){const{bin:I}=this.patterns[C],M=I.x+1,P=I.y+1,B=this.images[C].data,z=B.width,H=B.height;f.RGBAImage.copy(B,v,{x:0,y:0},{x:M,y:P},{width:z,height:H}),f.RGBAImage.copy(B,v,{x:0,y:H-1},{x:M,y:P-1},{width:z,height:1}),f.RGBAImage.copy(B,v,{x:0,y:0},{x:M,y:P+H},{width:z,height:1}),f.RGBAImage.copy(B,v,{x:z-1,y:0},{x:M-1,y:P},{width:1,height:H}),f.RGBAImage.copy(B,v,{x:0,y:0},{x:M+z,y:P},{width:1,height:H})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const h of c){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const x=this.images[h];En(x)&&this.updateImage(h,x)}}}const Ge=new f.Properties({anchor:new f.DataConstantProperty(f.spec.light.anchor),position:new class{constructor(){this.specification=f.spec.light.position}possiblyEvaluate(m,c){return function([h,x,v]){const C=f.degToRad(x+90),I=f.degToRad(v);return{x:h*Math.cos(C)*Math.sin(I),y:h*Math.sin(C)*Math.sin(I),z:h*Math.cos(I),azimuthal:x,polar:v}}(m.expression.evaluate(c))}interpolate(m,c,h){return{x:f.number(m.x,c.x,h),y:f.number(m.y,c.y,h),z:f.number(m.z,c.z,h),azimuthal:f.number(m.azimuthal,c.azimuthal,h),polar:f.number(m.polar,c.polar,h)}}},color:new f.DataConstantProperty(f.spec.light.color),intensity:new f.DataConstantProperty(f.spec.light.intensity)}),Ji="-transition";class er extends f.Evented{constructor(c){super(),this._transitionable=new f.Transitionable(Ge),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,h={}){if(!this._validate(f.validateLight,c,h))for(const x in c){const v=c[x];f.endsWith(x,Ji)?this._transitionable.setTransition(x.slice(0,-11),v):this._transitionable.setValue(x,v)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,h,x){return(!x||!1!==x.validate)&&f.emitValidationErrors(this,c.call(f.validateStyle,f.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:f.spec})))}}const yn=new f.Properties({source:new f.DataConstantProperty(f.spec.terrain.source),exaggeration:new f.DataConstantProperty(f.spec.terrain.exaggeration)}),rr="-transition";class In extends f.Evented{constructor(c,h){super(),this._transitionable=new f.Transitionable(yn),this.set(c),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=h}get(){return this._transitionable.serialize()}set(c){for(const h in c){const x=c[h];f.endsWith(h,rr)?this._transitionable.setTransition(h.slice(0,-11),x):this._transitionable.setValue(h,x)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}}function Xo(m,c,h,x){const v=f.smoothstep(45,65,h),[C,I]=Vs(m,x),M=f.length(c);let P=1-Math.min(1,Math.exp((M-C)/(I-C)*-6));return P*=P*P,P=Math.min(1,1.00747*P),P*v*m.alpha}function Vs(m,c){const h=.5/Math.tan(.5*c);return[m.range[0]+h,m.range[1]+h]}const bn=new f.Properties({range:new f.DataConstantProperty(f.spec.fog.range),color:new f.DataConstantProperty(f.spec.fog.color),"high-color":new f.DataConstantProperty(f.spec.fog["high-color"]),"space-color":new f.DataConstantProperty(f.spec.fog["space-color"]),"horizon-blend":new f.DataConstantProperty(f.spec.fog["horizon-blend"]),"star-intensity":new f.DataConstantProperty(f.spec.fog["star-intensity"])}),js="-transition";class cl extends f.Evented{constructor(c,h){super(),this._transitionable=new f.Transitionable(bn),this.set(c),this._transitioning=this._transitionable.untransitioned(),this._transform=h}get state(){const c=this._transform,h="globe"===c.projection.name,x=f.globeToMercatorTransition(c.zoom),v=this.properties.get("range"),C=[.5,3];return{range:h?[f.number(C[0],v[0],x),f.number(C[1],v[1],x)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(c,h={}){if(!this._validate(f.validateFog,c,h)){for(const x of Object.keys(f.spec.fog))c&&void 0===c[x]&&(c[x]=f.spec.fog[x].default);for(const x in c){const v=c[x];f.endsWith(x,js)?this._transitionable.setTransition(x.slice(0,-11),v):this._transitionable.setValue(x,v)}}}getOpacity(c){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:f.smoothstep(45,65,c))*h.a}getOpacityAtLatLng(c,h){return this._transform.projection.supportsFog?function(x,v,C){const I=f.MercatorCoordinate.fromLngLat(v),M=C.elevation?C.elevation.getAtPointOrZero(I):0,P=[I.x,I.y,M];return f.transformMat4(P,P,C.mercatorFogMatrix),Xo(x,P,C.pitch,C._fov)}(this.state,c,h):0}getFovAdjustedRange(c){return this._transform.projection.supportsFog?Vs(this.state,c):[0,1]}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,h,x){return(!x||!1!==x.validate)&&f.emitValidationErrors(this,c.call(f.validateStyle,f.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:f.spec})))}}class Ko{constructor(c,h){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=f.uniqueId();const x=this.workerPool.acquire(this.id);for(let v=0;v<x.length;v++){const C=new Ko.Actor(x[v],h,this.id);C.name=`Worker ${v}`,this.actors.push(C)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(c,h,x){f.asyncAll(this.actors,(v,C)=>{v.send(c,h,C)},x=x||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(c=>{c.remove()}),this.actors=[],this.workerPool.release(this.id)}}function wr(m,c,h){return c*(f.EXTENT/(m.tileSize*Math.pow(2,h-m.tileID.overscaledZ)))}Ko.Actor=f.Actor;class Gn{constructor(c,h,x,v){this.screenBounds=c,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=x,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(c,h){let x,v;if(c instanceof f.pointGeometry||"number"==typeof c[0]){const C=f.pointGeometry.convert(c);x=[C],v=h.isPointAboveHorizon(C)}else{const C=f.pointGeometry.convert(c[0]),I=f.pointGeometry.convert(c[1]);x=[C,I],v=f.polygonizeBounds(C,I).every(M=>h.isPointAboveHorizon(M))}return new Gn(x,h.getCameraPoint(),v,h)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(c){return f.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],c)}bufferedCameraGeometry(c){const h=this.screenBounds[0],x=1===this.screenBounds.length?this.screenBounds[0].add(new f.pointGeometry(1,1)):this.screenBounds[1],v=f.polygonizeBounds(h,x,0,!1);return this.cameraPoint.y>x.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<x.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=x.x?v[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(v[3]=this.cameraPoint)),f.bufferConvexPolygon(v,c)}bufferedCameraGeometryGlobe(c){const h=this.screenBounds[0],x=1===this.screenBounds.length?this.screenBounds[0].add(new f.pointGeometry(1,1)):this.screenBounds[1],v=f.polygonizeBounds(h,x,c),C=this.cameraPoint.clone();switch(3*((C.y>h.y)+(C.y>x.y))+((C.x>h.x)+(C.x>x.x))){case 0:v[0]=C,v[4]=C.clone();break;case 1:v.splice(1,0,C);break;case 2:v[1]=C;break;case 3:v.splice(4,0,C);break;case 5:v.splice(2,0,C);break;case 6:v[3]=C;break;case 7:v.splice(3,0,C);break;case 8:v[2]=C}return v}containsTile(c,h,x,v=0){const C=c.queryPadding/h._pixelsPerMercatorPixel+1,I=x?this._bufferedCameraMercator(C,h):this._bufferedScreenMercator(C,h);let M=c.tileID.wrap+(I.unwrapped?v:0);const P=I.polygon.map(ne=>f.getTilePoint(c.tileTransform,ne,M));if(!f.polygonIntersectsBox(P,0,0,f.EXTENT,f.EXTENT))return;M=c.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const B=this.screenGeometryMercator.polygon.map(ne=>f.getTileVec3(c.tileTransform,ne,M)),z=B.map(ne=>new f.pointGeometry(ne[0],ne[1])),H=h.getFreeCameraOptions().position||new f.MercatorCoordinate(0,0,0),K=f.getTileVec3(c.tileTransform,H,M),J=B.map(ne=>{const Y=f.sub(ne,ne,K);return f.normalize(Y,Y),new f.Ray(K,Y)}),ee=wr(c,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:z,tilespaceRays:J,bufferedTilespaceGeometry:P,bufferedTilespaceBounds:(te=f.getBounds(P),te.min.x=f.clamp(te.min.x,0,f.EXTENT),te.min.y=f.clamp(te.min.y,0,f.EXTENT),te.max.x=f.clamp(te.max.x,0,f.EXTENT),te.max.y=f.clamp(te.max.y,0,f.EXTENT),te),tile:c,tileID:c.tileID,pixelToTileUnitsFactor:ee};var te}_bufferedScreenMercator(c,h){const x=ho(c);if(this._screenRaycastCache[x])return this._screenRaycastCache[x];{let v;return v="globe"===h.projection.name?this._projectAndResample(this.bufferedScreenGeometry(c),h):{polygon:this.bufferedScreenGeometry(c).map(C=>h.pointCoordinate3D(C)),unwrapped:!0},this._screenRaycastCache[x]=v,v}}_bufferedCameraMercator(c,h){const x=ho(c);if(this._cameraRaycastCache[x])return this._cameraRaycastCache[x];{let v;return v="globe"===h.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(c),h):{polygon:this.bufferedCameraGeometry(c).map(C=>h.pointCoordinate3D(C)),unwrapped:!0},this._cameraRaycastCache[x]=v,v}}_projectAndResample(c,h){const x=function(C,I){const M=f.multiply([],I.pixelMatrix,I.globeMatrix),P=[0,-f.GLOBE_RADIUS,0,1],B=[0,f.GLOBE_RADIUS,0,1],z=[0,0,0,1];f.transformMat4$1(P,P,M),f.transformMat4$1(B,B,M),f.transformMat4$1(z,z,M);const H=new f.pointGeometry(P[0]/P[3],P[1]/P[3]),K=new f.pointGeometry(B[0]/B[3],B[1]/B[3]),J=f.polygonContainsPoint(C,H)&&P[3]<z[3],ee=f.polygonContainsPoint(C,K)&&B[3]<z[3];if(!J&&!ee)return null;const te=function(Ee,Ie,Be){for(let Ue=1;Ue<Ee.length;Ue++){const bt=Yi(Ie.pointCoordinate3D(Ee[Ue-1]).x),Ae=Yi(Ie.pointCoordinate3D(Ee[Ue]).x);if(Be<0){if(bt<Ae)return{idx:Ue,t:-bt/(Ae-1-bt)}}else if(Ae<bt)return{idx:Ue,t:(1-bt)/(Ae+1-bt)}}return null}(C,I,J?-1:1);if(!te)return null;const{idx:ne,t:Y}=te;let le=ne>1?ca(C.slice(0,ne),I):[],ce=ne<C.length?ca(C.slice(ne),I):[];le=le.map(Ee=>new f.pointGeometry(Yi(Ee.x),Ee.y)),ce=ce.map(Ee=>new f.pointGeometry(Yi(Ee.x),Ee.y));const de=[...le];0===de.length&&de.push(ce[ce.length-1]);const fe=f.number(de[de.length-1].y,(0===ce.length?le[0]:ce[0]).y,Y);let ye;return ye=J?[new f.pointGeometry(0,fe),new f.pointGeometry(0,0),new f.pointGeometry(1,0),new f.pointGeometry(1,fe)]:[new f.pointGeometry(1,fe),new f.pointGeometry(1,1),new f.pointGeometry(0,1),new f.pointGeometry(0,fe)],de.push(...ye),0===ce.length?de.push(le[0]):de.push(...ce),{polygon:de.map(Ee=>new f.MercatorCoordinate(Ee.x,Ee.y)),unwrapped:!1}}(c,h);if(x)return x;const v=function(C,I){let M=!1,P=-1/0,B=0;for(let H=0;H<C.length-1;H++)C[H].x>P&&(P=C[H].x,B=H);for(let H=0;H<C.length-1;H++){const K=(B+H)%(C.length-1),J=C[K],ee=C[K+1];Math.abs(J.x-ee.x)>.5&&(J.x<ee.x?(J.x+=1,0===K&&(C[C.length-1].x+=1)):(ee.x+=1,K+1===C.length-1&&(C[0].x+=1)),M=!0)}const z=f.mercatorXfromLng(I.center.lng);return M&&z<Math.abs(z-1)&&C.forEach(H=>{H.x-=1}),{polygon:C,unwrapped:M}}(ca(c,h).map(C=>new f.pointGeometry(Yi(C.x),C.y)),h);return{polygon:v.polygon.map(C=>new f.MercatorCoordinate(C.x,C.y)),unwrapped:v.unwrapped}}}function ca(m,c){return f.resample(m,h=>{const x=c.pointCoordinate3D(h);h.x=x.x,h.y=x.y},1/256)}function Yi(m){return m<0?1+m%1:m%1}function ho(m){return 100*m|0}function mi(m,c,h,x,v){const C=function(I,M){if(I)return v(I);if(M){m.url&&M.tiles&&m.tiles&&delete m.tiles;const P=f.pick(f.extend(M,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);M.vector_layers&&(P.vectorLayers=M.vector_layers,P.vectorLayerIds=P.vectorLayers.map(B=>B.id)),P.tiles=c.canonicalizeTileset(P,m.url),v(null,P)}};return m.url?f.getJSON(c.transformRequest(c.normalizeSourceURL(m.url,null,h,x),f.ResourceType.Source),C):f.exported.frame(()=>C(null,m))}class Qn{constructor(c,h,x){this.bounds=f.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=h||0,this.maxzoom=x||24}validateBounds(c){return Array.isArray(c)&&4===c.length?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const h=Math.pow(2,c.z),x=Math.floor(f.mercatorXfromLng(this.bounds.getWest())*h),v=Math.floor(f.mercatorYfromLat(this.bounds.getNorth())*h),C=Math.ceil(f.mercatorXfromLng(this.bounds.getEast())*h),I=Math.ceil(f.mercatorYfromLat(this.bounds.getSouth())*h);return c.x>=x&&c.x<C&&c.y>=v&&c.y<I}}class ul{constructor(c,h,x){this.context=c;const v=c.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Gt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Qo{constructor(c,h,x,v){this.length=h.length,this.attributes=x,this.itemSize=h.bytesPerElement,this.dynamicDraw=v,this.context=c;const C=c.gl;this.buffer=C.createBuffer(),c.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,h){for(let x=0;x<this.attributes.length;x++){const v=h.attributes[this.attributes[x].name];void 0!==v&&c.enableVertexAttribArray(v)}}setVertexAttribPointers(c,h,x){for(let v=0;v<this.attributes.length;v++){const C=this.attributes[v],I=h.attributes[C.name];void 0!==I&&c.vertexAttribPointer(I,C.components,c[Gt[C.type]],!1,this.itemSize,C.offset+this.itemSize*(x||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Jn{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class bo extends Jn{getDefault(){return f.Color.transparent}set(c){const h=this.current;(c.r!==h.r||c.g!==h.g||c.b!==h.b||c.a!==h.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Mo extends Jn{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class Ac extends Jn{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class ko extends Jn{getDefault(){return[!0,!0,!0,!0]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Lr extends Jn{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class Ro extends Jn{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class Mc extends Jn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const h=this.current;(c.func!==h.func||c.ref!==h.ref||c.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class mr extends Jn{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class hs extends Jn{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=c,this.dirty=!1}}class Ma extends Jn{getDefault(){return[0,1]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class dl extends Jn{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=c,this.dirty=!1}}class Wn extends Jn{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class ro extends Jn{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.BLEND):h.disable(h.BLEND),this.current=c,this.dirty=!1}}class vo extends Jn{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class Is extends Jn{getDefault(){return f.Color.transparent}set(c){const h=this.current;(c.r!==h.r||c.g!==h.g||c.b!==h.b||c.a!==h.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class fr extends Jn{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class Vi extends Jn{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=c,this.dirty=!1}}class Ul extends Jn{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class Zr extends Jn{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class Er extends Jn{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class kc extends Jn{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class ka extends Jn{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class hl extends Jn{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class ua extends Jn{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Rc extends Jn{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class Ra extends Jn{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Ds extends Jn{getDefault(){return null}set(c){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Dn extends Jn{constructor(c){super(c),this.vao=c.extVertexArrayObject}getDefault(){return null}set(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)}}class ku extends Jn{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class Ud extends Jn{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class Pa extends Jn{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Oa extends Jn{constructor(c,h){super(c),this.context=c,this.parent=h}getDefault(){return null}}class Cr extends Oa{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class da extends Oa{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Pc extends da{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class fl{constructor(c,h,x,v){this.context=c,this.width=h,this.height=x;const C=this.framebuffer=c.gl.createFramebuffer();this.colorAttachment=new Cr(c,C),v&&(this.depthAttachment=new da(c,C))}destroy(){const c=this.context.gl,h=this.colorAttachment.get();if(h&&c.deleteTexture(h),this.depthAttachment){const x=this.depthAttachment.get();x&&c.deleteRenderbuffer(x)}c.deleteFramebuffer(this.framebuffer)}}class se{constructor(c,h=!1){if(this.gl=c,this.isWebGL2=h,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),h){const x=c;this.extVertexArrayObject={createVertexArrayOES:x.createVertexArray.bind(c),deleteVertexArrayOES:x.deleteVertexArray.bind(c),bindVertexArrayOES:x.bindVertexArray.bind(c)}}this.clearColor=new bo(this),this.clearDepth=new Mo(this),this.clearStencil=new Ac(this),this.colorMask=new ko(this),this.depthMask=new Lr(this),this.stencilMask=new Ro(this),this.stencilFunc=new Mc(this),this.stencilOp=new mr(this),this.stencilTest=new hs(this),this.depthRange=new Ma(this),this.depthTest=new dl(this),this.depthFunc=new Wn(this),this.blend=new ro(this),this.blendFunc=new vo(this),this.blendColor=new Is(this),this.blendEquation=new fr(this),this.cullFace=new Vi(this),this.cullFaceSide=new Ul(this),this.frontFace=new Zr(this),this.program=new Er(this),this.activeTexture=new kc(this),this.viewport=new ka(this),this.bindFramebuffer=new hl(this),this.bindRenderbuffer=new ua(this),this.bindTexture=new Rc(this),this.bindVertexBuffer=new Ra(this),this.bindElementBuffer=new Ds(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Dn(this),this.pixelStoreUnpack=new ku(this),this.pixelStoreUnpackPremultiplyAlpha=new Ud(this),this.pixelStoreUnpackFlipY=new Pa(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=c.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=c.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=c.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),h||(this.extTextureHalfFloat=c.getExtension("OES_texture_half_float")),(h||this.extTextureHalfFloat&&c.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=h||c.getExtension("OES_standard_derivatives"),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,h){return new ul(this,c,h)}createVertexBuffer(c,h,x){return new Qo(this,c,h,x)}createRenderbuffer(c,h,x){const v=this.gl,C=v.createRenderbuffer();return this.bindRenderbuffer.set(C),v.renderbufferStorage(v.RENDERBUFFER,c,h,x),this.bindRenderbuffer.set(null),C}createFramebuffer(c,h,x){return new fl(this,c,h,x)}clear({color:c,depth:h,stencil:x}){const v=this.gl;let C=0;c&&(C|=v.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),void 0!==h&&(C|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),void 0!==x&&(C|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(x),this.stencilMask.set(255)),v.clear(C)}setCullFace(c){!1===c.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){Le(c.blendFunction,f.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class $ extends f.Evented{constructor(c,h,x,v){if(super(),this.id=c,this.dispatcher=x,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,f.extend(this,f.pick(h,["url","scheme","tileSize","promoteId"])),this._options=f.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new f.DedupedRequest}load(c){this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"}));const h=Array.isArray(this.map._language)?this.map._language.join():this.map._language,x=this.map._worldview;this._tileJSONRequest=mi(this._options,this.map._requestManager,h,x,(v,C)=>{this._tileJSONRequest=null,this._loaded=!0,v?(h&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${h}`),x&&2!==x.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${x}`),this.fire(new f.ErrorEvent(v))):C&&(f.extend(this,C),C.bounds&&(this.tileBounds=new Qn(C.bounds,this.minzoom,this.maxzoom)),f.postTurnstileEvent(C.tiles,this.map._requestManager._customAccessToken),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"}))),c&&c(v)})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return f.extend({},this._options)}loadTile(c,h){const x=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(x,f.ResourceType.Tile),data:void 0,uid:c.uid,tileID:c.tileID,tileZoom:c.tileZoom,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:f.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:c.isSymbolTile};if(v.request.collectResourceTiming=this._collectResourceTiming,c.actor&&"expired"!==c.state)"loading"===c.state?c.reloadCallback=h:c.request=c.actor.send("reloadTile",v,C.bind(this));else if(c.actor=this._tileWorkers[x]=this._tileWorkers[x]||this.dispatcher.getActor(),this.dispatcher.ready)c.request=c.actor.send("loadTile",v,C.bind(this),void 0,!0);else{const I=f.loadVectorTile.call({deduped:this._deduped},v,(M,P)=>{M||!P?C.call(this,M):(v.data={cacheControl:P.cacheControl,expires:P.expires,rawData:P.rawData.slice(0)},c.actor&&c.actor.send("loadTile",v,C.bind(this),void 0,!0))},!0);c.request={cancel:I}}function C(I,M){return delete c.request,c.aborted?h(null):I&&404!==I.status?h(I):(M&&M.resourceTiming&&(c.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&c.setExpiryData(M),c.loadVectorData(M,this.map.painter),f.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id})}unloadTile(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class q extends f.Evented{constructor(c,h,x,v){super(),this.id=c,this.dispatcher=x,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=f.extend({type:"raster"},h),f.extend(this,f.pick(h,["url","scheme","tileSize"]))}load(c){this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=mi(this._options,this.map._requestManager,null,null,(h,x)=>{this._tileJSONRequest=null,this._loaded=!0,h?this.fire(new f.ErrorEvent(h)):x&&(f.extend(this,x),x.bounds&&(this.tileBounds=new Qn(x.bounds,this.minzoom,this.maxzoom)),f.postTurnstileEvent(x.tiles),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"}))),c&&c(h)})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return f.extend({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,h){const x=f.exported.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),x,this.tileSize);c.request=f.getImage(this.map._requestManager.transformRequest(v,f.ResourceType.Tile),(C,I,M,P)=>(delete c.request,c.aborted?(c.state="unloaded",h(null)):C?(c.state="errored",h(C)):I?(this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:M,expires:P}),c.setTexture(I,this.map.painter),c.state="loaded",f.cacheEntryPossiblyAdded(this.dispatcher),void h(null)):h(null)))}static loadTileData(c,h,x){c.setTexture(h,x)}static unloadTileData(c,h){c.texture&&h.saveTileTexture(c.texture)}abortTile(c,h){c.request&&(c.request.cancel(),delete c.request),h()}unloadTile(c,h){c.texture&&this.map.painter.saveTileTexture(c.texture),h()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let re;function ue(m,c,h,x,v,C,I,M){const P=[m,h,v,c,x,C,1,1,1],B=[I,M,1],z=f.adjoint([],P),[H,K,J]=f.transformMat3(B,B,f.transpose(z,z));return f.multiply$1(P,[H,0,0,0,K,0,0,0,J],P)}class we extends f.Evented{constructor(c,h,x,v){super(),this.id=c,this.dispatcher=x,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=h,this._dirty=!1}load(c,h){this._loaded=h||!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=f.getImage(this.map._requestManager.transformRequest(this.url,f.ResourceType.Image),(x,v)=>{if(this._imageRequest=null,this._loaded=!0,x)this.fire(new f.ErrorEvent(x));else if(v){const{HTMLImageElement:C}=f.window;this.image=v instanceof C?f.exported.getImageData(v):v,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,c&&(this.coordinates=c),this._finishLoading()}})}loaded(){return this._loaded}updateImage(c){return this.image&&c.url?(this._imageRequest&&c.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=c.url,this.load(c.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(c){this.coordinates=c,this._boundsArray=void 0;const h=c.map(f.MercatorCoordinate.fromLngLat);return this.tileID=function(x){let v=1/0,C=1/0,I=-1/0,M=-1/0;for(const H of x)v=Math.min(v,H.x),C=Math.min(C,H.y),I=Math.max(I,H.x),M=Math.max(M,H.y);const P=Math.max(I-v,M-C),B=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),z=Math.pow(2,B);return new f.CanonicalTileID(B,Math.floor((v+I)/2*z),Math.floor((C+M)/2*z))}(h),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(c){for(const P in this.tiles){const B=this.tiles[P];"loaded"!==B.state&&(B.state="loaded",B.texture=this.texture)}if(this._boundsArray)return;const h=f.tileTransform(this.tileID,this.map.transform.projection),[x,v,C,I]=this.coordinates.map(P=>{const B=h.projection.project(P[0],P[1]);return f.getTilePoint(h,B)._round()});this.perspectiveTransform=function(P,B,z,H,K,J,ee,te,ne,Y){const le=ue(0,0,P,0,0,B,P,B),ce=ue(z,H,K,J,ee,te,ne,Y);return f.multiply$1(ce,f.adjoint(le,le),ce),[ce[6]/ce[8]*P/f.EXTENT,ce[7]/ce[8]*B/f.EXTENT]}(this.width,this.height,x.x,x.y,v.x,v.y,I.x,I.y,C.x,C.y);const M=this._boundsArray=new f.StructArrayLayout4i8;M.emplaceBack(x.x,x.y,0,0),M.emplaceBack(v.x,v.y,f.EXTENT,0),M.emplaceBack(I.x,I.y,0,f.EXTENT),M.emplaceBack(C.x,C.y,f.EXTENT,f.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=c.createVertexBuffer(M,f.boundsAttributes.members),this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const c=this.map.painter.context,h=c.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new f.Texture(c,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(c)}loadTile(c,h){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},h(null)):(c.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Re={vector:$,raster:q,"raster-dem":class extends q{constructor(m,c,h,x){super(m,c,h,x),this.type="raster-dem",this.maxzoom=22,this._options=f.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}loadTile(m,c){const h=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function x(v,C){v&&(m.state="errored",c(v)),C&&(m.dem=C,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",c(null))}m.request=f.getImage(this.map._requestManager.transformRequest(h,f.ResourceType.Tile),function(v,C,I,M){if(delete m.request,m.aborted)m.state="unloaded",c(null);else if(v)m.state="errored",c(v);else if(C){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:I,expires:M});const P=f.window.ImageBitmap&&C instanceof f.window.ImageBitmap&&(null==re&&(re=f.window.OffscreenCanvas&&new f.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof f.window.createImageBitmap),re),B=1-(C.width-f.prevPowerOfTwo(C.width))/2;B<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const z=P?C:f.exported.getImageData(C,B),H={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:z,encoding:this.encoding,padding:B};m.actor&&"expired"!==m.state||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",H,x.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(m){const c=m.canonical,h=Math.pow(2,c.z),x=(c.x-1+h)%h,v=0===c.x?m.wrap-1:m.wrap,C=(c.x+1+h)%h,I=c.x+1===h?m.wrap+1:m.wrap,M={};return M[new f.OverscaledTileID(m.overscaledZ,v,c.z,x,c.y).key]={backfilled:!1},M[new f.OverscaledTileID(m.overscaledZ,I,c.z,C,c.y).key]={backfilled:!1},c.y>0&&(M[new f.OverscaledTileID(m.overscaledZ,v,c.z,x,c.y-1).key]={backfilled:!1},M[new f.OverscaledTileID(m.overscaledZ,m.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},M[new f.OverscaledTileID(m.overscaledZ,I,c.z,C,c.y-1).key]={backfilled:!1}),c.y+1<h&&(M[new f.OverscaledTileID(m.overscaledZ,v,c.z,x,c.y+1).key]={backfilled:!1},M[new f.OverscaledTileID(m.overscaledZ,m.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},M[new f.OverscaledTileID(m.overscaledZ,I,c.z,C,c.y+1).key]={backfilled:!1}),M}unloadTile(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded"}},geojson:class extends f.Evented{constructor(m,c,h,x){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(x),this._data=c.data,this._options=f.extend({},c),this._collectResourceTiming=c.collectResourceTiming,void 0!==c.maxzoom&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const v=f.EXTENT/this.tileSize;this.workerOptions=f.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(void 0!==c.buffer?c.buffer:128)*v,tolerance:(void 0!==c.tolerance?c.tolerance:.375)*v,extent:f.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:void 0!==c.clusterMaxZoom?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:f.EXTENT,radius:(void 0!==c.clusterRadius?c.clusterRadius:50)*v,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}getClusterExpansionZoom(m,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},c),this}getClusterChildren(m,c){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},c),this}getClusterLeaves(m,c,h,x){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:c,offset:h},x),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new f.Event("dataloading",{dataType:"source"})),this._loaded=!1;const m=f.extend({},this.workerOptions),c=this._data;"string"==typeof c?(m.request=this.map._requestManager.transformRequest(f.exported.resolveURL(c),f.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,m,(h,x)=>{if(this._loaded=!0,this._pendingLoad=null,h)this.fire(new f.ErrorEvent(h));else{const v={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&x&&x.resourceTiming&&x.resourceTiming[this.id]&&(v.resourceTiming=x.resourceTiming[this.id]),this.fire(new f.Event("data",v)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,c){const h=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(h,{type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:f.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(x,v)=>(delete m.request,m.unloadVectorData(),m.aborted?c(null):x?c(x):(m.loadVectorData(v,this.map.painter,"reloadTile"===h),c(null))),void 0,"loadTile"===h)}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return f.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends we{constructor(m,c,h,x){super(m,c,h,x),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const c of m.urls)this.urls.push(this.map._requestManager.transformRequest(c,f.ResourceType.Source).url);f.getVideo(this.urls,(c,h)=>{this._loaded=!0,c?this.fire(new f.ErrorEvent(c)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const c=this.video.seekable;m<c.start(0)||m>c.end(0)?this.fire(new f.ErrorEvent(new f.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const m=this.map.painter.context,c=m.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new f.Texture(m,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:we,canvas:class extends we{constructor(m,c,h,x){super(m,c,h,x),c.coordinates?Array.isArray(c.coordinates)&&4===c.coordinates.length&&!c.coordinates.some(v=>!Array.isArray(v)||2!==v.length||v.some(C=>"number"!=typeof C))||this.fire(new f.ErrorEvent(new f.ValidationError(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new f.ErrorEvent(new f.ValidationError(`sources.${m}`,null,'missing required property "coordinates"'))),c.animate&&"boolean"!=typeof c.animate&&this.fire(new f.ErrorEvent(new f.ValidationError(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),c.canvas?"string"==typeof c.canvas||c.canvas instanceof f.window.HTMLCanvasElement||this.fire(new f.ErrorEvent(new f.ValidationError(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new f.ErrorEvent(new f.ValidationError(`sources.${m}`,null,'missing required property "canvas"'))),this.options=c,this.animate=void 0===c.animate||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof f.window.HTMLCanvasElement?this.options.canvas:f.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new f.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const c=this.map.painter.context;this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new f.Texture(c,this.canvas,c.gl.RGBA,{premultiply:!0}),this._prepareData(c)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends f.Evented{constructor(m,c,h,x){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=c,this.setEventedParent(x),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new f.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new f.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Qn(this._implementation.bounds,this.minzoom,this.maxzoom)),c.update=this._update.bind(this),c.clearTiles=this._clearTiles.bind(this),c.coveringTiles=this._coveringTiles.bind(this),f.extend(this,f.pick(c,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return f.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this._map=m,this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:c,y:h,z:x}=m.canonical;return this._implementation.hasTile({x:c,y:h,z:x})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,c){const{x:h,y:x,z:v}=m.tileID.canonical,C=new f.window.AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:h,y:x,z:v},{signal:C.signal})).then(function(I){return delete m.request,m.aborted?(m.state="unloaded",c(null)):void 0===I?(m.state="errored",c(null)):null===I?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",c(null)):(M=I)instanceof f.window.ImageData||M instanceof f.window.HTMLCanvasElement||M instanceof f.window.ImageBitmap||M instanceof f.window.HTMLImageElement?(this.loadTileData(m,I),m.state="loaded",void c(null)):(m.state="errored",c(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var M}.bind(this)).catch(I=>{20!==I.code&&(m.state="errored",c(I))}),m.request.cancel=()=>C.abort()}loadTileData(m,c){q.loadTileData(m,c,this._map.painter)}unloadTileData(m){q.unloadTileData(m,this._map.painter)}unloadTile(m,c){if(this.unloadTileData(m),this._implementation.unloadTile){const{x:h,y:x,z:v}=m.tileID.canonical;this._implementation.unloadTile({x:h,y:x,z:v})}c()}abortTile(m,c){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),c()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"}))}}},ke=function(m,c,h,x){const v=new Re[c.type](m,c,h,x);if(v.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${v.id}`);return f.bindAll(["load","abort","unload","serialize","prepare"],v),v};function Te(m,c){const h=f.identity([]);return f.scale(h,h,[.5*m.width,.5*-m.height,1]),f.translate(h,h,[1,-1,0]),f.multiply(h,h,m.calculateProjMatrix(c.toUnwrapped())),Float32Array.from(h)}function Oe(m,c,h,x,v,C,I,M=!1){const P=m.tilesIn(x,I,M);P.sort(Mt);const B=[];for(const H of P)B.push({wrappedTileID:H.tile.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(c,h,m._state,H,v,C,Te(m.transform,H.tile.tileID),M)});const z=function(H){const K={},J={};for(const ee of H){const te=ee.queryResults,ne=ee.wrappedTileID,Y=J[ne]=J[ne]||{};for(const le in te){const ce=te[le],de=Y[le]=Y[le]||{},fe=K[le]=K[le]||[];for(const ye of ce)de[ye.featureIndex]||(de[ye.featureIndex]=!0,fe.push(ye))}}return K}(B);for(const H in z)z[H].forEach(K=>{const J=K.feature,ee=J.layer;ee&&"background"!==ee.type&&"sky"!==ee.type&&(J.source=ee.source,ee["source-layer"]&&(J.sourceLayer=ee["source-layer"]),J.state=void 0!==J.id?m.getFeatureState(ee["source-layer"],J.id):{})});return z}function ot(m,c){const h=m.getRenderableIds().map(C=>m.getTileByID(C)),x=[],v={};for(let C=0;C<h.length;C++){const I=h[C],M=I.tileID.canonical.key;v[M]||(v[M]=!0,I.querySourceFeatures(x,c))}return x}function Mt(m,c){const h=m.tileID,x=c.tileID;return h.overscaledZ-x.overscaledZ||h.canonical.y-x.canonical.y||h.wrap-x.wrap||h.canonical.x-x.canonical.x}function ut(){return null!=Qc.workerClass?new Qc.workerClass:new f.window.Worker(Qc.workerUrl)}const tn="mapboxgl_preloaded_worker_pool";class Pt{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<Pt.workerCount;)this.workers.push(new ut);return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],0===this.numActive()&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[tn]}numActive(){return Object.keys(this.active).length}}let xt;function Zt(){return xt||(xt=new Pt),xt}function Ln(m,c){const h={};for(const x in m)"ref"!==x&&(h[x]=m[x]);return f.refProperties.forEach(x=>{x in c&&(h[x]=c[x])}),h}function li(m){m=m.slice();const c=Object.create(null);for(let h=0;h<m.length;h++)c[m[h].id]=m[h];for(let h=0;h<m.length;h++)"ref"in m[h]&&(m[h]=Ln(m[h],c[m[h].ref]));return m}Pt.workerCount=2;const on={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function gi(m,c,h){h.push({command:on.addSource,args:[m,c[m]]})}function vi(m,c,h){c.push({command:on.removeSource,args:[m]}),h[m]=!0}function Po(m,c,h,x){vi(m,h,x),gi(m,c,h)}function Jo(m,c,h){let x;for(x in m[h])if(m[h].hasOwnProperty(x)&&"data"!==x&&!Le(m[h][x],c[h][x]))return!1;for(x in c[h])if(c[h].hasOwnProperty(x)&&"data"!==x&&!Le(m[h][x],c[h][x]))return!1;return!0}function Ye(m,c,h,x,v,C){let I;for(I in c=c||{},m=m||{})m.hasOwnProperty(I)&&(Le(m[I],c[I])||h.push({command:C,args:[x,I,c[I],v]}));for(I in c)c.hasOwnProperty(I)&&!m.hasOwnProperty(I)&&(Le(m[I],c[I])||h.push({command:C,args:[x,I,c[I],v]}))}function tr(m){return m.id}function gr(m,c){return m[c.id]=c,m}class Fa{constructor(c,h){this.reset(c,h)}reset(c,h){this.points=c||[],this._distances=[0];for(let x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(1===this.points.length)return this.points[0];c=f.clamp(c,0,1);let h=1,x=this._distances[h];const v=c*this.paddedLength+this.padding;for(;x<v&&h<this._distances.length;)x=this._distances[++h];const C=h-1,I=this._distances[C],M=x-I,P=M>0?(v-I)/M:0;return this.points[C].mult(1-P).add(this.points[h].mult(P))}}class rf{constructor(c,h,x){const v=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(c/x),this.yCellCount=Math.ceil(h/x);for(let I=0;I<this.xCellCount*this.yCellCount;I++)v.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=h,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,h,x,v,C){this._forEachCell(h,x,v,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(h),this.bboxes.push(x),this.bboxes.push(v),this.bboxes.push(C)}insertCircle(c,h,x,v){this._forEachCell(h-v,x-v,h+v,x+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(h),this.circles.push(x),this.circles.push(v)}_insertBoxCell(c,h,x,v,C,I){this.boxCells[C].push(I)}_insertCircleCell(c,h,x,v,C,I){this.circleCells[C].push(I)}_query(c,h,x,v,C,I){if(x<0||c>this.width||v<0||h>this.height)return!C&&[];const M=[];if(c<=0&&h<=0&&this.width<=x&&this.height<=v){if(C)return!0;for(let P=0;P<this.boxKeys.length;P++)M.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const B=this.circles[3*P],z=this.circles[3*P+1],H=this.circles[3*P+2];M.push({key:this.circleKeys[P],x1:B-H,y1:z-H,x2:B+H,y2:z+H})}return I?M.filter(I):M}return this._forEachCell(c,h,x,v,this._queryCell,M,{hitTest:C,seenUids:{box:{},circle:{}}},I),C?M.length>0:M}_queryCircle(c,h,x,v,C){const I=c-x,M=c+x,P=h-x,B=h+x;if(M<0||I>this.width||B<0||P>this.height)return!v&&[];const z=[];return this._forEachCell(I,P,M,B,this._queryCellCircle,z,{hitTest:v,circle:{x:c,y:h,radius:x},seenUids:{box:{},circle:{}}},C),v?z.length>0:z}query(c,h,x,v,C){return this._query(c,h,x,v,!1,C)}hitTest(c,h,x,v,C){return this._query(c,h,x,v,!0,C)}hitTestCircle(c,h,x,v){return this._queryCircle(c,h,x,!0,v)}_queryCell(c,h,x,v,C,I,M,P){const B=M.seenUids,z=this.boxCells[C];if(null!==z){const K=this.bboxes;for(const J of z)if(!B.box[J]){B.box[J]=!0;const ee=4*J;if(c<=K[ee+2]&&h<=K[ee+3]&&x>=K[ee+0]&&v>=K[ee+1]&&(!P||P(this.boxKeys[J]))){if(M.hitTest)return I.push(!0),!0;I.push({key:this.boxKeys[J],x1:K[ee],y1:K[ee+1],x2:K[ee+2],y2:K[ee+3]})}}}const H=this.circleCells[C];if(null!==H){const K=this.circles;for(const J of H)if(!B.circle[J]){B.circle[J]=!0;const ee=3*J;if(this._circleAndRectCollide(K[ee],K[ee+1],K[ee+2],c,h,x,v)&&(!P||P(this.circleKeys[J]))){if(M.hitTest)return I.push(!0),!0;{const te=K[ee],ne=K[ee+1],Y=K[ee+2];I.push({key:this.circleKeys[J],x1:te-Y,y1:ne-Y,x2:te+Y,y2:ne+Y})}}}}}_queryCellCircle(c,h,x,v,C,I,M,P){const B=M.circle,z=M.seenUids,H=this.boxCells[C];if(null!==H){const J=this.bboxes;for(const ee of H)if(!z.box[ee]){z.box[ee]=!0;const te=4*ee;if(this._circleAndRectCollide(B.x,B.y,B.radius,J[te+0],J[te+1],J[te+2],J[te+3])&&(!P||P(this.boxKeys[ee])))return I.push(!0),!0}}const K=this.circleCells[C];if(null!==K){const J=this.circles;for(const ee of K)if(!z.circle[ee]){z.circle[ee]=!0;const te=3*ee;if(this._circlesCollide(J[te],J[te+1],J[te+2],B.x,B.y,B.radius)&&(!P||P(this.circleKeys[ee])))return I.push(!0),!0}}}_forEachCell(c,h,x,v,C,I,M,P){const B=this._convertToXCellCoord(c),z=this._convertToYCellCoord(h),H=this._convertToXCellCoord(x),K=this._convertToYCellCoord(v);for(let J=B;J<=H;J++)for(let ee=z;ee<=K;ee++)if(C.call(this,c,h,x,v,this.xCellCount*ee+J,I,M,P))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,h,x,v,C,I){const M=v-c,P=C-h,B=x+I;return B*B>M*M+P*P}_circleAndRectCollide(c,h,x,v,C,I,M){const P=(I-v)/2,B=Math.abs(c-(v+P));if(B>P+x)return!1;const z=(M-C)/2,H=Math.abs(h-(C+z));if(H>z+x)return!1;if(B<=P||H<=z)return!0;const K=B-P,J=H-z;return K*K+J*J<=x*x}}const Us=Math.tan(85*Math.PI/180);function Na(m,c,h,x,v,C,I){const M=f.create();if(h)if("globe"===C.name){const P=f.calculateGlobeLabelMatrix(v,c);f.multiply(M,M,P)}else{const P=Et([],I);M[0]=P[0],M[1]=P[1],M[4]=P[2],M[5]=P[3],x||f.rotateZ(M,M,v.angle)}else f.multiply(M,v.labelPlaneMatrix,m);return M}function sf(m,c,h,x,v,C,I){const M=Na(m,c,h,x,v,C,I);return"globe"===C.name&&h||(M[2]=M[6]=M[10]=M[14]=0),M}function Hl(m,c,h,x,v,C,I){if(h){if("globe"===C.name){const M=Na(m,c,h,x,v,C,I);return f.invert(M,M),f.multiply(M,m,M),M}{const M=f.clone(m),P=f.identity([]);return P[0]=I[0],P[1]=I[1],P[4]=I[2],P[5]=I[3],f.multiply(M,M,P),x||f.rotateZ(M,M,-v.angle),M}}return v.glCoordMatrix}function mt(m,c,h,x){const v=[m,c,h,1];h?f.transformMat4$1(v,v,x):Fc(v,v,x);const C=v[3];return v[0]/=C,v[1]/=C,v[2]/=C,v}function Rn(m,c){return Math.min(.5+m/c*.5,1.5)}function Ct(m,c){const h=m[0]/m[3],x=m[1]/m[3];return h>=-c[0]&&h<=c[0]&&x>=-c[1]&&x<=c[1]}function es(m,c,h,x,v,C,I,M,P,B){const z=h.transform,H=x?m.textSizeData:m.iconSizeData,K=f.evaluateSizeForZoom(H,h.transform.zoom),J="globe"===z.projection.name,ee=[256/h.width*2+1,256/h.height*2+1],te=x?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;te.clear();let ne=null;J&&(ne=x?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const Y=m.lineVertexArray,le=x?m.text.placedSymbolArray:m.icon.placedSymbolArray,ce=h.transform.width/h.transform.height;let de,fe=!1;for(let ye=0;ye<le.length;ye++){const Ee=le.get(ye),{numGlyphs:Ie,writingMode:Be}=Ee;if(Be!==f.WritingMode.vertical||fe||de===f.WritingMode.horizontal||(fe=!0),de=Be,(Ee.hidden||Be===f.WritingMode.vertical)&&!fe){An(Ie,te);continue}fe=!1;const Ue=new f.pointGeometry(Ee.tileAnchorX,Ee.tileAnchorY);let{x:bt,y:Ae,z:it}=z.projection.projectTilePoint(Ue.x,Ue.y,B.canonical);if(P){const[Bn,ct,Rt]=P(Ue);bt+=Bn,Ae+=ct,it+=Rt}const Ze=[bt,Ae,it,1];if(f.transformMat4$1(Ze,Ze,c),!Ct(Ze,ee)){An(Ie,te);continue}const dt=Rn(h.transform.cameraToCenterDistance,Ze[3]),Fe=f.evaluateSizeForFeature(H,K,Ee),Me=I?Fe/dt:Fe*dt,He=mt(bt,Ae,it,v);if(He[3]<=0){An(Ie,te);continue}let st={};const pt=I?null:P,$t=Oc(Ee,Me,!1,M,c,v,C,m.glyphOffsetArray,Y,te,ne,He,Ue,st,ce,pt,z.projection,B,I);fe=$t.useVertical,pt&&$t.needsFlipping&&(st={}),($t.notEnoughRoom||fe||$t.needsFlipping&&Oc(Ee,Me,!0,M,c,v,C,m.glyphOffsetArray,Y,te,ne,He,Ue,st,ce,pt,z.projection,B,I).notEnoughRoom)&&An(Ie,te)}x?(m.text.dynamicLayoutVertexBuffer.updateData(te),ne&&m.text.globeExtVertexBuffer.updateData(ne)):(m.icon.dynamicLayoutVertexBuffer.updateData(te),ne&&m.icon.globeExtVertexBuffer.updateData(ne))}function ha(m,c,h,x,v,C,I,M,P,B,z,H,K,J,ee,te){const{lineStartIndex:ne,glyphStartIndex:Y,segment:le}=M,ce=Y+M.numGlyphs,de=ne+M.lineLength,fe=c.getoffsetX(Y),ye=c.getoffsetX(ce-1),Ee=Yr(m*fe,h,x,v,C,I,le,ne,de,P,B,z,H,K,!0,J,ee,te);if(!Ee)return null;const Ie=Yr(m*ye,h,x,v,C,I,le,ne,de,P,B,z,H,K,!0,J,ee,te);return Ie?{first:Ee,last:Ie}:null}function dn(m,c,h,x){return m===f.WritingMode.horizontal&&Math.abs(x)>Math.abs(h)?{useVertical:!0}:m===f.WritingMode.vertical?x>0?{needsFlipping:!0}:null:0!==c&&(0===(v=h)||Math.abs(x/v)>Us)?1===c?{needsFlipping:!0}:null:h<0?{needsFlipping:!0}:null;var v}function Oc(m,c,h,x,v,C,I,M,P,B,z,H,K,J,ee,te,ne,Y,le){const ce=c/24,de=m.lineOffsetX*ce,fe=m.lineOffsetY*ce,{lineStartIndex:ye,glyphStartIndex:Ee,numGlyphs:Ie,segment:Be,writingMode:Ue,flipState:bt}=m,Ae=ye+m.lineLength,it=Ze=>{if(z){const[He,st,pt]=Ze.up,$t=B.length;f.updateGlobeVertexNormal(z,$t+0,He,st,pt),f.updateGlobeVertexNormal(z,$t+1,He,st,pt),f.updateGlobeVertexNormal(z,$t+2,He,st,pt),f.updateGlobeVertexNormal(z,$t+3,He,st,pt)}const[dt,Fe,Me]=Ze.point;f.addDynamicAttributes(B,dt,Fe,Me,Ze.angle)};if(Ie>1){const Ze=ha(ce,M,de,fe,h,H,K,m,P,C,J,te,!1,ne,Y,le);if(!Ze)return{notEnoughRoom:!0};if(x&&!h){let[dt,Fe,Me]=Ze.first.point,[He,st,pt]=Ze.last.point;[dt,Fe]=mt(dt,Fe,Me,I),[He,st]=mt(He,st,pt,I);const $t=dn(Ue,bt,(He-dt)*ee,st-Fe);if(m.flipState=$t&&$t.needsFlipping?1:2,$t)return $t}it(Ze.first);for(let dt=Ee+1;dt<Ee+Ie-1;dt++){const Fe=Yr(ce*M.getoffsetX(dt),de,fe,h,H,K,Be,ye,Ae,P,C,J,te,!1,!1,ne,Y,le);if(!Fe)return B.length-=4*(dt-Ee),{notEnoughRoom:!0};it(Fe)}it(Ze.last)}else{if(x&&!h){const dt=mt(K.x,K.y,0,v),Fe=ye+Be+1,Me=new f.pointGeometry(P.getx(Fe),P.gety(Fe)),He=mt(Me.x,Me.y,0,v),st=He[3]>0?He:ui(K,Me,dt,1,v,void 0,ne,Y.canonical),pt=dn(Ue,bt,(st[0]-dt[0])*ee,st[1]-dt[1]);if(m.flipState=pt&&pt.needsFlipping?1:2,pt)return pt}const Ze=Yr(ce*M.getoffsetX(Ee),de,fe,h,H,K,Be,ye,Ae,P,C,J,te,!1,!1,ne,Y,le);if(!Ze)return{notEnoughRoom:!0};it(Ze)}return{}}function $l(m,c,h,x,v){const{x:C,y:I,z:M}=x.projectTilePoint(m.x,m.y,c);if(!v)return mt(C,I,M,h);const[P,B,z]=v(m);return mt(C+P,I+B,M+z,h)}function ui(m,c,h,x,v,C,I,M){const P=$l(m.sub(c)._unit()._add(m),M,v,I,C);return f.sub(P,h,P),f.normalize(P,P),f.scaleAndAdd(P,h,P,x)}function Yr(m,c,h,x,v,C,I,M,P,B,z,H,K,J,ee,te,ne,Y){const le=x?m-c:m+c;let ce=le>0?1:-1,de=0;x&&(ce*=-1,de=Math.PI),ce<0&&(de+=Math.PI);let fe=M+I+(ce>0?0:1)|0,ye=v,Ee=v,Ie=0,Be=0;const Ue=Math.abs(le),bt=[],Ae=[];let it=C,Ze=it;const dt=()=>ui(Ze,it,Ee,Ue-Ie+1,z,K,te,ne.canonical);for(;Ie+Be<=Ue;){if(fe+=ce,fe<M||fe>=P)return null;if(Ee=ye,Ze=it,bt.push(Ee),J&&Ae.push(Ze),it=new f.pointGeometry(B.getx(fe),B.gety(fe)),ye=H[fe],!ye){const Rt=$l(it,ne.canonical,z,te,K);ye=Rt[3]>0?H[fe]=Rt:dt()}Ie+=Be,Be=f.distance(Ee,ye)}ee&&K&&(H[fe]&&(ye=dt(),Be=f.distance(Ee,ye)),H[fe]=ye);const Fe=(Ue-Ie)/Be,Me=it.sub(Ze)._mult(Fe)._add(Ze),He=f.sub([],ye,Ee),st=f.scaleAndAdd([],Ee,He,Fe);let pt=[0,0,1],$t=He[0],Bn=He[1];if(Y&&(pt=te.upVector(ne.canonical,Me.x,Me.y),0!==pt[0]||0!==pt[1]||1!==pt[2])){const Rt=[pt[2],0,-pt[0]],Yt=f.cross([],pt,Rt);f.normalize(Rt,Rt),f.normalize(Yt,Yt),$t=f.dot(He,Rt),Bn=f.dot(He,Yt)}if(h){const Rt=f.cross([],pt,He);f.normalize(Rt,Rt),f.scaleAndAdd(st,st,Rt,h*ce)}const ct=de+Math.atan2(Bn,$t);return bt.push(st),J&&Ae.push(Me),{point:st,angle:ct,path:bt,tilePath:Ae,up:pt}}function An(m,c){const h=c.length,x=h+4*m;c.resize(x),c.float32.fill(-1/0,4*h,4*x)}function Fc(m,c,h){const x=c[0],v=c[1];return m[0]=h[0]*x+h[4]*v+h[12],m[1]=h[1]*x+h[5]*v+h[13],m[3]=h[3]*x+h[7]*v+h[15],m}const Br=100;class ki{constructor(c,h,x=new rf(c.width+200,c.height+200,25),v=new rf(c.width+200,c.height+200,25)){this.transform=c,this.grid=x,this.ignoredGrid=v,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+Br,this.screenBottomBoundary=c.height+Br,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.fogState=h}placeCollisionBox(c,h,x,v,C,I,M,P){let B=x.projectedAnchorX,z=x.projectedAnchorY,H=x.projectedAnchorZ;const K=x.elevation,J=x.tileID,ee=c.getProjection();if(K&&J){const[ye,Ee,Ie]=ee.upVector(J.canonical,x.tileAnchorX,x.tileAnchorY),Be=ee.upVectorScale(J.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;B+=ye*K*Be,z+=Ee*K*Be,H+=Ie*K*Be}const te=this.projectAndGetPerspectiveRatio(M,B,z,H,x.tileID,"globe"===ee.name||!!K||this.transform.pitch>0,ee),ne=I*te.perspectiveRatio,Y=(x.x1*h+v.x-x.padding)*ne+te.point.x,le=(x.y1*h+v.y-x.padding)*ne+te.point.y,ce=(x.x2*h+v.x+x.padding)*ne+te.point.x,de=(x.y2*h+v.y+x.padding)*ne+te.point.y,fe=te.perspectiveRatio<=.55||te.occluded;return!this.isInsideGrid(Y,le,ce,de)||!C&&this.grid.hitTest(Y,le,ce,de,P)||fe?{box:[],offscreen:!1,occluded:te.occluded}:{box:[Y,le,ce,de],offscreen:this.isOffscreen(Y,le,ce,de),occluded:!1}}placeCollisionCircles(c,h,x,v,C,I,M,P,B,z,H,K,J,ee,te){const ne=[],Y=this.transform.elevation,le=c.getProjection(),ce=Y?Y.getAtTileOffsetFunc(te,this.transform.center.lat,this.transform.worldSize,le):null,de=new f.pointGeometry(x.tileAnchorX,x.tileAnchorY);let{x:fe,y:ye,z:Ee}=le.projectTilePoint(de.x,de.y,te.canonical);if(ce){const[Me,He,st]=ce(de);fe+=Me,ye+=He,Ee+=st}const Ie="globe"===le.name,Be=this.projectAndGetPerspectiveRatio(M,fe,ye,Ee,te,Ie||!!Y||this.transform.pitch>0,le),{perspectiveRatio:Ue}=Be,bt=(H?I/Ue:I*Ue)/f.ONE_EM,Ae=mt(fe,ye,Ee,P),it=Be.signedDistanceFromCamera>0?ha(bt,C,x.lineOffsetX*bt,x.lineOffsetY*bt,!1,Ae,de,x,v,P,{},Y&&!H?ce:null,H&&!!Y,le,te,H):null;let Ze=!1,dt=!1,Fe=!0;if(it&&!Be.occluded){const Me=.5*J*Ue+ee,He=new f.pointGeometry(-100,-100),st=new f.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),pt=new Fa,{first:$t,last:Bn}=it,ct=$t.path.length;let Rt=[];for(let en=ct-1;en>=1;en--)Rt.push($t.path[en]);for(let en=1;en<Bn.path.length;en++)Rt.push(Bn.path[en]);const Yt=2.5*Me;B&&(Rt=Rt.map(([en,Ei,Ci],Ti)=>(ce&&!Ie&&(Ci=ce(Ti<ct-1?$t.tilePath[ct-1-Ti]:Bn.tilePath[Ti-ct+2])[2]),mt(en,Ei,Ci,B))),Rt.some(en=>en[3]<=0)&&(Rt=[]));let Zn=[];if(Rt.length>0){let en=1/0,Ei=-1/0,Ci=1/0,Ti=-1/0;for(const ji of Rt)en=Math.min(en,ji[0]),Ci=Math.min(Ci,ji[1]),Ei=Math.max(Ei,ji[0]),Ti=Math.max(Ti,ji[1]);Ei>=He.x&&en<=st.x&&Ti>=He.y&&Ci<=st.y&&(Zn=[Rt.map(ji=>new f.pointGeometry(ji[0],ji[1]))],(en<He.x||Ei>st.x||Ci<He.y||Ti>st.y)&&(Zn=f.clipLine(Zn,He.x,He.y,st.x,st.y)))}for(const en of Zn){pt.reset(en,.25*Me);let Ei=0;Ei=pt.length<=.5*Me?1:Math.ceil(pt.paddedLength/Yt)+1;for(let Ci=0;Ci<Ei;Ci++){const Ti=Ci/Math.max(Ei-1,1),ji=pt.lerp(Ti),$r=ji.x+Br,ps=ji.y+Br;ne.push($r,ps,Me,0);const ma=$r-Me,vl=ps-Me,Je=$r+Me,nn=ps+Me;if(Fe=Fe&&this.isOffscreen(ma,vl,Je,nn),dt=dt||this.isInsideGrid(ma,vl,Je,nn),!h&&this.grid.hitTestCircle($r,ps,Me,K)&&(Ze=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Ze,occluded:!1}}}}return{circles:!z&&Ze||!dt?[]:ne,offscreen:Fe,collisionDetected:Ze,occluded:Be.occluded}}queryRenderedSymbols(c){if(0===c.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const h=[];let x=1/0,v=1/0,C=-1/0,I=-1/0;for(const z of c){const H=new f.pointGeometry(z.x+Br,z.y+Br);x=Math.min(x,H.x),v=Math.min(v,H.y),C=Math.max(C,H.x),I=Math.max(I,H.y),h.push(H)}const M=this.grid.query(x,v,C,I).concat(this.ignoredGrid.query(x,v,C,I)),P={},B={};for(const z of M){const H=z.key;if(void 0===P[H.bucketInstanceId]&&(P[H.bucketInstanceId]={}),P[H.bucketInstanceId][H.featureIndex])continue;const K=[new f.pointGeometry(z.x1,z.y1),new f.pointGeometry(z.x2,z.y1),new f.pointGeometry(z.x2,z.y2),new f.pointGeometry(z.x1,z.y2)];f.polygonIntersectsPolygon(h,K)&&(P[H.bucketInstanceId][H.featureIndex]=!0,void 0===B[H.bucketInstanceId]&&(B[H.bucketInstanceId]=[]),B[H.bucketInstanceId].push(H.featureIndex))}return B}insertCollisionBox(c,h,x,v,C){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:v,collisionGroupID:C},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,h,x,v,C){const I=h?this.ignoredGrid:this.grid,M={bucketInstanceId:x,featureIndex:v,collisionGroupID:C};for(let P=0;P<c.length;P+=4)I.insertCircle(M,c[P],c[P+1],c[P+2])}projectAndGetPerspectiveRatio(c,h,x,v,C,I,M){const P=[h,x,v,1];let B=!1;v||this.transform.pitch>0?(f.transformMat4$1(P,P,c),this.fogState&&C&&"globe"!==M.name&&(B=function(J,ee,te,ne,Y,le){const ce=le.calculateFogTileMatrix(Y),de=[ee,te,ne];return f.transformMat4(de,de,ce),Xo(J,de,le.pitch,le._fov)}(this.fogState,h,x,v,C.toUnwrapped(),this.transform)>.9)):Fc(P,P,c);const z=P[3];return{point:new f.pointGeometry((P[0]/z+1)/2*this.transform.width+Br,(-P[1]/z+1)/2*this.transform.height+Br),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(M)/z*.5,1.5),signedDistanceFromCamera:z,occluded:I&&P[2]>z||B}}isOffscreen(c,h,x,v){return x<Br||c>=this.screenRightBoundary||v<Br||h>this.screenBottomBoundary}isInsideGrid(c,h,x,v){return x>=0&&c<this.gridRightBoundary&&v>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const c=f.identity([]);return f.translate(c,c,[-100,-100,0]),c}}function mn(m,c,h){const x=c.createTileMatrix(m,m.worldSize,h.toUnwrapped());return f.multiply(new Float32Array(16),m.projMatrix,x)}function Gl(m,c,h){if(c.projection.name===h.projection.name)return m.projMatrix;const x=h.clone();return x.setProjection(c.projection),mn(x,c.getProjection(),m)}function Wl(m,c,h){return c.name===h.projection.name?m.projMatrix:mn(h,c,m)}class Ru{constructor(c,h,x,v){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?h:-h))):v&&x?1:0,this.placed=x}isHidden(){return 0===this.opacity&&!this.placed}}class La{constructor(c,h,x,v,C,I=!1){this.text=new Ru(c?c.text:null,h,x,C),this.icon=new Ru(c?c.icon:null,h,v,C),this.clipped=I}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Xe{constructor(c,h,x,v=!1){this.text=c,this.icon=h,this.skipFade=x,this.clipped=v}}class ql{constructor(){this.invProjMatrix=f.create(),this.viewportMatrix=f.create(),this.circles=[]}}class cn{constructor(c,h,x,v,C){this.bucketInstanceId=c,this.featureIndex=h,this.sourceLayerIndex=x,this.bucketIndex=v,this.tileID=C}}class vn{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const h=++this.maxGroupID;this.collisionGroups[c]={ID:h,predicate:x=>x.collisionGroupID===h}}return this.collisionGroups[c]}}function Pu(m,c,h,x,v){const{horizontalAlign:C,verticalAlign:I}=f.getAnchorAlignment(m),M=-(C-.5)*c,P=-(I-.5)*h,B=f.evaluateVariableOffset(m,x);return new f.pointGeometry(M+B[0]*v,P+B[1]*v)}function Hs(m,c,h,x,v){const C=new f.pointGeometry(m,c);return h&&C._rotate(x?v:-v),C}class wo{constructor(c,h,x,v,C){this.transform=c.clone(),this.projection=c.projection.name,this.collisionIndex=new ki(this.transform,C),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new vn(x),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,h,x,v){const C=x.getBucket(h),I=x.latestFeatureIndex;if(!C||!I||h.id!==C.layerIds[0])return;const M=C.layers[0].layout,P=x.collisionBoxArray,B=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),z=x.tileSize/f.EXTENT,H=x.tileID.toUnwrapped();this.transform.setProjection(C.projection);const K=(J=x.tileID,ee=C.getProjection(),te=this.transform,ee.name===this.projection?te.calculateProjMatrix(J.toUnwrapped()):mn(te,ee,J));var J,ee,te;const ne="map"===M.get("text-pitch-alignment"),Y="map"===M.get("text-rotation-alignment");h.compileFilter();const le=h.dynamicFilter(),ce=h.dynamicFilterNeedsFeature(),de=this.transform.calculatePixelsToTileUnitsMatrix(x),fe=sf(K,x.tileID.canonical,ne,Y,this.transform,C.getProjection(),de);let ye=null;if(ne){const Be=Hl(K,x.tileID.canonical,ne,Y,this.transform,C.getProjection(),de);ye=f.multiply([],this.transform.labelPlaneMatrix,Be)}let Ee=null;le&&x.latestFeatureIndex&&(Ee={unwrappedTileID:H,dynamicFilter:le,dynamicFilterNeedsFeature:ce,featureIndex:x.latestFeatureIndex}),this.retainedQueryData[C.bucketInstanceId]=new cn(C.bucketInstanceId,I,C.sourceLayerIndex,C.index,x.tileID);const Ie={bucket:C,layout:M,posMatrix:K,textLabelPlaneMatrix:fe,labelToScreenMatrix:ye,clippingData:Ee,scale:B,textPixelRatio:z,holdingForFade:x.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:f.evaluateSizeForZoom(C.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:f.evaluateSizeForZoom(C.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(v)for(const Be of C.sortKeyRanges){const{sortKey:Ue,symbolInstanceStart:bt,symbolInstanceEnd:Ae}=Be;c.push({sortKey:Ue,symbolInstanceStart:bt,symbolInstanceEnd:Ae,parameters:Ie})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:Ie})}attemptAnchorPlacement(c,h,x,v,C,I,M,P,B,z,H,K,J,ee,te,ne,Y,le){const{textOffset0:ce,textOffset1:de,crossTileID:fe}=K,ye=[ce,de],Ee=Pu(c,x,v,ye,C),Ie=this.collisionIndex.placeCollisionBox(ee,C,h,Hs(Ee.x,Ee.y,I,M,this.transform.angle),H,P,B,z.predicate);if(ne){const Be=ee.getSymbolInstanceIconSize(le,this.transform.zoom,K.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(ee,Be,ne,Hs(Ee.x,Ee.y,I,M,this.transform.angle),H,P,B,z.predicate).box.length)return}if(Ie.box.length>0){let Be;return this.prevPlacement&&this.prevPlacement.variableOffsets[fe]&&this.prevPlacement.placements[fe]&&this.prevPlacement.placements[fe].text&&(Be=this.prevPlacement.variableOffsets[fe].anchor),this.variableOffsets[fe]={textOffset:ye,width:x,height:v,anchor:c,textScale:C,prevAnchor:Be},this.markUsedJustification(ee,c,K,te),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,te,K),this.placedOrientations[fe]=te),{shift:Ee,placedGlyphBoxes:Ie}}}placeLayerBucketPart(c,h,x,v){const{bucket:C,layout:I,posMatrix:M,textLabelPlaneMatrix:P,labelToScreenMatrix:B,clippingData:z,textPixelRatio:H,holdingForFade:K,collisionBoxArray:J,partiallyEvaluatedTextSize:ee,partiallyEvaluatedIconSize:te,collisionGroup:ne}=c.parameters,Y=I.get("text-optional"),le=I.get("icon-optional"),ce=I.get("text-allow-overlap"),de=I.get("icon-allow-overlap"),fe="map"===I.get("text-rotation-alignment"),ye="map"===I.get("text-pitch-alignment"),Ee="none"!==I.get("icon-text-fit"),Ie="viewport-y"===I.get("symbol-z-order");this.transform.setProjection(C.projection);let Be=ce&&(de||!C.hasIconData()||le),Ue=de&&(ce||!C.hasTextData()||Y);!C.collisionArrays&&J&&C.deserializeCollisionBoxes(J),x&&v&&C.updateCollisionDebugBuffers(this.transform.zoom,J);const bt=(Ae,it,Ze)=>{const{crossTileID:dt,numVerticalGlyphVertices:Fe}=Ae;if(z){const Je={zoom:this.transform.zoom,pitch:this.transform.pitch};let nn=null;if(z.dynamicFilterNeedsFeature){const hi=this.retainedQueryData[C.bucketInstanceId];nn=z.featureIndex.loadFeature({featureIndex:Ae.featureIndex,bucketIndex:hi.bucketIndex,sourceLayerIndex:hi.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,z.dynamicFilter)(Je,nn,this.retainedQueryData[C.bucketInstanceId].tileID.canonical,new f.pointGeometry(Ae.tileAnchorX,Ae.tileAnchorY),this.transform.calculateDistanceTileData(z.unwrappedTileID)))return this.placements[dt]=new Xe(!1,!1,!1,!0),void(h[dt]=!0)}if(h[dt])return;if(K)return void(this.placements[dt]=new Xe(!1,!1,!1));let Me=!1,He=!1,st=!0,pt=!1,$t=!1,Bn=null,ct={box:null,offscreen:null,occluded:null},Rt={box:null,offscreen:null,occluded:null},Yt=null,Zn=null,en=null,Ei=0,Ci=0,Ti=0;Ze.textFeatureIndex?Ei=Ze.textFeatureIndex:Ae.useRuntimeCollisionCircles&&(Ei=Ae.featureIndex),Ze.verticalTextFeatureIndex&&(Ci=Ze.verticalTextFeatureIndex);const ji=Je=>{Je.tileID=this.retainedQueryData[C.bucketInstanceId].tileID;const nn=this.transform.elevation;(nn||Je.elevation)&&(Je.elevation=nn?nn.getAtTileOffset(Je.tileID,Je.tileAnchorX,Je.tileAnchorY):0)},$r=Ze.textBox;if($r){ji($r);const Je=hi=>{let xr=f.WritingMode.horizontal;if(C.allowVerticalPlacement&&!hi&&this.prevPlacement){const Pi=this.prevPlacement.placedOrientations[dt];Pi&&(this.placedOrientations[dt]=Pi,xr=Pi,this.markUsedOrientation(C,xr,Ae))}return xr},nn=(hi,xr)=>{if(C.allowVerticalPlacement&&Fe>0&&Ze.verticalTextBox){for(const Pi of C.writingModes)if(Pi===f.WritingMode.vertical?(ct=xr(),Rt=ct):ct=hi(),ct&&ct.box&&ct.box.length)break}else ct=hi()};if(I.get("text-variable-anchor")){let hi=I.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[dt]){const Hi=this.prevPlacement.variableOffsets[dt];hi.indexOf(Hi.anchor)>0&&(hi=hi.filter(Kr=>Kr!==Hi.anchor),hi.unshift(Hi.anchor))}const xr=(Hi,Kr,ur)=>{const qa=C.getSymbolInstanceTextSize(ee,Ae,this.transform.zoom,it),oc=(Hi.x2-Hi.x1)*qa+2*Hi.padding,Ps=(Hi.y2-Hi.y1)*qa+2*Hi.padding,ga=Ee&&!de?Kr:null;ga&&ji(ga);let Za={box:[],offscreen:!1,occluded:!1};const Dr=ce?2*hi.length:hi.length;for(let Bo=0;Bo<Dr;++Bo){const Jc=this.attemptAnchorPlacement(hi[Bo%hi.length],Hi,oc,Ps,qa,fe,ye,H,M,ne,Bo>=hi.length,Ae,it,C,ur,ga,ee,te);if(Jc&&(Za=Jc.placedGlyphBoxes,Za&&Za.box&&Za.box.length)){Me=!0,Bn=Jc.shift;break}}return Za};nn(()=>xr($r,Ze.iconBox,f.WritingMode.horizontal),()=>{const Hi=Ze.verticalTextBox;return Hi&&ji(Hi),C.allowVerticalPlacement&&!(ct&&ct.box&&ct.box.length)&&Fe>0&&Hi?xr(Hi,Ze.verticalIconBox,f.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),ct&&(Me=ct.box,st=ct.offscreen,pt=ct.occluded);const Pi=Je(ct&&ct.box);if(!Me&&this.prevPlacement){const Hi=this.prevPlacement.variableOffsets[dt];Hi&&(this.variableOffsets[dt]=Hi,this.markUsedJustification(C,Hi.anchor,Ae,Pi))}}else{const hi=(xr,Pi)=>{const Hi=C.getSymbolInstanceTextSize(ee,Ae,this.transform.zoom,it),Kr=this.collisionIndex.placeCollisionBox(C,Hi,xr,new f.pointGeometry(0,0),ce,H,M,ne.predicate);return Kr&&Kr.box&&Kr.box.length&&(this.markUsedOrientation(C,Pi,Ae),this.placedOrientations[dt]=Pi),Kr};nn(()=>hi($r,f.WritingMode.horizontal),()=>{const xr=Ze.verticalTextBox;return C.allowVerticalPlacement&&Fe>0&&xr?(ji(xr),hi(xr,f.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Je(ct&&ct.box&&ct.box.length)}}if(Yt=ct,Me=Yt&&Yt.box&&Yt.box.length>0,st=Yt&&Yt.offscreen,pt=Yt&&Yt.occluded,Ae.useRuntimeCollisionCircles){const Je=C.text.placedSymbolArray.get(Ae.centerJustifiedTextSymbolIndex>=0?Ae.centerJustifiedTextSymbolIndex:Ae.verticalPlacedTextSymbolIndex),nn=f.evaluateSizeForFeature(C.textSizeData,ee,Je),hi=I.get("text-padding");Zn=this.collisionIndex.placeCollisionCircles(C,ce,Je,C.lineVertexArray,C.glyphOffsetArray,nn,M,P,B,x,ye,ne.predicate,Ae.collisionCircleDiameter*nn/f.ONE_EM,hi,this.retainedQueryData[C.bucketInstanceId].tileID),Me=ce||Zn.circles.length>0&&!Zn.collisionDetected,st=st&&Zn.offscreen,pt=Zn.occluded}if(Ze.iconFeatureIndex&&(Ti=Ze.iconFeatureIndex),Ze.iconBox){const Je=nn=>{ji(nn);const hi=Ee&&Bn?Hs(Bn.x,Bn.y,fe,ye,this.transform.angle):new f.pointGeometry(0,0),xr=C.getSymbolInstanceIconSize(te,this.transform.zoom,Ae.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(C,xr,nn,hi,de,H,M,ne.predicate)};Rt&&Rt.box&&Rt.box.length&&Ze.verticalIconBox?(en=Je(Ze.verticalIconBox),He=en.box.length>0):(en=Je(Ze.iconBox),He=en.box.length>0),st=st&&en.offscreen,$t=en.occluded}const ps=Y||0===Ae.numHorizontalGlyphVertices&&0===Fe,ma=le||0===Ae.numIconVertices;if(ps||ma?ma?ps||(He=He&&Me):Me=He&&Me:He=Me=He&&Me,Me&&Yt&&Yt.box&&this.collisionIndex.insertCollisionBox(Yt.box,I.get("text-ignore-placement"),C.bucketInstanceId,Rt&&Rt.box&&Ci?Ci:Ei,ne.ID),He&&en&&this.collisionIndex.insertCollisionBox(en.box,I.get("icon-ignore-placement"),C.bucketInstanceId,Ti,ne.ID),Zn&&(Me&&this.collisionIndex.insertCollisionCircles(Zn.circles,I.get("text-ignore-placement"),C.bucketInstanceId,Ei,ne.ID),x)){const Je=C.bucketInstanceId;let nn=this.collisionCircleArrays[Je];void 0===nn&&(nn=this.collisionCircleArrays[Je]=new ql);for(let hi=0;hi<Zn.circles.length;hi+=4)nn.circles.push(Zn.circles[hi+0]),nn.circles.push(Zn.circles[hi+1]),nn.circles.push(Zn.circles[hi+2]),nn.circles.push(Zn.collisionDetected?1:0)}const vl="globe"!==C.projection.name;Be=Be&&(vl||!pt),Ue=Ue&&(vl||!$t),this.placements[dt]=new Xe(Me||Be,He||Ue,st||C.justReloaded),h[dt]=!0};if(Ie){const Ae=C.getSortedSymbolIndexes(this.transform.angle);for(let it=Ae.length-1;it>=0;--it){const Ze=Ae[it];bt(C.symbolInstances.get(Ze),Ze,C.collisionArrays[Ze])}}else for(let Ae=c.symbolInstanceStart;Ae<c.symbolInstanceEnd;Ae++)bt(C.symbolInstances.get(Ae),Ae,C.collisionArrays[Ae]);if(x&&C.bucketInstanceId in this.collisionCircleArrays){const Ae=this.collisionCircleArrays[C.bucketInstanceId];f.invert(Ae.invProjMatrix,M),Ae.viewportMatrix=this.collisionIndex.getViewportMatrix()}C.justReloaded=!1}markUsedJustification(c,h,x,v){const{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:I,rightJustifiedTextSymbolIndex:M,verticalPlacedTextSymbolIndex:P,crossTileID:B}=x,z=f.getAnchorJustification(h),H=v===f.WritingMode.vertical?P:"left"===z?C:"center"===z?I:"right"===z?M:-1;C>=0&&(c.text.placedSymbolArray.get(C).crossTileID=H>=0&&C!==H?0:B),I>=0&&(c.text.placedSymbolArray.get(I).crossTileID=H>=0&&I!==H?0:B),M>=0&&(c.text.placedSymbolArray.get(M).crossTileID=H>=0&&M!==H?0:B),P>=0&&(c.text.placedSymbolArray.get(P).crossTileID=H>=0&&P!==H?0:B)}markUsedOrientation(c,h,x){const v=h===f.WritingMode.horizontal||h===f.WritingMode.horizontalOnly?h:0,C=h===f.WritingMode.vertical?h:0,{leftJustifiedTextSymbolIndex:I,centerJustifiedTextSymbolIndex:M,rightJustifiedTextSymbolIndex:P,verticalPlacedTextSymbolIndex:B}=x,z=c.text.placedSymbolArray;I>=0&&(z.get(I).placedOrientation=v),M>=0&&(z.get(M).placedOrientation=v),P>=0&&(z.get(P).placedOrientation=v),B>=0&&(z.get(B).placedOrientation=C)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let x=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const v=h?h.symbolFadeChange(c):1,C=h?h.opacities:{},I=h?h.variableOffsets:{},M=h?h.placedOrientations:{};for(const P in this.placements){const B=this.placements[P],z=C[P];z?(this.opacities[P]=new La(z,v,B.text,B.icon,null,B.clipped),x=x||B.text!==z.text.placed||B.icon!==z.icon.placed):(this.opacities[P]=new La(null,v,B.text,B.icon,B.skipFade,B.clipped),x=x||B.text||B.icon)}for(const P in C){const B=C[P];if(!this.opacities[P]){const z=new La(B,v,!1,!1);z.isHidden()||(this.opacities[P]=z,x=x||B.text.placed||B.icon.placed)}}for(const P in I)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=I[P]);for(const P in M)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=M[P]);x?this.lastPlacementChangeTime=c:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:c)}updateLayerOpacities(c,h){const x={};for(const v of h){const C=v.getBucket(c);C&&v.latestFeatureIndex&&c.id===C.layerIds[0]&&this.updateBucketOpacities(C,x,v.collisionBoxArray)}}updateBucketOpacities(c,h,x){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const v=c.layers[0].layout,C=!!c.layers[0].dynamicFilter(),I=new La(null,0,!1,!1,!0),M=v.get("text-allow-overlap"),P=v.get("icon-allow-overlap"),B=v.get("text-variable-anchor"),z="map"===v.get("text-rotation-alignment"),H="map"===v.get("text-pitch-alignment"),K="none"!==v.get("icon-text-fit"),J=new La(null,0,M&&(P||!c.hasIconData()||v.get("icon-optional")),P&&(M||!c.hasTextData()||v.get("text-optional")),!0);!c.collisionArrays&&x&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(x);const ee=(ne,Y,le)=>{for(let ce=0;ce<Y/4;ce++)ne.opacityVertexArray.emplaceBack(le)};let te=0;for(let ne=0;ne<c.symbolInstances.length;ne++){const Y=c.symbolInstances.get(ne),{numHorizontalGlyphVertices:le,numVerticalGlyphVertices:ce,crossTileID:de,numIconVertices:fe}=Y;let ye=this.opacities[de];h[de]?ye=I:ye||(ye=J,this.opacities[de]=ye),h[de]=!0;const Ee=le>0||ce>0,Ie=fe>0,Be=this.placedOrientations[de],Ue=Be===f.WritingMode.vertical,bt=Be===f.WritingMode.horizontal||Be===f.WritingMode.horizontalOnly;if(!Ee&&!Ie||ye.isHidden()||te++,Ee){const Ae=$d(ye.text);ee(c.text,le,Ue?Nc:Ae),ee(c.text,ce,bt?Nc:Ae);const it=ye.text.isHidden(),{leftJustifiedTextSymbolIndex:Ze,centerJustifiedTextSymbolIndex:dt,rightJustifiedTextSymbolIndex:Fe,verticalPlacedTextSymbolIndex:Me}=Y,He=c.text.placedSymbolArray,st=it||Ue?1:0;Ze>=0&&(He.get(Ze).hidden=st),dt>=0&&(He.get(dt).hidden=st),Fe>=0&&(He.get(Fe).hidden=st),Me>=0&&(He.get(Me).hidden=it||bt?1:0);const pt=this.variableOffsets[de];pt&&this.markUsedJustification(c,pt.anchor,Y,Be);const $t=this.placedOrientations[de];$t&&(this.markUsedJustification(c,"left",Y,$t),this.markUsedOrientation(c,$t,Y))}if(Ie){const Ae=$d(ye.icon),{placedIconSymbolIndex:it,verticalPlacedIconSymbolIndex:Ze}=Y,dt=c.icon.placedSymbolArray,Fe=ye.icon.isHidden()?1:0;it>=0&&(ee(c.icon,fe,Ue?Nc:Ae),dt.get(it).hidden=Fe),Ze>=0&&(ee(c.icon,Y.numVerticalIconVertices,bt?Nc:Ae),dt.get(Ze).hidden=Fe)}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const Ae=c.collisionArrays[ne];if(Ae){let it=new f.pointGeometry(0,0),Ze=!0;if(Ae.textBox||Ae.verticalTextBox){if(B){const Fe=this.variableOffsets[de];Fe?(it=Pu(Fe.anchor,Fe.width,Fe.height,Fe.textOffset,Fe.textScale),z&&it._rotate(H?this.transform.angle:-this.transform.angle)):Ze=!1}C&&(Ze=!ye.clipped),Ae.textBox&&Xr(c.textCollisionBox.collisionVertexArray,ye.text.placed,!Ze||Ue,it.x,it.y),Ae.verticalTextBox&&Xr(c.textCollisionBox.collisionVertexArray,ye.text.placed,!Ze||bt,it.x,it.y)}const dt=Ze&&!(bt||!Ae.verticalIconBox);Ae.iconBox&&Xr(c.iconCollisionBox.collisionVertexArray,ye.icon.placed,dt,K?it.x:0,K?it.y:0),Ae.verticalIconBox&&Xr(c.iconCollisionBox.collisionVertexArray,ye.icon.placed,!dt,K?it.x:0,K?it.y:0)}}}if(c.fullyClipped=0===te,c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){const ne=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=ne.invProjMatrix,c.placementViewportMatrix=ne.viewportMatrix,c.collisionCircleArray=ne.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return 0===this.fadeDuration?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,h){const x=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*x>c}setStale(){this.stale=!0}}function Xr(m,c,h,x,v){m.emplaceBack(c?1:0,h?1:0,x||0,v||0),m.emplaceBack(c?1:0,h?1:0,x||0,v||0),m.emplaceBack(c?1:0,h?1:0,x||0,v||0),m.emplaceBack(c?1:0,h?1:0,x||0,v||0)}const Oo=Math.pow(2,25),Hd=Math.pow(2,24),Tr=Math.pow(2,17),Ou=Math.pow(2,16),$s=Math.pow(2,9),Fu=Math.pow(2,8),fo=Math.pow(2,1);function $d(m){if(0===m.opacity&&!m.placed)return 0;if(1===m.opacity&&m.placed)return 4294967295;const c=m.placed?1:0,h=Math.floor(127*m.opacity);return h*Oo+c*Hd+h*Tr+c*Ou+h*$s+c*Fu+h*fo+c}const Nc=0;class fa{constructor(c){this._sortAcrossTiles="viewport-y"!==c.layout.get("symbol-z-order")&&void 0!==c.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,h,x,v,C){const I=this._bucketParts;for(;this._currentTileIndex<c.length;)if(h.getBucketParts(I,v,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((M,P)=>M.sortKey-P.sortKey));this._currentPartIndex<I.length;){const M=I[this._currentPartIndex];if(h.placeLayerBucketPart(M,this._seenCrossTileIDs,x,0===M.symbolInstanceStart),this._currentPartIndex++,C())return!0}return!1}}class Nu{constructor(c,h,x,v,C,I,M,P){this.placement=new wo(c,C,I,M,P),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(c,h,x){const v=f.exported.now(),C=()=>{const I=f.exported.now()-v;return!this._forceFullPlacement&&I>2};for(;this._currentPlacementIndex>=0;){const I=h[c[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if("symbol"===I.type&&(!I.minzoom||I.minzoom<=M)&&(!I.maxzoom||I.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new fa(I)),this._inProgressLayer.continuePlacement(x[I.source],this.placement,this._showCollisionBoxes,I,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const Lu=512/f.EXTENT/2;class Ap{constructor(c,h,x){this.tileID=c,this.indexedSymbolInstances={},this.bucketInstanceId=x;for(let v=0;v<h.length;v++){const C=h.get(v),I=C.key;this.indexedSymbolInstances[I]||(this.indexedSymbolInstances[I]=[]),this.indexedSymbolInstances[I].push({crossTileID:C.crossTileID,coord:this.getScaledCoordinates(C,c)})}}getScaledCoordinates(c,h){const x=Lu/Math.pow(2,h.canonical.z-this.tileID.canonical.z);return{x:Math.floor((h.canonical.x*f.EXTENT+c.tileAnchorX)*x),y:Math.floor((h.canonical.y*f.EXTENT+c.tileAnchorY)*x)}}findMatches(c,h,x){const v=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let C=0;C<c.length;C++){const I=c.get(C);if(I.crossTileID)continue;const M=this.indexedSymbolInstances[I.key];if(!M)continue;const P=this.getScaledCoordinates(I,h);for(const B of M)if(Math.abs(B.coord.x-P.x)<=v&&Math.abs(B.coord.y-P.y)<=v&&!x[B.crossTileID]){x[B.crossTileID]=!0,I.crossTileID=B.crossTileID;break}}}}class Fo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ri{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const h=Math.round((c-this.lng)/360);if(0!==h)for(const x in this.indexes){const v=this.indexes[x],C={};for(const I in v){const M=v[I];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+h),C[M.tileID.key]=M}this.indexes[x]=C}this.lng=c}addBucket(c,h,x){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let C=0;C<h.symbolInstances.length;C++)h.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const v=this.usedCrossTileIDs[c.overscaledZ];for(const C in this.indexes){const I=this.indexes[C];if(Number(C)>c.overscaledZ)for(const M in I){const P=I[M];P.tileID.isChildOf(c)&&P.findMatches(h.symbolInstances,c,v)}else{const M=I[c.scaledTo(Number(C)).key];M&&M.findMatches(h.symbolInstances,c,v)}}for(let C=0;C<h.symbolInstances.length;C++){const I=h.symbolInstances.get(C);I.crossTileID||(I.crossTileID=x.generate(),v[I.crossTileID]=!0)}return void 0===this.indexes[c.overscaledZ]&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new Ap(c,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(c,h){for(const x in h.indexedSymbolInstances)for(const v of h.indexedSymbolInstances[x])delete this.usedCrossTileIDs[c][v.crossTileID]}removeStaleBuckets(c){let h=!1;for(const x in this.indexes){const v=this.indexes[x];for(const C in v)c[v[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,v[C]),delete v[C],h=!0)}return h}}class Mp{constructor(){this.layerIndexes={},this.crossTileIDs=new Fo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,h,x,v){let C=this.layerIndexes[c.id];void 0===C&&(C=this.layerIndexes[c.id]=new ri);let I=!1;const M={};"globe"!==v.name&&C.handleWrapJump(x);for(const P of h){const B=P.getBucket(c);B&&c.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(P.tileID,B,this.crossTileIDs)&&(I=!0),M[B.bucketInstanceId]=!0)}return C.removeStaleBuckets(M)&&(I=!0),I}pruneUnusedLayers(c){const h={};c.forEach(x=>{h[x]=!0});for(const x in this.layerIndexes)h[x]||delete this.layerIndexes[x]}}const Bu=(m,c)=>f.emitValidationErrors(m,c&&c.filter(h=>"source.canvas"!==h.identifier)),Lc=f.pick(on,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Tt=f.pick(on,["setCenter","setZoom","setBearing","setPitch"]),Gd={version:8,layers:[],sources:{}},Pn={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Eo extends f.Evented{constructor(c,h={}){super(),this.map=c,this.dispatcher=new Ko(Zt(),this),this.imageManager=new Mi,this.imageManager.setEventedParent(this),this.glyphManager=new f.GlyphManager(c._requestManager,h.localFontFamily?f.LocalGlyphMode.all:h.localIdeographFontFamily?f.LocalGlyphMode.ideographs:f.LocalGlyphMode.none,h.localFontFamily||h.localIdeographFontFamily),this.crossTileSymbolIndex=new Mp,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",f.getReferrer());const x=this;this._rtlTextPluginCallback=Eo.registerForPluginStateChange(v=>{x.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(C,I)=>{if(f.triggerPluginCompletionEvent(C),I&&I.every(M=>M))for(const M in x._sourceCaches){const P=x._sourceCaches[M],B=P.getSource().type;"vector"!==B&&"geojson"!==B||P.reload()}})}),this.on("data",v=>{if("source"!==v.dataType||"metadata"!==v.sourceDataType)return;const C=this.getSource(v.sourceId);if(C&&C.vectorLayerIds)for(const I in this._layers){const M=this._layers[I];M.source===C.id&&this._validateLayer(M)}})}loadURL(c,h={}){this.fire(new f.Event("dataloading",{dataType:"style"}));const x="boolean"==typeof h.validate?h.validate:!f.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,h.accessToken);const v=this.map._requestManager.transformRequest(c,f.ResourceType.Style);this._request=f.getJSON(v,(C,I)=>{this._request=null,C?this.fire(new f.ErrorEvent(C)):I&&this._load(I,x)})}loadJSON(c,h={}){this.fire(new f.Event("dataloading",{dataType:"style"})),this._request=f.exported.frame(()=>{this._request=null,this._load(c,!1!==h.validate)})}loadEmpty(){this.fire(new f.Event("dataloading",{dataType:"style"})),this._load(Gd,!1)}_updateLayerCount(c,h){const x=h?1:-1;c.is3D()&&(this._num3DLayers+=x),"circle"===c.type&&(this._numCircleLayers+=x),"symbol"===c.type&&(this._numSymbolLayers+=x)}_load(c,h){if(h&&Bu(this,f.validateStyle(c)))return;this._loaded=!0,this.stylesheet=f.clone$1(c),this._updateMapProjection();for(const v in c.sources)this.addSource(v,c.sources[v],{validate:!1});this._changed=!1,c.sprite?this._loadSprite(c.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(c.glyphs);const x=li(this.stylesheet.layers);this._order=x.map(v=>v.id),this._layers={},this._serializedLayers={};for(const v of x){const C=f.createStyleLayer(v);C.setEventedParent(this,{layer:{id:C.id}}),this._layers[C.id]=C,this._serializedLayers[C.id]=C.serialize(),this._updateLayerCount(C,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new er(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new f.Event("data",{dataType:"style"})),this.fire(new f.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(c){c?this.stylesheet.projection=c:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(c){this._spriteRequest=function(h,x,v){let C,I,M;const P=f.exported.devicePixelRatio>1?"@2x":"";let B=f.getJSON(x.transformRequest(x.normalizeSpriteURL(h,P,".json"),f.ResourceType.SpriteJSON),(K,J)=>{B=null,M||(M=K,C=J,H())}),z=f.getImage(x.transformRequest(x.normalizeSpriteURL(h,P,".png"),f.ResourceType.SpriteImage),(K,J)=>{z=null,M||(M=K,I=J,H())});function H(){if(M)v(M);else if(C&&I){const K=f.exported.getImageData(I),J={};for(const ee in C){const{width:te,height:ne,x:Y,y:le,sdf:ce,pixelRatio:de,stretchX:fe,stretchY:ye,content:Ee}=C[ee],Ie=new f.RGBAImage({width:te,height:ne});f.RGBAImage.copy(K,Ie,{x:Y,y:le},{x:0,y:0},{width:te,height:ne}),J[ee]={data:Ie,pixelRatio:de,sdf:ce,stretchX:fe,stretchY:ye,content:Ee}}v(null,J)}}return{cancel(){B&&(B.cancel(),B=null),z&&(z.cancel(),z=null)}}}(c,this.map._requestManager,(h,x)=>{if(this._spriteRequest=null,h)this.fire(new f.ErrorEvent(h));else if(x)for(const v in x)this.imageManager.addImage(v,x[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new f.Event("data",{dataType:"style"}))})}_validateLayer(c){const h=this.getSource(c.source);if(!h)return;const x=c.sourceLayer;x&&("geojson"===h.type||h.vectorLayerIds&&-1===h.vectorLayerIds.indexOf(x))&&this.fire(new f.ErrorEvent(new Error(`Source layer "${x}" does not exist on source "${h.id}" as specified by style layer "${c.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this._sourceCaches)if(!this._sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(c){const h=[];for(const x of c){const v=this._layers[x];"custom"!==v.type&&h.push(v.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const c in this._sourceCaches)if(this._sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(c){return!!this.terrain&&("function"==typeof c.isLayerDraped?c.isLayerDraped():Pn[c.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(c){if(!this._loaded)return;const h=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(v.length||C.length)&&this._updateWorkerLayers(v,C);for(const I in this._updatedSources){const M=this._updatedSources[I];"reload"===M?this._reloadSource(I):"clear"===M&&this._clearSource(I)}this._updateTilesForChangedImages();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(c);this.light.updateTransitions(c),this.fog&&this.fog.updateTransitions(c),this._resetUpdates()}const x={};for(const v in this._sourceCaches){const C=this._sourceCaches[v];x[v]=C.used,C.used=!1}for(const v of this._order){const C=this._layers[v];if(C.recalculate(c,this._availableImages),!C.isHidden(c.zoom)){const M=this._getLayerSourceCache(C);M&&(M.used=!0)}const I=this.map.painter;if(I){const M=C.getProgramIds();if(!M)continue;const P=C.getProgramConfiguration(c.zoom);for(const B of M)I.useProgram(B,P)}}for(const v in x){const C=this._sourceCaches[v];x[v]!==C.used&&C.getSource().fire(new f.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:C.getSource().id}))}this.light.recalculate(c),this.terrain&&this.terrain.recalculate(c),this.fog&&this.fog.recalculate(c),this.z=c.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),h&&this.fire(new f.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const h in this._sourceCaches)this._sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateWorkerLayers(c,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(c){if(this._checkLoaded(),Bu(this,f.validateStyle(c)))return!1;(c=f.clone$1(c)).layers=li(c.layers);const h=function(v,C){if(!v)return[{command:on.setStyle,args:[C]}];let I=[];try{if(!Le(v.version,C.version))return[{command:on.setStyle,args:[C]}];Le(v.center,C.center)||I.push({command:on.setCenter,args:[C.center]}),Le(v.zoom,C.zoom)||I.push({command:on.setZoom,args:[C.zoom]}),Le(v.bearing,C.bearing)||I.push({command:on.setBearing,args:[C.bearing]}),Le(v.pitch,C.pitch)||I.push({command:on.setPitch,args:[C.pitch]}),Le(v.sprite,C.sprite)||I.push({command:on.setSprite,args:[C.sprite]}),Le(v.glyphs,C.glyphs)||I.push({command:on.setGlyphs,args:[C.glyphs]}),Le(v.transition,C.transition)||I.push({command:on.setTransition,args:[C.transition]}),Le(v.light,C.light)||I.push({command:on.setLight,args:[C.light]}),Le(v.fog,C.fog)||I.push({command:on.setFog,args:[C.fog]}),Le(v.projection,C.projection)||I.push({command:on.setProjection,args:[C.projection]});const M={},P=[];!function(H,K,J,ee){let te;for(te in K=K||{},H=H||{})H.hasOwnProperty(te)&&(K.hasOwnProperty(te)||vi(te,J,ee));for(te in K){if(!K.hasOwnProperty(te))continue;const ne=K[te];H.hasOwnProperty(te)?Le(H[te],ne)||("geojson"===H[te].type&&"geojson"===ne.type&&Jo(H,K,te)?J.push({command:on.setGeoJSONSourceData,args:[te,ne.data]}):Po(te,K,J,ee)):gi(te,K,J)}}(v.sources,C.sources,P,M);const B=[];v.layers&&v.layers.forEach(H=>{H.source&&M[H.source]?I.push({command:on.removeLayer,args:[H.id]}):B.push(H)});let z=v.terrain;z&&M[z.source]&&(I.push({command:on.setTerrain,args:[void 0]}),z=void 0),I=I.concat(P),Le(z,C.terrain)||I.push({command:on.setTerrain,args:[C.terrain]}),function(H,K,J){K=K||[];const ee=(H=H||[]).map(tr),te=K.map(tr),ne=H.reduce(gr,{}),Y=K.reduce(gr,{}),le=ee.slice(),ce=Object.create(null);let de,fe,ye,Ee,Ie,Be,Ue;for(de=0,fe=0;de<ee.length;de++)ye=ee[de],Y.hasOwnProperty(ye)?fe++:(J.push({command:on.removeLayer,args:[ye]}),le.splice(le.indexOf(ye,fe),1));for(de=0,fe=0;de<te.length;de++)ye=te[te.length-1-de],le[le.length-1-de]!==ye&&(ne.hasOwnProperty(ye)?(J.push({command:on.removeLayer,args:[ye]}),le.splice(le.lastIndexOf(ye,le.length-fe),1)):fe++,Be=le[le.length-de],J.push({command:on.addLayer,args:[Y[ye],Be]}),le.splice(le.length-de,0,ye),ce[ye]=!0);for(de=0;de<te.length;de++)if(ye=te[de],Ee=ne[ye],Ie=Y[ye],!ce[ye]&&!Le(Ee,Ie))if(Le(Ee.source,Ie.source)&&Le(Ee["source-layer"],Ie["source-layer"])&&Le(Ee.type,Ie.type)){for(Ue in Ye(Ee.layout,Ie.layout,J,ye,null,on.setLayoutProperty),Ye(Ee.paint,Ie.paint,J,ye,null,on.setPaintProperty),Le(Ee.filter,Ie.filter)||J.push({command:on.setFilter,args:[ye,Ie.filter]}),Le(Ee.minzoom,Ie.minzoom)&&Le(Ee.maxzoom,Ie.maxzoom)||J.push({command:on.setLayerZoomRange,args:[ye,Ie.minzoom,Ie.maxzoom]}),Ee)Ee.hasOwnProperty(Ue)&&"layout"!==Ue&&"paint"!==Ue&&"filter"!==Ue&&"metadata"!==Ue&&"minzoom"!==Ue&&"maxzoom"!==Ue&&(0===Ue.indexOf("paint.")?Ye(Ee[Ue],Ie[Ue],J,ye,Ue.slice(6),on.setPaintProperty):Le(Ee[Ue],Ie[Ue])||J.push({command:on.setLayerProperty,args:[ye,Ue,Ie[Ue]]}));for(Ue in Ie)Ie.hasOwnProperty(Ue)&&!Ee.hasOwnProperty(Ue)&&"layout"!==Ue&&"paint"!==Ue&&"filter"!==Ue&&"metadata"!==Ue&&"minzoom"!==Ue&&"maxzoom"!==Ue&&(0===Ue.indexOf("paint.")?Ye(Ee[Ue],Ie[Ue],J,ye,Ue.slice(6),on.setPaintProperty):Le(Ee[Ue],Ie[Ue])||J.push({command:on.setLayerProperty,args:[ye,Ue,Ie[Ue]]}))}else J.push({command:on.removeLayer,args:[ye]}),Be=le[le.lastIndexOf(ye)+1],J.push({command:on.addLayer,args:[Ie,Be]})}(B,C.layers,I)}catch(M){console.warn("Unable to compute style diff:",M),I=[{command:on.setStyle,args:[C]}]}return I}(this.serialize(),c).filter(v=>!(v.command in Tt));if(0===h.length)return!1;const x=h.filter(v=>!(v.command in Lc));if(x.length>0)throw new Error(`Unimplemented: ${x.map(v=>v.command).join(", ")}.`);return h.forEach(v=>{"setTransition"!==v.command&&"setProjection"!==v.command&&this[v.command].apply(this,v.args)}),this.stylesheet=c,this._updateMapProjection(),!0}addImage(c,h){return this.getImage(c)?this.fire(new f.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(c,h),this._afterImageUpdated(c),this)}updateImage(c,h){this.imageManager.updateImage(c,h)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){return this.getImage(c)?(this.imageManager.removeImage(c),this._afterImageUpdated(c),this):this.fire(new f.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new f.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(c,h,x={}){if(this._checkLoaded(),void 0!==this.getSource(c))throw new Error("There is already a source with this ID");if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(f.validateSource,`sources.${c}`,h,null,x))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const v=ke(c,h,this.dispatcher,this);v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(c),source:v.serialize(),sourceId:c}));const C=I=>{const M=(I?"symbol:":"other:")+c,P=this._sourceCaches[M]=new f.SourceCache(M,v,I);(I?this._symbolSourceCaches:this._otherSourceCaches)[c]=P,P.style=this,P.onAdd(this.map)};C(!1),"vector"!==h.type&&"geojson"!==h.type||C(!0),v.onAdd&&v.onAdd(this.map),this._changed=!0}removeSource(c){this._checkLoaded();const h=this.getSource(c);if(!h)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===c)return this.fire(new f.ErrorEvent(new Error(`Source "${c}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.get().source===c)return this.fire(new f.ErrorEvent(new Error(`Source "${c}" cannot be removed while terrain is using it.`)));const x=this._getSourceCaches(c);for(const v of x)delete this._sourceCaches[v.id],delete this._updatedSources[v.id],v.fire(new f.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles();return delete this._otherSourceCaches[c],delete this._symbolSourceCaches[c],h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(c,h){this._checkLoaded(),this.getSource(c).setData(h),this._changed=!0}getSource(c){const h=this._getSourceCache(c);return h&&h.getSource()}_getSources(){const c=[];for(const h in this._otherSourceCaches){const x=this._getSourceCache(h);x&&c.push(x.getSource())}return c}addLayer(c,h,x={}){this._checkLoaded();const v=c.id;if(this.getLayer(v))return void this.fire(new f.ErrorEvent(new Error(`Layer with id "${v}" already exists on this map`)));let C;if("custom"===c.type){if(Bu(this,f.validateCustomStyleLayer(c)))return;C=f.createStyleLayer(c)}else{if("object"==typeof c.source&&(this.addSource(v,c.source),c=f.clone$1(c),c=f.extend(c,{source:v})),this._validate(f.validateLayer,`layers.${v}`,c,{arrayIndex:-1},x))return;C=f.createStyleLayer(c),this._validateLayer(C),C.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[C.id]=C.serialize(),this._updateLayerCount(C,!0)}const I=h?this._order.indexOf(h):this._order.length;if(h&&-1===I)return void this.fire(new f.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`)));this._order.splice(I,0,v),this._layerOrderChanged=!0,this._layers[v]=C;const M=this._getLayerSourceCache(C);if(this._removedLayers[v]&&C.source&&M&&"custom"!==C.type){const P=this._removedLayers[v];delete this._removedLayers[v],P.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",M.pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(c,h){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new f.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===h)return;const x=this._order.indexOf(c);this._order.splice(x,1);const v=h?this._order.indexOf(h):this._order.length;h&&-1===v?this.fire(new f.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`))):(this._order.splice(v,0,c),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(c){this._checkLoaded();const h=this._layers[c];if(!h)return void this.fire(new f.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be removed.`)));h.setEventedParent(null),this._updateLayerCount(h,!1);const x=this._order.indexOf(c);this._order.splice(x,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=h,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],h.onRemove&&h.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(c){return this._layers[c]}hasLayer(c){return c in this._layers}hasLayerType(c){for(const h in this._layers)if(this._layers[h].type===c)return!0;return!1}setLayerZoomRange(c,h,x){this._checkLoaded();const v=this.getLayer(c);v?v.minzoom===h&&v.maxzoom===x||(null!=h&&(v.minzoom=h),null!=x&&(v.maxzoom=x),this._updateLayer(v)):this.fire(new f.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(c,h,x={}){this._checkLoaded();const v=this.getLayer(c);if(v){if(!Le(v.filter,h))return null==h?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(f.validateFilter,`layers.${v.id}.filter`,h,{layerType:v.type},x)||(v.filter=f.clone$1(h),this._updateLayer(v)))}else this.fire(new f.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be filtered.`)))}getFilter(c){const h=this.getLayer(c);return h&&f.clone$1(h.filter)}setLayoutProperty(c,h,x,v={}){this._checkLoaded();const C=this.getLayer(c);C?Le(C.getLayoutProperty(h),x)||(C.setLayoutProperty(h,x,v),this._updateLayer(C)):this.fire(new f.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(c,h){const x=this.getLayer(c);if(x)return x.getLayoutProperty(h);this.fire(new f.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style.`)))}setPaintProperty(c,h,x,v={}){this._checkLoaded();const C=this.getLayer(c);C?Le(C.getPaintProperty(h),x)||(C.setPaintProperty(h,x,v)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new f.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(c,h){const x=this.getLayer(c);return x&&x.getPaintProperty(h)}setFeatureState(c,h){this._checkLoaded();const x=c.source,v=c.sourceLayer,C=this.getSource(x);if(!C)return void this.fire(new f.ErrorEvent(new Error(`The source '${x}' does not exist in the map's style.`)));const I=C.type;if("geojson"===I&&v)return void this.fire(new f.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===I&&!v)return void this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===c.id&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided.")));const M=this._getSourceCaches(x);for(const P of M)P.setFeatureState(v,c.id,h)}removeFeatureState(c,h){this._checkLoaded();const x=c.source,v=this.getSource(x);if(!v)return void this.fire(new f.ErrorEvent(new Error(`The source '${x}' does not exist in the map's style.`)));const C=v.type,I="vector"===C?c.sourceLayer:void 0;if("vector"===C&&!I)return void this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&"string"!=typeof c.id&&"number"!=typeof c.id)return void this.fire(new f.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const M=this._getSourceCaches(x);for(const P of M)P.removeFeatureState(I,c.id,h)}getFeatureState(c){this._checkLoaded();const h=c.source,x=c.sourceLayer,v=this.getSource(h);if(v){if("vector"!==v.type||x)return void 0===c.id&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(h)[0].getFeatureState(x,c.id);this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return f.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const c={};for(const h in this._sourceCaches){const x=this._sourceCaches[h].getSource();c[x.id]||(c[x.id]=x.serialize())}return f.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:c,layers:this._serializeLayers(this._order)},h=>void 0!==h)}_updateLayer(c){this._updatedLayers[c.id]=!0;const h=this._getLayerSourceCache(c);c.source&&!this._updatedSources[c.source]&&h&&"raster"!==h.getSource().type&&(this._updatedSources[c.source]="reload",h.pause()),this._changed=!0,c.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(c){const h=I=>"fill-extrusion"===this._layers[I].type,x={},v=[];for(let I=this._order.length-1;I>=0;I--){const M=this._order[I];if(h(M)){x[M]=I;for(const P of c){const B=P[M];if(B)for(const z of B)v.push(z)}}}v.sort((I,M)=>M.intersectionZ-I.intersectionZ);const C=[];for(let I=this._order.length-1;I>=0;I--){const M=this._order[I];if(h(M))for(let P=v.length-1;P>=0;P--){const B=v[P].feature;if(x[B.layer.id]<I)break;C.push(B),v.pop()}else for(const P of c){const B=P[M];if(B)for(const z of B)C.push(z.feature)}}return C}queryRenderedFeatures(c,h,x){h&&h.filter&&this._validate(f.validateFilter,"queryRenderedFeatures.filter",h.filter,null,h);const v={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new f.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of h.layers){const B=this._layers[P];if(!B)return this.fire(new f.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];v[B.source]=!0}}const C=[];h.availableImages=this._availableImages;const I=h&&h.layers?h.layers.some(P=>{const B=this.getLayer(P);return B&&B.is3D()}):this.has3DLayers(),M=Gn.createFromScreenPoints(c,x);for(const P in this._sourceCaches){const B=this._sourceCaches[P].getSource().id;h.layers&&!v[B]||C.push(Oe(this._sourceCaches[P],this._layers,this._serializedLayers,M,h,x,I,!!this.map._showQueryGeometry))}return this.placement&&C.push(function(P,B,z,H,K,J,ee){const te={},ne=J.queryRenderedSymbols(H),Y=[];for(const le of Object.keys(ne).map(Number))Y.push(ee[le]);Y.sort(Mt);for(const le of Y){const ce=le.featureIndex.lookupSymbolFeatures(ne[le.bucketInstanceId],B,le.bucketIndex,le.sourceLayerIndex,K.filter,K.layers,K.availableImages,P);for(const de in ce){const fe=te[de]=te[de]||[],ye=ce[de];ye.sort((Ee,Ie)=>{const Be=le.featureSortOrder;if(Be){const Ue=Be.indexOf(Ee.featureIndex);return Be.indexOf(Ie.featureIndex)-Ue}return Ie.featureIndex-Ee.featureIndex});for(const Ee of ye)fe.push(Ee)}}for(const le in te)te[le].forEach(ce=>{const de=ce.feature,fe=z(P[le]);if(!fe)return;const ye=fe.getFeatureState(de.layer["source-layer"],de.id);de.source=de.layer.source,de.layer["source-layer"]&&(de.sourceLayer=de.layer["source-layer"]),de.state=ye});return te}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),M.screenGeometry,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(c,h){h&&h.filter&&this._validate(f.validateFilter,"querySourceFeatures.filter",h.filter,null,h);const x=this._getSourceCaches(c);let v=[];for(const C of x)v=v.concat(ot(C,h));return v}addSourceType(c,h,x){return Eo.getSourceType(c)?x(new Error(`A source type called "${c}" already exists.`)):(Eo.setSourceType(c,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:h.workerSourceURL},x):x(null,null))}getLight(){return this.light.getLight()}setLight(c,h={}){this._checkLoaded();const x=this.light.getLight();let v=!1;for(const I in c)if(!Le(c[I],x[I])){v=!0;break}if(!v)return;const C=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(c,h),this.light.updateTransitions(C)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(c,h=1){if(this._checkLoaded(),!c)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let x=c;if(1===h){if("object"==typeof x.source){const v="terrain-dem-src";this.addSource(v,x.source),x=f.clone$1(x),x=f.extend(x,{source:v})}if(this._validate(f.validateTerrain,"terrain",x))return}if(!this.terrain||this.terrain&&h!==this.terrain.drapeRenderMode){if(!x)return;this._createTerrain(x,h)}else{const v=this.terrain,C=v.get();for(const I of Object.keys(f.spec.terrain))!x.hasOwnProperty(I)&&f.spec.terrain[I].default&&(x[I]=f.spec.terrain[I].default);for(const I in x)if(!Le(x[I],C[I])){v.set(x),this.stylesheet.terrain=x;const M=this._setTransitionParameters({duration:0});v.updateTransitions(M);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(c){const h=this.fog=new cl(c,this.map.transform);this.stylesheet.fog=c;const x=this._setTransitionParameters({duration:0});h.updateTransitions(x)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const c of this.map._markers)c._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(c){if(this._checkLoaded(),!c)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog,x=h.get();0===Object.keys(c).length&&h.set(c);for(const v in c)if(!Le(c[v],x[v])){h.set(c),this.stylesheet.fog=c;const C=this._setTransitionParameters({duration:0});h.updateTransitions(C);break}}else this._createFog(c);this._markersNeedUpdate=!0}_setTransitionParameters(c){return{now:f.exported.now(),transition:f.extend(c,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const c=this._order.filter(x=>this.isLayerDraped(this._layers[x])),h=this._order.filter(x=>!this.isLayerDraped(this._layers[x]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...c),this._drapedFirstOrder.push(...h)}_createTerrain(c,h){const x=this.terrain=new In(c,h);this.stylesheet.terrain=c,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const v=this._setTransitionParameters({duration:0});x.updateTransitions(v)}_force3DLayerUpdate(){for(const c in this._layers){const h=this._layers[c];"fill-extrusion"===h.type&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const c in this._layers){const h=this._layers[c];"symbol"===h.type&&this._updateLayer(h)}}_validate(c,h,x,v,C={}){return(!C||!1!==C.validate)&&Bu(this,c.call(f.validateStyle,f.extend({key:h,style:this.serialize(),value:x,styleSpec:f.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),f.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this._sourceCaches)this._sourceCaches[c].clearTiles(),this._sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(c){const h=this._getSourceCaches(c);for(const x of h)x.clearTiles()}_reloadSource(c){const h=this._getSourceCaches(c);for(const x of h)x.resume(),x.reload()}_reloadSources(){for(const c of this._getSources())c.reload&&c.reload()}_updateSources(c){for(const h in this._sourceCaches)this._sourceCaches[h].update(c)}_generateCollisionBoxes(){for(const c in this._sourceCaches){const h=this._sourceCaches[c];h.resume(),h.reload()}}_updatePlacement(c,h,x,v,C=!1){let I=!1,M=!1;const P={};for(const B of this._order){const z=this._layers[B];if("symbol"!==z.type)continue;if(!P[z.source]){const K=this._getLayerSourceCache(z);if(!K)continue;P[z.source]=K.getRenderableIds(!0).map(J=>K.getTileByID(J)).sort((J,ee)=>ee.tileID.overscaledZ-J.tileID.overscaledZ||(J.tileID.isLessThan(ee.tileID)?-1:1))}const H=this.crossTileSymbolIndex.addLayer(z,P[z.source],c.center.lng,c.projection);I=I||H}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),C=C||this._layerOrderChanged||0===x,this._layerOrderChanged&&this.fire(new f.Event("neworder")),(C||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(f.exported.now(),c.zoom))&&(this.pauseablePlacement=new Nu(c,this._order,C,h,x,v,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(f.exported.now()),M=!0),I&&this.pauseablePlacement.placement.setStale()),M||I)for(const B of this._order){const z=this._layers[B];"symbol"===z.type&&this.placement.updateLayerOpacities(z,P[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(f.exported.now())}_releaseSymbolFadeTiles(){for(const c in this._sourceCaches)this._sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,h,x){this.imageManager.getImages(h.icons,x),this._updateTilesForChangedImages();const v=C=>{C&&C.setDependencies(h.tileID.key,h.type,h.icons)};v(this._otherSourceCaches[h.source]),v(this._symbolSourceCaches[h.source])}getGlyphs(c,h,x){this.glyphManager.getGlyphs(h.stacks,x)}getResource(c,h,x){return f.makeRequest(h,x)}_getSourceCache(c){return this._otherSourceCaches[c]}_getLayerSourceCache(c){return"symbol"===c.type?this._symbolSourceCaches[c.source]:this._otherSourceCaches[c.source]}_getSourceCaches(c){const h=[];return this._otherSourceCaches[c]&&h.push(this._otherSourceCaches[c]),this._symbolSourceCaches[c]&&h.push(this._symbolSourceCaches[c]),h}_isSourceCacheLoaded(c){const h=this._getSourceCaches(c);return 0===h.length?(this.fire(new f.ErrorEvent(new Error(`There is no source with ID '${c}'`))),!1):h.every(x=>x.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Eo.getSourceType=function(m){return Re[m]},Eo.setSourceType=function(m,c){Re[m]=c},Eo.registerForPluginStateChange=f.registerForPluginStateChange;var Bc="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Wd="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",af="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",zc="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",Vc="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let jc={},Zl={};const pl=[];Ba(Bc,pl),Ba(af,pl),Ba(zc,pl),Ba(Vc,pl),jc=di("",af),Zl=di(Vc,zc);const gn=di("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Yl=Bc,Uc="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var Sr={background:di("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:di("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:di("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:di("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:di("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:di("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:di("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:di("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:di("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:di("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:di("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:di("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:di("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:di("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:di("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:di("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:di("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:di("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:di("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:di("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:di("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:di("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:di("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:di("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:di("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:di("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Wd),skyboxGradient:di("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Wd),skyboxCapture:di("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:di("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:di("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function Ba(m,c){const h=m.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let x of h)if(x=x.trim(),"#"===x[0]&&x.includes("if")&&!x.includes("endif")){x=x.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=x.split(" ");for(const C of v)c.includes(C)||c.push(C)}}function di(m,c){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,x=c.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),v={},C=[...pl];return Ba(m,C),Ba(c,C),{fragmentSource:m=m.replace(h,(I,M,P,B,z)=>(v[z]=!0,"define"===M?`\n#ifndef HAS_UNIFORM_u_${z}\nvarying ${P} ${B} ${z};\n#else\nuniform ${P} ${B} u_${z};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${z}\n    ${P} ${B} ${z} = u_${z};\n#endif\n`)),vertexSource:c=c.replace(h,(I,M,P,B,z)=>{const H="float"===B?"vec2":"vec4",K=z.match(/color/)?"color":H;return v[z]?"define"===M?`\n#ifndef HAS_UNIFORM_u_${z}\nuniform lowp float u_${z}_t;\nattribute ${P} ${H} a_${z};\nvarying ${P} ${B} ${z};\n#else\nuniform ${P} ${B} u_${z};\n#endif\n`:"vec4"===K?`\n#ifndef HAS_UNIFORM_u_${z}\n    ${z} = a_${z};\n#else\n    ${P} ${B} ${z} = u_${z};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${z}\n    ${z} = unpack_mix_${K}(a_${z}, u_${z}_t);\n#else\n    ${P} ${B} ${z} = u_${z};\n#endif\n`:"define"===M?`\n#ifndef HAS_UNIFORM_u_${z}\nuniform lowp float u_${z}_t;\nattribute ${P} ${H} a_${z};\n#else\nuniform ${P} ${B} u_${z};\n#endif\n`:"vec4"===K?`\n#ifndef HAS_UNIFORM_u_${z}\n    ${P} ${B} ${z} = a_${z};\n#else\n    ${P} ${B} ${z} = u_${z};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${z}\n    ${P} ${B} ${z} = unpack_mix_${K}(a_${z}, u_${z}_t);\n#else\n    ${P} ${B} ${z} = u_${z};\n#endif\n`}),staticAttributes:x,usedDefines:C}}class Ri{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(c,h,x,v,C,I,M){this.context=c;let P=this.boundPaintVertexBuffers.length!==v.length;for(let z=0;!P&&z<v.length;z++)this.boundPaintVertexBuffers[z]!==v[z]&&(P=!0);let B=this.boundDynamicVertexBuffers.length!==M.length;for(let z=0;!B&&z<M.length;z++)this.boundDynamicVertexBuffers[z]!==M[z]&&(B=!0);if(!c.extVertexArrayObject||!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==x||P||B||this.boundIndexBuffer!==C||this.boundVertexOffset!==I)this.freshBind(h,x,v,C,I,M);else{c.bindVertexArrayOES.set(this.vao);for(const z of M)z&&z.bind();C&&C.dynamicDraw&&C.bind()}}freshBind(c,h,x,v,C,I){let M;const P=c.numAttributes,B=this.context,z=B.gl;if(B.extVertexArrayObject)this.vao&&this.destroy(),this.vao=B.extVertexArrayObject.createVertexArrayOES(),B.bindVertexArrayOES.set(this.vao),M=0,this.boundProgram=c,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=v,this.boundVertexOffset=C,this.boundDynamicVertexBuffers=I;else{M=B.currentNumAttributes||0;for(let H=P;H<M;H++)z.disableVertexAttribArray(H)}h.enableAttributes(z,c),h.bind(),h.setVertexAttribPointers(z,c,C);for(const H of x)H.enableAttributes(z,c),H.bind(),H.setVertexAttribPointers(z,c,C);for(const H of I)H&&(H.enableAttributes(z,c),H.bind(),H.setVertexAttribPointers(z,c,C));v&&v.bind(),B.currentNumAttributes=P}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function lf(m,c){const h=Math.pow(2,c.canonical.z),x=c.canonical.y;return[new f.MercatorCoordinate(0,x/h).toLngLat().lat,new f.MercatorCoordinate(0,(x+1)/h).toLngLat().lat]}function Hc(m,c,h,x,v,C,I){const M=m.context,P=M.gl,B=h.fbo;if(!B)return;m.prepareDrawTile();const z=m.useProgram("hillshade");M.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,B.colorAttachment.get());const H=((te,ne,Y,le)=>{const ce=Y.paint.get("hillshade-shadow-color"),de=Y.paint.get("hillshade-highlight-color"),fe=Y.paint.get("hillshade-accent-color");let ye=Y.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Y.paint.get("hillshade-illumination-anchor")&&(ye-=te.transform.angle);const Ee=!te.options.moving;return{u_matrix:le||te.transform.calculateProjMatrix(ne.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:lf(0,ne.tileID),u_light:[Y.paint.get("hillshade-exaggeration"),ye],u_shadow:ce,u_highlight:de,u_accent:fe}})(m,h,x,m.terrain?c.projMatrix:null);m.prepareDrawProgram(M,z,c.toUnwrapped());const{tileBoundsBuffer:K,tileBoundsIndexBuffer:J,tileBoundsSegments:ee}=m.getTileBoundsBuffers(h);z.draw(M,P.TRIANGLES,v,C,I,f.CullFaceMode.disabled,H,x.id,K,J,ee)}function zu(m,c,h){if(!c.needsDEMTextureUpload)return;const x=m.context,v=x.gl;x.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||m.getTileTexture(h.stride);const C=h.getPixels();c.demTexture?c.demTexture.update(C,{premultiply:!1}):c.demTexture=new f.Texture(x,C,v.RGBA,{premultiply:!1}),c.needsDEMTextureUpload=!1}function Gs(m,c,h,x,v,C){const I=m.context,M=I.gl;if(!c.dem)return;const P=c.dem;if(I.activeTexture.set(M.TEXTURE1),zu(m,c,P),!c.demTexture)return;c.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);const B=P.dim;I.activeTexture.set(M.TEXTURE0);let z=c.fbo;if(!z){const ee=new f.Texture(I,{width:B,height:B,data:null},M.RGBA);ee.bind(M.LINEAR,M.CLAMP_TO_EDGE),z=c.fbo=I.createFramebuffer(B,B,!0),z.colorAttachment.set(ee.texture)}I.bindFramebuffer.set(z.framebuffer),I.viewport.set([0,0,B,B]);const{tileBoundsBuffer:H,tileBoundsIndexBuffer:K,tileBoundsSegments:J}=m.getMercatorTileBoundsBuffers();m.useProgram("hillshadePrepare").draw(I,M.TRIANGLES,x,v,C,f.CullFaceMode.disabled,((ee,te)=>{const ne=te.stride,Y=f.create();return f.ortho(Y,0,f.EXTENT,-f.EXTENT,0,0,1),f.translate(Y,Y,[0,-f.EXTENT,0]),{u_matrix:Y,u_image:1,u_dimension:[ne,ne],u_zoom:ee.overscaledZ,u_unpack:te.unpackVector}})(c.tileID,P),h.id,H,K,J),c.needsHillshadePrepare=!1}const _l=m=>({u_matrix:new f.UniformMatrix4f(m),u_image0:new f.Uniform1i(m),u_skirt_height:new f.Uniform1f(m)}),Xl=(m,c)=>({u_matrix:m,u_image0:0,u_skirt_height:c}),Vu=(m,c,h,x,v,C,I,M,P,B,z,H,K,J,ee)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:c,u_normalize_matrix:Float32Array.from(x),u_merc_matrix:h,u_zoom_transition:v,u_merc_center:C,u_image0:0,u_frustum_tl:I,u_frustum_tr:M,u_frustum_br:P,u_frustum_bl:B,u_globe_pos:z,u_globe_radius:H,u_viewport:K,u_grid_matrix:ee?Float32Array.from(ee):new Float32Array(9),u_skirt_height:J});function qd(m,c){return null!=m&&null!=c&&!(!m.hasData()||!c.hasData())&&null!=m.demTexture&&null!=c.demTexture&&m.tileID.key!==c.tileID.key}const za=new class{constructor(){this.operations={}}newMorphing(m,c,h,x,v){if(m in this.operations){const C=this.operations[m];C.to.tileID.key!==h.tileID.key&&(C.queued=h)}else this.operations[m]={startTime:x,phase:0,duration:v,from:c,to:h,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const c=this.operations[m];return{from:c.from,to:c.to,phase:c.phase}}update(m){for(const c in this.operations){const h=this.operations[c];for(h.phase=(m-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,m)){delete this.operations[c];break}}}_nextOp(m,c){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=c,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},Va={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function pa(m){return 6*Math.pow(1.5,22-m)}function ju(m,c){const h=1<<m.z;return!c&&(0===m.x||m.x===h-1)||0===m.y||m.y===h-1}const On=m=>({u_matrix:m});function ja(m,c,h,x,v){if(v>0){const C=f.exported.now(),I=(C-m.timeAdded)/v,M=c?(C-c.timeAdded)/v:-1,P=h.getSource(),B=x.coveringZoomLevel({tileSize:P.tileSize,roundZoom:P.roundZoom}),z=!c||Math.abs(c.tileID.overscaledZ-B)>Math.abs(m.tileID.overscaledZ-B),H=z&&m.refreshedUponExpiration?1:f.clamp(z?I:1-M,0,1);return m.refreshedUponExpiration&&I>=1&&(m.refreshedUponExpiration=!1),c?{opacity:1,mix:1-H}:{opacity:H,mix:0}}return{opacity:1,mix:0}}class lt extends f.SourceCache{constructor(c){const h={type:"raster-dem",maxzoom:c.transform.maxZoom},x=new Ko(Zt(),null),v=ke("mock-dem",h,x,c.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(c,h){c.state="loaded",h(null)}}class Zd extends f.SourceCache{constructor(c){const h=ke("proxy",{type:"geojson",maxzoom:c.transform.maxZoom},new Ko(Zt(),null),c.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=c,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(c,h,x){if(c.freezeTileCoverage)return;this.transform=c;const v=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((C,I)=>{if(C[I.key]="",!this._tiles[I.key]){const M=new f.Tile(I,this._source.tileSize*I.overscaleFactor(),c.tileZoom);M.state="loaded",this._tiles[I.key]=M}return C},{});for(const C in this._tiles)C in v||(this.freeFBO(C),this._tiles[C].unloadVectorData(),delete this._tiles[C])}freeFBO(c){const h=this.proxyCachedFBO[c];if(void 0!==h){const x=Object.values(h);this.renderCachePool.push(...x),delete this.proxyCachedFBO[c]}}deallocRenderCache(){this.renderCache.forEach(c=>c.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ht extends f.OverscaledTileID{constructor(c,h,x){super(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y),this.proxyTileKey=h,this.projMatrix=x}}class Ws extends f.Elevation{constructor(c,h){super(),this.painter=c,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[x,v,C]=function(P){const B=new f.StructArrayLayout2i4,z=new f.StructArrayLayout3ui6,H=131;B.reserve(17161),z.reserve(33800);const K=f.EXTENT/128,J=f.EXTENT+K/2,ee=J+K;for(let ne=-K;ne<ee;ne+=K)for(let Y=-K;Y<ee;Y+=K){const le=Y<0||Y>J||ne<0||ne>J?24575:0,ce=f.clamp(Math.round(Y),0,f.EXTENT),de=f.clamp(Math.round(ne),0,f.EXTENT);B.emplaceBack(ce+le,de)}const te=(ne,Y)=>{const le=Y*H+ne;z.emplaceBack(le+1,le,le+H),z.emplaceBack(le+H,le+H+1,le+1)};for(let ne=1;ne<129;ne++)for(let Y=1;Y<129;Y++)te(Y,ne);return[0,129].forEach(ne=>{for(let Y=0;Y<130;Y++)te(Y,ne),te(ne,Y)}),[B,z,32768]}(),I=c.context;this.gridBuffer=I.createVertexBuffer(x,f.posAttributes.members),this.gridIndexBuffer=I.createIndexBuffer(v),this.gridSegments=f.SegmentVector.simpleSegment(0,0,x.length,v.length),this.gridNoSkirtSegments=f.SegmentVector.simpleSegment(0,0,x.length,C),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Zd(h.map),this.orthoMatrix=f.create(),f.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,f.EXTENT,0,f.EXTENT,0,1);const M=I.gl;this._overlapStencilMode=new f.StencilMode({func:M.GEQUAL,mask:255},0,255,M.KEEP,M.KEEP,M.REPLACE),this._previousZoom=c.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new lt(h.map)}set style(c){c.on("data",this._onStyleDataEvent.bind(this)),c.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=c,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(c,h,x){if(c&&c.terrain){this._style!==c&&(this.style=c),this.enabled=!0;const v=c.terrain.properties;this.sourceCache=0===c.terrain.drapeRenderMode?this._mockSourceCache:c._getSourceCache(v.get("source")),this._exaggeration=v.get("exaggeration");const C=()=>{this.sourceCache.used&&f.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const I=this.getScaledDemTileSize();this.sourceCache.update(h,I,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,C(),this._initializing=!0),C(),h.updateElevation(!0,x),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(c){this._findCoveringTileCache[c]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const c=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==c.efficiency&&f.warnOnce(`Terrain render cache efficiency is not optimal (${c.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${c.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(c){c.coord&&"source"===c.dataType?this._clearRenderCacheForTile(c.sourceCacheId,c.coord):"style"===c.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const c in this._style._sourceCaches)this._style._sourceCaches[c].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(c=>c.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const c=2*this.proxySourceCache.getSource().tileSize;return[c,c]}set useVertexMorphing(c){this._useVertexMorphing=c}updateTileBinding(c){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,x=this.painter.transform;this._initializing&&(this._initializing=0===x._centerAltitude&&-1===this.getAtPointOrZero(f.MercatorCoordinate.fromLngLat(x.center),-1),this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=h.getIds().map(P=>{const B=h.getTileByID(P).tileID;return B.projMatrix=x.calculateProjMatrix(B.toUnwrapped()),B});(function(P,B){const z=B.transform.pointCoordinate(B.transform.getCameraPoint()),H=new f.pointGeometry(z.x,z.y);P.sort((K,J)=>{if(J.overscaledZ-K.overscaledZ)return J.overscaledZ-K.overscaledZ;const ee=new f.pointGeometry(K.canonical.x+(1<<K.canonical.z)*K.wrap,K.canonical.y),te=new f.pointGeometry(J.canonical.x+(1<<J.canonical.z)*J.wrap,J.canonical.y),ne=H.mult(1<<K.canonical.z);return ne.x-=.5,ne.y-=.5,ne.distSqr(ee)-ne.distSqr(te)})})(v,this.painter),this._previousZoom=x.zoom;const C=this.proxyToSource||{};this.proxyToSource={},v.forEach(P=>{this.proxyToSource[P.key]={}}),this.terrainTileForTile={};const I=this._style._sourceCaches;for(const P in I){const B=I[P];if(!B.used||(B!==this.sourceCache&&this.resetTileLookupCache(B.id),this._setupProxiedCoordsForOrtho(B,c[P],C),B.usedForTerrain))continue;const z=c[P];B.getSource().reparseOverscaled&&this._assignTerrainTiles(z)}this.proxiedCoords[h.id]=v.map(P=>new Ht(P,P.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(C),this.renderingToTexture=!1,this._updateTimestamp=f.exported.now();const M={};this._visibleDemTiles=[];for(const P of this.proxyCoords){const B=this.terrainTileForTile[P.key];if(!B)continue;const z=B.tileID.key;z in M||(this._visibleDemTiles.push(B),M[z]=z)}}_assignTerrainTiles(c){this._initializing||c.forEach(h=>{if(this.terrainTileForTile[h.key])return;const x=this._findTileCoveringTileID(h,this.sourceCache);x&&(this.terrainTileForTile[h.key]=x)})}_prepareDEMTextures(){const c=this.painter.context,h=c.gl;for(const x in this.terrainTileForTile){const v=this.terrainTileForTile[x],C=v.dem;!C||v.demTexture&&!v.needsDEMTextureUpload||(c.activeTexture.set(h.TEXTURE1),zu(this.painter,v,C))}}_prepareDemTileUniforms(c,h,x,v){if(!h||null==h.demTexture)return!1;const C=c.tileID.canonical,I=Math.pow(2,h.tileID.canonical.z-C.z),M=v||"";return x[`u_dem_tl${M}`]=[C.x*I%1,C.y*I%1],x[`u_dem_scale${M}`]=I,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const c=this.painter.context,h=c.gl;if(!this._emptyDepthBufferTexture){const x=new f.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new f.Texture(c,x,h.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let c=0;const h=this._visibleDemTiles.reduce((x,v)=>{if(!v.dem)return x;const C=v.dem.tree.minimums[0];return C>0&&c++,x+C},0);return c?h/c:0}_updateEmptyDEMTexture(){const c=this.painter.context,h=c.gl;c.activeTexture.set(h.TEXTURE2);const x=this._getLoadedAreaMinimum(),v=new f.RGBAImage({width:1,height:1},new Uint8Array(f.DEMData.pack(x,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let C=this._emptyDEMTexture;return C?C.update(v,{premultiply:!1}):C=this._emptyDEMTexture=new f.Texture(c,v,h.RGBA,{premultiply:!1}),C}setupElevationDraw(c,h,x){const v=this.painter.context,C=v.gl,I=(M=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:f.DEMData.getUnpackVector(M),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var M;I.u_dem_size=this.sourceCache.getSource().tileSize,I.u_exaggeration=this.exaggeration();let P=null,B=null,z=1;if(x&&x.morphing&&this._useVertexMorphing){const H=x.morphing.srcDemTile,K=x.morphing.dstDemTile;z=x.morphing.phase,H&&K&&(this._prepareDemTileUniforms(c,H,I,"_prev")&&(B=H),this._prepareDemTileUniforms(c,K,I)&&(P=K))}if(B&&P?(v.activeTexture.set(C.TEXTURE2),P.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE,C.NEAREST),v.activeTexture.set(C.TEXTURE4),B.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE,C.NEAREST),I.u_dem_lerp=z):(P=this.terrainTileForTile[c.tileID.key],v.activeTexture.set(C.TEXTURE2),(this._prepareDemTileUniforms(c,P,I)?P.demTexture:this.emptyDEMTexture).bind(C.NEAREST,C.CLAMP_TO_EDGE)),v.activeTexture.set(C.TEXTURE3),x&&x.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),this._depthFBO&&(I.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),I.u_depth_size_inv=[1,1]),x&&x.useMeterToDem&&P){const H=(1<<P.tileID.canonical.z)*f.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;I.u_meter_to_dem=H}if(x&&x.labelPlaneMatrixInv&&(I.u_label_plane_matrix_inv=x.labelPlaneMatrixInv),h.setTerrainUniformValues(v,I),"globe"===this.painter.transform.projection.name){const H=this.globeUniformValues(this.painter.transform,c.tileID.canonical,x&&x.useDenormalizedUpVectorScale);h.setGlobeUniformValues(v,H)}}globeUniformValues(c,h,x){const v=c.projection;return{u_tile_tl_up:v.upVector(h,0,0),u_tile_tr_up:v.upVector(h,f.EXTENT,0),u_tile_br_up:v.upVector(h,f.EXTENT,f.EXTENT),u_tile_bl_up:v.upVector(h,0,f.EXTENT),u_tile_up_scale:x?f.globeMetersToEcef(1):v.upVectorScale(h,c.center.lat,c.worldSize).metersToTile}}renderToBackBuffer(c){const h=this.painter,x=this.painter.context;0!==c.length&&(x.bindFramebuffer.set(null),x.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,C,I,M,P){if("globe"===v.transform.projection.name)!function(B,z,H,K,J){const ee=B.context,te=ee.gl;let ne,Y;const le=B.options.showTerrainWireframe?2:0,ce=B.transform,de=f.globeUseCustomAntiAliasing(B,ee,ce),fe=(dt,Fe)=>{if(Y===dt)return;const Me=[Va[dt],"PROJECTION_GLOBE_VIEW"];de&&Me.push("CUSTOM_ANTIALIASING"),Fe&&Me.push(Va[le]),ne=B.useProgram("globeRaster",null,Me),Y=dt},ye=B.colorModeForRenderPass(),Ee=new f.DepthMode(te.LEQUAL,f.DepthMode.ReadWrite,B.depthRangeFor3D);za.update(J);const Ie=f.calculateGlobeMercatorMatrix(ce),Be=[f.mercatorXfromLng(ce.center.lng),f.mercatorYfromLat(ce.center.lat)],Ue=le?[!1,!0]:[!1],bt=B.globeSharedBuffers,Ae=[ce.width*f.exported.devicePixelRatio,ce.height*f.exported.devicePixelRatio],it=Float32Array.from(ce.globeMatrix),Ze={useDenormalizedUpVectorScale:!0};if(Ue.forEach(dt=>{const Fe=B.transform,Me=pa(Fe.zoom)*z.exaggeration();Y=-1;const He=dt?te.LINES:te.TRIANGLES;for(const st of K){const pt=H.getTile(st),$t=f.StencilMode.disabled,Bn=z.prevTerrainTileForTile[st.key],ct=z.terrainTileForTile[st.key];qd(Bn,ct)&&za.newMorphing(st.key,Bn,ct,J,250),ee.activeTexture.set(te.TEXTURE0),pt.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE);const Rt=za.getMorphValuesForProxy(st.key),Yt=Rt?1:0;Rt&&f.extend$1(Ze,{morphing:{srcDemTile:Rt.from,dstDemTile:Rt.to,phase:f.easeCubicInOut(Rt.phase)}});const Zn=f.tileCornersToBounds(st.canonical),en=f.getLatitudinalLod(Zn.getCenter().lat),Ei=f.getGridMatrix(st.canonical,Zn,en,Fe.worldSize/Fe._pixelsPerMercatorPixel),Ci=f.globeNormalizeECEF(f.globeTileBounds(st.canonical)),Ti=Vu(Fe.projMatrix,it,Ie,Ci,f.globeToMercatorTransition(Fe.zoom),Be,Fe.frustumCorners.TL,Fe.frustumCorners.TR,Fe.frustumCorners.BR,Fe.frustumCorners.BL,Fe.globeCenterInViewSpace,Fe.globeRadius,Ae,Me,Ei);if(fe(Yt,dt),z.setupElevationDraw(pt,ne,Ze),B.prepareDrawProgram(ee,ne,st.toUnwrapped()),bt){const[ji,$r,ps]=dt?bt.getWirefameBuffers(B.context,en):bt.getGridBuffers(en,0!==Me);ne.draw(ee,He,Ee,$t,ye,f.CullFaceMode.backCCW,Ti,"globe_raster",ji,$r,ps)}}}),bt){const dt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];de&&dt.push("CUSTOM_ANTIALIASING"),ne=B.useProgram("globeRaster",null,dt);for(const Fe of K){const{x:Me,y:He,z:st}=Fe.canonical,pt=0===He,$t=He===(1<<st)-1,[Bn,ct,Rt,Yt]=bt.getPoleBuffers(st);if(Yt&&(pt||$t)){const Zn=H.getTile(Fe);ee.activeTexture.set(te.TEXTURE0),Zn.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE);let en=f.globePoleMatrixForTile(st,Me,ce);const Ei=f.globeNormalizeECEF(f.globeTileBounds(Fe.canonical)),Ci=(Ti,ji)=>Ti.draw(ee,te.TRIANGLES,Ee,f.StencilMode.disabled,ye,f.CullFaceMode.disabled,Vu(ce.projMatrix,en,en,Ei,0,Be,ce.frustumCorners.TL,ce.frustumCorners.TR,ce.frustumCorners.BR,ce.frustumCorners.BL,ce.globeCenterInViewSpace,ce.globeRadius,Ae,0),"globe_pole_raster",ji,Rt,Yt);z.setupElevationDraw(Zn,ne,Ze),B.prepareDrawProgram(ee,ne,Fe.toUnwrapped()),pt&&Ci(ne,Bn),$t&&(en=f.scale(f.create(),en,[1,-1,1]),Ci(ne,ct))}}}}(v,C,I,M,P);else{const B=v.context,z=B.gl;let H,K;const J=v.options.showTerrainWireframe?2:0,ee=(ce,de)=>{if(K===ce)return;const fe=[Va[ce]];de&&fe.push(Va[J]),H=v.useProgram("terrainRaster",null,fe),K=ce},te=v.colorModeForRenderPass(),ne=new f.DepthMode(z.LEQUAL,f.DepthMode.ReadWrite,v.depthRangeFor3D);za.update(P);const Y=v.transform,le=pa(Y.zoom)*C.exaggeration();(J?[!1,!0]:[!1]).forEach(ce=>{K=-1;const de=ce?z.LINES:z.TRIANGLES,[fe,ye]=ce?C.getWirefameBuffer():[C.gridIndexBuffer,C.gridSegments];for(const Ee of M){const Ie=I.getTile(Ee),Be=f.StencilMode.disabled,Ue=C.prevTerrainTileForTile[Ee.key],bt=C.terrainTileForTile[Ee.key];qd(Ue,bt)&&za.newMorphing(Ee.key,Ue,bt,P,250),B.activeTexture.set(z.TEXTURE0),Ie.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST);const Ae=za.getMorphValuesForProxy(Ee.key),it=Ae?1:0;let Ze;Ae&&(Ze={morphing:{srcDemTile:Ae.from,dstDemTile:Ae.to,phase:f.easeCubicInOut(Ae.phase)}});const dt=Xl(Ee.projMatrix,ju(Ee.canonical,Y.renderWorldCopies)?le/10:le);ee(it,ce),C.setupElevationDraw(Ie,H,Ze),v.prepareDrawProgram(B,H,Ee.toUnwrapped()),H.draw(B,de,ne,Be,te,f.CullFaceMode.backCCW,dt,"terrain_raster",C.gridBuffer,fe,ye)}})}}(h,this,this.proxySourceCache,c,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),c.splice(0,c.length))}renderBatch(c){if(0===this._drapedRenderBatches.length)return c+1;this.renderingToTexture=!0;const h=this.painter,x=this.painter.context,v=this.proxySourceCache,C=this.proxiedCoords[v.id],I=this._drapedRenderBatches.shift(),M=[],P=h.style.order;let B=0;for(const z of C){const H=v.getTileByID(z.proxyTileKey),K=v.proxyCachedFBO[z.key]?v.proxyCachedFBO[z.key][c]:void 0,J=void 0!==K?v.renderCache[K]:this.pool[B++],ee=void 0!==K;if(H.texture=J.tex,ee&&!J.dirty){M.push(H.tileID);continue}let te;x.bindFramebuffer.set(J.fb.framebuffer),this.renderedToTile=!1,J.dirty&&(x.clear({color:f.Color.transparent,stencil:0}),J.dirty=!1);for(let ne=I.start;ne<=I.end;++ne){const Y=h.style._layers[P[ne]];if(Y.isHidden(h.transform.zoom))continue;const le=h.style._getLayerSourceCache(Y),ce=le?this.proxyToSource[z.key][le.id]:[z];if(!ce)continue;const de=ce;x.viewport.set([0,0,J.fb.width,J.fb.height]),te!==(le?le.id:null)&&(this._setupStencil(J,ce,Y,le),te=le?le.id:null),h.renderLayer(h,le,Y,de)}this.renderedToTile?(J.dirty=!0,M.push(H.tileID)):ee||--B,5===B&&(B=0,this.renderToBackBuffer(M))}return this.renderToBackBuffer(M),this.renderingToTexture=!1,x.bindFramebuffer.set(null),x.viewport.set([0,0,h.width,h.height]),I.end+1}postRender(){}renderCacheEfficiency(c){const h=c.order.length;if(0===h)return{efficiency:100};let x,v=0,C=0,I=!1;for(let M=0;M<h;++M){const P=c._layers[c.order[M]];this._style.isLayerDraped(P)?(I&&++v,++C):I||(I=!0,x=P.id)}return 0===C?{efficiency:100}:{efficiency:100*(1-v/C),firstUndrapedLayer:x}}getMinElevationBelowMSL(){let c=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{c=Math.min(c,h.dem.tree.minimums[0])}),0===c?c:(c-30)*this._exaggeration}raycast(c,h,x){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(C=>C.dem).map(C=>{const I=C.tileID,M=1<<I.overscaledZ,{x:P,y:B}=I.canonical,z=P/M,H=(P+1)/M,K=B/M,J=(B+1)/M;return{minx:z,miny:K,maxx:H,maxy:J,t:C.dem.tree.raycastRoot(z,K,H,J,c,h,x),tile:C}});v.sort((C,I)=>(null!==C.t?C.t:Number.MAX_VALUE)-(null!==I.t?I.t:Number.MAX_VALUE));for(const C of v){if(null==C.t)return null;const I=C.tile.dem.tree.raycast(C.minx,C.miny,C.maxx,C.maxy,c,h,x);if(null!=I)return I}return null}_createFBO(){const c=this.painter.context,h=c.gl,x=this.drapeBufferSize;c.activeTexture.set(h.TEXTURE0);const v=new f.Texture(c,{width:x[0],height:x[1],data:null},h.RGBA);v.bind(h.LINEAR,h.CLAMP_TO_EDGE);const C=c.createFramebuffer(x[0],x[1],!1);return C.colorAttachment.set(v.texture),C.depthAttachment=new Pc(c,C.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=c.createRenderbuffer(c.gl.DEPTH_STENCIL,x[0],x[1]),this._stencilRef=0,C.depthAttachment.set(this._sharedDepthStencil),c.clear({stencil:0})):C.depthAttachment.set(this._sharedDepthStencil),c.extTextureFilterAnisotropic&&!c.extTextureFilterAnisotropicForceOff&&h.texParameterf(h.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax),{fb:C,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c].hasTransition())return!0;return this._style.order.some(c=>{const h=this._style._layers[c],x=h.isHidden(this.painter.transform.zoom);return"custom"===h.type?!x&&h.shouldRedrape():!x&&h.hasTransition()})}_clearLineLayersFromRenderCache(){let c=!1;for(const x of this._style._getSources())if(x instanceof $){c=!0;break}if(!c)return;const h={};for(let x=0;x<this._style.order.length;++x){const v=this._style._layers[this._style.order[x]],C=this._style._getLayerSourceCache(v);if(C&&!h[C.id]&&!v.isHidden(this.painter.transform.zoom)&&"line"===v.type&&v.widthExpression()instanceof f.ZoomDependentExpression){h[C.id]=!0;for(const I of this.proxyCoords){const M=this.proxyToSource[I.key][C.id];if(M)for(const P of M)this._clearRenderCacheForTile(C.id,P)}}}}_clearRasterLayersFromRenderCache(){let c=!1;for(const x in this._style._sourceCaches)if(this._style._sourceCaches[x]._source instanceof q){c=!0;break}if(!c)return;const h={};for(let x=0;x<this._style.order.length;++x){const v=this._style._layers[this._style.order[x]],C=this._style._getLayerSourceCache(v);if(!C||h[C.id]||v.isHidden(this.painter.transform.zoom)||"raster"!==v.type)continue;const I=v.paint.get("raster-fade-duration");for(const M of this.proxyCoords){const P=this.proxyToSource[M.key][C.id];if(P)for(const B of P){const z=ja(C.getTile(B),C.findLoadedParent(B,0),C,this.painter.transform,I);(1!==z.opacity||0!==z.mix)&&this._clearRenderCacheForTile(C.id,B)}}}}_setupDrapedRenderBatches(){const c=this._style.order,h=c.length;if(0===h)return;const x=[];let v,C=0,I=this._style._layers[c[C]];for(;!this._style.isLayerDraped(I)&&I.isHidden(this.painter.transform.zoom)&&++C<h;)I=this._style._layers[c[C]];for(;C<h;++C){const M=this._style._layers[c[C]];M.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(M)?void 0===v&&(v=C):void 0!==v&&(x.push({start:v,end:C-1}),v=void 0))}void 0!==v&&x.push({start:v,end:C-1}),this._drapedRenderBatches=x}_setupRenderCache(c){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const I=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let M=0;M<I.length;++M){const P=Object.values(I[M]);h.renderCachePool.push(...P)}}return}this._clearRasterLayersFromRenderCache();const x=this.proxyCoords,v=this._tilesDirty;for(let I=x.length-1;I>=0;I--){const M=x[I];if(h.getTileByID(M.key),void 0!==h.proxyCachedFBO[M.key]){const P=c[M.key],B=this.proxyToSource[M.key];let z=0;for(const H in B){const K=B[H],J=P[H];if(!J||J.length!==K.length||K.some((ee,te)=>ee!==J[te]||v[H]&&v[H].hasOwnProperty(ee.key))){z=-1;break}++z}for(const H in h.proxyCachedFBO[M.key])h.renderCache[h.proxyCachedFBO[M.key][H]].dirty=z<0||z!==Object.values(P).length}}const C=[...this._drapedRenderBatches];C.sort((I,M)=>M.end-M.start-(I.end-I.start));for(const I of C)for(const M of x){if(h.proxyCachedFBO[M.key])continue;let P=h.renderCachePool.pop();void 0===P&&h.renderCache.length<50&&(P=h.renderCache.length,h.renderCache.push(this._createFBO())),void 0!==P&&(h.proxyCachedFBO[M.key]={},h.proxyCachedFBO[M.key][I.start]=P,h.renderCache[P].dirty=!0)}this._tilesDirty={}}_setupStencil(c,h,x,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const C=this.painter.context,I=C.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let M;if(x.isTileClipped())M=h.length,this._overlapStencilMode.test={func:I.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);M=1,this._overlapStencilMode.test={func:I.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+M>255&&(C.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=M,this._overlapStencilMode.ref=this._stencilRef,x.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(c){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[c.key]),this._overlapStencilMode):f.StencilMode.disabled}_renderTileClippingMasks(c,h){const x=this.painter,v=this.painter.context,C=v.gl;x._tileClippingMaskIDs={},v.setColorMode(f.ColorMode.disabled),v.setDepthMode(f.DepthMode.disabled);const I=x.useProgram("clippingMask");for(const M of c){const P=x._tileClippingMaskIDs[M.key]=--h;I.draw(v,C.TRIANGLES,f.DepthMode.disabled,new f.StencilMode({func:C.ALWAYS,mask:0},P,255,C.KEEP,C.KEEP,C.REPLACE),f.ColorMode.disabled,f.CullFaceMode.disabled,On(M.projMatrix),"$clipping",x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}}pointCoordinate(c){const h=this.painter.transform;if(c.x<0||c.x>h.width||c.y<0||c.y>h.height)return null;const x=[c.x,c.y,1,1];f.transformMat4$1(x,x,h.pixelMatrixInverse),f.scale$1(x,x,1/x[3]),x[0]/=h.worldSize,x[1]/=h.worldSize;const v=h._camera.position,C=f.mercatorZfromAltitude(1,h.center.lat),I=[v[0],v[1],v[2]/C,0],M=f.subtract([],x.slice(0,3),I);f.normalize(M,M);const P=this.raycast(I,M,this._exaggeration);return null!==P&&P?(f.scaleAndAdd(I,I,M,P),I[3]=I[2],I[2]*=C,I):null}drawDepth(){const c=this.painter,h=c.context,x=this.proxySourceCache,v=Math.ceil(c.width),C=Math.ceil(c.height);if(!this._depthFBO||this._depthFBO.width===v&&this._depthFBO.height===C||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const I=h.gl,M=h.createFramebuffer(v,C,!0);h.activeTexture.set(I.TEXTURE0);const P=new f.Texture(h,{width:v,height:C,data:null},I.RGBA);P.bind(I.NEAREST,I.CLAMP_TO_EDGE),M.colorAttachment.set(P.texture);const B=h.createRenderbuffer(h.gl.DEPTH_COMPONENT16,v,C);M.depthAttachment.set(B),this._depthFBO=M,this._depthTexture=P}h.bindFramebuffer.set(this._depthFBO.framebuffer),h.viewport.set([0,0,v,C]),function(I,M,P,B){if("globe"===I.transform.projection.name)return;const z=I.context,H=z.gl;z.clear({depth:1});const K=I.useProgram("terrainDepth"),J=new f.DepthMode(H.LESS,f.DepthMode.ReadWrite,I.depthRangeFor3D);for(const ee of B){const te=P.getTile(ee),ne=Xl(ee.projMatrix,0);M.setupElevationDraw(te,K),K.draw(z,H.TRIANGLES,J,f.StencilMode.disabled,f.ColorMode.unblended,f.CullFaceMode.backCCW,ne,"terrain_depth",M.gridBuffer,M.gridIndexBuffer,M.gridNoSkirtSegments)}}(c,this,x,this.proxyCoords)}_setupProxiedCoordsForOrtho(c,h,x){if(c.getSource()instanceof we)return this._setupProxiedCoordsForImageSource(c,h,x);this._findCoveringTileCache[c.id]=this._findCoveringTileCache[c.id]||{};const v=this.proxiedCoords[c.id]=[],C=this.proxyCoords;for(let M=0;M<C.length;M++){const P=C[M],B=this._findTileCoveringTileID(P,c);if(B){const z=this._createProxiedId(P,B,x[P.key]&&x[P.key][c.id]);v.push(z),this.proxyToSource[P.key][c.id]=[z]}}let I=!1;for(let M=0;M<h.length;M++){const P=c.getTile(h[M]);if(!P||!P.hasData())continue;const B=this._findTileCoveringTileID(P.tileID,this.proxySourceCache);if(B&&B.tileID.canonical.z!==P.tileID.canonical.z){const z=this.proxyToSource[B.tileID.key][c.id],H=this._createProxiedId(B.tileID,P,x[B.tileID.key]&&x[B.tileID.key][c.id]);z?z.splice(z.length-1,0,H):this.proxyToSource[B.tileID.key][c.id]=[H],v.push(H),I=!0}}this._sourceTilesOverlap[c.id]=I}_setupProxiedCoordsForImageSource(c,h,x){if(!c.getSource().loaded())return;const v=this.proxiedCoords[c.id]=[],C=this.proxyCoords,I=c.getSource(),M=new f.pointGeometry(I.tileID.x,I.tileID.y)._div(1<<I.tileID.z),P=I.coordinates.map(f.MercatorCoordinate.fromLngLat).reduce((z,H)=>(z.min.x=Math.min(z.min.x,H.x-M.x),z.min.y=Math.min(z.min.y,H.y-M.y),z.max.x=Math.max(z.max.x,H.x-M.x),z.max.y=Math.max(z.max.y,H.y-M.y),z),{min:new f.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new f.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),B=(z,H)=>{const K=z.wrap+z.canonical.x/(1<<z.canonical.z),J=z.canonical.y/(1<<z.canonical.z),ee=f.EXTENT/(1<<z.canonical.z),te=H.wrap+H.canonical.x/(1<<H.canonical.z),ne=H.canonical.y/(1<<H.canonical.z);return K+ee<te+P.min.x||K>te+P.max.x||J+ee<ne+P.min.y||J>ne+P.max.y};for(let z=0;z<C.length;z++){const H=C[z];for(let K=0;K<h.length;K++){const J=c.getTile(h[K]);if(!J||!J.hasData()||B(H,J.tileID))continue;const ee=this._createProxiedId(H,J,x[H.key]&&x[H.key][c.id]),te=this.proxyToSource[H.key][c.id];te?te.push(ee):this.proxyToSource[H.key][c.id]=[ee],v.push(ee)}}}_createProxiedId(c,h,x){let v=this.orthoMatrix;if(x){const C=x.find(I=>I.key===h.tileID.key);if(C)return C}if(h.tileID.key!==c.key){const C=c.canonical.z-h.tileID.canonical.z;let I,M,P;v=f.create();const B=h.tileID.wrap-c.wrap<<c.overscaledZ;C>0?(I=f.EXTENT>>C,M=I*((h.tileID.canonical.x<<C)-c.canonical.x+B),P=I*((h.tileID.canonical.y<<C)-c.canonical.y)):(I=f.EXTENT<<-C,M=f.EXTENT*(h.tileID.canonical.x-(c.canonical.x+B<<-C)),P=f.EXTENT*(h.tileID.canonical.y-(c.canonical.y<<-C))),f.ortho(v,0,I,0,I,0,1),f.translate(v,v,[M,P,0])}return new Ht(h.tileID,c.key,v)}_findTileCoveringTileID(c,h){let x=h.getTile(c);if(x&&x.hasData())return x;const v=this._findCoveringTileCache[h.id],C=v[c.key];if(x=C?h.getTileByID(C):null,x&&x.hasData()||null===C)return x;let I=x?x.tileID:c,M=I.overscaledZ;const P=h.getSource().minzoom,B=[];if(!C){const H=h.getSource().maxzoom;if(c.canonical.z>=H){const K=c.canonical.z-H;h.getSource().reparseOverscaled?(M=Math.max(c.canonical.z+2,h.transform.tileZoom),I=new f.OverscaledTileID(M,c.wrap,H,c.canonical.x>>K,c.canonical.y>>K)):0!==K&&(M=H,I=new f.OverscaledTileID(M,c.wrap,H,c.canonical.x>>K,c.canonical.y>>K))}I.key!==c.key&&(B.push(I.key),x=h.getTile(I))}const z=H=>{B.forEach(K=>{v[K]=H}),B.length=0};for(M-=1;M>=P&&(!x||!x.hasData());M--){x&&z(x.tileID.key);const H=I.calculateScaledKey(M);if(x=h.getTileByID(H),x&&x.hasData())break;const K=v[H];if(null===K)break;void 0===K?B.push(H):x=h.getTileByID(K)}return z(x?x.tileID.key:null),x&&x.hasData()?x:null}findDEMTileFor(c){return this.enabled?this._findTileCoveringTileID(c,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(c,h){let x=this._tilesDirty[c];x||(x=this._tilesDirty[c]={}),x[h.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const c=function(h){let x=0;const v=new f.StructArrayLayout2ui4,C=131;for(let I=1;I<129;I++){for(let M=1;M<129;M++)x=I*C+M,v.emplaceBack(x,x+1),v.emplaceBack(x,x+C),v.emplaceBack(x+1,x+C),128===I&&v.emplaceBack(x+C,x+C+1);v.emplaceBack(x+1,x+1+C)}return v}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(c),this.wireframeSegments=f.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,c.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class $c{static cacheKey(c,h,x,v){let C=`${h}${v?v.cacheKey:""}`;for(const I of x)c.usedDefines.includes(I)&&(C+=`/${I}`);return C}constructor(c,h,x,v,C,I){const M=c.gl;this.program=M.createProgram();const P=function(Y){const le=[];for(let ce=0;ce<Y.length;ce++){if(null===Y[ce])continue;const de=Y[ce].split(" ");le.push(de.pop())}return le}(x.staticAttributes),B=v?v.getBinderAttributes():[],z=P.concat(B);let H=v?v.defines():[];H=H.concat(I.map(Y=>`#define ${Y}`));const K=c.isWebGL2?"#version 300 es\n":"",J=K+H.concat(c.extStandardDerivatives&&0===K.length?"#extension GL_OES_standard_derivatives : enable\n".concat(Uc):Uc,Uc,Yl,gn.fragmentSource,Zl.fragmentSource,x.fragmentSource).join("\n"),ee=K+H.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Yl,gn.vertexSource,Zl.vertexSource,jc.vertexSource,x.vertexSource).join("\n"),te=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(te,J),M.compileShader(te),M.attachShader(this.program,te);const ne=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())this.failedToCreate=!0;else{M.shaderSource(ne,ee),M.compileShader(ne),M.attachShader(this.program,ne),this.attributes={},this.numAttributes=z.length;for(let Y=0;Y<this.numAttributes;Y++)z[Y]&&(M.bindAttribLocation(this.program,Y,z[Y]),this.attributes[z[Y]]=Y);M.linkProgram(this.program),M.deleteShader(ne),M.deleteShader(te),this.fixedUniforms=C(c),this.binderUniforms=v?v.getUniforms(c):[],I.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new f.Uniform1i(Y=c),u_dem_prev:new f.Uniform1i(Y),u_dem_unpack:new f.Uniform4f(Y),u_dem_tl:new f.Uniform2f(Y),u_dem_scale:new f.Uniform1f(Y),u_dem_tl_prev:new f.Uniform2f(Y),u_dem_scale_prev:new f.Uniform1f(Y),u_dem_size:new f.Uniform1f(Y),u_dem_lerp:new f.Uniform1f(Y),u_exaggeration:new f.Uniform1f(Y),u_depth:new f.Uniform1i(Y),u_depth_size_inv:new f.Uniform2f(Y),u_meter_to_dem:new f.Uniform1f(Y),u_label_plane_matrix_inv:new f.UniformMatrix4f(Y)}),I.includes("GLOBE")&&(this.globeUniforms=(Y=>({u_tile_tl_up:new f.Uniform3f(Y),u_tile_tr_up:new f.Uniform3f(Y),u_tile_br_up:new f.Uniform3f(Y),u_tile_bl_up:new f.Uniform3f(Y),u_tile_up_scale:new f.Uniform1f(Y)}))(c)),I.includes("FOG")&&(this.fogUniforms=(Y=>({u_fog_matrix:new f.UniformMatrix4f(Y),u_fog_range:new f.Uniform2f(Y),u_fog_color:new f.Uniform4f(Y),u_fog_horizon_blend:new f.Uniform1f(Y),u_fog_temporal_offset:new f.Uniform1f(Y),u_frustum_tl:new f.Uniform3f(Y),u_frustum_tr:new f.Uniform3f(Y),u_frustum_br:new f.Uniform3f(Y),u_frustum_bl:new f.Uniform3f(Y),u_globe_pos:new f.Uniform3f(Y),u_globe_radius:new f.Uniform1f(Y),u_globe_transition:new f.Uniform1f(Y),u_is_globe:new f.Uniform1i(Y),u_viewport:new f.Uniform2f(Y)}))(c))}var Y}setTerrainUniformValues(c,h){if(!this.terrainUniforms)return;const x=this.terrainUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const v in h)x[v]&&x[v].set(this.program,v,h[v])}}setGlobeUniformValues(c,h){if(!this.globeUniforms)return;const x=this.globeUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const v in h)x[v]&&x[v].set(this.program,v,h[v])}}setFogUniformValues(c,h){if(!this.fogUniforms)return;const x=this.fogUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const v in h)x[v].set(this.program,v,h[v])}}draw(c,h,x,v,C,I,M,P,B,z,H,K,J,ee,te){const ne=c.gl;if(this.failedToCreate)return;c.program.set(this.program),c.setDepthMode(x),c.setStencilMode(v),c.setColorMode(C),c.setCullFace(I);for(const le of Object.keys(this.fixedUniforms))this.fixedUniforms[le].set(this.program,le,M[le]);ee&&ee.setUniforms(this.program,c,this.binderUniforms,K,{zoom:J});const Y={[ne.LINES]:2,[ne.TRIANGLES]:3,[ne.LINE_STRIP]:1}[h];for(const le of H.get()){const ce=le.vaos||(le.vaos={});(ce[P]||(ce[P]=new Ri)).bind(c,this,B,ee?ee.getPaintVertexBuffers():[],z,le.vertexOffset,te||[]),ne.drawElements(h,le.primitiveLength*Y,ne.UNSIGNED_SHORT,le.primitiveOffset*Y*2)}}}function Kl(m,c){const h=Math.pow(2,c.tileID.overscaledZ),x=c.tileSize*Math.pow(2,m.transform.tileZoom)/h,v=x*(c.tileID.canonical.x+c.tileID.wrap*h),C=x*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_tile_units_to_pixels:1/wr(c,1,m.transform.tileZoom),u_pixel_coord_upper:[v>>16,C>>16],u_pixel_coord_lower:[65535&v,65535&C]}}const kp=f.create(),Gc=(m,c,h,x,v,C,I,M,P,B,z)=>{const H=c.style.light,K=H.properties.get("position"),J=[K.x,K.y,K.z],ee=f.create$1();"viewport"===H.properties.get("anchor")&&(f.fromRotation(ee,-c.transform.angle),f.transformMat3(J,J,ee));const te=H.properties.get("color"),ne=c.transform,Y={u_matrix:m,u_lightpos:J,u_lightintensity:H.properties.get("intensity"),u_lightcolor:[te.r,te.g,te.b],u_vertical_gradient:+h,u_opacity:x,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:kp,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:v,u_edge_radius:C};return"globe"===ne.projection.name&&(Y.u_tile_id=[I.canonical.x,I.canonical.y,1<<I.canonical.z],Y.u_zoom_transition=P,Y.u_inv_rot_matrix=z,Y.u_merc_center=B,Y.u_up_dir=ne.projection.upVector(new f.CanonicalTileID(0,0,0),B[0]*f.EXTENT,B[1]*f.EXTENT),Y.u_height_lift=M),Y},Uu=(m,c,h,x,v,C,I,M,P,B,z,H)=>{const K=Gc(m,c,h,x,v,C,I,P,B,z,H),J={u_height_factor:-Math.pow(2,I.overscaledZ)/M.tileSize/8};return f.extend(K,Kl(c,M),J)},ts=m=>({u_matrix:m}),ns=(m,c,h)=>f.extend(ts(m),Kl(c,h)),Co=(m,c)=>({u_matrix:m,u_world:c}),As=(m,c,h,x)=>f.extend(ns(m,c,h),{u_world:x}),wi=f.create(),Ua=(m,c,h,x,v,C)=>{const I=m.transform,M="globe"===I.projection.name;let P;if("map"===C.paint.get("circle-pitch-alignment"))if(M){const z=f.globePixelsToTileUnits(I.zoom,c.canonical)*I._pixelsPerMercatorPixel;P=Float32Array.from([z,0,0,z])}else P=I.calculatePixelsToTileUnitsMatrix(h);else P=new Float32Array([I.pixelsToGLUnits[0],0,0,I.pixelsToGLUnits[1]]);const B={u_camera_to_center_distance:I.cameraToCenterDistance,u_matrix:m.translatePosMatrix(c.projMatrix,h,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_device_pixel_ratio:f.exported.devicePixelRatio,u_extrude_scale:P,u_inv_rot_matrix:wi,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(M){B.u_inv_rot_matrix=x,B.u_merc_center=v,B.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],B.u_zoom_transition=f.globeToMercatorTransition(I.zoom);const z=v[0]*f.EXTENT,H=v[1]*f.EXTENT;B.u_up_dir=I.projection.upVector(new f.CanonicalTileID(0,0,0),z,H)}return B},ml=m=>{const c=[];return"map"===m.paint.get("circle-pitch-alignment")&&c.push("PITCH_WITH_MAP"),"map"===m.paint.get("circle-pitch-scale")&&c.push("SCALE_WITH_MAP"),c},Hu=(m,c,h,x)=>{const v=f.EXTENT/h.tileSize;return{u_matrix:m,u_camera_to_center_distance:c.getCameraToCenterDistance(x),u_extrude_scale:[c.pixelsToGLUnits[0]/v,c.pixelsToGLUnits[1]/v]}},Ql=(m,c,h=1)=>({u_matrix:m,u_color:c,u_overlay:0,u_overlay_scale:h}),Ms=f.create(),No=(m,c,h,x,v,C,I)=>{const M=m.transform,P="globe"===M.projection.name,B=P?f.globePixelsToTileUnits(M.zoom,c.canonical)*M._pixelsPerMercatorPixel:wr(h,1,C),z={u_matrix:c.projMatrix,u_extrude_scale:B,u_intensity:I,u_inv_rot_matrix:Ms,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(P){z.u_inv_rot_matrix=x,z.u_merc_center=v,z.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],z.u_zoom_transition=f.globeToMercatorTransition(M.zoom);const H=v[0]*f.EXTENT,K=v[1]*f.EXTENT;z.u_up_dir=M.projection.upVector(new f.CanonicalTileID(0,0,0),H,K)}return z},$u=(m,c,h,x,v,C,I)=>{const M=m.transform,P=M.calculatePixelsToTileUnitsMatrix(c);return{u_matrix:Wc(m,c,h,x),u_pixels_to_tile_units:P,u_device_pixel_ratio:C,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:v,u_texsize:qc(h)?c.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Ha(c,m.transform),u_alpha_discard_threshold:0,u_trim_offset:I}},Gu=(m,c,h,x,v)=>{const C=m.transform;return{u_matrix:Wc(m,c,h,x),u_texsize:c.imageAtlasTexture.size,u_pixels_to_tile_units:C.calculatePixelsToTileUnitsMatrix(c),u_device_pixel_ratio:v,u_image:0,u_tile_units_to_pixels:Ha(c,C),u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ha(m,c){return 1/wr(m,1,c.tileZoom)}function Wc(m,c,h,x){return m.translatePosMatrix(x||c.tileID.projMatrix,c,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}function qc(m){const c=m.paint.get("line-dasharray").value;return c.value||"constant"!==c.kind}const Zc=(m,c,h,x,v,C)=>{return{u_matrix:m,u_tl_parent:c,u_scale_parent:h,u_fade_t:x.mix,u_opacity:x.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(M=v.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(I=v.paint.get("raster-contrast"),I>0?1/(1-I):1+I),u_spin_weights:Wu(v.paint.get("raster-hue-rotate")),u_perspective_transform:C};var I,M};function Wu(m){m*=Math.PI/180;const c=Math.sin(m),h=Math.cos(m);return[(2*h+1)/3,(-Math.sqrt(3)*c-h+1)/3,(Math.sqrt(3)*c-h+1)/3]}const qu=f.create(),Yc=(m,c,h,x,v,C,I,M,P,B,z,H,K,J,ee,te)=>{const ne=v.transform,Y={u_is_size_zoom_constant:+("constant"===m||"source"===m),u_is_size_feature_constant:+("constant"===m||"camera"===m),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:ne.cameraToCenterDistance,u_rotate_symbol:+h,u_aspect_ratio:ne.width/ne.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:I,u_coord_matrix:M,u_is_text:+P,u_pitch_with_map:+x,u_texsize:B,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:qu,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:qu,u_up_vector:[0,-1,0]};return"globe"===te.name&&(Y.u_tile_id=[z.canonical.x,z.canonical.y,1<<z.canonical.z],Y.u_zoom_transition=H,Y.u_inv_rot_matrix=J,Y.u_merc_center=K,Y.u_camera_forward=ne._camera.forward(),Y.u_ecef_origin=f.globeECEFOrigin(ne.globeMatrix,z.toUnwrapped()),Y.u_tile_matrix=Float32Array.from(ne.globeMatrix),Y.u_up_vector=ee),Y},Xc=(m,c,h,x,v,C,I,M,P,B,z,H,K,J,ee,te,ne)=>f.extend(Yc(m,c,h,x,v,C,I,M,P,B,H,K,J,ee,te,ne),{u_gamma_scale:x?v.transform.cameraToCenterDistance*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:f.exported.devicePixelRatio,u_is_halo:+z}),Zu=(m,c,h,x,v,C,I,M,P,B,z,H,K,J,ee,te)=>f.extend(Xc(m,c,h,x,v,C,I,M,!0,P,!0,z,H,K,J,ee,te),{u_texsize_icon:B,u_texture_icon:1}),cf=(m,c,h)=>({u_matrix:m,u_opacity:c,u_color:h}),To=(m,c,h,x,v)=>f.extend(function(C,I,M){const P=I.imageManager.getPattern(C.toString()),{width:B,height:z}=I.imageManager.getPixelSize(),H=Math.pow(2,M.tileID.overscaledZ),K=M.tileSize*Math.pow(2,I.transform.tileZoom)/H,J=K*(M.tileID.canonical.x+M.tileID.wrap*H),ee=K*M.tileID.canonical.y;return{u_image:0,u_pattern_tl:P.tl,u_pattern_br:P.br,u_texsize:[B,z],u_pattern_size:P.displaySize,u_tile_units_to_pixels:1/wr(M,1,I.transform.tileZoom),u_pixel_coord_upper:[J>>16,ee>>16],u_pixel_coord_lower:[65535&J,65535&ee]}}(x,h,v),{u_matrix:m,u_opacity:c}),Rp={fillExtrusion:m=>({u_matrix:new f.UniformMatrix4f(m),u_lightpos:new f.Uniform3f(m),u_lightintensity:new f.Uniform1f(m),u_lightcolor:new f.Uniform3f(m),u_vertical_gradient:new f.Uniform1f(m),u_opacity:new f.Uniform1f(m),u_edge_radius:new f.Uniform1f(m),u_ao:new f.Uniform2f(m),u_tile_id:new f.Uniform3f(m),u_zoom_transition:new f.Uniform1f(m),u_inv_rot_matrix:new f.UniformMatrix4f(m),u_merc_center:new f.Uniform2f(m),u_up_dir:new f.Uniform3f(m),u_height_lift:new f.Uniform1f(m)}),fillExtrusionPattern:m=>({u_matrix:new f.UniformMatrix4f(m),u_lightpos:new f.Uniform3f(m),u_lightintensity:new f.Uniform1f(m),u_lightcolor:new f.Uniform3f(m),u_vertical_gradient:new f.Uniform1f(m),u_height_factor:new f.Uniform1f(m),u_edge_radius:new f.Uniform1f(m),u_ao:new f.Uniform2f(m),u_tile_id:new f.Uniform3f(m),u_zoom_transition:new f.Uniform1f(m),u_inv_rot_matrix:new f.UniformMatrix4f(m),u_merc_center:new f.Uniform2f(m),u_up_dir:new f.Uniform3f(m),u_height_lift:new f.Uniform1f(m),u_image:new f.Uniform1i(m),u_texsize:new f.Uniform2f(m),u_pixel_coord_upper:new f.Uniform2f(m),u_pixel_coord_lower:new f.Uniform2f(m),u_tile_units_to_pixels:new f.Uniform1f(m),u_opacity:new f.Uniform1f(m)}),fill:m=>({u_matrix:new f.UniformMatrix4f(m)}),fillPattern:m=>({u_matrix:new f.UniformMatrix4f(m),u_image:new f.Uniform1i(m),u_texsize:new f.Uniform2f(m),u_pixel_coord_upper:new f.Uniform2f(m),u_pixel_coord_lower:new f.Uniform2f(m),u_tile_units_to_pixels:new f.Uniform1f(m)}),fillOutline:m=>({u_matrix:new f.UniformMatrix4f(m),u_world:new f.Uniform2f(m)}),fillOutlinePattern:m=>({u_matrix:new f.UniformMatrix4f(m),u_world:new f.Uniform2f(m),u_image:new f.Uniform1i(m),u_texsize:new f.Uniform2f(m),u_pixel_coord_upper:new f.Uniform2f(m),u_pixel_coord_lower:new f.Uniform2f(m),u_tile_units_to_pixels:new f.Uniform1f(m)}),circle:m=>({u_camera_to_center_distance:new f.Uniform1f(m),u_extrude_scale:new f.UniformMatrix2f(m),u_device_pixel_ratio:new f.Uniform1f(m),u_matrix:new f.UniformMatrix4f(m),u_inv_rot_matrix:new f.UniformMatrix4f(m),u_merc_center:new f.Uniform2f(m),u_tile_id:new f.Uniform3f(m),u_zoom_transition:new f.Uniform1f(m),u_up_dir:new f.Uniform3f(m)}),collisionBox:m=>({u_matrix:new f.UniformMatrix4f(m),u_camera_to_center_distance:new f.Uniform1f(m),u_extrude_scale:new f.Uniform2f(m)}),collisionCircle:m=>({u_matrix:new f.UniformMatrix4f(m),u_inv_matrix:new f.UniformMatrix4f(m),u_camera_to_center_distance:new f.Uniform1f(m),u_viewport_size:new f.Uniform2f(m)}),debug:m=>({u_color:new f.UniformColor(m),u_matrix:new f.UniformMatrix4f(m),u_overlay:new f.Uniform1i(m),u_overlay_scale:new f.Uniform1f(m)}),clippingMask:m=>({u_matrix:new f.UniformMatrix4f(m)}),heatmap:m=>({u_extrude_scale:new f.Uniform1f(m),u_intensity:new f.Uniform1f(m),u_matrix:new f.UniformMatrix4f(m),u_inv_rot_matrix:new f.UniformMatrix4f(m),u_merc_center:new f.Uniform2f(m),u_tile_id:new f.Uniform3f(m),u_zoom_transition:new f.Uniform1f(m),u_up_dir:new f.Uniform3f(m)}),heatmapTexture:m=>({u_image:new f.Uniform1i(m),u_color_ramp:new f.Uniform1i(m),u_opacity:new f.Uniform1f(m)}),hillshade:m=>({u_matrix:new f.UniformMatrix4f(m),u_image:new f.Uniform1i(m),u_latrange:new f.Uniform2f(m),u_light:new f.Uniform2f(m),u_shadow:new f.UniformColor(m),u_highlight:new f.UniformColor(m),u_accent:new f.UniformColor(m)}),hillshadePrepare:m=>({u_matrix:new f.UniformMatrix4f(m),u_image:new f.Uniform1i(m),u_dimension:new f.Uniform2f(m),u_zoom:new f.Uniform1f(m),u_unpack:new f.Uniform4f(m)}),line:m=>({u_matrix:new f.UniformMatrix4f(m),u_pixels_to_tile_units:new f.UniformMatrix2f(m),u_device_pixel_ratio:new f.Uniform1f(m),u_units_to_pixels:new f.Uniform2f(m),u_dash_image:new f.Uniform1i(m),u_gradient_image:new f.Uniform1i(m),u_image_height:new f.Uniform1f(m),u_texsize:new f.Uniform2f(m),u_tile_units_to_pixels:new f.Uniform1f(m),u_alpha_discard_threshold:new f.Uniform1f(m),u_trim_offset:new f.Uniform2f(m)}),linePattern:m=>({u_matrix:new f.UniformMatrix4f(m),u_texsize:new f.Uniform2f(m),u_pixels_to_tile_units:new f.UniformMatrix2f(m),u_device_pixel_ratio:new f.Uniform1f(m),u_image:new f.Uniform1i(m),u_units_to_pixels:new f.Uniform2f(m),u_tile_units_to_pixels:new f.Uniform1f(m),u_alpha_discard_threshold:new f.Uniform1f(m)}),raster:m=>({u_matrix:new f.UniformMatrix4f(m),u_tl_parent:new f.Uniform2f(m),u_scale_parent:new f.Uniform1f(m),u_fade_t:new f.Uniform1f(m),u_opacity:new f.Uniform1f(m),u_image0:new f.Uniform1i(m),u_image1:new f.Uniform1i(m),u_brightness_low:new f.Uniform1f(m),u_brightness_high:new f.Uniform1f(m),u_saturation_factor:new f.Uniform1f(m),u_contrast_factor:new f.Uniform1f(m),u_spin_weights:new f.Uniform3f(m),u_perspective_transform:new f.Uniform2f(m)}),symbolIcon:m=>({u_is_size_zoom_constant:new f.Uniform1i(m),u_is_size_feature_constant:new f.Uniform1i(m),u_size_t:new f.Uniform1f(m),u_size:new f.Uniform1f(m),u_camera_to_center_distance:new f.Uniform1f(m),u_rotate_symbol:new f.Uniform1i(m),u_aspect_ratio:new f.Uniform1f(m),u_fade_change:new f.Uniform1f(m),u_matrix:new f.UniformMatrix4f(m),u_label_plane_matrix:new f.UniformMatrix4f(m),u_coord_matrix:new f.UniformMatrix4f(m),u_is_text:new f.Uniform1i(m),u_pitch_with_map:new f.Uniform1i(m),u_texsize:new f.Uniform2f(m),u_tile_id:new f.Uniform3f(m),u_zoom_transition:new f.Uniform1f(m),u_inv_rot_matrix:new f.UniformMatrix4f(m),u_merc_center:new f.Uniform2f(m),u_camera_forward:new f.Uniform3f(m),u_tile_matrix:new f.UniformMatrix4f(m),u_up_vector:new f.Uniform3f(m),u_ecef_origin:new f.Uniform3f(m),u_texture:new f.Uniform1i(m)}),symbolSDF:m=>({u_is_size_zoom_constant:new f.Uniform1i(m),u_is_size_feature_constant:new f.Uniform1i(m),u_size_t:new f.Uniform1f(m),u_size:new f.Uniform1f(m),u_camera_to_center_distance:new f.Uniform1f(m),u_rotate_symbol:new f.Uniform1i(m),u_aspect_ratio:new f.Uniform1f(m),u_fade_change:new f.Uniform1f(m),u_matrix:new f.UniformMatrix4f(m),u_label_plane_matrix:new f.UniformMatrix4f(m),u_coord_matrix:new f.UniformMatrix4f(m),u_is_text:new f.Uniform1i(m),u_pitch_with_map:new f.Uniform1i(m),u_texsize:new f.Uniform2f(m),u_texture:new f.Uniform1i(m),u_gamma_scale:new f.Uniform1f(m),u_device_pixel_ratio:new f.Uniform1f(m),u_tile_id:new f.Uniform3f(m),u_zoom_transition:new f.Uniform1f(m),u_inv_rot_matrix:new f.UniformMatrix4f(m),u_merc_center:new f.Uniform2f(m),u_camera_forward:new f.Uniform3f(m),u_tile_matrix:new f.UniformMatrix4f(m),u_up_vector:new f.Uniform3f(m),u_ecef_origin:new f.Uniform3f(m),u_is_halo:new f.Uniform1i(m)}),symbolTextAndIcon:m=>({u_is_size_zoom_constant:new f.Uniform1i(m),u_is_size_feature_constant:new f.Uniform1i(m),u_size_t:new f.Uniform1f(m),u_size:new f.Uniform1f(m),u_camera_to_center_distance:new f.Uniform1f(m),u_rotate_symbol:new f.Uniform1i(m),u_aspect_ratio:new f.Uniform1f(m),u_fade_change:new f.Uniform1f(m),u_matrix:new f.UniformMatrix4f(m),u_label_plane_matrix:new f.UniformMatrix4f(m),u_coord_matrix:new f.UniformMatrix4f(m),u_is_text:new f.Uniform1i(m),u_pitch_with_map:new f.Uniform1i(m),u_texsize:new f.Uniform2f(m),u_texsize_icon:new f.Uniform2f(m),u_texture:new f.Uniform1i(m),u_texture_icon:new f.Uniform1i(m),u_gamma_scale:new f.Uniform1f(m),u_device_pixel_ratio:new f.Uniform1f(m),u_is_halo:new f.Uniform1i(m)}),background:m=>({u_matrix:new f.UniformMatrix4f(m),u_opacity:new f.Uniform1f(m),u_color:new f.UniformColor(m)}),backgroundPattern:m=>({u_matrix:new f.UniformMatrix4f(m),u_opacity:new f.Uniform1f(m),u_image:new f.Uniform1i(m),u_pattern_tl:new f.Uniform2f(m),u_pattern_br:new f.Uniform2f(m),u_texsize:new f.Uniform2f(m),u_pattern_size:new f.Uniform2f(m),u_pixel_coord_upper:new f.Uniform2f(m),u_pixel_coord_lower:new f.Uniform2f(m),u_tile_units_to_pixels:new f.Uniform1f(m)}),terrainRaster:_l,terrainDepth:_l,skybox:m=>({u_matrix:new f.UniformMatrix4f(m),u_sun_direction:new f.Uniform3f(m),u_cubemap:new f.Uniform1i(m),u_opacity:new f.Uniform1f(m),u_temporal_offset:new f.Uniform1f(m)}),skyboxGradient:m=>({u_matrix:new f.UniformMatrix4f(m),u_color_ramp:new f.Uniform1i(m),u_center_direction:new f.Uniform3f(m),u_radius:new f.Uniform1f(m),u_opacity:new f.Uniform1f(m),u_temporal_offset:new f.Uniform1f(m)}),skyboxCapture:m=>({u_matrix_3f:new f.UniformMatrix3f(m),u_sun_direction:new f.Uniform3f(m),u_sun_intensity:new f.Uniform1f(m),u_color_tint_r:new f.Uniform4f(m),u_color_tint_m:new f.Uniform4f(m),u_luminance:new f.Uniform1f(m)}),globeRaster:m=>({u_proj_matrix:new f.UniformMatrix4f(m),u_globe_matrix:new f.UniformMatrix4f(m),u_normalize_matrix:new f.UniformMatrix4f(m),u_merc_matrix:new f.UniformMatrix4f(m),u_zoom_transition:new f.Uniform1f(m),u_merc_center:new f.Uniform2f(m),u_image0:new f.Uniform1i(m),u_grid_matrix:new f.UniformMatrix3f(m),u_skirt_height:new f.Uniform1f(m),u_frustum_tl:new f.Uniform3f(m),u_frustum_tr:new f.Uniform3f(m),u_frustum_br:new f.Uniform3f(m),u_frustum_bl:new f.Uniform3f(m),u_globe_pos:new f.Uniform3f(m),u_globe_radius:new f.Uniform1f(m),u_viewport:new f.Uniform2f(m)}),globeAtmosphere:m=>({u_frustum_tl:new f.Uniform3f(m),u_frustum_tr:new f.Uniform3f(m),u_frustum_br:new f.Uniform3f(m),u_frustum_bl:new f.Uniform3f(m),u_horizon:new f.Uniform1f(m),u_transition:new f.Uniform1f(m),u_fadeout_range:new f.Uniform1f(m),u_color:new f.Uniform4f(m),u_high_color:new f.Uniform4f(m),u_space_color:new f.Uniform4f(m),u_star_intensity:new f.Uniform1f(m),u_star_density:new f.Uniform1f(m),u_star_size:new f.Uniform1f(m),u_temporal_offset:new f.Uniform1f(m),u_horizon_angle:new f.Uniform1f(m),u_rotation_matrix:new f.UniformMatrix4f(m)})};let $a;function uf(m,c,h,x,v,C,I){const M=m.context,P=M.gl,B=m.transform,z=m.useProgram("collisionBox"),H=[];let K=0,J=0;for(let de=0;de<x.length;de++){const fe=x[de],ye=c.getTile(fe),Ee=ye.getBucket(h);if(!Ee)continue;const Ie=Gl(fe,Ee,B);let Be=Ie;0===v[0]&&0===v[1]||(Be=m.translatePosMatrix(Ie,ye,v,C));const Ue=I?Ee.textCollisionBox:Ee.iconCollisionBox,bt=Ee.collisionCircleArray;if(bt.length>0){const Ae=f.create(),it=Be;f.mul(Ae,Ee.placementInvProjMatrix,B.glCoordMatrix),f.mul(Ae,Ae,Ee.placementViewportMatrix),H.push({circleArray:bt,circleOffset:J,transform:it,invTransform:Ae,projection:Ee.getProjection()}),K+=bt.length/4,J=K}Ue&&(m.terrain&&m.terrain.setupElevationDraw(ye,z),z.draw(M,P.LINES,f.DepthMode.disabled,f.StencilMode.disabled,m.colorModeForRenderPass(),f.CullFaceMode.disabled,Hu(Be,B,ye,Ee.getProjection()),h.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,null,B.zoom,null,[Ue.collisionVertexBuffer,Ue.collisionVertexBufferExt]))}if(!I||!H.length)return;const ee=m.useProgram("collisionCircle"),te=new f.StructArrayLayout2f1f2i16;te.resize(4*K),te._trim();let ne=0;for(const de of H)for(let fe=0;fe<de.circleArray.length/4;fe++){const ye=4*fe,Ee=de.circleArray[ye+0],Ie=de.circleArray[ye+1],Be=de.circleArray[ye+2],Ue=de.circleArray[ye+3];te.emplace(ne++,Ee,Ie,Be,Ue,0),te.emplace(ne++,Ee,Ie,Be,Ue,1),te.emplace(ne++,Ee,Ie,Be,Ue,2),te.emplace(ne++,Ee,Ie,Be,Ue,3)}(!$a||$a.length<2*K)&&($a=function(de){const fe=2*de,ye=new f.StructArrayLayout3ui6;ye.resize(fe),ye._trim();for(let Ee=0;Ee<fe;Ee++){const Ie=6*Ee;ye.uint16[Ie+0]=4*Ee+0,ye.uint16[Ie+1]=4*Ee+1,ye.uint16[Ie+2]=4*Ee+2,ye.uint16[Ie+3]=4*Ee+2,ye.uint16[Ie+4]=4*Ee+3,ye.uint16[Ie+5]=4*Ee+0}return ye}(K));const Y=M.createIndexBuffer($a,!0),le=M.createVertexBuffer(te,f.collisionCircleLayout.members,!0);for(const de of H){const fe={u_matrix:de.transform,u_inv_matrix:de.invTransform,u_camera_to_center_distance:(ce=B).getCameraToCenterDistance(de.projection),u_viewport_size:[ce.width,ce.height]};ee.draw(M,P.TRIANGLES,f.DepthMode.disabled,f.StencilMode.disabled,m.colorModeForRenderPass(),f.CullFaceMode.disabled,fe,h.id,le,Y,f.SegmentVector.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,B.zoom)}var ce;le.destroy(),Y.destroy()}const Jl=f.create();function df({width:m,height:c,anchor:h,textOffset:x,textScale:v},C){const{horizontalAlign:I,verticalAlign:M}=f.getAnchorAlignment(h),P=-(I-.5)*m,B=-(M-.5)*c,z=f.evaluateVariableOffset(h,x);return new f.pointGeometry((P/v+z[0])*C,(B/v+z[1])*C)}function ec(m,c,h,x,v,C,I,M,P,B,z){const H=m.text.placedSymbolArray,K=m.text.dynamicLayoutVertexArray,J=m.icon.dynamicLayoutVertexArray,ee={},te=m.getProjection(),ne=Wl(M,te,C),Y=C.elevation,le=te.upVectorScale(M.canonical,C.center.lat,C.worldSize).metersToTile;K.clear();for(let ce=0;ce<H.length;ce++){const de=H.get(ce),{tileAnchorX:fe,tileAnchorY:ye,numGlyphs:Ee}=de,Be=de.hidden||!de.crossTileID||m.allowVerticalPlacement&&!de.placedOrientation?null:x[de.crossTileID];if(Be){let Ue=0,bt=0,Ae=0;if(Y){const $t=Y?Y.getAtTileOffset(M,fe,ye):0,[Bn,ct,Rt]=te.upVector(M.canonical,fe,ye);Ue=$t*Bn*le,bt=$t*ct*le,Ae=$t*Rt*le}let[it,Ze,dt,Fe]=mt(de.projectedAnchorX+Ue,de.projectedAnchorY+bt,de.projectedAnchorZ+Ae,h?ne:I);const Me=Rn(C.getCameraToCenterDistance(te),Fe);let He=v.evaluateSizeForFeature(m.textSizeData,B,de)*Me/f.ONE_EM;h&&(He*=m.tilePixelRatio/P);const st=df(Be,He);h?(({x:it,y:Ze,z:dt}=te.projectTilePoint(fe+st.x,ye+st.y,M.canonical)),[it,Ze,dt]=mt(it+Ue,Ze+bt,dt+Ae,I)):(c&&st._rotate(-C.angle),it+=st.x,Ze+=st.y,dt=0);const pt=m.allowVerticalPlacement&&de.placedOrientation===f.WritingMode.vertical?Math.PI/2:0;for(let $t=0;$t<Ee;$t++)f.addDynamicAttributes(K,it,Ze,dt,pt);z&&de.associatedIconIndex>=0&&(ee[de.associatedIconIndex]={x:it,y:Ze,z:dt,angle:pt})}else An(Ee,K)}if(z){J.clear();const ce=m.icon.placedSymbolArray;for(let de=0;de<ce.length;de++){const fe=ce.get(de),{numGlyphs:ye}=fe,Ee=ee[de];if(fe.hidden||!Ee)An(ye,J);else{const{x:Ie,y:Be,z:Ue,angle:bt}=Ee;for(let Ae=0;Ae<ye;Ae++)f.addDynamicAttributes(J,Ie,Be,Ue,bt)}}m.icon.dynamicLayoutVertexBuffer.updateData(J)}m.text.dynamicLayoutVertexBuffer.updateData(K)}function hf(m,c,h){return h.iconsInText&&c?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function ff(m,c,h,x,v,C,I,M,P,B,z,H){const K=m.context,J=K.gl,ee=m.transform,te="map"===M,ne="map"===P,Y=te&&"point"!==h.layout.get("symbol-placement"),le=te&&!ne&&!Y,ce=void 0!==h.layout.get("symbol-sort-key").constantOr(1);let de=!1;const fe=m.depthModeForSublayer(0,f.DepthMode.ReadOnly),ye=[f.mercatorXfromLng(ee.center.lng),f.mercatorYfromLat(ee.center.lat)],Ee=h.layout.get("text-variable-anchor"),Ie="globe"===ee.projection.name,Be=[],Ue=[0,-1,0];let bt=Ue;!Ie&&!ee.mercatorFromTransition||te||(bt=function(Ae){const it=Ae._camera.getWorldToCamera(Ae.worldSize,1),Ze=f.multiply([],it,Ae.globeMatrix);f.invert(Ze,Ze);const dt=[0,0,0],Fe=[0,1,0,0];return f.transformMat4$1(Fe,Fe,Ze),dt[0]=Fe[0],dt[1]=Fe[1],dt[2]=Fe[2],f.normalize(dt,dt),dt}(ee));for(const Ae of x){const it=c.getTile(Ae),Ze=it.getBucket(h);if(!Ze||"mercator"===Ze.projection.name&&Ie)continue;const dt=v?Ze.text:Ze.icon;if(!dt||Ze.fullyClipped||!dt.segments.get().length)continue;const Fe=dt.programConfigurations.get(h.id),Me=v||Ze.sdfIcons,He=v?Ze.textSizeData:Ze.iconSizeData,st=ne||0!==ee.pitch,pt=f.evaluateSizeForZoom(He,ee.zoom);let $t,Bn,ct,Rt,Yt=[0,0],Zn=null;if(v)Bn=it.glyphAtlasTexture,ct=J.LINEAR,$t=it.glyphAtlasTexture.size,Ze.iconsInText&&(Yt=it.imageAtlasTexture.size,Zn=it.imageAtlasTexture,Rt=st||m.options.rotating||m.options.zooming||"composite"===He.kind||"camera"===He.kind?J.LINEAR:J.NEAREST);else{const Ps=1!==h.layout.get("icon-size").constantOr(0)||Ze.iconsNeedLinear;Bn=it.imageAtlasTexture,ct=Me||m.options.rotating||m.options.zooming||Ps||st?J.LINEAR:J.NEAREST,$t=it.imageAtlasTexture.size}const en="globe"===Ze.projection.name,Ei=en?bt:Ue,Ci=en?f.globeToMercatorTransition(ee.zoom):0,Ti=Wl(Ae,Ze.getProjection(),ee),ji=ee.calculatePixelsToTileUnitsMatrix(it),$r=Na(Ti,it.tileID.canonical,ne,te,ee,Ze.getProjection(),ji),ps=m.terrain&&ne&&Y?f.invert(f.create(),$r):Jl,ma=Hl(Ti,it.tileID.canonical,ne,te,ee,Ze.getProjection(),ji),vl=Ee&&Ze.hasTextData(),Je="none"!==h.layout.get("icon-text-fit")&&vl&&Ze.hasIconData();if(Y){const Ps=ee.elevation,ga=Ps?Ps.getAtTileOffsetFunc(Ae,ee.center.lat,ee.worldSize,Ze.getProjection()):null,Za=sf(Ti,it.tileID.canonical,ne,te,ee,Ze.getProjection(),ji);es(Ze,Ti,m,v,Za,ma,ne,B,ga,Ae)}const nn=Y||v&&Ee||Je,hi=m.translatePosMatrix(Ti,it,C,I),xr=nn?Jl:$r,Pi=m.translatePosMatrix(ma,it,C,I,!0),Hi=Ze.getProjection().createInversionMatrix(ee,Ae.canonical),Kr=[];m.terrainRenderModeElevated()&&ne&&Kr.push("PITCH_WITH_MAP_TERRAIN"),en&&Kr.push("PROJECTION_GLOBE_VIEW"),nn&&Kr.push("PROJECTED_POS_ON_VIEWPORT");const ur=Me&&0!==h.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1);let qa;qa=Me?Ze.iconsInText?Zu(He.kind,pt,le,ne,m,hi,xr,Pi,$t,Yt,Ae,Ci,ye,Hi,Ei,Ze.getProjection()):Xc(He.kind,pt,le,ne,m,hi,xr,Pi,v,$t,!0,Ae,Ci,ye,Hi,Ei,Ze.getProjection()):Yc(He.kind,pt,le,ne,m,hi,xr,Pi,v,$t,Ae,Ci,ye,Hi,Ei,Ze.getProjection());const oc={program:m.useProgram(hf(Me,v,Ze),Fe,Kr),buffers:dt,uniformValues:qa,atlasTexture:Bn,atlasTextureIcon:Zn,atlasInterpolation:ct,atlasInterpolationIcon:Rt,isSDF:Me,hasHalo:ur,tile:it,labelPlaneMatrixInv:ps};if(ce&&Ze.canOverlap){de=!0;const Ps=dt.segments.get();for(const ga of Ps)Be.push({segments:new f.SegmentVector([ga]),sortKey:ga.sortKey,state:oc})}else Be.push({segments:dt.segments,sortKey:0,state:oc})}de&&Be.sort((Ae,it)=>Ae.sortKey-it.sortKey);for(const Ae of Be){const it=Ae.state;if(m.terrain&&m.terrain.setupElevationDraw(it.tile,it.program,{useDepthForOcclusion:!Ie,labelPlaneMatrixInv:it.labelPlaneMatrixInv}),K.activeTexture.set(J.TEXTURE0),it.atlasTexture.bind(it.atlasInterpolation,J.CLAMP_TO_EDGE),it.atlasTextureIcon&&(K.activeTexture.set(J.TEXTURE1),it.atlasTextureIcon&&it.atlasTextureIcon.bind(it.atlasInterpolationIcon,J.CLAMP_TO_EDGE)),it.isSDF){const Ze=it.uniformValues;it.hasHalo&&(Ze.u_is_halo=1,Yd(it.buffers,Ae.segments,h,m,it.program,fe,z,H,Ze)),Ze.u_is_halo=0}Yd(it.buffers,Ae.segments,h,m,it.program,fe,z,H,it.uniformValues)}}function Yd(m,c,h,x,v,C,I,M,P){const B=x.context,z=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.globeExtVertexBuffer];v.draw(B,B.gl.TRIANGLES,C,I,M,f.CullFaceMode.disabled,P,h.id,m.layoutVertexBuffer,m.indexBuffer,c,h.paint,x.transform.zoom,m.programConfigurations.get(h.id),z)}function pf(m,c,h,x,v,C,I){const M=m.context.gl,P=h.paint.get("fill-pattern"),B=P&&P.constantOr(1);let z,H,K,J,ee;I?(H=B&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",z=M.LINES):(H=B?"fillPattern":"fill",z=M.TRIANGLES);for(const te of x){const ne=c.getTile(te);if(B&&!ne.patternsLoaded())continue;const Y=ne.getBucket(h);if(!Y)continue;m.prepareDrawTile();const le=Y.programConfigurations.get(h.id),ce=m.useProgram(H,le);B&&(m.context.activeTexture.set(M.TEXTURE0),ne.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),le.updatePaintBuffers());const de=P.constantOr(null);if(de&&ne.imageAtlas){const ye=ne.imageAtlas.patternPositions[de.toString()];ye&&le.setConstantPatternPositions(ye)}const fe=m.translatePosMatrix(te.projMatrix,ne,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(I){J=Y.indexBuffer2,ee=Y.segments2;const ye=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[M.drawingBufferWidth,M.drawingBufferHeight];K="fillOutlinePattern"===H&&B?As(fe,m,ne,ye):Co(fe,ye)}else J=Y.indexBuffer,ee=Y.segments,K=B?ns(fe,m,ne):ts(fe);m.prepareDrawProgram(m.context,ce,te.toUnwrapped()),ce.draw(m.context,z,v,m.stencilModeForClipping(te),C,f.CullFaceMode.disabled,K,h.id,Y.layoutVertexBuffer,J,ee,h.paint,m.transform.zoom,le)}}function zr(m,c,h,x,v,C,I){const M=m.context,P=M.gl,B=m.transform,z=h.paint.get("fill-extrusion-pattern"),H=z.constantOr(1),K=h.paint.get("fill-extrusion-opacity"),J=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),h.paint.get("fill-extrusion-ambient-occlusion-radius")],ee=h.layout.get("fill-extrusion-edge-radius"),te="globe"===B.projection.name?f.fillExtrusionHeightLift():0,ne="globe"===B.projection.name,Y=ne?f.globeToMercatorTransition(B.zoom):0,le=[f.mercatorXfromLng(B.center.lng),f.mercatorYfromLat(B.center.lat)],ce=[];ne&&ce.push("PROJECTION_GLOBE_VIEW"),J[0]>0&&ce.push("FAUX_AO");for(const de of x){const fe=c.getTile(de),ye=fe.getBucket(h);if(!ye||ye.projection.name!==B.projection.name)continue;const Ee=ye.programConfigurations.get(h.id),Ie=m.useProgram(H?"fillExtrusionPattern":"fillExtrusion",Ee,ce);if(m.terrain){const dt=m.terrain;if(m.style.terrainSetForDrapingOnly())dt.setupElevationDraw(fe,Ie,{useMeterToDem:!0});else{if(!ye.enableTerrain)continue;if(dt.setupElevationDraw(fe,Ie,{useMeterToDem:!0}),Pp(M,c,de,ye,h,dt),!ye.centroidVertexBuffer){const Fe=Ie.attributes.a_centroid_pos;void 0!==Fe&&P.vertexAttrib2f(Fe,0,0)}}}H&&(m.context.activeTexture.set(P.TEXTURE0),fe.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),Ee.updatePaintBuffers());const Be=z.constantOr(null);if(Be&&fe.imageAtlas){const dt=fe.imageAtlas.patternPositions[Be.toString()];dt&&Ee.setConstantPatternPositions(dt)}const Ue=m.translatePosMatrix(de.projMatrix,fe,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),bt=B.projection.createInversionMatrix(B,de.canonical),Ae=h.paint.get("fill-extrusion-vertical-gradient"),it=H?Uu(Ue,m,Ae,K,J,ee,de,fe,te,Y,le,bt):Gc(Ue,m,Ae,K,J,ee,de,te,Y,le,bt);m.prepareDrawProgram(M,Ie,de.toUnwrapped());const Ze=[];m.terrain&&Ze.push(ye.centroidVertexBuffer),ne&&Ze.push(ye.layoutVertexExtBuffer),Ie.draw(M,M.gl.TRIANGLES,v,C,I,f.CullFaceMode.backCCW,it,h.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,h.paint,m.transform.zoom,Ee,Ze)}}function Pp(m,c,h,x,v,C){const I=[Y=>{let le=Y.canonical.x-1,ce=Y.wrap;return le<0&&(le=(1<<Y.canonical.z)-1,ce--),new f.OverscaledTileID(Y.overscaledZ,ce,Y.canonical.z,le,Y.canonical.y)},Y=>{let le=Y.canonical.x+1,ce=Y.wrap;return le===1<<Y.canonical.z&&(le=0,ce++),new f.OverscaledTileID(Y.overscaledZ,ce,Y.canonical.z,le,Y.canonical.y)},Y=>new f.OverscaledTileID(Y.overscaledZ,Y.wrap,Y.canonical.z,Y.canonical.x,(0===Y.canonical.y?1<<Y.canonical.z:Y.canonical.y)-1),Y=>new f.OverscaledTileID(Y.overscaledZ,Y.wrap,Y.canonical.z,Y.canonical.x,Y.canonical.y===(1<<Y.canonical.z)-1?0:Y.canonical.y+1)],M=Y=>{const le=c.getSource().minzoom,ce=fe=>{const ye=c.getTileByID(fe);if(ye&&ye.hasData())return ye.getBucket(v)},de=[0,-1,1];for(const fe of de){if(Y.overscaledZ+fe<le)continue;const ye=ce(Y.calculateScaledKey(Y.overscaledZ+fe));if(ye)return ye}},P=[0,0,0],B=(Y,le)=>(P[0]=Math.min(Y.min.y,le.min.y),P[1]=Math.max(Y.max.y,le.max.y),P[2]=f.EXTENT-le.min.x>Y.max.x?le.min.x-f.EXTENT:Y.max.x,P),z=(Y,le)=>(P[0]=Math.min(Y.min.x,le.min.x),P[1]=Math.max(Y.max.x,le.max.x),P[2]=f.EXTENT-le.min.y>Y.max.y?le.min.y-f.EXTENT:Y.max.y,P),H=[(Y,le)=>B(Y,le),(Y,le)=>B(le,Y),(Y,le)=>z(Y,le),(Y,le)=>z(le,Y)],K=new f.pointGeometry(0,0);let J,ee,te;const ne=(Y,le,ce,de,fe)=>{const ye=[[de?ce:Y,de?Y:ce,0],[de?ce:le,de?le:ce,0]],Ee=fe<0?f.EXTENT+fe:fe,Ie=[de?Ee:(Y+le)/2,de?(Y+le)/2:Ee,0];return 0===ce&&fe<0||0!==ce&&fe>0?C.getForTilePoints(te,[Ie],!0,ee):ye.push(Ie),C.getForTilePoints(h,ye,!0,J),Math.max(ye[0][2],ye[1][2],Ie[2])/C.exaggeration()};for(let Y=0;Y<4;Y++){const le=(Y<2?1:5)-Y,ce=x.borders[Y];if(0===ce.length)continue;const de=te=I[Y](h),fe=M(de);if(!(fe&&fe instanceof f.FillExtrusionBucket&&fe.enableTerrain)||x.borderDoneWithNeighborZ[Y]===fe.canonical.z&&fe.borderDoneWithNeighborZ[le]===x.canonical.z||(ee=C.findDEMTileFor(de),!ee||!ee.dem))continue;if(!J){const Be=C.findDEMTileFor(h);if(!Be||!Be.dem)return;J=Be}const ye=fe.borders[le];let Ee=0;const Ie=fe.borderDoneWithNeighborZ[le]!==x.canonical.z;if(x.canonical.z===fe.canonical.z){for(let Be=0;Be<ce.length;Be++){const Ue=x.featuresOnBorder[ce[Be]],bt=Ue.borders[Y];let Ae;for(;Ee<ye.length&&(Ae=fe.featuresOnBorder[ye[Ee]],!(Ae.borders[le][1]>bt[0]+3));)Ie&&fe.encodeCentroid(void 0,Ae,!1),Ee++;if(Ae&&Ee<ye.length){const it=Ee;let Ze=0;for(;!(Ae.borders[le][0]>bt[1]-3)&&(Ze++,++Ee!==ye.length);)Ae=fe.featuresOnBorder[ye[Ee]];if(Ae=fe.featuresOnBorder[ye[it]],Ue.intersectsCount()>1||Ae.intersectsCount()>1||1!==Ze){1!==Ze&&(Ee=it),x.encodeCentroid(void 0,Ue,!1),Ie&&fe.encodeCentroid(void 0,Ae,!1);continue}const dt=H[Y](Ue,Ae),Fe=Y%2?f.EXTENT-1:0;K.x=ne(dt[0],Math.min(f.EXTENT-1,dt[1]),Fe,Y<2,dt[2]),K.y=0,x.encodeCentroid(K,Ue,!1),Ie&&fe.encodeCentroid(K,Ae,!1)}else x.encodeCentroid(void 0,Ue,!1)}x.borderDoneWithNeighborZ[Y]=fe.canonical.z,x.needsCentroidUpdate=!0,Ie&&(fe.borderDoneWithNeighborZ[le]=x.canonical.z,fe.needsCentroidUpdate=!0)}else{for(const Be of ce)x.encodeCentroid(void 0,x.featuresOnBorder[Be],!1);if(Ie){for(const Be of ye)fe.encodeCentroid(void 0,fe.featuresOnBorder[Be],!1);fe.borderDoneWithNeighborZ[le]=x.canonical.z,fe.needsCentroidUpdate=!0}x.borderDoneWithNeighborZ[Y]=fe.canonical.z,x.needsCentroidUpdate=!0}}(x.needsCentroidUpdate||!x.centroidVertexBuffer&&0!==x.centroidVertexArray.length)&&x.uploadCentroid(m)}const Xd=new f.Color(1,0,0,1),Yu=new f.Color(0,1,0,1),Xn=new f.Color(0,0,1,1),_f=new f.Color(1,0,1,1),Kd=new f.Color(0,1,1,1);function xn(m,c,h){const x=m.context,v=m.transform,C=x.gl,I="globe"===v.projection.name,M=I?["PROJECTION_GLOBE_VIEW"]:null;let P=h.projMatrix;if(I&&f.globeToMercatorTransition(v.zoom)>0){const Ue=f.transitionTileAABBinECEF(h.canonical,v),bt=f.globeDenormalizeECEF(Ue);P=f.multiply(new Float32Array(16),v.globeMatrix,bt),f.multiply(P,v.projMatrix,P)}const B=m.useProgram("debug",null,M),z=c.getTileByID(h.key);m.terrain&&m.terrain.setupElevationDraw(z,B);const H=f.DepthMode.disabled,K=f.StencilMode.disabled,J=m.colorModeForRenderPass();x.activeTexture.set(C.TEXTURE0),m.emptyTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),I?z._makeGlobeTileDebugBuffers(m.context,v):z._makeDebugTileBoundsBuffers(m.context,v.projection);const te=z._tileDebugBuffer||m.debugBuffer,ne=z._tileDebugIndexBuffer||m.debugIndexBuffer,Y=z._tileDebugSegments||m.debugSegments;B.draw(x,C.LINE_STRIP,H,K,J,f.CullFaceMode.disabled,Ql(P,f.Color.red),"$debug",te,ne,Y,null,null,null,[z._globeTileDebugBorderBuffer]);const le=z.latestRawTileData,ce=Math.floor((le&&le.byteLength||0)/1024),de=c.getTile(h).tileSize,fe=512/Math.min(de,512)*(h.overscaledZ/v.zoom)*.5;let ye=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(ye+=` => ${h.overscaledZ}`),ye+=` ${ce}kb`,function(Ue,bt){Ue.initDebugOverlayCanvas();const Ae=Ue.debugOverlayCanvas,it=Ue.context.gl,Ze=Ue.debugOverlayCanvas.getContext("2d");Ze.clearRect(0,0,Ae.width,Ae.height),Ze.shadowColor="white",Ze.shadowBlur=2,Ze.lineWidth=1.5,Ze.strokeStyle="white",Ze.textBaseline="top",Ze.font="bold 36px Open Sans, sans-serif",Ze.fillText(bt,5,5),Ze.strokeText(bt,5,5),Ue.debugOverlayTexture.update(Ae),Ue.debugOverlayTexture.bind(it.LINEAR,it.CLAMP_TO_EDGE)}(m,ye);const Ee=z._tileDebugTextBuffer||m.debugBuffer,Ie=z._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,Be=z._tileDebugTextSegments||m.debugSegments;B.draw(x,C.TRIANGLES,H,K,f.ColorMode.alphaBlended,f.CullFaceMode.disabled,Ql(P,f.Color.transparent,fe),"$debug",Ee,Ie,Be,null,null,null,[z._globeTileDebugTextBuffer])}function sr(m,c,h,x){Ir(m,0,c+h/2,m.transform.width,h,x)}function Kn(m,c,h,x){Ir(m,c-h/2,0,h,m.transform.height,x)}function Ir(m,c,h,x,v,C){const I=m.context,M=I.gl;M.enable(M.SCISSOR_TEST),M.scissor(c*f.exported.devicePixelRatio,h*f.exported.devicePixelRatio,x*f.exported.devicePixelRatio,v*f.exported.devicePixelRatio),I.clear({color:C}),M.disable(M.SCISSOR_TEST)}const Vr=f.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:ks}=Vr;function ar(m,c,h,x){m.emplaceBack(c,h,x)}class qs{constructor(c){this.vertexArray=new f.StructArrayLayout3f12,this.indices=new f.StructArrayLayout3ui6,ar(this.vertexArray,-1,-1,1),ar(this.vertexArray,1,-1,1),ar(this.vertexArray,-1,1,1),ar(this.vertexArray,1,1,1),ar(this.vertexArray,-1,-1,-1),ar(this.vertexArray,1,-1,-1),ar(this.vertexArray,-1,1,-1),ar(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=c.createVertexBuffer(this.vertexArray,ks),this.indexBuffer=c.createIndexBuffer(this.indices),this.segment=f.SegmentVector.simpleSegment(0,0,36,12)}}function qn(m,c,h,x,v,C){const I=m.gl,M=c.paint.get("sky-atmosphere-color"),P=c.paint.get("sky-atmosphere-halo-color"),B=c.paint.get("sky-atmosphere-sun-intensity"),z={u_matrix_3f:f.fromMat4(f.create$1(),x),u_sun_direction:v,u_sun_intensity:B,u_color_tint_r:[(ee=M).r,ee.g,ee.b,ee.a],u_color_tint_m:[(te=P).r,te.g,te.b,te.a],u_luminance:5e-5};var ee,te;I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_CUBE_MAP_POSITIVE_X+C,c.skyboxTexture,0),h.draw(m,I.TRIANGLES,f.DepthMode.disabled,f.StencilMode.disabled,f.ColorMode.unblended,f.CullFaceMode.frontCW,z,"skyboxCapture",c.skyboxGeometry.vertexBuffer,c.skyboxGeometry.indexBuffer,c.skyboxGeometry.segment)}const gl=f.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Op{constructor(c){const h=new f.StructArrayLayout5f20;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const x=new f.StructArrayLayout3ui6;x.emplaceBack(0,1,2),x.emplaceBack(2,3,0),this.vertexBuffer=c.createVertexBuffer(h,gl.members),this.indexBuffer=c.createIndexBuffer(x),this.segments=f.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Qd={symbol:function(m,c,h,x,v){if("translucent"!==m.renderPass)return;const C=f.StencilMode.disabled,I=m.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(M,P,B,z,H,K,J){const ee=P.transform,te="map"===H,ne="map"===K;for(const Y of M){const le=z.getTile(Y),ce=le.getBucket(B);if(!ce||!ce.text||!ce.text.segments.get().length)continue;const de=f.evaluateSizeForZoom(ce.textSizeData,ee.zoom),fe=Wl(Y,ce.getProjection(),ee),ye=ee.calculatePixelsToTileUnitsMatrix(le),Ee=Na(fe,le.tileID.canonical,ne,te,ee,ce.getProjection(),ye),Ie="none"!==B.layout.get("icon-text-fit")&&ce.hasIconData();if(de){const Be=Math.pow(2,ee.zoom-le.tileID.overscaledZ);ec(ce,te,ne,J,f.symbolSize,ee,Ee,Y,Be,de,Ie)}}}(x,m,h,c,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),v),0!==h.paint.get("icon-opacity").constantOr(1)&&ff(m,c,h,x,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),C,I),0!==h.paint.get("text-opacity").constantOr(1)&&ff(m,c,h,x,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),C,I),c.map.showCollisionBoxes&&(uf(m,c,h,x,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),uf(m,c,h,x,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(m,c,h,x){if("translucent"!==m.renderPass)return;const v=h.paint.get("circle-opacity"),C=h.paint.get("circle-stroke-width"),I=h.paint.get("circle-stroke-opacity"),M=void 0!==h.layout.get("circle-sort-key").constantOr(1);if(0===v.constantOr(1)&&(0===C.constantOr(1)||0===I.constantOr(1)))return;const P=m.context,B=P.gl,z=m.transform,H=m.depthModeForSublayer(0,f.DepthMode.ReadOnly),K=f.StencilMode.disabled,J=m.colorModeForRenderPass(),ee="globe"===z.projection.name,te=[f.mercatorXfromLng(z.center.lng),f.mercatorYfromLat(z.center.lat)],ne=[];for(let le=0;le<x.length;le++){const ce=x[le],de=c.getTile(ce),fe=de.getBucket(h);if(!fe||fe.projection.name!==z.projection.name)continue;const ye=fe.programConfigurations.get(h.id),Ee=ml(h);ee&&Ee.push("PROJECTION_GLOBE_VIEW");const Ie=m.useProgram("circle",ye,Ee),Be=fe.layoutVertexBuffer,Ue=fe.globeExtVertexBuffer,bt=fe.indexBuffer,Ae=z.projection.createInversionMatrix(z,ce.canonical),it={programConfiguration:ye,program:Ie,layoutVertexBuffer:Be,globeExtVertexBuffer:Ue,indexBuffer:bt,uniformValues:Ua(m,ce,de,Ae,te,h),tile:de};if(M){const Ze=fe.segments.get();for(const dt of Ze)ne.push({segments:new f.SegmentVector([dt]),sortKey:dt.sortKey,state:it})}else ne.push({segments:fe.segments,sortKey:0,state:it})}M&&ne.sort((le,ce)=>le.sortKey-ce.sortKey);const Y={useDepthForOcclusion:!ee};for(const le of ne){const{programConfiguration:ce,program:de,layoutVertexBuffer:fe,globeExtVertexBuffer:ye,indexBuffer:Ee,uniformValues:Ie,tile:Be}=le.state,Ue=le.segments;m.terrain&&m.terrain.setupElevationDraw(Be,de,Y),m.prepareDrawProgram(P,de,Be.tileID.toUnwrapped()),de.draw(P,B.TRIANGLES,H,K,J,f.CullFaceMode.disabled,Ie,h.id,fe,Ee,Ue,h.paint,z.zoom,ce,[ye])}},heatmap:function(m,c,h,x){if(0!==h.paint.get("heatmap-opacity"))if("offscreen"===m.renderPass){const v=m.context,C=v.gl,I=f.StencilMode.disabled,M=new f.ColorMode([C.ONE,C.ONE],f.Color.transparent,[!0,!0,!0,!0]);(function(J,ee,te,ne){const Y=J.gl,le=ee.width*ne,ce=ee.height*ne;J.activeTexture.set(Y.TEXTURE1),J.viewport.set([0,0,le,ce]);let de=te.heatmapFbo;if(!de||de&&(de.width!==le||de.height!==ce)){de&&de.destroy();const fe=Y.createTexture();Y.bindTexture(Y.TEXTURE_2D,fe),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),de=te.heatmapFbo=J.createFramebuffer(le,ce,!1),function(ye,Ee,Ie,Be,Ue,bt){const Ae=ye.gl;Ae.texImage2D(Ae.TEXTURE_2D,0,ye.isWebGL2&&ye.extRenderToTextureHalfFloat?Ae.RGBA16F:Ae.RGBA,Ue,bt,0,Ae.RGBA,ye.extRenderToTextureHalfFloat?ye.isWebGL2?Ae.HALF_FLOAT:ye.extTextureHalfFloat.HALF_FLOAT_OES:Ae.UNSIGNED_BYTE,null),Be.colorAttachment.set(Ie)}(J,0,fe,de,le,ce)}else Y.bindTexture(Y.TEXTURE_2D,de.colorAttachment.get()),J.bindFramebuffer.set(de.framebuffer)})(v,m,h,"globe"===m.transform.projection.name?.5:.25),v.clear({color:f.Color.transparent});const P=m.transform,B="globe"===P.projection.name,z=B?["PROJECTION_GLOBE_VIEW"]:null,H=B?f.CullFaceMode.frontCCW:f.CullFaceMode.disabled,K=[f.mercatorXfromLng(P.center.lng),f.mercatorYfromLat(P.center.lat)];for(let J=0;J<x.length;J++){const ee=x[J];if(c.hasRenderableParent(ee))continue;const te=c.getTile(ee),ne=te.getBucket(h);if(!ne||ne.projection.name!==P.projection.name)continue;const Y=ne.programConfigurations.get(h.id),le=m.useProgram("heatmap",Y,z),{zoom:ce}=m.transform;m.terrain&&m.terrain.setupElevationDraw(te,le),m.prepareDrawProgram(v,le,ee.toUnwrapped());const de=P.projection.createInversionMatrix(P,ee.canonical);le.draw(v,C.TRIANGLES,f.DepthMode.disabled,I,M,H,No(m,ee,te,de,K,ce,h.paint.get("heatmap-intensity")),h.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,h.paint,m.transform.zoom,Y,B?[ne.globeExtVertexBuffer]:null)}v.viewport.set([0,0,m.width,m.height])}else"translucent"===m.renderPass&&(m.context.setColorMode(m.colorModeForRenderPass()),function(v,C){const I=v.context,M=I.gl,P=C.heatmapFbo;if(!P)return;I.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,P.colorAttachment.get()),I.activeTexture.set(M.TEXTURE1);let B=C.colorRampTexture;B||(B=C.colorRampTexture=new f.Texture(I,C.colorRamp,M.RGBA)),B.bind(M.LINEAR,M.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(I,M.TRIANGLES,f.DepthMode.disabled,f.StencilMode.disabled,v.colorModeForRenderPass(),f.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:C.paint.get("heatmap-opacity")},C.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,C.paint,v.transform.zoom)}(m,h))},line:function(m,c,h,x){if("translucent"!==m.renderPass)return;const v=h.paint.get("line-opacity"),C=h.paint.get("line-width");if(0===v.constantOr(1)||0===C.constantOr(1))return;const I=m.depthModeForSublayer(0,f.DepthMode.ReadOnly),M=m.colorModeForRenderPass(),P=m.terrain&&m.terrain.renderingToTexture?1:f.exported.devicePixelRatio,B=h.paint.get("line-dasharray"),z=B.constantOr(1),H=h.layout.get("line-cap"),K=h.paint.get("line-pattern"),J=K.constantOr(1),ee=h.paint.get("line-gradient"),te=J?"linePattern":"line",ne=m.context,Y=ne.gl,le=(de=>{const fe=[];qc(de)&&fe.push("RENDER_LINE_DASH"),de.paint.get("line-gradient")&&fe.push("RENDER_LINE_GRADIENT");const ye=de.paint.get("line-trim-offset");0===ye[0]&&0===ye[1]||fe.push("RENDER_LINE_TRIM_OFFSET");const Ee=de.paint.get("line-pattern").constantOr(1),Ie=1!==de.paint.get("line-opacity").constantOr(1);return!Ee&&Ie&&fe.push("RENDER_LINE_ALPHA_DISCARD"),fe})(h);let ce=le.includes("RENDER_LINE_ALPHA_DISCARD");m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(ce=!1);for(const de of x){const fe=c.getTile(de);if(J&&!fe.patternsLoaded())continue;const ye=fe.getBucket(h);if(!ye)continue;m.prepareDrawTile();const Ee=ye.programConfigurations.get(h.id),Ie=m.useProgram(te,Ee,le),Be=K.constantOr(null);if(Be&&fe.imageAtlas){const Me=fe.imageAtlas.patternPositions[Be.toString()];Me&&Ee.setConstantPatternPositions(Me)}const Ue=B.constantOr(null),bt=H.constantOr(null);if(!J&&Ue&&bt&&fe.lineAtlas){const Me=fe.lineAtlas.getDash(Ue,bt);Me&&Ee.setConstantPatternPositions(Me)}let[Ae,it]=h.paint.get("line-trim-offset");("round"===bt||"square"===bt)&&Ae!==it&&(0===Ae&&(Ae-=1),1===it&&(it+=1));const Ze=m.terrain?de.projMatrix:null,dt=J?Gu(m,fe,h,Ze,P):$u(m,fe,h,Ze,ye.lineClipsArray.length,P,[Ae,it]);if(ee){const Me=ye.gradients[h.id];let He=Me.texture;if(h.gradientVersion!==Me.version){let st=256;if(h.stepInterpolant){const pt=c.getSource().maxzoom,$t=de.canonical.z===pt?Math.ceil(1<<m.transform.maxZoom-de.canonical.z):1;st=f.clamp(f.nextPowerOfTwo(ye.maxLineLength/f.EXTENT*1024*$t),256,ne.maxTextureSize)}Me.gradient=f.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:st,image:Me.gradient||void 0,clips:ye.lineClipsArray}),Me.texture?Me.texture.update(Me.gradient):Me.texture=new f.Texture(ne,Me.gradient,Y.RGBA),Me.version=h.gradientVersion,He=Me.texture}ne.activeTexture.set(Y.TEXTURE1),He.bind(h.stepInterpolant?Y.NEAREST:Y.LINEAR,Y.CLAMP_TO_EDGE)}z&&(ne.activeTexture.set(Y.TEXTURE0),fe.lineAtlasTexture.bind(Y.LINEAR,Y.REPEAT),Ee.updatePaintBuffers()),J&&(ne.activeTexture.set(Y.TEXTURE0),fe.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Ee.updatePaintBuffers()),m.prepareDrawProgram(ne,Ie,de.toUnwrapped());const Fe=Me=>{Ie.draw(ne,Y.TRIANGLES,I,Me,M,f.CullFaceMode.disabled,dt,h.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,h.paint,m.transform.zoom,Ee,[ye.layoutVertexBuffer2])};if(ce){const Me=m.stencilModeForClipping(de).ref;0===Me&&m.terrain&&ne.clear({stencil:0});const He={func:Y.EQUAL,mask:255};dt.u_alpha_discard_threshold=.8,Fe(new f.StencilMode(He,Me,255,Y.KEEP,Y.KEEP,Y.INVERT)),dt.u_alpha_discard_threshold=0,Fe(new f.StencilMode(He,Me,255,Y.KEEP,Y.KEEP,Y.KEEP))}else Fe(m.stencilModeForClipping(de))}ce&&(m.resetStencilClippingMasks(),m.terrain&&ne.clear({stencil:0}))},fill:function(m,c,h,x){const v=h.paint.get("fill-color"),C=h.paint.get("fill-opacity");if(0===C.constantOr(1))return;const I=m.colorModeForRenderPass(),M=h.paint.get("fill-pattern"),P=m.opaquePassEnabledForLayer()&&!M.constantOr(1)&&1===v.constantOr(f.Color.transparent).a&&1===C.constantOr(0)?"opaque":"translucent";if(m.renderPass===P){const B=m.depthModeForSublayer(1,"opaque"===m.renderPass?f.DepthMode.ReadWrite:f.DepthMode.ReadOnly);pf(m,c,h,x,B,I,!1)}if("translucent"===m.renderPass&&h.paint.get("fill-antialias")){const B=m.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,f.DepthMode.ReadOnly);pf(m,c,h,x,B,I,!0)}},"fill-extrusion":function(m,c,h,x){const v=h.paint.get("fill-extrusion-opacity");if(0!==v&&"translucent"===m.renderPass){const C=new f.DepthMode(m.context.gl.LEQUAL,f.DepthMode.ReadWrite,m.depthRangeFor3D);if(1!==v||h.paint.get("fill-extrusion-pattern").constantOr(1))zr(m,c,h,x,C,f.StencilMode.disabled,f.ColorMode.disabled),zr(m,c,h,x,C,m.stencilModeFor3D(),m.colorModeForRenderPass()),m.resetStencilClippingMasks();else{const I=m.colorModeForRenderPass();zr(m,c,h,x,C,f.StencilMode.disabled,I)}}},hillshade:function(m,c,h,x){if("offscreen"!==m.renderPass&&"translucent"!==m.renderPass)return;const v=m.context,C=m.depthModeForSublayer(0,f.DepthMode.ReadOnly),I=m.colorModeForRenderPass(),M=m.terrain&&m.terrain.renderingToTexture,[P,B]="translucent"!==m.renderPass||M?[{},x]:m.stencilConfigForOverlap(x);for(const z of B){const H=c.getTile(z);if(H.needsHillshadePrepare&&"offscreen"===m.renderPass)Gs(m,H,h,C,f.StencilMode.disabled,I);else if("translucent"===m.renderPass){const K=M&&m.terrain?m.terrain.stencilModeForRTTOverlap(z):P[z.overscaledZ];Hc(m,z,H,h,C,K,I)}}v.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,c,h,x,v,C){if("translucent"!==m.renderPass||0===h.paint.get("raster-opacity")||!x.length)return;const I=m.context,M=I.gl,P=c.getSource(),B=m.useProgram("raster"),z=m.colorModeForRenderPass(),H=m.terrain&&m.terrain.renderingToTexture,[K,J]=P instanceof we||H?[{},x]:m.stencilConfigForOverlap(x),ee=J[J.length-1].overscaledZ,te=!m.options.moving;for(const ne of J){const Y=H?f.DepthMode.disabled:m.depthModeForSublayer(ne.overscaledZ-ee,1===h.paint.get("raster-opacity")?f.DepthMode.ReadWrite:f.DepthMode.ReadOnly,M.LESS),le=ne.toUnwrapped(),ce=c.getTile(ne);if(H&&(!ce||!ce.hasData()))continue;const de=H?ne.projMatrix:m.transform.calculateProjMatrix(le,te),fe=m.terrain&&H?m.terrain.stencilModeForRTTOverlap(ne):K[ne.overscaledZ],ye=C?0:h.paint.get("raster-fade-duration");ce.registerFadeDuration(ye);const Ee=c.findLoadedParent(ne,0),Ie=ja(ce,Ee,c,m.transform,ye);let Be,Ue;m.terrain&&m.terrain.prepareDrawTile();const bt="nearest"===h.paint.get("raster-resampling")?M.NEAREST:M.LINEAR;I.activeTexture.set(M.TEXTURE0),ce.texture.bind(bt,M.CLAMP_TO_EDGE),I.activeTexture.set(M.TEXTURE1),Ee?(Ee.texture.bind(bt,M.CLAMP_TO_EDGE),Be=Math.pow(2,Ee.tileID.overscaledZ-ce.tileID.overscaledZ),Ue=[ce.tileID.canonical.x*Be%1,ce.tileID.canonical.y*Be%1]):ce.texture.bind(bt,M.CLAMP_TO_EDGE),ce.texture.useMipmap&&I.extTextureFilterAnisotropic&&m.transform.pitch>20&&M.texParameterf(M.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax);const Ae=Zc(de,Ue||[0,0],Be||1,Ie,h,P instanceof we?P.perspectiveTransform:[0,0]);if(m.prepareDrawProgram(I,B,le),P instanceof we)P.boundsBuffer&&P.boundsSegments&&B.draw(I,M.TRIANGLES,Y,f.StencilMode.disabled,z,f.CullFaceMode.disabled,Ae,h.id,P.boundsBuffer,m.quadTriangleIndexBuffer,P.boundsSegments);else{const{tileBoundsBuffer:it,tileBoundsIndexBuffer:Ze,tileBoundsSegments:dt}=m.getTileBoundsBuffers(ce);B.draw(I,M.TRIANGLES,Y,fe,z,f.CullFaceMode.disabled,Ae,h.id,it,Ze,dt)}}m.resetStencilClippingMasks()},background:function(m,c,h,x){const v=h.paint.get("background-color"),C=h.paint.get("background-opacity");if(0===C)return;const I=m.context,M=I.gl,P=m.transform,B=P.tileSize,z=h.paint.get("background-pattern");if(m.isPatternMissing(z))return;const H=!z&&1===v.a&&1===C&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==H)return;const K=f.StencilMode.disabled,J=m.depthModeForSublayer(0,"opaque"===H?f.DepthMode.ReadWrite:f.DepthMode.ReadOnly),ee=m.colorModeForRenderPass(),te=m.useProgram(z?"backgroundPattern":"background");let ne,Y=x;Y||(ne=m.getBackgroundTiles(),Y=Object.values(ne).map(le=>le.tileID)),z&&(I.activeTexture.set(M.TEXTURE0),m.imageManager.bind(m.context));for(const le of Y){const ce=le.toUnwrapped(),de=x?le.projMatrix:m.transform.calculateProjMatrix(ce);m.prepareDrawTile();const fe=c?c.getTile(le):ne?ne[le.key]:new f.Tile(le,B,P.zoom,m),ye=z?To(de,C,m,z,{tileID:le,tileSize:B}):cf(de,C,v);m.prepareDrawProgram(I,te,ce);const{tileBoundsBuffer:Ee,tileBoundsIndexBuffer:Ie,tileBoundsSegments:Be}=m.getTileBoundsBuffers(fe);te.draw(I,M.TRIANGLES,J,K,ee,f.CullFaceMode.disabled,ye,h.id,Ee,Ie,Be)}},sky:function(m,c,h){const x=m.transform,v="mercator"===x.projection.name||"globe"===x.projection.name?1:f.smoothstep(7,8,x.zoom),C=h.paint.get("sky-opacity")*v;if(0===C)return;const I=m.context,M=h.paint.get("sky-type"),P=new f.DepthMode(I.gl.LEQUAL,f.DepthMode.ReadOnly,[0,1]),B=m.frameCounter/1e3%1;"atmosphere"===M?"offscreen"===m.renderPass?h.needsSkyboxCapture(m)&&(function(z,H,K,J){const ee=z.context,te=ee.gl;let ne=H.skyboxFbo;if(!ne){ne=H.skyboxFbo=ee.createFramebuffer(32,32,!1),H.skyboxGeometry=new qs(ee),H.skyboxTexture=ee.gl.createTexture(),te.bindTexture(te.TEXTURE_CUBE_MAP,H.skyboxTexture),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_WRAP_S,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_WRAP_T,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_MIN_FILTER,te.LINEAR),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_MAG_FILTER,te.LINEAR);for(let de=0;de<6;++de)te.texImage2D(te.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,te.RGBA,32,32,0,te.RGBA,te.UNSIGNED_BYTE,null)}ee.bindFramebuffer.set(ne.framebuffer),ee.viewport.set([0,0,32,32]);const Y=H.getCenter(z,!0),le=z.useProgram("skyboxCapture"),ce=new Float64Array(16);f.identity(ce),f.rotateY(ce,ce,.5*-Math.PI),qn(ee,H,le,ce,Y,0),f.identity(ce),f.rotateY(ce,ce,.5*Math.PI),qn(ee,H,le,ce,Y,1),f.identity(ce),f.rotateX(ce,ce,.5*-Math.PI),qn(ee,H,le,ce,Y,2),f.identity(ce),f.rotateX(ce,ce,.5*Math.PI),qn(ee,H,le,ce,Y,3),f.identity(ce),qn(ee,H,le,ce,Y,4),f.identity(ce),f.rotateY(ce,ce,Math.PI),qn(ee,H,le,ce,Y,5),ee.viewport.set([0,0,z.width,z.height])}(m,h),h.markSkyboxValid(m)):"sky"===m.renderPass&&function(z,H,K,J,ee){const te=z.context,ne=te.gl,Y=z.transform,le=z.useProgram("skybox");te.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_CUBE_MAP,H.skyboxTexture);const ce={u_matrix:Y.skyboxMatrix,u_sun_direction:H.getCenter(z,!1),u_cubemap:0,u_opacity:J,u_temporal_offset:ee};z.prepareDrawProgram(te,le),le.draw(te,ne.TRIANGLES,K,f.StencilMode.disabled,z.colorModeForRenderPass(),f.CullFaceMode.backCW,ce,"skybox",H.skyboxGeometry.vertexBuffer,H.skyboxGeometry.indexBuffer,H.skyboxGeometry.segment)}(m,h,P,C,B):"gradient"===M&&"sky"===m.renderPass&&function(z,H,K,J,ee){const te=z.context,ne=te.gl,Y=z.transform,le=z.useProgram("skyboxGradient");H.skyboxGeometry||(H.skyboxGeometry=new qs(te)),te.activeTexture.set(ne.TEXTURE0);let ce=H.colorRampTexture;ce||(ce=H.colorRampTexture=new f.Texture(te,H.colorRamp,ne.RGBA)),ce.bind(ne.LINEAR,ne.CLAMP_TO_EDGE);const de=(fe=Y.skyboxMatrix,ye=H.getCenter(z,!1),Ee=H.paint.get("sky-gradient-radius"),Ie=J,Be=ee,{u_matrix:fe,u_color_ramp:0,u_center_direction:ye,u_radius:f.degToRad(Ee),u_opacity:Ie,u_temporal_offset:Be});var fe,ye,Ee,Ie,Be;z.prepareDrawProgram(te,le),le.draw(te,ne.TRIANGLES,K,f.StencilMode.disabled,z.colorModeForRenderPass(),f.CullFaceMode.backCW,de,"skyboxGradient",H.skyboxGeometry.vertexBuffer,H.skyboxGeometry.indexBuffer,H.skyboxGeometry.segment)}(m,h,P,C,B)},debug:function(m,c,h){for(let x=0;x<h.length;x++)xn(m,c,h[x])},custom:function(m,c,h,x){const v=m.context,C=h.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||"offscreen"===m.renderPass)&&h.isLayerDraped()){if("offscreen"===m.renderPass){const I=C.prerender;if(I){if(m.setCustomLayerDefaults(),v.setColorMode(m.colorModeForRenderPass()),"globe"===m.transform.projection.name){const M=m.transform.pointMerc;I.call(C,v.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),f.globeToMercatorTransition(m.transform.zoom),[M.x,M.y],m.transform.pixelsPerMeterRatio)}else I.call(C,v.gl,m.transform.customLayerMatrix());v.setDirty(),m.setBaseState()}}else if("translucent"===m.renderPass){if(m.terrain&&m.terrain.renderingToTexture){const M=C.renderToTile;if(M){const P=x[0].canonical,B=new f.MercatorCoordinate(P.x+x[0].wrap*(1<<P.z),P.y,P.z);v.setDepthMode(f.DepthMode.disabled),v.setStencilMode(f.StencilMode.disabled),v.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),M.call(C,v.gl,B),v.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),v.setColorMode(m.colorModeForRenderPass()),v.setStencilMode(f.StencilMode.disabled);const I="3d"===C.renderingMode?new f.DepthMode(m.context.gl.LEQUAL,f.DepthMode.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,f.DepthMode.ReadOnly);if(v.setDepthMode(I),"globe"===m.transform.projection.name){const M=m.transform.pointMerc;C.render(v.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),f.globeToMercatorTransition(m.transform.zoom),[M.x,M.y],m.transform.pixelsPerMeterRatio)}else C.render(v.gl,m.transform.customLayerMatrix());v.setDirty(),m.setBaseState(),v.bindFramebuffer.set(null)}}else f.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class lr{constructor(c,h,x=!1){this.context=new se(c,x),this.transform=h,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=f.SourceCache.maxUnderzooming+f.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Mp,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(c,h){const x=!!c&&!!c.terrain&&this.transform.projection.supportsTerrain;if(!(x||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ws(this,c));const v=this._terrain;this.transform.elevation=x?v:null,v.update(c,this.transform,h)}_updateFog(c){const h=c.fog;if(!h||"globe"===this.transform.projection.name||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[x,v]=h.getFovAdjustedRange(this.transform._fov);if(x>v)return void(this.transform.fogCullDistSq=null);const C=x+.78*(v-x);this.transform.fogCullDistSq=C*C}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(c,h){if(this.width=c*f.exported.devicePixelRatio,this.height=h*f.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const x of this.style.order)this.style._layers[x].resize()}setup(){const c=this.context,h=new f.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(f.EXTENT,0),h.emplaceBack(0,f.EXTENT),h.emplaceBack(f.EXTENT,f.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(h,f.posAttributes.members),this.tileExtentSegments=f.SegmentVector.simpleSegment(0,0,4,2);const x=new f.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(f.EXTENT,0),x.emplaceBack(0,f.EXTENT),x.emplaceBack(f.EXTENT,f.EXTENT),this.debugBuffer=c.createVertexBuffer(x,f.posAttributes.members),this.debugSegments=f.SegmentVector.simpleSegment(0,0,4,5);const v=new f.StructArrayLayout2i4;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(v,f.posAttributes.members),this.viewportSegments=f.SegmentVector.simpleSegment(0,0,4,2);const C=new f.StructArrayLayout4i8;C.emplaceBack(0,0,0,0),C.emplaceBack(f.EXTENT,0,f.EXTENT,0),C.emplaceBack(0,f.EXTENT,0,f.EXTENT),C.emplaceBack(f.EXTENT,f.EXTENT,f.EXTENT,f.EXTENT),this.mercatorBoundsBuffer=c.createVertexBuffer(C,f.boundsAttributes.members),this.mercatorBoundsSegments=f.SegmentVector.simpleSegment(0,0,4,2);const I=new f.StructArrayLayout3ui6;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(I);const M=new f.StructArrayLayout1ui2;for(const B of[0,1,3,2,0])M.emplaceBack(B);this.debugIndexBuffer=c.createIndexBuffer(M),this.emptyTexture=new f.Texture(c,new f.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),c.gl.RGBA),this.identityMat=f.create();const P=this.context.gl;this.stencilClearMode=new f.StencilMode({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO),this.loadTimeStamps.push(f.window.performance.now()),this.atmosphereBuffer=new Op(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(c){return c._makeTileBoundsBuffers(this.context,this.transform.projection),c._tileBoundsBuffer?{tileBoundsBuffer:c._tileBoundsBuffer,tileBoundsIndexBuffer:c._tileBoundsIndexBuffer,tileBoundsSegments:c._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const c=this.context,h=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(c,h.TRIANGLES,f.DepthMode.disabled,this.stencilClearMode,f.ColorMode.disabled,f.CullFaceMode.disabled,On(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(c,h,x){if(!h||this.currentStencilSource===h.id||!c.isTileClipped()||!x||0===x.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let M=!1;for(const P of x)if(void 0===this._tileClippingMaskIDs[P.key]){M=!0;break}if(!M)return}this.currentStencilSource=h.id;const v=this.context,C=v.gl;this.nextStencilID+x.length>256&&this.clearStencil(),v.setColorMode(f.ColorMode.disabled),v.setDepthMode(f.DepthMode.disabled);const I=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const M of x){const P=h.getTile(M),B=this._tileClippingMaskIDs[M.key]=this.nextStencilID++,{tileBoundsBuffer:z,tileBoundsIndexBuffer:H,tileBoundsSegments:K}=this.getTileBoundsBuffers(P);I.draw(v,C.TRIANGLES,f.DepthMode.disabled,new f.StencilMode({func:C.ALWAYS,mask:0},B,255,C.KEEP,C.KEEP,C.REPLACE),f.ColorMode.disabled,f.CullFaceMode.disabled,On(M.projMatrix),"$clipping",z,H,K)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,h=this.context.gl;return new f.StencilMode({func:h.NOTEQUAL,mask:255},c,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(c){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(c);const h=this.context.gl;return new f.StencilMode({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(c){const h=this.context.gl,x=c.sort((I,M)=>M.overscaledZ-I.overscaledZ),v=x[x.length-1].overscaledZ,C=x[0].overscaledZ-v+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const I={};for(let M=0;M<C;M++)I[M+v]=new f.StencilMode({func:h.GEQUAL,mask:255},M+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=C,[I,x]}return[{[v]:f.StencilMode.disabled},x]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new f.ColorMode([c.CONSTANT_COLOR,c.ONE],new f.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?f.ColorMode.unblended:f.ColorMode.alphaBlended}depthModeForSublayer(c,h,x){if(!this.opaquePassEnabledForLayer())return f.DepthMode.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new f.DepthMode(x||this.context.gl.LEQUAL,h,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,h){this.style=c,this.options=h,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(f.exported.now()),this.imageManager.beginFrame();const x=this.style.order,v=this.style._sourceCaches;for(const B in v){const z=v[B];z.used&&z.prepare(this.context)}const C={},I={},M={};for(const B in v){const z=v[B];C[B]=z.getVisibleCoordinates(),I[B]=C[B].slice().reverse(),M[B]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<x.length;B++)if(this.style._layers[x[B]].is3D()){this.opaquePassCutoff=B;break}if(this.terrain&&(this.terrain.updateTileBinding(M),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new f.GlobeSharedBuffers(this.context)),!f.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const B of x){const z=this.style._layers[B],H=c._getLayerSourceCache(z);if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const K=H?I[H.id]:void 0;("custom"===z.type||z.isSky()||K&&K.length)&&this.renderLayer(this,H,z,K)}this.depthRangeFor3D=[0,1-(c.order.length+2)*this.numSublayers*this.depthEpsilon];const P=this.terrain;if(P&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&P.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:h.showOverdrawInspector?f.Color.black:f.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){const B=this.style._layers[x[this.currentLayer]],z=c._getLayerSourceCache(B);if(B.isSky())continue;const H=z?I[z.id]:void 0;this._renderTileClippingMasks(B,z,H),this.renderLayer(this,z,B,H)}if(this.style.fog&&this.transform.projection.supportsFog&&function(B,z){const H=B.context,K=H.gl,J=B.transform,ee=new f.DepthMode(K.LEQUAL,f.DepthMode.ReadOnly,[0,1]),te=B.useProgram("globeAtmosphere",null,"globe"===J.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ne=f.globeToMercatorTransition(J.zoom),Y=z.properties.get("color").toArray01(),le=z.properties.get("high-color").toArray01(),ce=z.properties.get("space-color").toArray01PremultipliedAlpha(),de=f.identity$1([]);f.rotateY$1(de,de,-f.degToRad(J._center.lng)),f.rotateX$1(de,de,f.degToRad(J._center.lat)),f.rotateZ$1(de,de,J.angle),f.rotateX$1(de,de,-J._pitch);const fe=f.fromQuat(new Float32Array(16),de),ye=f.mapValue(z.properties.get("star-intensity"),0,1,0,.25),Ie=f.mapValue(z.properties.get("horizon-blend"),0,1,5e-4,.25),Be=f.globeUseCustomAntiAliasing(B,H,J)&&5e-4===Ie?J.worldSize/(2*Math.PI*1.025)-1:J.globeRadius,Ue=B.frameCounter/1e3%1,bt=f.length(J.globeCenterInViewSpace),Ae=Math.sqrt(Math.pow(bt,2)-Math.pow(Be,2)),it=Math.acos(Ae/bt),Ze={u_frustum_tl:J.frustumCorners.TL,u_frustum_tr:J.frustumCorners.TR,u_frustum_br:J.frustumCorners.BR,u_frustum_bl:J.frustumCorners.BL,u_horizon:J.frustumCorners.horizon,u_transition:ne,u_fadeout_range:Ie,u_color:Y,u_high_color:le,u_space_color:ce,u_star_intensity:ye,u_star_size:5*f.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Ue,u_horizon_angle:it,u_rotation_matrix:fe};B.prepareDrawProgram(H,te);const dt=B.atmosphereBuffer;dt&&te.draw(H,K.TRIANGLES,ee,f.StencilMode.disabled,f.ColorMode.alphaBlended,f.CullFaceMode.backCW,Ze,"skybox",dt.vertexBuffer,dt.indexBuffer,dt.segments)}(this,this.style.fog),this.renderPass="sky",(f.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){const B=this.style._layers[x[this.currentLayer]],z=c._getLayerSourceCache(B);B.isSky()&&this.renderLayer(this,z,B,z?I[z.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<x.length;){const B=this.style._layers[x[this.currentLayer]],z=c._getLayerSourceCache(B);if(B.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(B)){if(B.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const H=z?("symbol"===B.type?M:I)[z.id]:void 0;this._renderTileClippingMasks(B,z,z?C[z.id]:void 0),this.renderLayer(this,z,B,H),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let B=null;f.values(this.style._layers).forEach(z=>{const H=c._getLayerSourceCache(z);H&&!z.isHidden(this.transform.zoom)&&(!B||B.getSource().maxzoom<H.getSource().maxzoom)&&(B=H)}),B&&this.options.showTileBoundaries&&Qd.debug(this,B,B.getVisibleCoordinates())}this.options.showPadding&&function(B){const z=B.transform.padding;sr(B,B.transform.height-(z.top||0),3,Xd),sr(B,z.bottom||0,3,Yu),Kn(B,z.left||0,3,Xn),Kn(B,B.transform.width-(z.right||0),3,_f);const H=B.transform.centerPoint;var K,J,ee,te;Ir(K=B,(J=H.x)-1,(ee=B.transform.height-H.y)-10,2,20,te=Kd),Ir(K,J-10,ee-1,20,2,te)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(f.window.performance.now()),this.saveCanvasCopy())}renderLayer(c,h,x,v){x.isHidden(this.transform.zoom)||("background"===x.type||"sky"===x.type||"custom"===x.type||v&&v.length)&&(this.id=x.id,this.gpuTimingStart(x),(!c.transform.projection.unsupportedLayers||!c.transform.projection.unsupportedLayers.includes(x.type)||c.terrain&&"custom"===x.type)&&Qd[x.type](c,h,x,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let x=this.gpuTimers[c.id];x||(x=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),x.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,x.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const c=this.context.extTimerQuery,h=c.createQueryEXT();this.deferredRenderGpuTimeQueries.push(h),c.beginQueryEXT(c.TIME_ELAPSED_EXT,h)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}collectDeferredRenderGpuQueries(){const c=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],c}queryGpuTimers(c){const h={};for(const x in c){const v=c[x],C=this.context.extTimerQuery,I=C.getQueryObjectEXT(v.query,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(v.query),h[x]=I}return h}queryGpuTimeDeferredRender(c){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.extTimerQuery;let x=0;for(const v of c)x+=h.getQueryObjectEXT(v,h.QUERY_RESULT_EXT)/1e6,h.deleteQueryEXT(v);return x}translatePosMatrix(c,h,x,v,C){if(!x[0]&&!x[1])return c;const I=C?"map"===v?this.transform.angle:0:"viewport"===v?-this.transform.angle:0;if(I){const B=Math.sin(I),z=Math.cos(I);x=[x[0]*z-x[1]*B,x[0]*B+x[1]*z]}const M=[C?x[0]:wr(h,x[0],this.transform.zoom),C?x[1]:wr(h,x[1],this.transform.zoom),0],P=new Float32Array(16);return f.translate(P,c,M),P}saveTileTexture(c){const h=this._tileTextures[c.size[0]];h?h.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const h=this._tileTextures[c];return h&&h.length>0?h.pop():null}isPatternMissing(c){return null===c||void 0!==c&&!this.imageManager.getPattern(c.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const c=this.terrain&&this.terrain.renderingToTexture,h=this.terrain&&0===this.terrain.exaggeration(),x=this.style&&this.style.fog,v=[];return this.terrainRenderModeElevated()&&v.push("TERRAIN"),"globe"===this.transform.projection.name&&v.push("GLOBE"),h&&v.push("ZERO_EXAGGERATION"),x&&!c&&0!==x.getOpacity(this.transform.pitch)&&v.push("FOG"),c&&v.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&v.push("OVERDRAW_INSPECTOR"),v}useProgram(c,h,x){this.cache=this.cache||{};const v=x||[],C=this.currentGlobalDefines().concat(v),I=$c.cacheKey(Sr[c],c,C,h);return this.cache[I]||(this.cache[I]=new $c(this.context,c,Sr[c],h,Rp[c],C)),this.cache[I]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=f.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new f.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(c,h,x){if(this.terrain&&this.terrain.renderingToTexture)return;const v=this.style.fog;if(v){const C=v.getOpacity(this.transform.pitch),I=((M,P,B,z,H,K,J,ee,te,ne,Y)=>{const le=M.transform,ce=P.properties.get("color").toArray01();ce[3]=z;const de=M.frameCounter/1e3%1;return{u_fog_matrix:B?le.calculateFogTileMatrix(B):M.identityMat,u_fog_range:P.getFovAdjustedRange(le._fov),u_fog_color:ce,u_fog_horizon_blend:P.properties.get("horizon-blend"),u_fog_temporal_offset:de,u_frustum_tl:H,u_frustum_tr:K,u_frustum_br:J,u_frustum_bl:ee,u_globe_pos:te,u_globe_radius:ne,u_viewport:Y,u_globe_transition:f.globeToMercatorTransition(le.zoom),u_is_globe:+("globe"===le.projection.name)}})(this,v,x,C,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*f.exported.devicePixelRatio,this.transform.height*f.exported.devicePixelRatio]);h.setFogUniformValues(c,I)}}setTileLoadedFlag(c){this.tileLoaded=c}saveCanvasCopy(){const c=this.canvasCopy();c&&(this.frameCopies.push(c),this.tileLoaded=!1)}canvasCopy(){const c=this.context.gl,h=c.createTexture();return c.bindTexture(c.TEXTURE_2D,h),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,0,0,c.drawingBufferWidth,c.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const c=this.style&&this.style.fog;return!!c&&0!==c.getOpacity(this.transform.pitch)}getBackgroundTiles(){const c=this._backgroundTiles,h=this._backgroundTiles={},x=this.transform.coveringTiles({tileSize:512});for(const v of x)h[v.key]=c[v.key]||new f.Tile(v,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}}class jt{constructor(c=0,h=0,x=0,v=0){if(isNaN(c)||c<0||isNaN(h)||h<0||isNaN(x)||x<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=h,this.left=x,this.right=v}interpolate(c,h,x){return null!=h.top&&null!=c.top&&(this.top=f.number(c.top,h.top,x)),null!=h.bottom&&null!=c.bottom&&(this.bottom=f.number(c.bottom,h.bottom,x)),null!=h.left&&null!=c.left&&(this.left=f.number(c.left,h.left,x)),null!=h.right&&null!=c.right&&(this.right=f.number(c.right,h.right,x)),this}getCenter(c,h){const x=f.clamp((this.left+c-this.right)/2,0,c),v=f.clamp((this.top+h-this.bottom)/2,0,h);return new f.pointGeometry(x,v)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new jt(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fn(m,c){const h=f.getColumn(m,3);f.fromQuat(m,c),f.setColumn(m,3,h)}function Fi(m,c){const h=f.identity$1([]);return f.rotateZ$1(h,h,-c),f.rotateX$1(h,h,-m),h}function F(m,c){const h=[m[0],m[1],0],x=[c[0],c[1],0];if(f.length(h)>=1e-15){const I=f.normalize([],h);f.scale$2(x,I,f.dot(x,I)),c[0]=x[0],c[1]=x[1]}const v=f.cross([],c,m);if(f.len(v)<1e-15)return null;const C=Math.atan2(-v[1],v[0]);return Fi(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),C)}class N{constructor(c,h){this.position=c,this.orientation=h}get position(){return this._position}set position(c){if(c){const h=c instanceof f.MercatorCoordinate?c:new f.MercatorCoordinate(c[0],c[1],c[2]);this._renderWorldCopies&&(h.x=f.wrap(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(c,h){if(this.orientation=null,!this.position)return;const x=this.position,v=this._elevation?this._elevation.getAtPointOrZero(f.MercatorCoordinate.fromLngLat(c)):0,C=f.MercatorCoordinate.fromLngLat(c,v),I=[C.x-x.x,C.y-x.y,C.z-x.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=F(I,h)}setPitchBearing(c,h){this.orientation=Fi(f.degToRad(c),f.degToRad(-h))}}class W{constructor(c,h){this._transform=f.identity([]),this.orientation=h,this.position=c}get mercatorPosition(){const c=this.position;return new f.MercatorCoordinate(c[0],c[1],c[2])}get position(){const c=f.getColumn(this._transform,3);return[c[0],c[1],c[2]]}set position(c){var h;c&&f.setColumn(this._transform,3,[(h=c)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(c){this._orientation=c||f.identity$1([]),c&&Fn(this._transform,this._orientation)}getPitchBearing(){const c=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(c[0]*c[0]+c[1]*c[1]),-c[2])}}setPitchBearing(c,h){this._orientation=Fi(c,h),Fn(this._transform,this._orientation)}forward(){const c=f.getColumn(this._transform,2);return[-c[0],-c[1],-c[2]]}up(){const c=f.getColumn(this._transform,1);return[-c[0],-c[1],-c[2]]}right(){const c=f.getColumn(this._transform,0);return[c[0],c[1],c[2]]}getCameraToWorld(c,h){const x=new Float64Array(16);return f.invert(x,this.getWorldToCamera(c,h)),x}getWorldToCameraPosition(c,h,x){const v=this.position;f.scale$2(v,v,-c);const C=new Float64Array(16);return f.fromScaling(C,[x,x,x]),f.translate(C,C,v),C[10]*=h,C}getWorldToCamera(c,h){const x=new Float64Array(16),v=new Float64Array(4),C=this.position;return f.conjugate(v,this._orientation),f.scale$2(C,C,-c),f.fromQuat(x,v),f.translate(x,x,C),x[1]*=-1,x[5]*=-1,x[9]*=-1,x[13]*=-1,x[8]*=h,x[9]*=h,x[10]*=h,x[11]*=h,x}getCameraToClipPerspective(c,h,x,v){const C=new Float64Array(16);return f.perspective(C,c,h,x,v),C}getDistanceToElevation(c,h=!1){const x=0===c?0:f.mercatorZfromAltitude(c,h?f.latFromMercatorY(this.position[1]):this.position[1]),v=this.forward();return(x-this.position[2])/v[2]}clone(){return new W([...this.position],[...this.orientation])}}function ge(m,c){const h=Wt(m.projection,m.zoom,m.width,m.height),x=function(C,I,M,P,B){const z=new f.LngLat(M.lng-180*xi,M.lat),H=new f.LngLat(M.lng+180*xi,M.lat),K=C.project(z.lng,z.lat),J=C.project(H.lng,H.lat),ee=-Math.atan2(J.y-K.y,J.x-K.x),te=f.MercatorCoordinate.fromLngLat(M);te.y=f.clamp(te.y,-.999975,.999975);const ne=te.toLngLat(),Y=C.project(ne.lng,ne.lat),le=f.MercatorCoordinate.fromLngLat(ne);le.x+=xi;const ce=le.toLngLat(),de=C.project(ce.lng,ce.lat),fe=cr(de.x-Y.x,de.y-Y.y,ee),ye=f.MercatorCoordinate.fromLngLat(ne);ye.y+=xi;const Ee=ye.toLngLat(),Ie=C.project(Ee.lng,Ee.lat),Be=cr(Ie.x-Y.x,Ie.y-Y.y,ee),Ue=Math.abs(fe.x)/Math.abs(Be.y),bt=f.identity([]);f.rotateZ(bt,bt,-ee*(1-(B?0:P)));const Ae=f.identity([]);return f.scale(Ae,Ae,[1,1-(1-Ue)*P,1]),Ae[4]=-Be.x/Be.y*P,f.rotateZ(Ae,Ae,ee),f.multiply(Ae,bt,Ae),Ae}(m.projection,0,m.center,h,c),v=tt(m);return f.scale(x,x,[v,v,1]),x}function tt(m){const c=m.projection,h=Wt(m.projection,m.zoom,m.width,m.height),x=sn(c,m.center),v=sn(c,f.LngLat.convert(c.center));return Math.pow(2,x*h+(1-h)*v)}function Wt(m,c,h,x,v=1/0){const C=m.range;if(!C)return 0;const I=Math.min(v,Math.max(h,x)),M=Math.log(I/1024)/Math.LN2;return f.smoothstep(C[0]+M,C[1]+M,c)}const xi=1/4e4;function sn(m,c){const h=f.clamp(c.lat,-f.MAX_MERCATOR_LATITUDE,f.MAX_MERCATOR_LATITUDE),x=new f.LngLat(c.lng-180*xi,h),v=new f.LngLat(c.lng+180*xi,h),C=m.project(x.lng,h),I=m.project(v.lng,h),M=f.MercatorCoordinate.fromLngLat(x),P=f.MercatorCoordinate.fromLngLat(v),B=I.x-C.x,z=I.y-C.y,H=P.x-M.x,K=P.y-M.y,J=Math.sqrt((H*H+K*K)/(B*B+z*z));return Math.log(J)/Math.LN2}function cr(m,c,h){const x=Math.cos(h),v=Math.sin(h);return{x:m*x-c*v,y:m*v+c*x}}class St{constructor(c,h,x,v,C,I,M){this.tileSize=512,this._renderWorldCopies=void 0===C||C,this._minZoom=c||0,this._maxZoom=h||22,this._minPitch=x??0,this._maxPitch=v??60,this.setProjection(I),this.setMaxBounds(M),this.width=0,this.height=0,this._center=new f.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new jt,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new W,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const c=new St(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return c._elevation=this._elevation,c._centerAltitude=this._centerAltitude,c._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,c.tileSize=this.tileSize,c.mercatorFromTransition=this.mercatorFromTransition,c.width=this.width,c.height=this.height,c.cameraElevationReference=this.cameraElevationReference,c._center=this._center,c._setZoom(this.zoom),c._seaLevelZoom=this._seaLevelZoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._nearZ=this._nearZ,c._farZ=this._farZ,c._averageElevation=this._averageElevation,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._camera=this._camera.clone(),c._calcMatrices(),c.freezeTileCoverage=this.freezeTileCoverage,c.frustumCorners=this.frustumCorners,c}get elevation(){return this._elevation}set elevation(c){this._elevation!==c&&(this._elevation=c,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(c,h=!1){const x=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||x)&&this._updateCameraOnTerrain(),(c||x)&&this._constrainCamera(h),this._calcMatrices()}getProjection(){return f.pick(this.projection,["name","center","parallels"])}setProjection(c){this.projectionOptions=c||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=f.getProjection(this.projectionOptions);const x=!Le(h,this.getProjection());return x&&this._calcMatrices(),this.mercatorFromTransition=!1,x}setMercatorFromTransition(){const c=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=f.getProjection({name:"mercator"});const h=c!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(c){void 0===c?c=!0:null===c&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get cameraWorldSize(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return f.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new f.pointGeometry(this.width,this.height)}get bearing(){return f.wrap(this.rotation,-180,180)}set bearing(c){this.rotation=c}get rotation(){return-this.angle/Math.PI*180}set rotation(c){const h=-c*Math.PI/180;var x,v,C,I,M,P,B,z,H,K;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(x=new f.ARRAY_TYPE(4),f.ARRAY_TYPE!=Float32Array&&(x[1]=0,x[2]=0),x[0]=1,x[3]=1,x),v=this.rotationMatrix,I=this.angle,M=(C=this.rotationMatrix)[0],P=C[1],B=C[2],z=C[3],H=Math.sin(I),K=Math.cos(I),v[0]=M*K+B*H,v[1]=P*K+z*H,v[2]=M*-H+B*K,v[3]=P*-H+z*K)}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const h=f.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const c=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/c)}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=f.degToRad(c),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(c){this._averageElevation=c,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(c){const h=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(c){this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const c=this._elevation;this._centerAltitude=c.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=c.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const c=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],x=this.horizonLineFromTop();let v=0,C=0;for(let I=0;I<h.length;I++){const M=new f.pointGeometry(h[I][0]*this.width,x+h[I][1]*(this.height-x)),P=c.pointCoordinate(M);if(!P)continue;const B=1/Math.hypot(P[0]-this._camera.position[0],P[1]-this._camera.position[1]);v+=P[3]*B,C+=B}return 0===C?NaN:v/C}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const c=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),x=this.pixelsPerMeter/this.worldSize*h,v=this._mercatorZfromZoom(c),C=this._mercatorZfromZoom(this._maxZoom),I=Math.max(v-x,C);this._setZoom(this._zoomFromMercatorZ(I))}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}computeZoomRelativeTo(c){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,c.toAltitude()));let x;x=c.z<this._camera.position[2]?[h.x,h.y,h.z]:[c.x,c.y,c.z];const v=f.length(f.sub([],this._camera.position,x));return f.clamp(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(c){if(!this.height||!c.position&&!c.orientation)return;this._updateCameraState();let h=!1;if(c.orientation&&!f.exactEquals(c.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(c.orientation)),c.position){const x=[c.position.x,c.position.y,c.position.z];f.exactEquals$1(x,this._camera.position)||(this._setCameraPosition(x),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const c=this._camera.position,h=new N;return h.position=new f.MercatorCoordinate(c[0],c[1],c[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(c){if(!f.length$1(c))return!1;f.normalize$1(c,c);const h=f.transformQuat([],[0,0,-1],c),x=f.transformQuat([],[0,-1,0],c);if(x[2]<0)return!1;const v=F(h,x);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(c){const h=this.zoomScale(this.minZoom)*this.tileSize,x=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;c[2]=f.clamp(c[2],v/x,v/h),this._camera.position=c}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,h,x){this._unmodified=!1,this._edgeInsets.interpolate(c,h,x),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const h=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(c){const h=[new f.UnwrappedTileID(0,c)];if(this.renderWorldCopies){const x=this.pointCoordinate(new f.pointGeometry(0,0)),v=this.pointCoordinate(new f.pointGeometry(this.width,0)),C=this.pointCoordinate(new f.pointGeometry(this.width,this.height)),I=this.pointCoordinate(new f.pointGeometry(0,this.height)),M=Math.floor(Math.min(x.x,v.x,C.x,I.x)),P=Math.floor(Math.max(x.x,v.x,C.x,I.x)),B=1;for(let z=M-B;z<=P+B;z++)0!==z&&h.push(new f.UnwrappedTileID(z,c))}return h}coveringTiles(c){let h=this.coveringZoomLevel(c);const x=h,v=this.elevation&&!c.isTerrainDEM,C="mercator"===this.projection.name;if(void 0!==c.minzoom&&h<c.minzoom)return[];void 0!==c.maxzoom&&h>c.maxzoom&&(h=c.maxzoom);const I=this.locationCoordinate(this.center),M=this.center.lat,P=1<<h,B=[P*I.x,P*I.y,0],z="globe"===this.projection.name,H=!z,K=f.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,H),J=z?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ee=P*f.mercatorZfromAltitude(1,this.center.lat),te=this._camera.position[2]/f.mercatorZfromAltitude(1,this.center.lat),ne=[P*J.x,P*J.y,te*(H?1:ee)],Y=this.cameraToCenterDistance/c.tileSize*(c.roundZoom?1:.502),le=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?h:0,ce=c.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,de=c.isTerrainDEM?-ce:this._elevation?this._elevation.getMinElevationBelowMSL():0,fe=this.projection.isReprojectedInTileSpace?tt(this):1,ye=Fe=>{const He=new f.MercatorCoordinate(Fe.x+25e-6,Fe.y,Fe.z),st=new f.MercatorCoordinate(Fe.x,Fe.y+25e-6,Fe.z),pt=Fe.toLngLat(),$t=He.toLngLat(),Bn=st.toLngLat(),ct=this.locationCoordinate(pt),Rt=this.locationCoordinate($t),Yt=this.locationCoordinate(Bn),Zn=Math.hypot(Rt.x-ct.x,Rt.y-ct.y),en=Math.hypot(Yt.x-ct.x,Yt.y-ct.y);return Math.sqrt(Zn*en)*fe/25e-6},Ee=Fe=>{const Me=ce,He=de;return{aabb:f.tileAABB(this,P,0,0,0,Fe,He,Me,this.projection),zoom:0,x:0,y:0,minZ:He,maxZ:Me,wrap:Fe,fullyVisible:!1}},Ie=[];let Be=[];const Ue=h,bt=c.reparseOverscaled?x:h,Ae=Fe=>Fe*Fe,it=Ae((te-this._centerAltitude)*ee),Ze=Fe=>{if(!this._elevation||!Fe.tileID||!C)return;const Me=this._elevation.getMinMaxForTile(Fe.tileID),He=Fe.aabb;Me?(He.min[2]=Me.min,He.max[2]=Me.max,He.center[2]=(He.min[2]+He.max[2])/2):(Fe.shouldSplit=dt(Fe),Fe.shouldSplit||(He.min[2]=He.max[2]=He.center[2]=this._centerAltitude))},dt=Fe=>{if(Fe.zoom<le)return!0;if(Fe.zoom===Ue)return!1;if(null!=Fe.shouldSplit)return Fe.shouldSplit;const Me=Fe.aabb.distanceX(ne),He=Fe.aabb.distanceY(ne);let st=it,pt=1;if(z){st=Ae(Fe.aabb.distanceZ(ne));const ct=Math.pow(2,Fe.zoom),Rt=f.latFromMercatorY((Fe.y+1)/ct),Yt=f.latFromMercatorY(Fe.y/ct),Zn=Math.min(Math.max(M,Rt),Yt),en=f.circumferenceAtLatitude(Zn)/f.circumferenceAtLatitude(M);if(pt=Zn===M?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,en/this._mercatorScaleRatio),this.zoom<=f.GLOBE_ZOOM_THRESHOLD_MIN&&Fe.zoom===Ue-1&&en>=.9)return!0}else if(v&&(st=Ae(Fe.aabb.distanceZ(ne)*ee)),this.projection.isReprojectedInTileSpace&&x<=5){const ct=Math.pow(2,Fe.zoom),Rt=ye(new f.MercatorCoordinate((Fe.x+.5)/ct,(Fe.y+.5)/ct));pt=Rt>.85?1:Rt}const $t=Me*Me+He*He+st;return $t<Ae((1<<Ue-Fe.zoom)*Y*pt*((ct,Rt)=>{if(Rt*Ae(.707)<ct)return 1;const Yt=Math.sqrt(Rt/ct);return Yt/(1.4144271570014144+(Math.pow(1.1,Yt-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(st,it),$t))};if(this.renderWorldCopies)for(let Fe=1;Fe<=3;Fe++)Ie.push(Ee(-Fe)),Ie.push(Ee(Fe));for(Ie.push(Ee(0));Ie.length>0;){const Fe=Ie.pop(),Me=Fe.x,He=Fe.y;let st=Fe.fullyVisible;if(!st){const pt=Fe.aabb.intersects(K);if(0===pt)continue;st=2===pt}if(Fe.zoom!==Ue&&dt(Fe))for(let pt=0;pt<4;pt++){const $t=(Me<<1)+pt%2,Bn=(He<<1)+(pt>>1),ct={aabb:C?Fe.aabb.quadrant(pt):f.tileAABB(this,P,Fe.zoom+1,$t,Bn,Fe.wrap,Fe.minZ,Fe.maxZ,this.projection),zoom:Fe.zoom+1,x:$t,y:Bn,wrap:Fe.wrap,fullyVisible:st,tileID:void 0,shouldSplit:void 0,minZ:Fe.minZ,maxZ:Fe.maxZ};v&&!z&&(ct.tileID=new f.OverscaledTileID(Fe.zoom+1===Ue?bt:Fe.zoom+1,Fe.wrap,Fe.zoom+1,$t,Bn),Ze(ct)),Ie.push(ct)}else{const pt=Fe.zoom===Ue?bt:Fe.zoom;if(c.minzoom&&c.minzoom>pt)continue;const $t=B[0]-(.5+Me+(Fe.wrap<<Fe.zoom))*(1<<h-Fe.zoom),Bn=B[1]-.5-He,ct=Fe.tileID?Fe.tileID:new f.OverscaledTileID(pt,Fe.wrap,Fe.zoom,Me,He);Be.push({tileID:ct,distanceSq:$t*$t+Bn*Bn})}}if(this.fogCullDistSq){const Fe=this.fogCullDistSq,Me=this.horizonLineFromTop();Be=Be.filter(He=>{const st=[0,0,0,1],pt=[f.EXTENT,f.EXTENT,0,1],$t=this.calculateFogTileMatrix(He.tileID.toUnwrapped());f.transformMat4$1(st,st,$t),f.transformMat4$1(pt,pt,$t);const Bn=f.getAABBPointSquareDist(st,pt);if(0===Bn)return!0;let ct=!1;const Rt=this._elevation;if(Rt&&Bn>Fe&&0!==Me){const Yt=this.calculateProjMatrix(He.tileID.toUnwrapped());let Zn;c.isTerrainDEM||(Zn=Rt.getMinMaxForTile(He.tileID)),Zn||(Zn={min:de,max:ce});const en=f.furthestTileCorner(this.rotation),Ei=[en[0]*f.EXTENT,en[1]*f.EXTENT,Zn.max];f.transformMat4(Ei,Ei,Yt),ct=(1-Ei[1])*this.height*.5<Me}return Bn<Fe||ct})}return Be.sort((Fe,Me)=>Fe.distanceSq-Me.distanceSq).map(Fe=>Fe.tileID)}resize(c,h){this.width=c,this.height=h,this.pixelsToGLUnits=[2/c,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const h=f.clamp(c.lat,-f.MAX_MERCATOR_LATITUDE,f.MAX_MERCATOR_LATITUDE),x=this.projection.project(c.lng,h);return new f.pointGeometry(x.x*this.worldSize,x.y*this.worldSize)}unproject(c){return this.projection.unproject(c.x/this.worldSize,c.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/f.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(c,h){let x,v;const C=this.centerPoint;if("globe"===this.projection.name){const M=this.worldSize;x=(h.x-C.x)/M,v=(h.y-C.y)/M}else{const M=this.pointCoordinate(h),P=this.pointCoordinate(C);x=M.x-P.x,v=M.y-P.y}const I=this.locationCoordinate(c);this.setLocation(new f.MercatorCoordinate(I.x-x,I.y-v))}setLocation(c){this.center=this.coordinateLocation(c),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(c){return this.projection.locationPoint(this,c)}locationPoint3D(c){return this.projection.locationPoint(this,c,!0)}pointLocation(c){return this.coordinateLocation(this.pointCoordinate(c))}pointLocation3D(c){return this.coordinateLocation(this.pointCoordinate3D(c))}locationCoordinate(c,h){const x=h?f.mercatorZfromAltitude(h,c.lat):void 0,v=this.projection.project(c.lng,c.lat);return new f.MercatorCoordinate(v.x,v.y,x)}coordinateLocation(c){return this.projection.unproject(c.x,c.y)}pointRayIntersection(c,h){const x=h??this._centerAltitude,v=[c.x,c.y,0,1],C=[c.x,c.y,1,1];f.transformMat4$1(v,v,this.pixelMatrixInverse),f.transformMat4$1(C,C,this.pixelMatrixInverse);const I=C[3];f.scale$1(v,v,1/v[3]),f.scale$1(C,C,1/I);const M=v[2],P=C[2];return{p0:v,p1:C,t:M===P?0:(x-M)/(P-M)}}screenPointToMercatorRay(c){const h=[c.x,c.y,0,1],x=[c.x,c.y,1,1];return f.transformMat4$1(h,h,this.pixelMatrixInverse),f.transformMat4$1(x,x,this.pixelMatrixInverse),f.scale$1(h,h,1/h[3]),f.scale$1(x,x,1/x[3]),h[2]=f.mercatorZfromAltitude(h[2],this._center.lat)*this.worldSize,x[2]=f.mercatorZfromAltitude(x[2],this._center.lat)*this.worldSize,f.scale$1(h,h,1/this.worldSize),f.scale$1(x,x,1/this.worldSize),new f.Ray([h[0],h[1],h[2]],f.normalize([],f.sub([],x,h)))}rayIntersectionCoordinate(c){const{p0:h,p1:x,t:v}=c,C=f.mercatorZfromAltitude(h[2],this._center.lat),I=f.mercatorZfromAltitude(x[2],this._center.lat);return new f.MercatorCoordinate(f.number(h[0],x[0],v)/this.worldSize,f.number(h[1],x[1],v)/this.worldSize,f.number(C,I,v))}pointCoordinate(c,h=this._centerAltitude){return this.projection.pointCoordinate(this,c.x,c.y,h)}pointCoordinate3D(c){if(!this.elevation)return this.pointCoordinate(c);let h=this.projection.pointCoordinate3D(this,c.x,c.y);if(h)return new f.MercatorCoordinate(h[0],h[1],h[2]);let x=0,v=this.horizonLineFromTop();if(c.y>v)return this.pointCoordinate(c);const C=.02*v,I=c.clone();for(let M=0;M<10&&v-x>C;M++){I.y=f.number(x,v,.66);const P=this.projection.pointCoordinate3D(this,I.x,I.y);P?(v=I.y,h=P):x=I.y}return h?new f.MercatorCoordinate(h[0],h[1],h[2]):this.pointCoordinate(c)}isPointAboveHorizon(c){return this.projection.isPointAboveHorizon(this,c)}_coordinatePoint(c,h){const x=h&&this.elevation?this.elevation.getAtPointOrZero(c,this._centerAltitude):this._centerAltitude,v=[c.x*this.worldSize,c.y*this.worldSize,x+c.toAltitude(),1];return f.transformMat4$1(v,v,this.pixelMatrix),v[3]>0?new f.pointGeometry(v[0]/v[3],v[1]/v[3]):new f.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:c,left:h}=this._edgeInsets,x=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,C=this.pointLocation3D(new f.pointGeometry(h,c)),I=this.pointLocation3D(new f.pointGeometry(v,c)),M=this.pointLocation3D(new f.pointGeometry(v,x)),P=this.pointLocation3D(new f.pointGeometry(h,x));let B=Math.min(C.lng,I.lng,M.lng,P.lng),z=Math.max(C.lng,I.lng,M.lng,P.lng),H=Math.min(C.lat,I.lat,M.lat,P.lat),K=Math.max(C.lat,I.lat,M.lat,P.lat);const J=Math.pow(2,-this.zoom)/16*270,ee="globe"===this.projection.name?1:4,te=(ne,Y,le,ce,de)=>{const fe=(ne+le)/2,ye=(Y+ce)/2,Ee=new f.pointGeometry(fe,ye),{lng:Ie,lat:Be}=this.pointLocation3D(Ee),Ue=Math.max(0,B-Ie,H-Be,Ie-z,Be-K);B=Math.min(B,Ie),z=Math.max(z,Ie),H=Math.min(H,Be),K=Math.max(K,Be),(de<ee||Ue>J)&&(te(ne,Y,fe,ye,de+1),te(fe,ye,le,ce,de+1))};if(te(h,c,v,c,1),te(v,c,v,x,1),te(v,x,h,x,1),te(h,x,h,c,1),"globe"===this.projection.name){const[ne,Y]=f.polesInViewport(this);ne?(K=90,z=180,B=-180):Y&&(H=-90,z=180,B=-180)}return new f.LngLatBounds(new f.LngLat(B,H),new f.LngLat(z,K))}_getBoundsRectangular(c,h){const{top:x,left:v}=this._edgeInsets,C=this.height-this._edgeInsets.bottom,I=this.width-this._edgeInsets.right,M=new f.pointGeometry(v,x),P=new f.pointGeometry(I,x),B=new f.pointGeometry(I,C),z=new f.pointGeometry(v,C);let H=this.pointCoordinate(M,c),K=this.pointCoordinate(P,c);const J=this.pointCoordinate(B,h),ee=this.pointCoordinate(z,h),te=(ne,Y)=>(Y.y-ne.y)/(Y.x-ne.x);return H.y>1&&K.y>=0?H=new f.MercatorCoordinate((1-ee.y)/te(ee,H)+ee.x,1):H.y<0&&K.y<=1&&(H=new f.MercatorCoordinate(-ee.y/te(ee,H)+ee.x,0)),K.y>1&&H.y>=0?K=new f.MercatorCoordinate((1-J.y)/te(J,K)+J.x,1):K.y<0&&H.y<=1&&(K=new f.MercatorCoordinate(-J.y/te(J,K)+J.x,0)),(new f.LngLatBounds).extend(this.coordinateLocation(H)).extend(this.coordinateLocation(K)).extend(this.coordinateLocation(ee)).extend(this.coordinateLocation(J))}_getBoundsRectangularTerrain(){const c=this.elevation;if(!c.visibleDemTiles.length||c.isUsingMockSource())return this._getBoundsRectangular(0,0);const h=c.visibleDemTiles.reduce((x,v)=>{if(v.dem){const C=v.dem.tree;x.min=Math.min(x.min,C.minimums[0]),x.max=Math.max(x.max,C.maximums[0])}return x},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(h.min*c.exaggeration(),h.max*c.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(c=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,x=this.height/2-h*(1-this._horizonShift);return c?Math.max(0,x):x}getMaxBounds(){return this.maxBounds}setMaxBounds(c){this.maxBounds=c,this.minLat=-f.MAX_MERCATOR_LATITUDE,this.maxLat=f.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,c&&(this.minLat=c.getSouth(),this.maxLat=c.getNorth(),this.minLng=c.getWest(),this.maxLng=c.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=f.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=f.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=f.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=f.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(c,h){return this.projection.createTileMatrix(this,h,c)}calculateDistanceTileData(c){const h=c.key,x=this._distanceTileDataCache;if(x[h])return x[h];const v=c.canonical,C=1/this.height,I=this.cameraWorldSize,M=I/this.zoomScale(v.z),P=(v.x+Math.pow(2,v.z)*c.wrap)*M,B=v.y*M,z=this.point;z.x*=I/this.worldSize,z.y*=I/this.worldSize;const H=this.angle,K=Math.sin(-H),J=-Math.cos(-H);return x[h]={bearing:[K,J],center:[(z.x-P)*C,(z.y-B)*C],scale:M/f.EXTENT*C},x[h]}calculateFogTileMatrix(c){const h=c.key,x=this._fogTileMatrixCache;if(x[h])return x[h];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,c);return f.multiply(v,this.worldToFogMatrix,v),x[h]=new Float32Array(v),x[h]}calculateProjMatrix(c,h=!1){const x=c.key,v=h?this._alignedProjMatrixCache:this._projMatrixCache;if(v[x])return v[x];const C=this.calculatePosMatrix(c,this.worldSize);return f.multiply(C,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:h?this.alignedProjMatrix:this.projMatrix,C),v[x]=new Float32Array(C),v[x]}calculatePixelsToTileUnitsMatrix(c){const h=c.tileID.key,x=this._pixelsToTileUnitsCache;if(x[h])return x[h];const v=function(C,I){const{scale:M}=C.tileTransform,P=M*f.EXTENT/(C.tileSize*Math.pow(2,I.zoom-C.tileID.overscaledZ+C.tileID.canonical.z));return B=new Float32Array(4),K=(z=I.inverseAdjustmentMatrix)[1],J=z[2],ee=z[3],ne=(H=[P,P])[1],B[0]=z[0]*(te=H[0]),B[1]=K*te,B[2]=J*ne,B[3]=ee*ne,B;var B,z,H,K,J,ee,te,ne}(c,this);return x[h]=v,x[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const c=1/this.worldSize,h=f.fromScaling([],[c,c,c]);return f.multiply(h,h,this.globeMatrix),h}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const c=this._elevation;this._updateCameraState();const h=f.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(h),v=this._camera.forward(),C=f.mercatorZfromAltitude(1,this._center.lat);x[2]/=C,v[2]/=C,f.normalize(v,v);const I=c.raycast(x,v,c.exaggeration());if(I){const M=f.scaleAndAdd([],x,v,I),P=new f.MercatorCoordinate(M[0],M[1],f.mercatorZfromAltitude(M[2],f.latFromMercatorY(M[1]))),B=(P.z+f.length([P.x-x[0],P.y-x[1],P.z-x[2]*C]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(B),this._centerAltitude=P.toAltitude(),this._center=this.coordinateLocation(P),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(c=!1){if(!this._elevation)return;const h=this._elevation,x=f.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(x),C=h.getAtPointOrZero(new f.MercatorCoordinate(...v)),I=this.pixelsPerMeter/this.worldSize*C,M=this._minimumHeightOverTerrain(),P=v[2]-I;if(P<=M)if(P<0||c){const B=this.locationCoordinate(this._center,this._centerAltitude),z=[v[0],v[1],B.z-v[2]],H=f.length(z);z[2]-=(M-P)/this._pixelsPerMercatorPixel;const K=f.length(z);if(0===K)return;f.scale$2(z,z,H/K*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],B.z*this._pixelsPerMercatorPixel-z[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||c){const K=this.center;return K.lat=f.clamp(K.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!c)&&(K.lng=f.clamp(K.lng,this.minLng,this.maxLng)),this.center=K,void(this._constraining=!1)}const h=this._unmodified,{x,y:v}=this.point;let C=0,I=x,M=v;const P=this.width/2,B=this.height/2,z=this.worldMinY*this.scale,H=this.worldMaxY*this.scale;if(v-B<z&&(M=z+B),v+B>H&&(M=H-B),H-z<this.height&&(C=Math.max(C,this.height/(H-z)),M=(H+z)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const K=this.worldMinX*this.scale,J=this.worldMaxX*this.scale,ee=this.worldSize/2-(K+J)/2;I=(x+ee+this.worldSize)%this.worldSize-ee,I-P<K&&(I=K+P),I+P>J&&(I=J-P),J-K<this.width&&(C=Math.max(C,this.width/(J-K)),I=(J+K)/2)}I===x&&M===v||(this.center=this.unproject(new f.pointGeometry(I,M))),C&&(this.zoom+=this.scaleZoom(C)),this._constrainCamera(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let c=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(c=Math.max(c,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),c}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,h=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=f.mercatorZfromAltitude(1,this.center.lat)/f.mercatorZfromAltitude(1,f.GLOBE_SCALE_MATCH_LATITUDE));const x=Wt(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,x),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const v="meters"===this.projection.zAxisUnit?h:1,C=this._camera.getWorldToCamera(this.worldSize,v),I=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);I[8]=2*-c.x/this.width,I[9]=2*c.y/this.height;let M=f.mul([],I,C);if(this.projection.isReprojectedInTileSpace){const ye=this.locationCoordinate(this.center),Ee=f.identity([]);f.translate(Ee,Ee,[ye.x*this.worldSize,ye.y*this.worldSize,0]),f.multiply(Ee,Ee,ge(this)),f.translate(Ee,Ee,[-ye.x*this.worldSize,-ye.y*this.worldSize,0]),f.multiply(M,M,Ee),this.inverseAdjustmentMatrix=function(Ie){const Be=ge(Ie,!0);return Et([],[Be[0],Be[1],Be[4],Be[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=f.scale([],M,[this.worldSize,this.worldSize,this.worldSize/v,1]),this.projMatrix=M,this.invProjMatrix=f.invert(new Float64Array(16),this.projMatrix);const P=f.invert([],I);this.frustumCorners=f.FrustumCorners.fromInvProjectionMatrix(P,this.horizonLineFromTop(),this.height);const B=new Float32Array(16);f.identity(B),f.scale(B,B,[1,-1,1]),f.rotateX(B,B,this._pitch),f.rotateZ(B,B,this.angle);const z=f.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),H=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;z[8]=2*-c.x/this.width,z[9]=2*(c.y+H)/this.height,this.skyboxMatrix=f.multiply(B,z,B);const K=this.point,J=K.x,ee=K.y,te=this.width%2/2,ne=this.height%2/2,Y=Math.cos(this.angle),le=Math.sin(this.angle),ce=J-Math.round(J)+Y*te+le*ne,de=ee-Math.round(ee)+Y*ne+le*te,fe=new Float64Array(M);if(f.translate(fe,fe,[ce>.5?ce-1:ce,de>.5?de-1:de,0]),this.alignedProjMatrix=fe,M=f.create(),f.scale(M,M,[this.width/2,-this.height/2,1]),f.translate(M,M,[1,-1,0]),this.labelPlaneMatrix=M,M=f.create(),f.scale(M,M,[1,-1,1]),f.translate(M,M,[-1,-1,0]),f.scale(M,M,[2/this.width,2/this.height,1]),this.glCoordMatrix=M,this.pixelMatrix=f.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},M=f.invert(new Float64Array(16),this.pixelMatrix),!M)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=M,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=f.calculateGlobeMatrix(this);const ye=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=f.transformMat4(ye,ye,C),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=M;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const c=this.cameraWorldSizeForFog,h=this.cameraPixelsPerMeter,x=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,C=[c,c,h];f.scale$2(C,C,v),f.scale$2(x,x,-1),f.multiply$2(x,x,C);const I=f.create();f.translate(I,I,x),f.scale(I,I,C),this.mercatorFogMatrix=I,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(c,h,v)}_computeCameraPosition(c){const h=(c=c||this.pixelsPerMeter)/this.pixelsPerMeter,x=this._camera.forward(),v=this.point,C=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-c/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-x[0]*C,v.y/this.worldSize-x[1]*C,c/this.worldSize*this._centerAltitude-x[2]*C]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(c){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),x=this._camera.position[2],v=c[2];let C=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(C=Math.min((h-x)/v,1)),this._camera.position=f.scaleAndAdd([],this._camera.position,c,C),this._updateStateFromCamera()}_updateStateFromCamera(){const c=this._camera.position,h=this._camera.forward(),{pitch:x,bearing:v}=this._camera.getPitchBearing(),C=f.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,I=this._mercatorZfromZoom(this._maxZoom)*Math.cos(f.degToRad(this._maxPitch)),M=Math.max((c[2]-C)/Math.cos(x),I),P=this._zoomFromMercatorZ(M);f.scaleAndAdd(c,c,h,M),this._pitch=f.clamp(x,f.degToRad(this.minPitch),f.degToRad(this.maxPitch)),this.angle=f.wrap(v,-Math.PI,Math.PI),this._setZoom(f.clamp(P,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new f.MercatorCoordinate(c[0],c[1],c[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(c){return Math.pow(2,c)*this.tileSize}_mercatorZfromZoom(c){return this.cameraToCenterDistance/this._worldSizeFromZoom(c)}_minimumHeightOverTerrain(){const c=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(c)}_zoomFromMercatorZ(c){return this.scaleZoom(this.cameraToCenterDistance/(c*this.tileSize))}zoomFromMercatorZAdjusted(c){let h=0,x=f.GLOBE_ZOOM_THRESHOLD_MAX,v=0,C=1/0;for(;x-h>1e-6&&x>h;){const I=h+.5*(x-h),M=this.tileSize*Math.pow(2,I),P=this.getCameraToCenterDistance(this.projection,I,M),B=this.scaleZoom(P/(c*this.tileSize)),z=Math.abs(I-B);z<C&&(C=z,v=I),I<B?h=I:x=I}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(f.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(c,h){const x=Math.min(c.x,h.x),v=Math.max(c.x,h.x),C=Math.min(c.y,h.y),I=Math.max(c.y,h.y);if(C<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const M=[new f.pointGeometry(x,C),new f.pointGeometry(v,I),new f.pointGeometry(x,I),new f.pointGeometry(v,C)],P=this.renderWorldCopies?-3:0,B=this.renderWorldCopies?4:1;for(const z of M){const H=this.pointRayIntersection(z);if(H.t<0)return!0;const K=this.rayIntersectionCoordinate(H);if(K.x<P||K.y<0||K.x>B||K.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+f.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new f.pointGeometry(0,0),new f.pointGeometry(this.width,this.height))}zoomDeltaToMovement(c,h){const x=f.length(f.sub([],this._camera.position,c)),v=this._zoomFromMercatorZ(x)+h;return x-this._mercatorZfromZoom(v)}getCameraPoint(){if("globe"===this.projection.name){const c=function([h,x,v],C){const I=[h,x,v,1];f.transformMat4$1(I,I,C);const M=I[3]=Math.max(I[3],1e-6);return I[0]/=M,I[1]/=M,I[2]/=M,I}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new f.pointGeometry(c[0],c[1])}{const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new f.pointGeometry(0,c))}}getCameraToCenterDistance(c,h=this.zoom,x=this.worldSize){const v=Wt(c,h,this.width,this.height,1024),C=c.pixelSpaceConversion(this.center.lat,x,v);return.5/Math.tan(.5*this._fov)*this.height*C}getWorldToCameraMatrix(){const c=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&f.multiply(c,c,this.globeMatrix),c}}function jr(m,c){let h=!1,x=null;const v=()=>{x=null,h&&(m(),x=setTimeout(v,c),h=!1)};return()=>(h=!0,x||v(),x)}class Ur{constructor(c){this._hashName=c&&encodeURIComponent(c),f.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=jr(this._updateHashUnthrottled.bind(this),300)}addTo(c){return this._map=c,f.window.addEventListener("hashchange",this._onHashChange,!1),c.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),f.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const c=this._map;if(!c)return"";const h=Kc(c);if(this._hashName){const x=this._hashName;let v=!1;const C=f.window.location.hash.slice(1).split("&").map(I=>{const M=I.split("=")[0];return M===x?(v=!0,`${M}=${h}`):I}).filter(I=>I);return v||C.push(`${x}=${h}`),`#${C.join("&")}`}return`#${h}`}_getCurrentHash(){const c=f.window.location.hash.replace("#","");if(this._hashName){let h;return c.split("&").map(x=>x.split("=")).forEach(x=>{x[0]===this._hashName&&(h=x)}),(h&&h[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._map;if(!c)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(x=>isNaN(x))){const x=c.dragRotate.isEnabled()&&c.touchZoomRotate.isEnabled()?+(h[3]||0):c.getBearing();return c.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:x,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){const c=f.window.location.href.replace(/(#.+)?$/,this.getHashString());f.window.history.replaceState(f.window.history.state,null,c)}}function Kc(m,c){const h=m.getCenter(),x=Math.round(100*m.getZoom())/100,v=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,v),I=Math.round(h.lng*C)/C,M=Math.round(h.lat*C)/C,P=m.getBearing(),B=m.getPitch();let z=c?`/${I}/${M}/${x}`:`${x}/${M}/${I}`;return(P||B)&&(z+="/"+Math.round(10*P)/10),B&&(z+=`/${Math.round(B)}`),z}const Ga={linearity:.3,easing:f.bezier(0,0,.3,1)},is=f.extend({deceleration:2500,maxSpeed:1400},Ga),Xu=f.extend({deceleration:20,maxSpeed:1400},Ga),Jd=f.extend({deceleration:1e3,maxSpeed:360},Ga),Wa=f.extend({deceleration:1e3,maxSpeed:90},Ga);class Zs{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:f.exported.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,h=f.exported.now();for(;c.length>0&&h-c[0].time>160;)c.shift()}_onMoveEnd(c){if(f.exported.prefersReducedMotion||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const h={zoom:0,bearing:0,pitch:0,pan:new f.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)h.zoom+=C.zoomDelta||0,h.bearing+=C.bearingDelta||0,h.pitch+=C.pitchDelta||0,C.panDelta&&h.pan._add(C.panDelta),C.around&&(h.around=C.around),C.pinchAround&&(h.pinchAround=C.pinchAround);const x=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(h.pan.mag()){const C=nc(h.pan.mag(),x,f.extend({},is,c||{}));v.offset=h.pan.mult(C.amount/h.pan.mag()),v.center=this._map.transform.center,tc(v,C)}if(h.zoom){const C=nc(h.zoom,x,Xu);v.zoom=this._map.transform.zoom+C.amount,tc(v,C)}if(h.bearing){const C=nc(h.bearing,x,Jd);v.bearing=this._map.transform.bearing+f.clamp(C.amount,-179,179),tc(v,C)}if(h.pitch){const C=nc(h.pitch,x,Wa);v.pitch=this._map.transform.pitch+C.amount,tc(v,C)}if(v.zoom||v.bearing){const C=void 0===h.pinchAround?h.around:h.pinchAround;v.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function tc(m,c){(!m.duration||m.duration<c.duration)&&(m.duration=c.duration,m.easing=c.easing)}function nc(m,c,h){const{maxSpeed:x,linearity:v,deceleration:C}=h,I=f.clamp(m*v/(c/1e3),-x,x),M=Math.abs(I)/(C*v);return{easing:h.easing,duration:1e3*M,amount:I*(M/2)}}class wn extends f.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,h,x,v={}){const C=ft(h.getCanvasContainer(),x),I=h.unproject(C);super(c,f.extend({point:C,lngLat:I,originalEvent:x},v)),this._defaultPrevented=!1,this.target=h}}class Fp extends f.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,h,x){const v="touchend"===c?x.changedTouches:x.touches,C=me(h.getCanvasContainer(),v),I=C.map(P=>h.unproject(P)),M=C.reduce((P,B,z,H)=>P.add(B.div(H.length)),new f.pointGeometry(0,0));super(c,{points:C,point:M,lngLats:I,lngLat:h.unproject(M),originalEvent:x}),this._defaultPrevented=!1}}class Np extends f.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,h,x){super(c,{originalEvent:x}),this._defaultPrevented=!1}}class Lp{constructor(c,h){this._map=c,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(c){return this._firePreventable(new Np(c.type,this._map,c))}mousedown(c,h){return this._mousedownPos=h,this._firePreventable(new wn(c.type,this._map,c))}mouseup(c){this._map.fire(new wn(c.type,this._map,c))}preclick(c){const h=f.extend({},c);h.type="preclick",this._map.fire(new wn(h.type,this._map,h))}click(c,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(c),this._map.fire(new wn(c.type,this._map,c)))}dblclick(c){return this._firePreventable(new wn(c.type,this._map,c))}mouseover(c){this._map.fire(new wn(c.type,this._map,c))}mouseout(c){this._map.fire(new wn(c.type,this._map,c))}touchstart(c){return this._firePreventable(new Fp(c.type,this._map,c))}touchmove(c){this._map.fire(new Fp(c.type,this._map,c))}touchend(c){this._map.fire(new Fp(c.type,this._map,c))}touchcancel(c){this._map.fire(new Fp(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Rs{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(c){this._map.fire(new wn(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new wn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new wn(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ku{constructor(c,h){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,h){this.isEnabled()&&c.shiftKey&&0===c.button&&(Nt(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(c,h){if(!this._active)return;const x=h,v=this._startPos,C=this._lastPos;if(!v||!C||C.equals(x)||!this._box&&x.dist(v)<this._clickTolerance)return;this._lastPos=x,this._box||(this._box=qe("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const I=Math.min(v.x,x.x),M=Math.max(v.x,x.x),P=Math.min(v.y,x.y),B=Math.max(v.y,x.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${I}px,${P}px)`,this._box.style.width=M-I+"px",this._box.style.height=B-P+"px")})}mouseupWindow(c,h){if(!this._active)return;const x=this._startPos,v=h;if(x&&0===c.button){if(this.reset(),ln(),x.x!==v.x||x.y!==v.y)return this._map.fire(new f.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:C=>C.fitScreenCoordinates(x,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",c)}}keydown(c){this._active&&27===c.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",c))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),yt(),delete this._startPos,delete this._lastPos}_fireEvent(c,h){return this._map.fire(new f.Event(c,{originalEvent:h}))}}function xl(m,c){const h={};for(let x=0;x<m.length;x++)h[m[x].identifier]=c[x];return h}class Qu{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(c,h,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=c.timeStamp),x.length===this.numTouches&&(this.centroid=function(v){const C=new f.pointGeometry(0,0);for(const I of v)C._add(I);return C.div(v.length)}(h),this.touches=xl(x,h)))}touchmove(c,h,x){if(this.aborted||!this.centroid)return;const v=xl(x,h);for(const C in this.touches){const M=v[C];(!M||M.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(c,h,x){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),0===x.length){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Hr{constructor(c){this.singleTap=new Qu(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(c,h,x){this.singleTap.touchstart(c,h,x)}touchmove(c,h,x){this.singleTap.touchmove(c,h,x)}touchend(c,h,x){const v=this.singleTap.touchend(c,h,x);if(v){const C=c.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(v)<30;if(C&&I||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Rm{constructor(){this._zoomIn=new Hr({numTouches:1,numTaps:2}),this._zoomOut=new Hr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,h,x){this._zoomIn.touchstart(c,h,x),this._zoomOut.touchstart(c,h,x)}touchmove(c,h,x){this._zoomIn.touchmove(c,h,x),this._zoomOut.touchmove(c,h,x)}touchend(c,h,x){const v=this._zoomIn.touchend(c,h,x),C=this._zoomOut.touchend(c,h,x);return v?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()+1,around:I.unproject(v)},{originalEvent:c})}):C?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()-1,around:I.unproject(C)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const fs={0:1,2:2};class So{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(c,h){return!1}_move(c,h){return{}}mousedown(c,h){if(this._lastPoint)return;const x=De(c);this._correctButton(c,x)&&(this._lastPoint=h,this._eventButton=x)}mousemoveWindow(c,h){const x=this._lastPoint;if(x)if(c.preventDefault(),null!=this._eventButton&&function(v,C){const I=fs[C];return void 0===v.buttons||(v.buttons&I)!==I}(c,this._eventButton))this.reset();else if(this._moved||!(h.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(x,h)}mouseupWindow(c){this._lastPoint&&De(c)===this._eventButton&&(this._moved&&ln(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mf extends So{mousedown(c,h){super.mousedown(c,h),this._lastPoint&&(this._active=!0)}_correctButton(c,h){return 0===h&&!c.ctrlKey}_move(c,h){return{around:h,panDelta:h.sub(c)}}}class yl extends So{_correctButton(c,h){return 0===h&&c.ctrlKey||2===h}_move(c,h){const x=.8*(h.x-c.x);if(x)return this._active=!0,{bearingDelta:x}}contextmenu(c){c.preventDefault()}}class Ju extends So{_correctButton(c,h){return 0===h&&c.ctrlKey||2===h}_move(c,h){const x=-.5*(h.y-c.y);if(x)return this._active=!0,{pitchDelta:x}}contextmenu(c){c.preventDefault()}}class Lo{constructor(c,h){this._map=c,this._el=c.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),f.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new f.pointGeometry(0,0)}touchstart(c,h,x){return this._calculateTransform(c,h,x)}touchmove(c,h,x){if(this._active&&!(x.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===x.length&&!f.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return c.cancelable&&c.preventDefault(),this._calculateTransform(c,h,x)}}touchend(c,h,x){this._calculateTransform(c,h,x),this._active&&x.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,h,x){x.length>0&&(this._active=!0);const v=xl(x,h),C=new f.pointGeometry(0,0),I=new f.pointGeometry(0,0);let M=0;for(const B in v){const z=v[B],H=this._touches[B];H&&(C._add(z),I._add(z.sub(H)),M++,v[B]=z)}if(this._touches=v,M<this._minTouches||!I.mag())return;const P=I.div(M);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(M),panDelta:P}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=qe("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class ed{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(c){}_move(c,h,x){return{}}touchstart(c,h,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([h[0],h[1]]))}touchmove(c,h,x){const v=this._firstTwoTouches;if(!v)return;c.preventDefault();const[C,I]=v,M=eh(x,h,C),P=eh(x,h,I);if(!M||!P)return;const B=this._aroundCenter?null:M.add(P).div(2);return this._move([M,P],B,c)}touchend(c,h,x){if(!this._firstTwoTouches)return;const[v,C]=this._firstTwoTouches,I=eh(x,h,v),M=eh(x,h,C);I&&M||(this._active&&ln(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&"center"===c.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function eh(m,c,h){for(let x=0;x<m.length;x++)if(m[x].identifier===h)return c[x]}function Pm(m,c){return Math.log(m/c)/Math.LN2}class ix extends ed{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,h){const x=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Pm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Pm(this._distance,x),pinchAround:h}}}function Bp(m,c){return 180*m.angleWith(c)/Math.PI}class Om extends ed{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,h){const x=this._vector;if(this._vector=c[0].sub(c[1]),x&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Bp(this._vector,x),pinchAround:h}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const h=25/(Math.PI*this._minDiameter)*360,x=this._startVector;if(!x)return!1;const v=Bp(c,x);return Math.abs(v)<h}}function zp(m){return Math.abs(m.y)>Math.abs(m.x)}class rs extends ed{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(c){this._lastPoints=c,zp(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,h,x){const v=this._lastPoints;if(!v)return;const C=c[0].sub(v[0]),I=c[1].sub(v[1]);return this._map._cooperativeGestures&&!f.isFullscreen()&&x.touches.length<3||(this._valid=this.gestureBeginsVertically(C,I,x.timeStamp),!this._valid)?void 0:(this._lastPoints=c,this._active=!0,{pitchDelta:(C.y+I.y)/2*-.5})}gestureBeginsVertically(c,h,x){if(void 0!==this._valid)return this._valid;const v=c.mag()>=2,C=h.mag()>=2;if(!v&&!C)return;if(!v||!C)return null==this._firstMove&&(this._firstMove=x),x-this._firstMove<100&&void 0;const I=c.y>0==h.y>0;return zp(c)&&zp(h)&&I}}const Cv={panStep:100,bearingStep:15,pitchStep:10};class rx{constructor(){const c=Cv;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let h=0,x=0,v=0,C=0,I=0;switch(c.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:c.shiftKey?x=-1:(c.preventDefault(),C=-1);break;case 39:c.shiftKey?x=1:(c.preventDefault(),C=1);break;case 38:c.shiftKey?v=1:(c.preventDefault(),I=-1);break;case 40:c.shiftKey?v=-1:(c.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(x=0,v=0),{cameraAnimation:M=>{const P=M.getZoom();M.easeTo({duration:300,easeId:"keyboardHandler",easing:Tv,zoom:h?Math.round(P)+h*(c.shiftKey?2:1):P,bearing:M.getBearing()+x*this._bearingStep,pitch:M.getPitch()+v*this._pitchStep,offset:[-C*this._panStep,-I*this._panStep],center:M.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Tv(m){return m*(2-m)}const ox=4.000244140625;class ic{constructor(c,h){this._map=c,this._el=c.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,f.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&"center"===c.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(c.ctrlKey||c.metaKey||this.isZooming()||f.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=c.deltaMode===f.window.WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const x=f.exported.now(),v=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,0!==h&&h%ox==0?this._type="wheel":0!==h&&Math.abs(h)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(v*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),c.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=c,this._delta-=h,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=ft(this._el,c);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform;"wheel"===this._type&&c.projection.wrap&&(c._center.lng>=180||c._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const h=()=>c._terrainEnabled()&&this._aroundCoord?c.computeZoomRelativeTo(this._aroundCoord):c.zoom;if(0!==this._delta){const P="wheel"===this._type&&Math.abs(this._delta)>ox?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&0!==B&&(B=1/B);const z=h(),H=Math.pow(2,z),K="number"==typeof this._targetZoom?c.zoomScale(this._targetZoom):H;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(K*B))),"wheel"===this._type&&(this._startZoom=z,this._easing=this._smoothOutEasing(200)),this._delta=0}const x="number"==typeof this._targetZoom?this._targetZoom:h(),v=this._startZoom,C=this._easing;let I,M=!1;if("wheel"===this._type&&v&&C){const P=Math.min((f.exported.now()-this._lastWheelEventTime)/200,1),B=C(P);I=f.number(v,x,B),P<1?this._frameId||(this._frameId=!0):M=!0}else I=x,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!M,zoomDelta:I-h(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let h=f.ease;if(this._prevEase){const x=this._prevEase,v=(f.exported.now()-x.start)/x.duration,C=x.easing(v+.01)-x.easing(v),I=.27/Math.sqrt(C*C+1e-4)*.01,M=Math.sqrt(.0729-I*I);h=f.bezier(I,M,.25,1)}return this._prevEase={start:f.exported.now(),duration:c,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=qe("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(f.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class sx{constructor(c,h){this._clickZoom=c,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class th{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(c,h){return c.preventDefault(),{cameraAnimation:x=>{x.easeTo({duration:300,zoom:x.getZoom()+(c.shiftKey?-1:1),around:x.unproject(h)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bl{constructor(){this._tap=new Hr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(c,h,x){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?x.length>0&&(this._swipePoint=h[0],this._swipeTouch=x[0].identifier):this._tap.touchstart(c,h,x))}touchmove(c,h,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;const v=h[0],C=v.y-this._swipePoint.y;return this._swipePoint=v,c.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(c,h,x)}touchend(c,h,x){this._tapTime?this._swipePoint&&0===x.length&&this.reset():this._tap.touchend(c,h,x)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vp{constructor(c,h,x){this._el=c,this._mousePan=h,this._touchPan=x}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Vt{constructor(c,h,x){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=h,this._mousePitch=x}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class jp{constructor(c,h,x,v){this._el=c,this._touchZoom=h,this._touchRotate=x,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const td=m=>m.zoom||m.drag||m.pitch||m.rotate;class gf extends f.Event{}class xf{constructor(){this.constants=[1,1,.01],this.radius=0}setup(c,h){const x=f.sub([],h,c);this.radius=f.length(x[2]<0?f.div([],x,this.constants):[x[0],x[1],0])}projectRay(c){f.div(c,c,this.constants),f.normalize(c,c),f.mul$1(c,c,this.constants);const h=f.scale$2([],c,this.radius);if(h[2]>0){const x=f.scale$2([],[0,0,1],f.dot(h,[0,0,1])),v=f.scale$2([],f.normalize([],[h[0],h[1],0]),this.radius),C=f.add([],h,f.scale$2([],f.sub([],f.add([],v,x),h),2));h[0]=C[0],h[1]=C[1]}return h}}function yf(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class rc{constructor(c,h){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Zs(c),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new xf,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),f.bindAll(["handleEvent","handleWindowEvent"],this);const x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[f.window.document,"mousemove",{capture:!0}],[f.window.document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[f.window,"blur",void 0]];for(const[v,C,I]of this._listeners)v.addEventListener(C,v===f.window.document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[c,h,x]of this._listeners)c.removeEventListener(h,c===f.window.document?this.handleWindowEvent:this.handleEvent,x)}_addDefaultHandlers(c){const h=this._map,x=h.getCanvasContainer();this._add("mapEvent",new Lp(h,c));const v=h.boxZoom=new Ku(h,c);this._add("boxZoom",v);const C=new Rm,I=new th;h.doubleClickZoom=new sx(I,C),this._add("tapZoom",C),this._add("clickZoom",I);const M=new bl;this._add("tapDragZoom",M);const P=h.touchPitch=new rs(h);this._add("touchPitch",P);const B=new yl(c),z=new Ju(c);h.dragRotate=new Vt(c,B,z),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]);const H=new mf(c),K=new Lo(h,c);h.dragPan=new Vp(x,H,K),this._add("mousePan",H),this._add("touchPan",K,["touchZoom","touchRotate"]);const J=new Om,ee=new ix;h.touchZoomRotate=new jp(x,ee,J,M),this._add("touchRotate",J,["touchPan","touchZoom"]),this._add("touchZoom",ee,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Rs(h));const te=h.scrollZoom=new ic(h,this);this._add("scrollZoom",te,["mousePan"]);const ne=h.keyboard=new rx;this._add("keyboard",ne);for(const Y of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[Y]&&h[Y].enable(c[Y])}_add(c,h,x){this._handlers.push({handlerName:c,handler:h,allowed:x}),this._handlersById[c]=h}stop(c){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!td(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(c,h,x){for(const v in c)if(v!==x&&(!h||h.indexOf(v)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const h=[];for(const x of c)this._el.contains(x.target)&&h.push(x);return h}handleEvent(c,h){this._updatingCamera=!0;const x="renderFrame"===c.type,v=x?void 0:c,C={needsRenderFrame:!1},I={},M={},P=c.touches?this._getMapTouches(c.touches):void 0,B=P?me(this._el,P):x?void 0:ft(this._el,c);for(const{handlerName:K,handler:J,allowed:ee}of this._handlers){if(!J.isEnabled())continue;let te;this._blockedByActive(M,ee,K)?J.reset():J[h||c.type]&&(te=J[h||c.type](c,B,P),this.mergeHandlerResult(C,I,te,K,v),te&&te.needsRenderFrame&&this._triggerRenderFrame()),(te||J.isActive())&&(M[K]=J)}const z={};for(const K in this._previousActiveHandlers)M[K]||(z[K]=v);this._previousActiveHandlers=M,(Object.keys(z).length||yf(C))&&(this._changes.push([C,I,z]),this._triggerRenderFrame()),(Object.keys(M).length||yf(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:H}=C;H&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],H(this._map))}mergeHandlerResult(c,h,x,v,C){if(!x)return;f.extend(c,x);const I={handlerName:v,originalEvent:x.originalEvent||C};void 0!==x.zoomDelta&&(h.zoom=I),void 0!==x.panDelta&&(h.drag=I),void 0!==x.pitchDelta&&(h.pitch=I),void 0!==x.bearingDelta&&(h.rotate=I)}_applyChanges(){const c={},h={},x={};for(const[v,C,I]of this._changes)v.panDelta&&(c.panDelta=(c.panDelta||new f.pointGeometry(0,0))._add(v.panDelta)),v.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+v.pitchDelta),void 0!==v.around&&(c.around=v.around),void 0!==v.aroundCoord&&(c.aroundCoord=v.aroundCoord),void 0!==v.pinchAround&&(c.pinchAround=v.pinchAround),v.noInertia&&(c.noInertia=v.noInertia),f.extend(h,C),f.extend(x,I);this._updateMapTransform(c,h,x),this._changes=[]}_updateMapTransform(c,h,x){const v=this._map,C=v.transform,I=le=>[le.x,le.y,le.z];if((le=>{const ce=this._eventsInProgress.drag;return ce&&!this._handlersById[ce.handlerName].isActive()})()&&!yf(c)){const le=C.zoom;C.cameraElevationReference="sea",C.recenterOnTerrain(),C.cameraElevationReference="ground",le!==C.zoom&&this._map._update(!0)}if(C._isCameraConstrained&&v._stop(!0),!yf(c))return void this._fireEvents(h,x,!0);let{panDelta:M,zoomDelta:P,bearingDelta:B,pitchDelta:z,around:H,aroundCoord:K,pinchAround:J}=c;C._isCameraConstrained&&(P>0&&(P=0),C._isCameraConstrained=!1),void 0!==J&&(H=J),(P||(le=>h.drag&&!this._eventsInProgress.drag)())&&H&&(this._dragOrigin=I(C.pointCoordinate3D(H)),this._trackingEllipsoid.setup(C._camera.position,this._dragOrigin)),C.cameraElevationReference="sea",v._stop(!0),H=H||v.transform.centerPoint,B&&(C.bearing+=B),z&&(C.pitch+=z),C._updateCameraState();const ee=[0,0,0];if(M)if("mercator"===C.projection.name){const le=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(H).dir),ce=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(H.sub(M)).dir);ee[0]=ce[0]-le[0],ee[1]=ce[1]-le[1]}else{const le=C.pointCoordinate(H);if("globe"===C.projection.name){M=M.rotate(-C.angle);const ce=C._pixelsPerMercatorPixel/C.worldSize;ee[0]=-M.x*f.mercatorScale(f.latFromMercatorY(le.y))*ce,ee[1]=-M.y*f.mercatorScale(C.center.lat)*ce}else{const ce=C.pointCoordinate(H.sub(M));le&&ce&&(ee[0]=ce.x-le.x,ee[1]=ce.y-le.y)}}const te=C.zoom,ne=[0,0,0];if(P){const le=I(K||C.pointCoordinate3D(H)),ce={dir:f.normalize([],f.sub([],le,C._camera.position))};if(ce.dir[2]<0){const de=C.zoomDeltaToMovement(le,P);f.scale$2(ne,ce.dir,de)}}const Y=f.add(ee,ee,ne);C._translateCameraConstrained(Y),P&&Math.abs(C.zoom-te)>1e-4&&C.recenterOnTerrain(),C.cameraElevationReference="ground",this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(h,x,!0)}_fireEvents(c,h,x){const v=td(this._eventsInProgress),C=td(c),I={};for(const z in c){const{originalEvent:H}=c[z];this._eventsInProgress[z]||(I[`${z}start`]=H),this._eventsInProgress[z]=c[z]}!v&&C&&this._fireEvent("movestart",C.originalEvent);for(const z in I)this._fireEvent(z,I[z]);C&&this._fireEvent("move",C.originalEvent);for(const z in c){const{originalEvent:H}=c[z];this._fireEvent(z,H)}const M={};let P;for(const z in this._eventsInProgress){const{handlerName:H,originalEvent:K}=this._eventsInProgress[z];this._handlersById[H].isActive()||(delete this._eventsInProgress[z],P=h[H]||K,M[`${z}end`]=P)}for(const z in M)this._fireEvent(z,M[z]);const B=td(this._eventsInProgress);if(x&&(v||C)&&!B){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),H=K=>0!==K&&-this._bearingSnap<K&&K<this._bearingSnap;z?(H(z.bearing||this._map.getBearing())&&(z.bearing=0),this._map.easeTo(z,{originalEvent:P})):(this._map.fire(new f.Event("moveend",{originalEvent:P})),H(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,h){this._map.fire(new f.Event(c,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{this._frameId=void 0,this.handleEvent(new gf("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const bf="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class ax extends f.Evented{constructor(c,h){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=h.bearingSnap,f.bindAll(["_renderFrameCallback"],this)}getCenter(){return new f.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(c,h){return this.jumpTo({center:c},h)}panBy(c,h,x){return c=f.pointGeometry.convert(c).mult(-1),this.panTo(this.transform.center,f.extend({offset:c},h),x)}panTo(c,h,x){return this.easeTo(f.extend({center:c},h),x)}getZoom(){return this.transform.zoom}setZoom(c,h){return this.jumpTo({zoom:c},h),this}zoomTo(c,h,x){return this.easeTo(f.extend({zoom:c},h),x)}zoomIn(c,h){return this.zoomTo(this.getZoom()+1,c,h),this}zoomOut(c,h){return this.zoomTo(this.getZoom()-1,c,h),this}getBearing(){return this.transform.bearing}setBearing(c,h){return this.jumpTo({bearing:c},h),this}getPadding(){return this.transform.padding}setPadding(c,h){return this.jumpTo({padding:c},h),this}rotateTo(c,h,x){return this.easeTo(f.extend({bearing:c},h),x)}resetNorth(c,h){return this.rotateTo(0,f.extend({duration:1e3},c),h),this}resetNorthPitch(c,h){return this.easeTo(f.extend({bearing:0,pitch:0,duration:1e3},c),h),this}snapToNorth(c,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,h):this}getPitch(){return this.transform.pitch}setPitch(c,h){return this.jumpTo({pitch:c},h),this}cameraForBounds(c,h){c=f.LngLatBounds.convert(c);const x=h&&h.bearing||0,v=h&&h.pitch||0,C=c.getNorthWest(),I=c.getSouthEast();return this._cameraForBounds(this.transform,C,I,x,v,h)}_extendCameraOptions(c){const h={top:0,bottom:0,right:0,left:0};if("number"==typeof(c=f.extend({padding:h,offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding){const x=c.padding;c.padding={top:x,bottom:x,right:x,left:x}}return c.padding=f.extend(h,c.padding),c}_minimumAABBFrustumDistance(c,h){const x=h.max[0]-h.min[0],v=h.max[1]-h.min[1];return x/v>c.aspect?x/(2*Math.tan(.5*c.fovX)*c.aspect):v/(2*Math.tan(.5*c.fovY)*c.aspect)}_cameraForBoundsOnGlobe(c,h,x,v,C,I){const M=c.clone(),P=this._extendCameraOptions(I);M.bearing=v,M.pitch=C;const B=f.LngLat.convert(h),z=f.LngLat.convert(x),H=.5*(B.lat+z.lat),K=.5*(B.lng+z.lng),J=f.latLngToECEF(H,K),ee=f.normalize([],J),te=f.normalize([],f.cross([],ee,[0,1,0])),ne=f.cross([],te,ee),Y=[te[0],te[1],te[2],0,ne[0],ne[1],ne[2],0,ee[0],ee[1],ee[2],0,0,0,0,1],le=[J,f.latLngToECEF(B.lat,B.lng),f.latLngToECEF(z.lat,B.lng),f.latLngToECEF(z.lat,z.lng),f.latLngToECEF(B.lat,z.lng),f.latLngToECEF(H,B.lng),f.latLngToECEF(H,z.lng),f.latLngToECEF(B.lat,K),f.latLngToECEF(z.lat,K)];let ce=f.Aabb.fromPoints(le.map(st=>[f.dot(te,st),f.dot(ne,st),f.dot(ee,st)]));const de=f.transformMat4([],ce.center,Y);0===f.squaredLength(de)&&f.set(de,0,0,1),f.normalize(de,de),f.scale$2(de,de,f.GLOBE_RADIUS),M.center=f.ecefToLatLng(de);const fe=M.getWorldToCameraMatrix(),ye=f.invert(new Float64Array(16),fe);ce=f.Aabb.applyTransform(ce,f.multiply([],fe,Y)),f.transformMat4(de,de,fe);const Ee=.5*(ce.max[2]-ce.min[2]),Ie=this._minimumAABBFrustumDistance(M,ce),Be=f.scale$2([],[0,0,1],Ee),Ue=f.add(Be,de,Be),bt=Ie+(0===M.pitch?0:f.distance(de,Ue)),Ae=M.globeCenterInViewSpace,it=f.sub([],de,[Ae[0],Ae[1],Ae[2]]);f.normalize(it,it),f.scale$2(it,it,bt);const Ze=f.add([],de,it);f.transformMat4(Ze,Ze,ye);const dt=f.earthRadius/f.GLOBE_RADIUS,Fe=f.length(Ze),Me=f.mercatorZfromAltitude(Math.max(Fe*dt-f.earthRadius,Number.EPSILON),0),He=Math.min(M.zoomFromMercatorZAdjusted(Me),P.maxZoom);return He>.5*(f.GLOBE_ZOOM_THRESHOLD_MIN+f.GLOBE_ZOOM_THRESHOLD_MAX)?(M.setProjection({name:"mercator"}),M.zoom=He,this._cameraForBounds(M,h,x,v,C,I)):{center:M.center,zoom:He,bearing:v,pitch:C}}queryTerrainElevation(c,h){const x=this.transform.elevation;return x?(h=f.extend({},{exaggerated:!0},h),x.getAtPoint(f.MercatorCoordinate.fromLngLat(c),null,h.exaggerated)):null}_cameraForBounds(c,h,x,v,C,I){if("globe"===c.projection.name)return this._cameraForBoundsOnGlobe(c,h,x,v,C,I);const M=c.clone(),P=this._extendCameraOptions(I),B=M.padding;M.bearing=v,M.pitch=C;const z=f.LngLat.convert(h),H=f.LngLat.convert(x),K=new f.LngLat(z.lng,H.lat),J=new f.LngLat(H.lng,z.lat),ee=M.project(z),te=M.project(H),ne=this.queryTerrainElevation(z),Y=this.queryTerrainElevation(H),le=this.queryTerrainElevation(K),ce=this.queryTerrainElevation(J),de=[[ee.x,ee.y,Math.min(ne||0,Y||0,le||0,ce||0)],[te.x,te.y,Math.max(ne||0,Y||0,le||0,ce||0)]];let fe=f.Aabb.fromPoints(de);const ye=M.getWorldToCameraMatrix(),Ee=f.invert(new Float64Array(16),ye);fe=f.Aabb.applyTransform(fe,ye);const Ie=f.sub([],fe.max,fe.min),Be=B.left||0,Ue=B.right||0,bt=B.bottom||0,Ae=B.top||0,{left:it,right:Ze,top:dt,bottom:Fe}=P.padding,Me=.5*(Be+Ue),He=.5*(Ae+bt),st=Math.min(M.scaleZoom(M.scale*Math.min((M.width-(Be+Ue+it+Ze))/Ie[0],(M.height-(bt+Ae+Fe+dt))/Ie[1])),P.maxZoom),pt=M.scale/M.zoomScale(st);fe=new f.Aabb([fe.min[0]-(it+Me)*pt,fe.min[1]-(Fe+He)*pt,fe.min[2]],[fe.max[0]+(Ze+Me)*pt,fe.max[1]+(dt+He)*pt,fe.max[2]]);const $t=.5*Ie[2],Bn=this._minimumAABBFrustumDistance(M,fe),ct=[0,0,1,0];f.transformMat4$1(ct,ct,ye),f.normalize$2(ct,ct);const Rt=f.scale$2([],ct,Bn+$t),Yt=f.add([],fe.center,Rt),Zn=("number"==typeof P.offset.x&&"number"==typeof P.offset.y?new f.pointGeometry(P.offset.x,P.offset.y):f.pointGeometry.convert(P.offset)).rotate(-f.degToRad(v));fe.center[0]-=Zn.x*pt,fe.center[1]+=Zn.y*pt,f.transformMat4(fe.center,fe.center,Ee),f.transformMat4(Yt,Yt,Ee);const en=[fe.center[0],fe.center[1],Yt[2]*M.pixelsPerMeter];f.scale$2(en,en,1/M.worldSize);const Ei=f.lngFromMercatorX(en[0]),Ci=f.latFromMercatorY(en[1]),Ti=Math.min(M._zoomFromMercatorZ(en[2]),P.maxZoom),ji=new f.LngLat(Ei,Ci);return M.mercatorFromTransition&&Ti<.5*(f.GLOBE_ZOOM_THRESHOLD_MIN+f.GLOBE_ZOOM_THRESHOLD_MAX)?(M.setProjection({name:"globe"}),M.zoom=Ti,this._cameraForBounds(M,h,x,v,C,I)):{center:ji,zoom:Ti,bearing:v,pitch:C}}fitBounds(c,h,x){const v=this.cameraForBounds(c,h);return this._fitInternal(v,h,x)}fitScreenCoordinates(c,h,x,v,C){const I=f.pointGeometry.convert(c),M=f.pointGeometry.convert(h),P=new f.pointGeometry(Math.min(I.x,M.x),Math.min(I.y,M.y)),B=new f.pointGeometry(Math.max(I.x,M.x),Math.max(I.y,M.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(I,M))return this;const z=this.transform.pointLocation3D(P),H=this.transform.pointLocation3D(B),K=this.transform.pointLocation3D(new f.pointGeometry(P.x,B.y)),J=this.transform.pointLocation3D(new f.pointGeometry(B.x,P.y)),ee=[Math.min(z.lng,H.lng,K.lng,J.lng),Math.min(z.lat,H.lat,K.lat,J.lat)],te=[Math.max(z.lng,H.lng,K.lng,J.lng),Math.max(z.lat,H.lat,K.lat,J.lat)],ne=v&&v.pitch?v.pitch:this.getPitch(),Y=this._cameraForBounds(this.transform,ee,te,x,ne,v);return this._fitInternal(Y,v,C)}_fitInternal(c,h,x){return c?(delete(h=f.extend(c,h)).padding,h.linear?this.easeTo(h,x):this.flyTo(h,x)):this}jumpTo(c,h){this.stop();const x=c.preloadOnly?this.transform.clone():this.transform;let v=!1,C=!1,I=!1;return"zoom"in c&&x.zoom!==+c.zoom&&(v=!0,x.zoom=+c.zoom),void 0!==c.center&&(x.center=f.LngLat.convert(c.center)),"bearing"in c&&x.bearing!==+c.bearing&&(C=!0,x.bearing=+c.bearing),"pitch"in c&&x.pitch!==+c.pitch&&(I=!0,x.pitch=+c.pitch),null==c.padding||x.isPaddingEqual(c.padding)||(x.padding=c.padding),c.preloadOnly?(this._preloadTiles(x),this):(this.fire(new f.Event("movestart",h)).fire(new f.Event("move",h)),v&&this.fire(new f.Event("zoomstart",h)).fire(new f.Event("zoom",h)).fire(new f.Event("zoomend",h)),C&&this.fire(new f.Event("rotatestart",h)).fire(new f.Event("rotate",h)).fire(new f.Event("rotateend",h)),I&&this.fire(new f.Event("pitchstart",h)).fire(new f.Event("pitch",h)).fire(new f.Event("pitchend",h)),this.fire(new f.Event("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||f.warnOnce(bf),this.transform.getFreeCameraOptions()}setFreeCameraOptions(c,h){const x=this.transform;if(!x.projection.supportsFreeCamera)return f.warnOnce(bf),this;this.stop();const v=x.zoom,C=x.pitch,I=x.bearing;x.setFreeCameraOptions(c);const M=v!==x.zoom,P=C!==x.pitch,B=I!==x.bearing;return this.fire(new f.Event("movestart",h)).fire(new f.Event("move",h)),M&&this.fire(new f.Event("zoomstart",h)).fire(new f.Event("zoom",h)).fire(new f.Event("zoomend",h)),B&&this.fire(new f.Event("rotatestart",h)).fire(new f.Event("rotate",h)).fire(new f.Event("rotateend",h)),P&&this.fire(new f.Event("pitchstart",h)).fire(new f.Event("pitch",h)).fire(new f.Event("pitchend",h)),this.fire(new f.Event("moveend",h)),this}easeTo(c,h){this._stop(!1,c.easeId),(!1===(c=f.extend({offset:[0,0],duration:500,easing:f.ease},c)).animate||!c.essential&&f.exported.prefersReducedMotion)&&(c.duration=0);const x=this.transform,v=this.getZoom(),C=this.getBearing(),I=this.getPitch(),M=this.getPadding(),P="zoom"in c?+c.zoom:v,B="bearing"in c?this._normalizeBearing(c.bearing,C):C,z="pitch"in c?+c.pitch:I,H="padding"in c?c.padding:x.padding,K=f.pointGeometry.convert(c.offset);let J,ee,te;if("globe"===x.projection.name){const Be=f.MercatorCoordinate.fromLngLat(x.center),Ue=K.rotate(-x.angle);Be.x+=Ue.x/x.worldSize,Be.y+=Ue.y/x.worldSize;const bt=Be.toLngLat(),Ae=f.LngLat.convert(c.center||bt);this._normalizeCenter(Ae),J=x.centerPoint.add(Ue),ee=new f.pointGeometry(Be.x,Be.y).mult(x.worldSize),te=new f.pointGeometry(f.mercatorXfromLng(Ae.lng),f.mercatorYfromLat(Ae.lat)).mult(x.worldSize).sub(ee)}else{J=x.centerPoint.add(K);const Be=x.pointLocation(J),Ue=f.LngLat.convert(c.center||Be);this._normalizeCenter(Ue),ee=x.project(Be),te=x.project(Ue).sub(ee)}const ne=x.zoomScale(P-v);let Y,le;c.around&&(Y=f.LngLat.convert(c.around),le=x.locationPoint(Y));const ce=this._zooming||P!==v,de=this._rotating||C!==B,fe=this._pitching||z!==I,ye=!x.isPaddingEqual(H),Ee=Be=>Ue=>{if(ce&&(Be.zoom=f.number(v,P,Ue)),de&&(Be.bearing=f.number(C,B,Ue)),fe&&(Be.pitch=f.number(I,z,Ue)),ye&&(Be.interpolatePadding(M,H,Ue),J=Be.centerPoint.add(K)),Y)Be.setLocationAtPoint(Y,le);else{const bt=Be.zoomScale(Be.zoom-v),Ae=P>v?Math.min(2,ne):Math.max(.5,ne),it=Math.pow(Ae,1-Ue),Ze=Be.unproject(ee.add(te.mult(Ue*it)).mult(bt));Be.setLocationAtPoint(Be.renderWorldCopies?Ze.wrap():Ze,J)}return c.preloadOnly||this._fireMoveEvents(h),Be};if(c.preloadOnly){const Be=this._emulate(Ee,c.duration,x);return this._preloadTiles(Be),this}const Ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ce,this._rotating=de,this._pitching=fe,this._padding=ye,this._easeId=c.easeId,this._prepareEase(h,c.noMoveStart,Ie),this._ease(Ee(x),Be=>{x.recenterOnTerrain(),this._afterEase(h,Be)},c),this}_prepareEase(c,h,x={}){this._moving=!0,this.transform.cameraElevationReference="sea",h||x.moving||this.fire(new f.Event("movestart",c)),this._zooming&&!x.zooming&&this.fire(new f.Event("zoomstart",c)),this._rotating&&!x.rotating&&this.fire(new f.Event("rotatestart",c)),this._pitching&&!x.pitching&&this.fire(new f.Event("pitchstart",c))}_fireMoveEvents(c){this.fire(new f.Event("move",c)),this._zooming&&this.fire(new f.Event("zoom",c)),this._rotating&&this.fire(new f.Event("rotate",c)),this._pitching&&this.fire(new f.Event("pitch",c))}_afterEase(c,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const x=this._zooming,v=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,x&&this.fire(new f.Event("zoomend",c)),v&&this.fire(new f.Event("rotateend",c)),C&&this.fire(new f.Event("pitchend",c)),this.fire(new f.Event("moveend",c))}flyTo(c,h){if(!c.essential&&f.exported.prefersReducedMotion){const st=f.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(st,h)}this.stop(),c=f.extend({offset:[0,0],speed:1.2,curve:1.42,easing:f.ease},c);const x=this.transform,v=this.getZoom(),C=this.getBearing(),I=this.getPitch(),M=this.getPadding(),P="zoom"in c?f.clamp(+c.zoom,x.minZoom,x.maxZoom):v,B="bearing"in c?this._normalizeBearing(c.bearing,C):C,z="pitch"in c?+c.pitch:I,H="padding"in c?c.padding:x.padding,K=x.zoomScale(P-v),J=f.pointGeometry.convert(c.offset);let ee=x.centerPoint.add(J);const te=x.pointLocation(ee),ne=f.LngLat.convert(c.center||te);this._normalizeCenter(ne);const Y=x.project(te),le=x.project(ne).sub(Y);let ce=c.curve;const de=Math.max(x.width,x.height),fe=de/K,ye=le.mag();if("minZoom"in c){const st=f.clamp(Math.min(c.minZoom,v,P),x.minZoom,x.maxZoom),pt=de/x.zoomScale(st-v);ce=Math.sqrt(pt/ye*2)}const Ee=ce*ce;function Ie(st){const pt=(fe*fe-de*de+(st?-1:1)*Ee*Ee*ye*ye)/(2*(st?fe:de)*Ee*ye);return Math.log(Math.sqrt(pt*pt+1)-pt)}function Be(st){return(Math.exp(st)-Math.exp(-st))/2}function Ue(st){return(Math.exp(st)+Math.exp(-st))/2}const bt=Ie(0);let Ae=function(st){return Ue(bt)/Ue(bt+ce*st)},it=function(st){return de*((Ue(bt)*(Be(pt=bt+ce*st)/Ue(pt))-Be(bt))/Ee)/ye;var pt},Ze=(Ie(1)-bt)/ce;if(Math.abs(ye)<1e-6||!isFinite(Ze)){if(Math.abs(de-fe)<1e-6)return this.easeTo(c,h);const st=fe<de?-1:1;Ze=Math.abs(Math.log(fe/de))/ce,it=function(){return 0},Ae=function(pt){return Math.exp(st*ce*pt)}}c.duration="duration"in c?+c.duration:1e3*Ze/("screenSpeed"in c?+c.screenSpeed/ce:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0);const dt=C!==B,Fe=z!==I,Me=!x.isPaddingEqual(H),He=st=>pt=>{const $t=pt*Ze,Bn=1/Ae($t);st.zoom=1===pt?P:v+st.scaleZoom(Bn),dt&&(st.bearing=f.number(C,B,pt)),Fe&&(st.pitch=f.number(I,z,pt)),Me&&(st.interpolatePadding(M,H,pt),ee=st.centerPoint.add(J));const ct=1===pt?ne:st.unproject(Y.add(le.mult(it($t))).mult(Bn));return st.setLocationAtPoint(st.renderWorldCopies?ct.wrap():ct,ee),st._updateCameraOnTerrain(),c.preloadOnly||this._fireMoveEvents(h),st};if(c.preloadOnly){const st=this._emulate(He,c.duration,x);return this._preloadTiles(st),this}return this._zooming=!0,this._rotating=dt,this._pitching=Fe,this._padding=Me,this._prepareEase(h,!1),this._ease(He(x),()=>this._afterEase(h),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const x=this._onEaseEnd;this._onEaseEnd=void 0,x.call(this,h)}if(!c){const x=this.handlers;x&&x.stop(!1)}return this}_ease(c,h,x){!1===x.animate||0===x.duration?(c(1),h()):(this._easeStart=f.exported.now(),this._easeOptions=x,this._onEaseFrame=c,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((f.exported.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,h){c=f.wrap(c,-180,180);const x=Math.abs(c-h);return Math.abs(c-360-h)<x&&(c-=360),Math.abs(c+360-h)<x&&(c+=360),c}_normalizeCenter(c){const h=this.transform;if(!h.renderWorldCopies||h.maxBounds)return;const x=c.lng-h.center.lng;c.lng+=x>180?-360:x<-180?360:0}_emulate(c,h,x){const v=Math.ceil(15*h/1e3),C=[],I=c(x.clone());for(let M=0;M<=v;M++){const P=I(M/v);C.push(P.clone())}return C}}class nh{constructor(c={}){this.options=c,f.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){const h=this.options&&this.options.compact;return this._map=c,this._container=qe("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=qe("button","mapboxgl-ctrl-attrib-button",this._container),qe("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=qe("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===h&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(c,h){const x=this._map._getUIString(`AttributionControl.${h}`);c.setAttribute("aria-label",x),c.removeAttribute("title"),c.firstElementChild&&c.firstElementChild.setAttribute("title",x)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||f.config.ACCESS_TOKEN}];if(c){const x=h.reduce((v,C,I)=>(C.value&&(v+=`${C.key}=${C.value}${I<h.length-1?"&":""}`),v),"?");c.href=`${f.config.FEEDBACK_URL}/${x}#${Kc(this._map,!0)}`,c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}}_updateData(c){!c||"metadata"!==c.sourceDataType&&"visibility"!==c.sourceDataType&&"style"!==c.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let c=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const h=this._map.style._sourceCaches;for(const v in h){const C=h[v];if(C.used){const I=C.getSource();I.attribution&&c.indexOf(I.attribution)<0&&c.push(I.attribution)}}c.sort((v,C)=>v.length-C.length),c=c.filter((v,C)=>{for(let I=C+1;I<c.length;I++)if(c[I].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=[...this.options.customAttribution,...c]:c.unshift(this.options.customAttribution));const x=c.join(" | ");x!==this._attribHTML&&(this._attribHTML=x,c.length?(this._innerContainer.innerHTML=x,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class vf{constructor(){f.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(c){this._map=c,this._container=qe("div","mapboxgl-ctrl");const h=qe("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(c){c&&"metadata"!==c.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const c=this._map.style._sourceCaches;if(0===Object.entries(c).length)return!0;for(const h in c){const x=c[h].getSource();if(x.hasOwnProperty("mapbox_logo")&&!x.mapbox_logo)return!1}return!0}_updateCompact(){const c=this._container.children;if(c.length){const h=c[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class ih{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const h=++this._id;return this._queue.push({callback:c,id:h,cancelled:!1}),h}remove(c){const h=this._currentlyRunning,x=h?this._queue.concat(h):this._queue;for(const v of x)if(v.id===c)return void(v.cancelled=!0)}run(c=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const x of h)if(!x.cancelled&&(x.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function wf(m,c,h){if(m=new f.LngLat(m.lng,m.lat),c){const x=new f.LngLat(m.lng-360,m.lat),v=new f.LngLat(m.lng+360,m.lat),C=360*Math.ceil(Math.abs(m.lng-h.center.lng)/360),I=h.locationPoint(m).distSqr(c),M=c.x<0||c.y<0||c.x>h.width||c.y>h.height;h.locationPoint(x).distSqr(c)<I&&(M||Math.abs(x.lng-h.center.lng)<C)?m=x:h.locationPoint(v).distSqr(c)<I&&(M||Math.abs(v.lng-h.center.lng)<C)&&(m=v)}for(;Math.abs(m.lng-h.center.lng)>180;){const x=h.locationPoint(m);if(x.x>=0&&x.y>=0&&x.x<=h.width&&x.y<=h.height)break;m.lng>h.center.lng?m.lng-=360:m.lng+=360}return m}const nd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Up extends f.Evented{constructor(c,h){if(super(),(c instanceof f.window.HTMLElement||h)&&(c=f.extend({element:c},h)),f.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=c&&c.occludedOpacity||.2,c&&c.element)this._element=c.element,this._offset=f.pointGeometry.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=qe("div");const v=41,C=27,I=wt("svg",{display:"block",height:v*this._scale+"px",width:C*this._scale+"px",viewBox:`0 0 ${C} ${v}`},this._element),M=wt("radialGradient",{id:"shadowGradient"},wt("defs",{},I));wt("stop",{offset:"10%","stop-opacity":.4},M),wt("stop",{offset:"100%","stop-opacity":.05},M),wt("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},I),wt("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},I),wt("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},I),wt("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},I),this._offset=f.pointGeometry.convert(c&&c.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",v=>{v.preventDefault()}),this._element.addEventListener("mousedown",v=>{v.preventDefault()});const x=this._element.classList;for(const v in nd)x.remove(`mapboxgl-marker-anchor-${v}`);x.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(c){return c===this._map||(this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._updateMoving),c.on("moveend",this._update),c.on("remove",this._clearFadeTimer),c._addMarker(this),this.setDraggable(this._draggable),this._update(),c.on("click",this._onMapClick)),this}remove(){const c=this._map;return c&&(c.off("click",this._onMapClick),c.off("move",this._updateMoving),c.off("moveend",this._update),c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler),c.off("mouseup",this._onUp),c.off("touchend",this._onUp),c.off("mousemove",this._onMove),c.off("touchmove",this._onMove),c.off("remove",this._clearFadeTimer),c._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=f.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(24.6+v)],"bottom-right":[-v,-1*(24.6+v)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=c,c._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(c){const h=c.code,x=c.charCode||c.keyCode;"Space"!==h&&"Enter"!==h&&32!==x&&13!==x||this.togglePopup()}_onMapClick(c){const h=c.originalEvent.target,x=this._element;this._popup&&(h===x||x.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?(c.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(c.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const c=this._map,h=this._pos;if(!c||!h)return!1;const x=c.unproject(h),v=c.getFreeCameraOptions();if(!v.position)return!1;const C=v.position.toLngLat();return C.distanceTo(x)<.9*C.distanceTo(this._lngLat)}_evaluateOpacity(){const c=this._map;if(!c)return;const h=this._pos;if(!h||h.x<0||h.x>c.transform.width||h.y<0||h.y>c.transform.height)return void this._clearFadeTimer();const x=c.unproject(h);let v;c._showingGlobe()&&f.isLngLatBehindGlobe(c.transform,this._lngLat)?v=0:(v=1-c._queryFogOpacity(x),c.transform._terrainEnabled()&&c.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const c=this._pos;if(!c||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${c.x}px,${c.y}px)\n            ${nd[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${h.x}px,${h.y}px)\n        `}_calculateXYTransform(){const c=this._pos,h=this._map,x=this.getPitchAlignment();if(!h||!c||"map"!==x)return"";if(!h._showingGlobe()){const P=h.getPitch();return P?`rotateX(${P}deg)`:""}const v=f.radToDeg(f.globeTiltAtLngLat(h.transform,this._lngLat)),C=c.sub(f.globeCenterToScreenPoint(h.transform)),I=Math.abs(C.x)+Math.abs(C.y);if(0===I)return"";const M=v/I;return`rotateX(${-C.y*M}deg) rotateY(${C.x*M}deg)`}_calculateZTransform(){const c=this._pos,h=this._map;if(!h||!c)return"";let x=0;const v=this.getRotationAlignment();if("map"===v)if(h._showingGlobe()){const C=h.project(new f.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),I=h.project(new f.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(C);x=f.radToDeg(Math.atan2(I.y,I.x))-90}else x=-h.getBearing();else if("horizon"===v){const C=f.smoothstep(4,6,h.getZoom()),I=f.globeCenterToScreenPoint(h.transform);I.y+=C*h.transform.height;const M=c.sub(I),P=f.radToDeg(Math.atan2(M.y,M.x));x=(P>90?P-270:P+90)*(1-C)}return x+=this._rotation,x?`rotateZ(${x}deg)`:""}_update(c){f.window.cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=wf(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat),!0===c?this._updateFrameId=f.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(c){return this._offset=f.pointGeometry.convert(c),this._update(),this}_onMove(c){const h=this._map;if(!h)return;const x=this._pointerdownPos,v=this._positionDelta;if(x&&v){if(!this._isDragging){const C=this._clickTolerance||h._clickTolerance;if(c.point.dist(x)<C)return;this._isDragging=!0}this._pos=c.point.sub(v),this._lngLat=h.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new f.Event("dragstart"))),this.fire(new f.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const c=this._map;c&&(c.off("mousemove",this._onMove),c.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new f.Event("dragend")),this._state="inactive"}_addDragHandler(c){const h=this._map,x=this._pos;h&&x&&this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(x),this._pointerdownPos=c.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(c){this._draggable=!!c;const h=this._map;return h&&(c?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(c){return this._occludedOpacity=c||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Fm={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},_a=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function id(m=new f.pointGeometry(0,0),c="bottom"){if("number"==typeof m){const h=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(c){case"top":return new f.pointGeometry(0,m);case"top-left":return new f.pointGeometry(h,h);case"top-right":return new f.pointGeometry(-h,h);case"bottom":return new f.pointGeometry(0,-m);case"bottom-left":return new f.pointGeometry(h,-h);case"bottom-right":return new f.pointGeometry(-h,-h);case"left":return new f.pointGeometry(m,0);case"right":return new f.pointGeometry(-m,0)}return new f.pointGeometry(0,0)}return m instanceof f.pointGeometry||Array.isArray(m)?f.pointGeometry.convert(m):f.pointGeometry.convert(m[c]||[0,0])}class oo{constructor(c){this.jumpTo(c)}getValue(c){if(c<=this._startTime)return this._start;if(c>=this._endTime)return this._end;const h=f.easeCubicInOut((c-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(c){return c>=this._startTime&&c<=this._endTime}jumpTo(c){this._startTime=-1/0,this._endTime=-1/0,this._start=c,this._end=c}easeTo(c,h,x){this._start=this.getValue(h),this._end=c,this._startTime=h,this._endTime=h+x}}const Hp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},lx={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},rh={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ef{constructor(c,h,x=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new yl({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,x&&(this.mousePitch=new Ju({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),f.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(c,h){this.mouseRotate.mousedown(c,h),this.mousePitch&&this.mousePitch.mousedown(c,h),Nt()}move(c,h){const x=this.map,v=this.mouseRotate.mousemoveWindow(c,h),C=v&&v.bearingDelta;if(C&&x.setBearing(x.getBearing()+C),this.mousePitch){const I=this.mousePitch.mousemoveWindow(c,h),M=I&&I.pitchDelta;M&&x.setPitch(x.getPitch()+M)}}off(){const c=this.element;c.removeEventListener("mousedown",this.mousedown),c.removeEventListener("touchstart",this.touchstart,{passive:!1}),c.removeEventListener("touchmove",this.touchmove),c.removeEventListener("touchend",this.touchend),c.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){yt(),f.window.removeEventListener("mousemove",this.mousemove),f.window.removeEventListener("mouseup",this.mouseup)}mousedown(c){this.down(f.extend({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),ft(this.element,c)),f.window.addEventListener("mousemove",this.mousemove),f.window.addEventListener("mouseup",this.mouseup)}mousemove(c){this.move(c,ft(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){1!==c.targetTouches.length?this.reset():(this._startPos=this._lastPos=me(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){1!==c.targetTouches.length?this.reset():(this._lastPos=me(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){0===c.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const oh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Nm={maxWidth:100,unit:"metric"};function cx(m,c,h){const x=sh(c),v=x/c,C={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[h];this._map._requestDomTask(()=>{this._container.style.width=m*v+"px",this._container.innerHTML=`${x}&nbsp;${C}`})}function sh(m){const c=Math.pow(10,`${Math.floor(m)}`.length-1);let h=m/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:h>=1?1:function(x){const v=Math.pow(10,Math.ceil(-Math.log(x)/Math.LN10));return Math.round(x*v)/v}(h),c*h}const Qc={version:f.version,supported:Jt,setRTLTextPlugin:f.setRTLTextPlugin,getRTLTextPluginStatus:f.getRTLTextPluginStatus,Map:class extends ax{constructor(m){if(f.LivePerformanceUtils.mark(f.PerformanceMarkers.create),null!=(m=f.extend({},lx,m)).minZoom&&null!=m.maxZoom&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=m.minPitch&&null!=m.maxPitch&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=m.minPitch&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=m.maxPitch&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&f.isSafariWithAntialiasingBug(f.window)&&(m.antialias=!1,f.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new St(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._useWebGL2=m.useWebGL2,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._optimizeForTerrain=m.optimizeForTerrain,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new ih,this._domRenderTaskQueue=new ih,this._controls=[],this._markers=[],this._popups=[],this._mapId=f.uniqueId(),this._locale=f.extend({},Hp,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new oo(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new f.RequestManager(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,"string"==typeof m.container){if(this._container=f.window.document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof f.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&f.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),f.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==f.window&&(f.window.addEventListener("online",this._onWindowOnline,!1),f.window.addEventListener("resize",this._onWindowResize,!1),f.window.addEventListener("orientationchange",this._onWindowResize,!1),f.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),f.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new rc(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),this._hash=m.hash&&new Ur("string"==typeof m.hash&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,f.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),m.attributionControl&&this.addControl(new nh({customAttribution:m.customAttribution})),this._logoControl=new vf,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update("style"===c.dataType),this.fire(new f.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new f.Event(`${c.dataType}dataloading`,c))})}_getMapId(){return this._mapId}addControl(m,c){if(void 0===c&&(c=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=m.onAdd(this);this._controls.push(m);const x=this._controlPositions[c];return-1!==c.indexOf("bottom")?x.insertBefore(h,x.firstChild):x.appendChild(h),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(m);return c>-1&&this._controls.splice(c,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const c=!this._moving;return c&&this.fire(new f.Event("movestart",m)).fire(new f.Event("move",m)),this.fire(new f.Event("resize",m)),c&&this.fire(new f.Event("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(f.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new f.Event("zoomstart")).fire(new f.Event("zoom")).fire(new f.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new f.Event("zoomstart")).fire(new f.Event("zoom")).fire(new f.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new f.Event("pitchstart")).fire(new f.Event("pitch")).fire(new f.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new f.Event("pitchstart")).fire(new f.Event("pitch")).fire(new f.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return"auto"===m?f.window.navigator.language:Array.isArray(m)?0===m.length?void 0:m.map(c=>"auto"===c?f.window.navigator.language:c):m}setLanguage(m){const c=this._parseLanguage(m);if(!this.style||c===this._language)return this;this._language=c,this.style._reloadSources();for(const h of this._controls)h._setLanguage&&h._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(m){return this._lazyInitEmptyStyle(),m?"string"==typeof m&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const m=this.transform,c=m.projection.name;let h;"globe"===c&&m.zoom>=f.GLOBE_ZOOM_THRESHOLD_MAX?(m.setMercatorFromTransition(),h=!0):"mercator"===c&&m.zoom<f.GLOBE_ZOOM_THRESHOLD_MAX&&(m.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,c){return this._updateProjection(m||c||{name:"mercator"})}_updateProjection(m){let c;if(c="globe"===m.name&&this.transform.zoom>=f.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),c){this.painter.clearBackgroundTiles();for(const h in this.style._sourceCaches)this.style._sourceCaches[h].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(m){return this.transform.locationPoint3D(f.LngLat.convert(m))}unproject(m){return this.transform.pointLocation3D(f.pointGeometry.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,c,h){if("mouseenter"===m||"mouseover"===m){let x=!1;const v=I=>{const M=c.filter(B=>this.getLayer(B)),P=M.length?this.queryRenderedFeatures(I.point,{layers:M}):[];P.length?x||(x=!0,h.call(this,new wn(m,this,I.originalEvent,{features:P}))):x=!1},C=()=>{x=!1};return{layers:new Set(c),listener:h,delegates:{mousemove:v,mouseout:C}}}if("mouseleave"===m||"mouseout"===m){let x=!1;const v=I=>{const M=c.filter(P=>this.getLayer(P));(M.length?this.queryRenderedFeatures(I.point,{layers:M}):[]).length?x=!0:x&&(x=!1,h.call(this,new wn(m,this,I.originalEvent)))},C=I=>{x&&(x=!1,h.call(this,new wn(m,this,I.originalEvent)))};return{layers:new Set(c),listener:h,delegates:{mousemove:v,mouseout:C}}}{const x=v=>{const C=c.filter(M=>this.getLayer(M)),I=C.length?this.queryRenderedFeatures(v.point,{layers:C}):[];I.length&&(v.features=I,h.call(this,v),delete v.features)};return{layers:new Set(c),listener:h,delegates:{[m]:x}}}}on(m,c,h){if(void 0===h)return super.on(m,c);Array.isArray(c)||(c=[c]);const x=this._createDelegatedListener(m,c,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(x);for(const v in x.delegates)this.on(v,x.delegates[v]);return this}once(m,c,h){if(void 0===h)return super.once(m,c);Array.isArray(c)||(c=[c]);const x=this._createDelegatedListener(m,c,h);for(const v in x.delegates)this.once(v,x.delegates[v]);return this}off(m,c,h){if(void 0===h)return super.off(m,c);c=new Set(Array.isArray(c)?c:[c]);const x=(C,I)=>{if(C.size!==I.size)return!1;for(const M of C)if(!I.has(M))return!1;return!0},v=this._delegatedListeners?this._delegatedListeners[m]:void 0;return v&&(C=>{for(let I=0;I<C.length;I++){const M=C[I];if(M.listener===h&&x(M.layers,c)){for(const P in M.delegates)this.off(P,M.delegates[P]);return C.splice(I,1),this}}})(v),this}queryRenderedFeatures(m,c){return this.style?(void 0!==c||void 0===m||m instanceof f.pointGeometry||Array.isArray(m)||(c=m,m=void 0),this.style.queryRenderedFeatures(m=m||[[0,0],[this.transform.width,this.transform.height]],c=c||{},this.transform)):[]}querySourceFeatures(m,c){return this.style.querySourceFeatures(m,c)}setStyle(m,c){return!1!==(c=f.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},c)).diff&&c.localIdeographFontFamily===this._localIdeographFontFamily&&c.localFontFamily===this._localFontFamily&&this.style&&m?(this._diffStyle(m,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._localFontFamily=c.localFontFamily,this._updateStyle(m,c))}_getUIString(m){const c=this._locale[m];if(null==c)throw new Error(`Missing UI string '${m}'`);return c}_updateStyle(m,c){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m&&(this.style=new Eo(this,c||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof m?this.style.loadURL(m):this.style.loadJSON(m)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Eo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,c){if("string"==typeof m){const h=this._requestManager.normalizeStyleURL(m),x=this._requestManager.transformRequest(h,f.ResourceType.Style);f.getJSON(x,(v,C)=>{v?this.fire(new f.ErrorEvent(v)):C&&this._updateDiff(C,c)})}else"object"==typeof m&&this._updateDiff(m,c)}_updateDiff(m,c){try{this.style.setState(m)&&this._update(!0)}catch(h){f.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(m,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(f.warnOnce("There is no style added to the map."),!1)}addSource(m,c){return this._lazyInitEmptyStyle(),this.style.addSource(m,c),this._update(!0)}isSourceLoaded(m){return!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){const m=this.style&&this.style._sourceCaches;for(const c in m){const h=m[c]._tiles;for(const x in h){const v=h[x];if("loaded"!==v.state&&"errored"!==v.state)return!1}}return!0}addSourceType(m,c,h){this._lazyInitEmptyStyle(),this.style.addSourceType(m,c,h)}removeSource(m){return this.style.removeSource(m),this._updateTerrain(),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,c,{pixelRatio:h=1,sdf:x=!1,stretchX:v,stretchY:C,content:I}={}){if(this._lazyInitEmptyStyle(),c instanceof f.window.HTMLImageElement||f.window.ImageBitmap&&c instanceof f.window.ImageBitmap){const{width:M,height:P,data:B}=f.exported.getImageData(c);this.style.addImage(m,{data:new f.RGBAImage({width:M,height:P},B),pixelRatio:h,stretchX:v,stretchY:C,content:I,sdf:x,version:0})}else if(void 0===c.width||void 0===c.height)this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:M,height:P}=c,B=c;this.style.addImage(m,{data:new f.RGBAImage({width:M,height:P},new Uint8Array(B.data)),pixelRatio:h,stretchX:v,stretchY:C,content:I,sdf:x,version:0,userImage:B}),B.onAdd&&B.onAdd(this,m)}}updateImage(m,c){const h=this.style.getImage(m);if(!h)return void this.fire(new f.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const x=c instanceof f.window.HTMLImageElement||f.window.ImageBitmap&&c instanceof f.window.ImageBitmap?f.exported.getImageData(c):c,{width:v,height:C}=x;void 0!==v&&void 0!==C?v===h.data.width&&C===h.data.height?(h.data.replace(x.data,!(c instanceof f.window.HTMLImageElement||f.window.ImageBitmap&&c instanceof f.window.ImageBitmap)),this.style.updateImage(m,h)):this.fire(new f.ErrorEvent(new Error(`The width and height of the updated image (${v}, ${C})\n                must be that same as the previous version of the image\n                (${h.data.width}, ${h.data.height})`))):this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new f.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,c){f.getImage(this._requestManager.transformRequest(m,f.ResourceType.Image),(h,x)=>{c(h,x instanceof f.window.HTMLImageElement?f.exported.getImageData(x):x)})}listImages(){return this.style.listImages()}addLayer(m,c){return this._lazyInitEmptyStyle(),this.style.addLayer(m,c),this._update(!0)}moveLayer(m,c){return this.style.moveLayer(m,c),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,c,h){return this.style.setLayerZoomRange(m,c,h),this._update(!0)}setFilter(m,c,h={}){return this.style.setFilter(m,c,h),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,c,h,x={}){return this.style.setPaintProperty(m,c,h,x),this._update(!0)}getPaintProperty(m,c){return this.style.getPaintProperty(m,c)}setLayoutProperty(m,c,h,x={}){return this.style.setLayoutProperty(m,c,h,x),this._update(!0)}getLayoutProperty(m,c){return this.style.getLayoutProperty(m,c)}setLight(m,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,c),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(f.LngLat.convert(m),this.transform):0}setFeatureState(m,c){return this.style.setFeatureState(m,c),this._update()}removeFeatureState(m,c){return this.style.removeFeatureState(m,c),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,c=this._container.getBoundingClientRect().height||300;let h,x,v,C=this._container;for(;C&&(!x||!v);){const I=f.window.getComputedStyle(C).transform;I&&"none"!==I&&(h=I.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&"0"!==h[0]&&"1"!==h[0]&&(x=h[0]),h[3]&&"0"!==h[3]&&"1"!==h[3]&&(v=h[3])),C=C.parentElement}this._containerWidth=x?Math.abs(m/x):m,this._containerHeight=v?Math.abs(c/v):c}_detectMissingCSS(){"rgb(250, 128, 114)"!==f.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&f.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=qe("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const c=this._canvasContainer=qe("div","mapboxgl-canvas-container",m);this._interactive&&c.classList.add("mapboxgl-interactive"),this._canvas=qe("canvas","mapboxgl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=qe("div","mapboxgl-control-container",m),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{x[v]=qe("div",`mapboxgl-ctrl-${v}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,c){const h=f.exported.devicePixelRatio||1;this._canvas.width=h*Math.ceil(m),this._canvas.height=h*Math.ceil(c),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${c}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const c=this._markers.indexOf(m);-1!==c&&this._markers.splice(c,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const c=this._popups.indexOf(m);-1!==c&&this._popups.splice(c,1)}_setupPainter(){const m=f.extend({},Jt.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._useWebGL2&&this._canvas.getContext("webgl2",m),h=c||this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);h?(this._useWebGL2&&!c&&f.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),f.storeAuthState(h,!0),this.painter=new lr(h,this.transform,!!c),this.on("data",x=>{"source"===x.dataType&&this.painter.setTileLoadedFlag(!0)}),f.exported$1.testSupport(h)):this.fire(new f.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new f.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new f.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let c;const h=this.painter.context.extTimerQuery,x=f.exported.now();if(this.listens("gpu-timing-frame")&&(c=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,c)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],f.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],f.window.performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const v=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const M=this.transform.zoom,P=this.transform.pitch,B=f.exported.now(),z=new f.EvaluationParameters(M,{now:B,fadeDuration:v,pitch:P,transition:this.style.getTransition()});this.style.update(z)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let C=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),C=this._updateAverageElevation(x),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):C=this._updateAverageElevation(x),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,v,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:v,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new f.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new f.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),c){const M=f.exported.now()-x;h.endQueryEXT(h.TIME_ELAPSED_EXT,c),setTimeout(()=>{const P=h.getQueryObjectEXT(c,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(c),this.fire(new f.Event("gpu-timing-frame",{cpuTime:M,gpuTime:P})),f.window.performance.mark("frame-gpu",{startTime:x,detail:{gpuTime:P}})},50)}if(this.listens("gpu-timing-layer")){const M=this.painter.collectGpuTimers();setTimeout(()=>{const P=this.painter.queryGpuTimers(M);this.fire(new f.Event("gpu-timing-layer",{layerTimes:P}))},50)}if(this.listens("gpu-timing-deferred-render")){const M=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const P=this.painter.queryGpuTimeDeferredRender(M);this.fire(new f.Event("gpu-timing-deferred-render",{gpuTime:P}))},50)}const I=this._sourcesDirty||this._styleDirty||this._placementDirty||C;if(I||this._repaint)this.triggerRepaint();else{const M=!this.isMoving()&&this.loaded();if(M&&(C=this._updateAverageElevation(x,!0)),C)this.triggerRepaint();else if(this._triggerFrame(!1),M&&(this.fire(new f.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const P=this._calculateSpeedIndex();this.fire(new f.Event("speedindexcompleted",{speedIndex:P})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||I||(this._fullyLoaded=!0,f.LivePerformanceUtils.mark(f.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&f.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const c of this._markers)m&&!this.getRenderWorldCopies()&&(c._lngLat=c._lngLat.wrap()),c._update();for(const c of this._popups)!m||this.getRenderWorldCopies()||c._trackPointer||(c._lngLat=c._lngLat.wrap()),c._update()}_updateAverageElevation(m,c=!1){const h=x=>(this.transform.averageElevation=x,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&h(0);if((c||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const x=this.transform.averageElevation;let v=this.transform.sampleAverageElevation(),C=!1;this.transform.elevation&&(C=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(v)?v=0:this._averageElevationLastSampledAt=m;const I=Math.abs(x-v);if(I>1){if(this._isInitialLoad||C)return this._averageElevation.jumpTo(v),h(v);this._averageElevation.easeTo(v,m,300)}else if(I>1e-4)return this._averageElevation.jumpTo(v),h(v)}return!!this._averageElevation.isEasing(m)&&h(this._averageElevation.getValue(m))}_authenticate(){f.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===f.AUTH_ERR_MSG||401===m.status)){const c=this.painter.context.gl;f.storeAuthState(c,!1),this._logoControl instanceof vf&&this._logoControl._updateLogo(),c&&c.clear(c.DEPTH_BUFFER_BIT|c.COLOR_BUFFER_BIT|c.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new f.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),f.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),c=this.painter.getCanvasCopiesAndTimestamps();c.timeStamps.push(performance.now());const h=this.painter.context.gl,x=h.createFramebuffer();function v(C){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,C,0);const I=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,I),I}return h.bindFramebuffer(h.FRAMEBUFFER,x),this._canvasPixelComparison(v(m),c.canvasCopies.map(v),c.timeStamps)}_canvasPixelComparison(m,c,h){let x=h[1]-h[0];const v=m.length/4;for(let C=0;C<c.length;C++){const I=c[C];let M=0;for(let P=0;P<I.length;P+=4)I[P]===m[P]&&I[P+1]===m[P+1]&&I[P+2]===m[P+2]&&I[P+3]===m[P+3]&&(M+=1);x+=(h[C+2]-h[C+1])*(1-M/v)}return x}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==f.window&&(f.window.removeEventListener("resize",this._onWindowResize,!1),f.window.removeEventListener("orientationchange",this._onWindowResize,!1),f.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),f.window.removeEventListener("online",this._onWindowOnline,!1),f.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),f.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new f.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=f.exported.frame(c=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(c)}))}_preloadTiles(m){const c=this.style?Object.values(this.style._sourceCaches):[];return f.asyncAll(c,(h,x)=>h._preloadTiles(m,x),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){"hidden"===f.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,m&&this._update())}_setCacheLimits(m,c){f.setCacheLimits(m,c)}get version(){return f.version}},NavigationControl:class{constructor(m){this.options=f.extend({},rh,m),this._container=qe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(f.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",c=>{this._map&&this._map.zoomIn({},{originalEvent:c})}),qe("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",c=>{this._map&&this._map.zoomOut({},{originalEvent:c})}),qe("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(f.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",c=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:c}):h.resetNorth({},{originalEvent:c}))}),this._compassIcon=qe("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const c=m.getZoom(),h=c===m.getMaxZoom(),x=c===m.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=c)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ef(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,c){const h=qe("button",m,this._container);return h.type="button",h.addEventListener("click",c),h}_setButtonTitle(m,c){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${c}`);m.setAttribute("aria-label",h),m.firstElementChild&&m.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends f.Evented{constructor(m){super(),this.options=f.extend({geolocation:f.window.navigator.geolocation},oh,m),f.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=jr(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=qe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const c=(h=!!this.options.geolocation)=>{this._supportsGeolocation=h,m(h)};void 0!==this._supportsGeolocation?m(this._supportsGeolocation):void 0!==f.window.navigator.permissions?f.window.navigator.permissions.query({name:"geolocation"}).then(h=>c("denied"!==h.state)).catch(()=>c()):c()}_isOutOfMapMaxBounds(m){const c=this._map.getMaxBounds(),h=m.coords;return!!c&&(h.longitude<c.getWest()||h.longitude>c.getEast()||h.latitude<c.getSouth()||h.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new f.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(m),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new f.Event("geolocate",m)),this._finish()}}_updateCamera(m){const c=new f.LngLat(m.coords.longitude,m.coords.latitude),h=m.coords.accuracy,x=this._map.getBearing(),v=f.extend({bearing:x},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(h),v,{geolocateSource:!0})}_updateMarker(m){if(m){const c=new f.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,c=f.mercatorZfromAltitude(1,m._center.lat)*m.worldSize,h=Math.ceil(2*this._accuracy*c);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(1===m.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===m.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new f.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=qe("button","mapboxgl-ctrl-geolocate",this._container),qe("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===m){f.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=qe("div","mapboxgl-user-location"),this._dotElement.appendChild(qe("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(qe("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Up({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=qe("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Up({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||"ACTIVE_LOCK"!==this._watchState||c.originalEvent&&"resize"===c.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new f.Event("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:!0===m.absolute&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return f.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new f.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new f.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new f.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{f.window.addEventListener("ondeviceorientationabsolute"in f.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==f.window.DeviceMotionEvent&&"function"==typeof f.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(c=>{"granted"===c&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),f.window.removeEventListener("deviceorientation",this._onDeviceOrientation),f.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:nh,ScaleControl:class{constructor(m){this.options=f.extend({},Nm,m),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=cx.bind(this)),f.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,c=this._map,h=c._containerHeight/2,x=c._containerWidth/2-m/2,v=c.unproject([x,h]),C=c.unproject([x+m,h]),I=v.distanceTo(C);if("imperial"===this.options.unit){const M=3.2808*I;M>5280?this._setScale(m,M/5280,"mile"):this._setScale(m,M,"foot")}else"nautical"===this.options.unit?this._setScale(m,I/1852,"nautical-mile"):I>=1e3?this._setScale(m,I/1e3,"kilometer"):this._setScale(m,I,"meter")}_setScale(m,c,h){const x=sh(c),v=x/c;this._map._requestDomTask(()=>{this._container.style.width=m*v+"px",this._container.innerHTML="nautical-mile"!==h?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:h}).format(x):`${x}&nbsp;nm`})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=qe("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof f.window.HTMLElement?this._container=m.container:f.warnOnce("Full screen control 'container' must be a DOM element.")),f.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in f.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in f.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=qe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",f.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,f.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!f.window.document.fullscreenEnabled&&!f.window.document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=qe("button","mapboxgl-ctrl-fullscreen",this._controlContainer);qe("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),f.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(f.window.document.fullscreenElement||f.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?f.window.document.exitFullscreen?f.window.document.exitFullscreen():f.window.document.webkitCancelFullScreen&&f.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends f.Evented{constructor(m){super(),this.options=f.extend(Object.create(Fm),m),f.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new f.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new f.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=f.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update();const c=this._map;return c&&(c.on("move",this._update),c.off("mousemove",this._onMouseEvent),c._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(f.window.document.createTextNode(m))}setHTML(m){const c=f.window.document.createDocumentFragment(),h=f.window.document.createElement("body");let x;for(h.innerHTML=m;x=h.firstChild,x;)c.appendChild(x);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let c=this._content;if(c)for(;c.hasChildNodes();)c.firstChild&&c.removeChild(c.firstChild);else c=this._content=qe("div","mapboxgl-popup-content",this._container||void 0);if(c.appendChild(m),this.options.closeButton){const h=this._closeButton=qe("button","mapboxgl-popup-close-button",c);h.type="button",h.setAttribute("aria-label","Close popup"),h.setAttribute("aria-hidden","true"),h.innerHTML="&#215;",h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let c;return this._classList.delete(m)?c=!1:(this._classList.add(m),c=!0),this._updateClassList(),c}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const c=this._map,h=this._container,x=this._pos;if(!c||!h||!x)return"bottom";const v=h.offsetWidth,C=h.offsetHeight,I=x.x<v/2,M=x.x>c.transform.width-v/2;if(x.y+m<C)return I?"top-left":M?"top-right":"top";if(x.y>c.transform.height-C){if(I)return"bottom-left";if(M)return"bottom-right"}return I?"left":M?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const c=[...this._classList];c.push("mapboxgl-popup"),this._anchor&&c.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&c.push("mapboxgl-popup-track-pointer"),m.className=c.join(" ")}_update(m){const c=this._map,h=this._content;if(!c||!this._lngLat&&!this._trackPointer||!h)return;let x=this._container;if(x||(x=this._container=qe("div","mapboxgl-popup",c.getContainer()),this._tip=qe("div","mapboxgl-popup-tip",x),x.appendChild(h)),this.options.maxWidth&&x.style.maxWidth!==this.options.maxWidth&&(x.style.maxWidth=this.options.maxWidth),c.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=wf(this._lngLat,this._pos,c.transform)),!this._trackPointer||m){const v=this._pos=this._trackPointer&&m?m:c.project(this._lngLat),C=id(this.options.offset),I=this._anchor=this._getAnchor(C.y),M=id(this.options.offset,I),P=v.add(M).round();c._requestDomTask(()=>{this._container&&I&&(this._container.style.transform=`${nd[I]} translate(${P.x}px,${P.y}px)`)})}if(!this._marker&&c._showingGlobe()){const v=f.isLngLatBehindGlobe(c.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(_a);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:Up,Style:Eo,LngLat:f.LngLat,LngLatBounds:f.LngLatBounds,Point:f.pointGeometry,MercatorCoordinate:f.MercatorCoordinate,FreeCameraOptions:N,Evented:f.Evented,config:f.config,prewarm:function(){Zt().acquire(tn)},clearPrewarmedResources:function(){const m=xt;m&&(m.isPreloaded()&&1===m.numActive()?(m.release(tn),xt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return f.config.ACCESS_TOKEN},set accessToken(m){f.config.ACCESS_TOKEN=m},get baseApiUrl(){return f.config.API_URL},set baseApiUrl(m){f.config.API_URL=m},get workerCount(){return Pt.workerCount},set workerCount(m){Pt.workerCount=m},get maxParallelImageRequests(){return f.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){f.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){f.clearTileCache(m)},workerUrl:"",workerClass:null,setNow:f.exported.setNow,restoreNow:f.exported.restoreNow};return Qc}),zt}()},946:(qr,Zi,_i)=>{var zt,Un,ii;window,Un=[_i(139),_i(99)],void 0!==(ii="function"==typeof(zt=function(Le,Jt){"use strict";var qt=Le.create("masonry");qt.compatOptions.fitWidth="isFitWidth";var Dt=qt.prototype;return Dt._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var qe=0;qe<this.cols;qe++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},Dt.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var qe=this.items[0],wt=qe&&qe.element;this.columnWidth=wt&&Jt(wt).outerWidth||this.containerWidth}var Ft=this.columnWidth+=this.gutter,an=this.containerWidth+this.gutter,ai=an/Ft,Nt=Ft-an%Ft;ai=Math[Nt&&Nt<1?"round":"floor"](ai),this.cols=Math.max(ai,1)},Dt.getContainerWidth=function(){var qe=this._getOption("fitWidth"),Ft=Jt(qe?this.element.parentNode:this.element);this.containerWidth=Ft&&Ft.innerWidth},Dt._getItemLayoutPosition=function(qe){qe.getSize();var wt=qe.size.outerWidth%this.columnWidth,an=Math[wt&&wt<1?"round":"ceil"](qe.size.outerWidth/this.columnWidth);an=Math.min(an,this.cols);for(var Nt=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](an,qe),yt={x:this.columnWidth*Nt.col,y:Nt.y},kn=Nt.y+qe.size.outerHeight,ln=an+Nt.col,ft=Nt.col;ft<ln;ft++)this.colYs[ft]=kn;return yt},Dt._getTopColPosition=function(qe){var wt=this._getTopColGroup(qe),Ft=Math.min.apply(Math,wt);return{col:wt.indexOf(Ft),y:Ft}},Dt._getTopColGroup=function(qe){if(qe<2)return this.colYs;for(var wt=[],Ft=this.cols+1-qe,an=0;an<Ft;an++)wt[an]=this._getColGroupY(an,qe);return wt},Dt._getColGroupY=function(qe,wt){if(wt<2)return this.colYs[qe];var Ft=this.colYs.slice(qe,qe+wt);return Math.max.apply(Math,Ft)},Dt._getHorizontalColPosition=function(qe,wt){var Ft=this.horizontalColIndex%this.cols;return Ft=qe>1&&Ft+qe>this.cols?0:Ft,this.horizontalColIndex=wt.size.outerWidth&&wt.size.outerHeight?Ft+qe:this.horizontalColIndex,{col:Ft,y:this._getColGroupY(Ft,qe)}},Dt._manageStamp=function(qe){var wt=Jt(qe),Ft=this._getElementOffset(qe),ai=this._getOption("originLeft")?Ft.left:Ft.right,Nt=ai+wt.outerWidth,yt=Math.floor(ai/this.columnWidth);yt=Math.max(0,yt);var kn=Math.floor(Nt/this.columnWidth);kn-=Nt%this.columnWidth?0:1,kn=Math.min(this.cols-1,kn);for(var ft=(this._getOption("originTop")?Ft.top:Ft.bottom)+wt.outerHeight,me=yt;me<=kn;me++)this.colYs[me]=Math.max(ft,this.colYs[me])},Dt._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var qe={height:this.maxY};return this._getOption("fitWidth")&&(qe.width=this._getContainerFitWidth()),qe},Dt._getContainerFitWidth=function(){for(var qe=0,wt=this.cols;--wt&&0===this.colYs[wt];)qe++;return(this.cols-qe)*this.columnWidth-this.gutter},Dt.needsResizeLayout=function(){var qe=this.containerWidth;return this.getContainerWidth(),qe!=this.containerWidth},qt})?zt.apply(Zi,Un):zt)&&(qr.exports=ii)},353:(qr,Zi,_i)=>{var zt,Un,ii;window,Un=[_i(507),_i(99)],void 0!==(ii="function"==typeof(zt=function(Le,Jt){"use strict";var Dt=document.documentElement.style,qe="string"==typeof Dt.transition?"transition":"WebkitTransition",wt="string"==typeof Dt.transform?"transform":"WebkitTransform",Ft={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[qe],an={transform:wt,transition:qe,transitionDuration:qe+"Duration",transitionProperty:qe+"Property",transitionDelay:qe+"Delay"};function ai(me,De){me&&(this.element=me,this.layout=De,this.position={x:0,y:0},this._create())}var Nt=ai.prototype=Object.create(Le.prototype);Nt.constructor=ai,Nt._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},Nt.handleEvent=function(me){var De="on"+me.type;this[De]&&this[De](me)},Nt.getSize=function(){this.size=Jt(this.element)},Nt.css=function(me){var De=this.element.style;for(var at in me)De[an[at]||at]=me[at]},Nt.getPosition=function(){var me=getComputedStyle(this.element),De=this.layout._getOption("originLeft"),at=this.layout._getOption("originTop"),Et=me[De?"left":"right"],En=me[at?"top":"bottom"],Mi=parseFloat(Et),Ge=parseFloat(En),Ji=this.layout.size;-1!=Et.indexOf("%")&&(Mi=Mi/100*Ji.width),-1!=En.indexOf("%")&&(Ge=Ge/100*Ji.height),Mi=isNaN(Mi)?0:Mi,Ge=isNaN(Ge)?0:Ge,Ge-=at?Ji.paddingTop:Ji.paddingBottom,this.position.x=Mi-=De?Ji.paddingLeft:Ji.paddingRight,this.position.y=Ge},Nt.layoutPosition=function(){var me=this.layout.size,De={},at=this.layout._getOption("originLeft"),Et=this.layout._getOption("originTop"),Ge=at?"right":"left";De[at?"left":"right"]=this.getXValue(this.position.x+me[at?"paddingLeft":"paddingRight"]),De[Ge]="";var rr=Et?"bottom":"top";De[Et?"top":"bottom"]=this.getYValue(this.position.y+me[Et?"paddingTop":"paddingBottom"]),De[rr]="",this.css(De),this.emitEvent("layout",[this])},Nt.getXValue=function(me){var De=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!De?me/this.layout.size.width*100+"%":me+"px"},Nt.getYValue=function(me){var De=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&De?me/this.layout.size.height*100+"%":me+"px"},Nt._transitionTo=function(me,De){this.getPosition();var at=this.position.x,Et=this.position.y,En=me==this.position.x&&De==this.position.y;if(this.setPosition(me,De),!En||this.isTransitioning){var Ji={};Ji.transform=this.getTranslate(me-at,De-Et),this.transition({to:Ji,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},Nt.getTranslate=function(me,De){return"translate3d("+(me=this.layout._getOption("originLeft")?me:-me)+"px, "+(De=this.layout._getOption("originTop")?De:-De)+"px, 0)"},Nt.goTo=function(me,De){this.setPosition(me,De),this.layoutPosition()},Nt.moveTo=Nt._transitionTo,Nt.setPosition=function(me,De){this.position.x=parseFloat(me),this.position.y=parseFloat(De)},Nt._nonTransition=function(me){for(var De in this.css(me.to),me.isCleaning&&this._removeStyles(me.to),me.onTransitionEnd)me.onTransitionEnd[De].call(this)},Nt.transition=function(me){if(parseFloat(this.layout.options.transitionDuration)){var De=this._transn;for(var at in me.onTransitionEnd)De.onEnd[at]=me.onTransitionEnd[at];for(at in me.to)De.ingProperties[at]=!0,me.isCleaning&&(De.clean[at]=!0);me.from&&this.css(me.from),this.enableTransition(me.to),this.css(me.to),this.isTransitioning=!0}else this._nonTransition(me)};var kn="opacity,"+function yt(me){return me.replace(/([A-Z])/g,function(De){return"-"+De.toLowerCase()})}(wt);Nt.enableTransition=function(){if(!this.isTransitioning){var me=this.layout.options.transitionDuration;this.css({transitionProperty:kn,transitionDuration:me="number"==typeof me?me+"ms":me,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(Ft,this,!1)}},Nt.onwebkitTransitionEnd=function(me){this.ontransitionend(me)},Nt.onotransitionend=function(me){this.ontransitionend(me)};var ln={"-webkit-transform":"transform"};Nt.ontransitionend=function(me){if(me.target===this.element){var De=this._transn,at=ln[me.propertyName]||me.propertyName;delete De.ingProperties[at],function qt(me){for(var De in me)return!1;return!0}(De.ingProperties)&&this.disableTransition(),at in De.clean&&(this.element.style[me.propertyName]="",delete De.clean[at]),at in De.onEnd&&(De.onEnd[at].call(this),delete De.onEnd[at]),this.emitEvent("transitionEnd",[this])}},Nt.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(Ft,this,!1),this.isTransitioning=!1},Nt._removeStyles=function(me){var De={};for(var at in me)De[at]="";this.css(De)};var ft={transitionProperty:"",transitionDuration:"",transitionDelay:""};return Nt.removeTransitionStyles=function(){this.css(ft)},Nt.stagger=function(me){me=isNaN(me)?0:me,this.staggerDelay=me+"ms"},Nt.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},Nt.remove=function(){qe&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},Nt.reveal=function(){delete this.isHidden,this.css({display:""});var me=this.layout.options,De={};De[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:me.hiddenStyle,to:me.visibleStyle,isCleaning:!0,onTransitionEnd:De})},Nt.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},Nt.getHideRevealTransitionEndProperty=function(me){var De=this.layout.options[me];if(De.opacity)return"opacity";for(var at in De)return at},Nt.hide=function(){this.isHidden=!0,this.css({display:""});var me=this.layout.options,De={};De[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:me.visibleStyle,to:me.hiddenStyle,isCleaning:!0,onTransitionEnd:De})},Nt.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},Nt.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},ai})?zt.apply(Zi,Un):zt)&&(qr.exports=ii)},139:(qr,Zi,_i)=>{var zt,Un;!function(ii,f){"use strict";zt=[_i(507),_i(99),_i(771),_i(353)],Un=function(Le,Jt,qt,Dt){return function(f,Le,Jt,qt,Dt){var qe=f.console,wt=f.jQuery,Ft=function(){},an=0,ai={};function Nt(me,De){var at=qt.getQueryElement(me);if(at){this.element=at,wt&&(this.$element=wt(this.element)),this.options=qt.extend({},this.constructor.defaults),this.option(De);var Et=++an;this.element.outlayerGUID=Et,ai[Et]=this,this._create(),this._getOption("initLayout")&&this.layout()}else qe&&qe.error("Bad element for "+this.constructor.namespace+": "+(at||me))}Nt.namespace="outlayer",Nt.Item=Dt,Nt.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var yt=Nt.prototype;function kn(me){function De(){me.apply(this,arguments)}return(De.prototype=Object.create(me.prototype)).constructor=De,De}qt.extend(yt,Le.prototype),yt.option=function(me){qt.extend(this.options,me)},yt._getOption=function(me){var De=this.constructor.compatOptions[me];return De&&void 0!==this.options[De]?this.options[De]:this.options[me]},Nt.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},yt._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),qt.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},yt.reloadItems=function(){this.items=this._itemize(this.element.children)},yt._itemize=function(me){for(var De=this._filterFindItemElements(me),at=this.constructor.Item,Et=[],En=0;En<De.length;En++){var Ge=new at(De[En],this);Et.push(Ge)}return Et},yt._filterFindItemElements=function(me){return qt.filterFindElements(me,this.options.itemSelector)},yt.getItemElements=function(){return this.items.map(function(me){return me.element})},yt.layout=function(){this._resetLayout(),this._manageStamps();var me=this._getOption("layoutInstant");this.layoutItems(this.items,void 0!==me?me:!this._isLayoutInited),this._isLayoutInited=!0},yt._init=yt.layout,yt._resetLayout=function(){this.getSize()},yt.getSize=function(){this.size=Jt(this.element)},yt._getMeasurement=function(me,De){var Et,at=this.options[me];at?("string"==typeof at?Et=this.element.querySelector(at):at instanceof HTMLElement&&(Et=at),this[me]=Et?Jt(Et)[De]:at):this[me]=0},yt.layoutItems=function(me,De){me=this._getItemsForLayout(me),this._layoutItems(me,De),this._postLayout()},yt._getItemsForLayout=function(me){return me.filter(function(De){return!De.isIgnored})},yt._layoutItems=function(me,De){if(this._emitCompleteOnItems("layout",me),me&&me.length){var at=[];me.forEach(function(Et){var En=this._getItemLayoutPosition(Et);En.item=Et,En.isInstant=De||Et.isLayoutInstant,at.push(En)},this),this._processLayoutQueue(at)}},yt._getItemLayoutPosition=function(){return{x:0,y:0}},yt._processLayoutQueue=function(me){this.updateStagger(),me.forEach(function(De,at){this._positionItem(De.item,De.x,De.y,De.isInstant,at)},this)},yt.updateStagger=function(){var me=this.options.stagger;if(null!=me)return this.stagger=function ft(me){if("number"==typeof me)return me;var De=me.match(/(^\d*\.?\d*)(\w*)/),at=De&&De[1],Et=De&&De[2];return at.length?(at=parseFloat(at))*(ln[Et]||1):0}(me),this.stagger;this.stagger=0},yt._positionItem=function(me,De,at,Et,En){Et?me.goTo(De,at):(me.stagger(En*this.stagger),me.moveTo(De,at))},yt._postLayout=function(){this.resizeContainer()},yt.resizeContainer=function(){if(this._getOption("resizeContainer")){var De=this._getContainerSize();De&&(this._setContainerMeasure(De.width,!0),this._setContainerMeasure(De.height,!1))}},yt._getContainerSize=Ft,yt._setContainerMeasure=function(me,De){if(void 0!==me){var at=this.size;at.isBorderBox&&(me+=De?at.paddingLeft+at.paddingRight+at.borderLeftWidth+at.borderRightWidth:at.paddingBottom+at.paddingTop+at.borderTopWidth+at.borderBottomWidth),me=Math.max(me,0),this.element.style[De?"width":"height"]=me+"px"}},yt._emitCompleteOnItems=function(me,De){var at=this;function Et(){at.dispatchEvent(me+"Complete",null,[De])}var En=De.length;if(De&&En){var Mi=0;De.forEach(function(Ji){Ji.once(me,Ge)})}else Et();function Ge(){++Mi==En&&Et()}},yt.dispatchEvent=function(me,De,at){var Et=De?[De].concat(at):at;if(this.emitEvent(me,Et),wt)if(this.$element=this.$element||wt(this.element),De){var En=wt.Event(De);En.type=me,this.$element.trigger(En,at)}else this.$element.trigger(me,at)},yt.ignore=function(me){var De=this.getItem(me);De&&(De.isIgnored=!0)},yt.unignore=function(me){var De=this.getItem(me);De&&delete De.isIgnored},yt.stamp=function(me){(me=this._find(me))&&(this.stamps=this.stamps.concat(me),me.forEach(this.ignore,this))},yt.unstamp=function(me){(me=this._find(me))&&me.forEach(function(De){qt.removeFrom(this.stamps,De),this.unignore(De)},this)},yt._find=function(me){if(me)return"string"==typeof me&&(me=this.element.querySelectorAll(me)),qt.makeArray(me)},yt._manageStamps=function(){!this.stamps||!this.stamps.length||(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},yt._getBoundingRect=function(){var me=this.element.getBoundingClientRect(),De=this.size;this._boundingRect={left:me.left+De.paddingLeft+De.borderLeftWidth,top:me.top+De.paddingTop+De.borderTopWidth,right:me.right-(De.paddingRight+De.borderRightWidth),bottom:me.bottom-(De.paddingBottom+De.borderBottomWidth)}},yt._manageStamp=Ft,yt._getElementOffset=function(me){var De=me.getBoundingClientRect(),at=this._boundingRect,Et=Jt(me);return{left:De.left-at.left-Et.marginLeft,top:De.top-at.top-Et.marginTop,right:at.right-De.right-Et.marginRight,bottom:at.bottom-De.bottom-Et.marginBottom}},yt.handleEvent=qt.handleEvent,yt.bindResize=function(){f.addEventListener("resize",this),this.isResizeBound=!0},yt.unbindResize=function(){f.removeEventListener("resize",this),this.isResizeBound=!1},yt.onresize=function(){this.resize()},qt.debounceMethod(Nt,"onresize",100),yt.resize=function(){!this.isResizeBound||!this.needsResizeLayout()||this.layout()},yt.needsResizeLayout=function(){var me=Jt(this.element);return this.size&&me&&me.innerWidth!==this.size.innerWidth},yt.addItems=function(me){var De=this._itemize(me);return De.length&&(this.items=this.items.concat(De)),De},yt.appended=function(me){var De=this.addItems(me);De.length&&(this.layoutItems(De,!0),this.reveal(De))},yt.prepended=function(me){var De=this._itemize(me);if(De.length){var at=this.items.slice(0);this.items=De.concat(at),this._resetLayout(),this._manageStamps(),this.layoutItems(De,!0),this.reveal(De),this.layoutItems(at)}},yt.reveal=function(me){if(this._emitCompleteOnItems("reveal",me),me&&me.length){var De=this.updateStagger();me.forEach(function(at,Et){at.stagger(Et*De),at.reveal()})}},yt.hide=function(me){if(this._emitCompleteOnItems("hide",me),me&&me.length){var De=this.updateStagger();me.forEach(function(at,Et){at.stagger(Et*De),at.hide()})}},yt.revealItemElements=function(me){var De=this.getItems(me);this.reveal(De)},yt.hideItemElements=function(me){var De=this.getItems(me);this.hide(De)},yt.getItem=function(me){for(var De=0;De<this.items.length;De++){var at=this.items[De];if(at.element==me)return at}},yt.getItems=function(me){me=qt.makeArray(me);var De=[];return me.forEach(function(at){var Et=this.getItem(at);Et&&De.push(Et)},this),De},yt.remove=function(me){var De=this.getItems(me);this._emitCompleteOnItems("remove",De),De&&De.length&&De.forEach(function(at){at.remove(),qt.removeFrom(this.items,at)},this)},yt.destroy=function(){var me=this.element.style;me.height="",me.position="",me.width="",this.items.forEach(function(at){at.destroy()}),this.unbindResize(),delete ai[this.element.outlayerGUID],delete this.element.outlayerGUID,wt&&wt.removeData(this.element,this.constructor.namespace)},Nt.data=function(me){var De=(me=qt.getQueryElement(me))&&me.outlayerGUID;return De&&ai[De]},Nt.create=function(me,De){var at=kn(Nt);return at.defaults=qt.extend({},Nt.defaults),qt.extend(at.defaults,De),at.compatOptions=qt.extend({},Nt.compatOptions),at.namespace=me,at.data=Nt.data,at.Item=kn(Dt),qt.htmlInit(at,me),wt&&wt.bridget&&wt.bridget(me,at),at};var ln={ms:1,s:1e3};return Nt.Item=Dt,Nt}(ii,Le,Jt,qt,Dt)}.apply(Zi,zt),void 0!==Un&&(qr.exports=Un)}(window)},519:function(qr){qr.exports=function(){"use strict";const Zi="SweetAlert2:",zt=F=>F.charAt(0).toUpperCase()+F.slice(1),Un=F=>Array.prototype.slice.call(F),ii=F=>{console.warn("".concat(Zi," ").concat("object"==typeof F?F.join(" "):F))},f=F=>{console.error("".concat(Zi," ").concat(F))},Le=[],qt=(F,N)=>{(F=>{Le.includes(F)||(Le.push(F),ii(F))})('"'.concat(F,'" is deprecated and will be removed in the next major release. Please use "').concat(N,'" instead.'))},Dt=F=>"function"==typeof F?F():F,qe=F=>F&&"function"==typeof F.toPromise,wt=F=>qe(F)?F.toPromise():Promise.resolve(F),Ft=F=>F&&Promise.resolve(F)===F,an={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},ai=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Nt={},yt=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],kn=F=>Object.prototype.hasOwnProperty.call(an,F),ln=F=>-1!==ai.indexOf(F),ft=F=>Nt[F],me=F=>{kn(F)||ii('Unknown parameter "'.concat(F,'"'))},De=F=>{yt.includes(F)&&ii('The parameter "'.concat(F,'" is incompatible with toasts'))},at=F=>{ft(F)&&qt(F,ft(F))},Mi=F=>{const N={};for(const W in F)N[F[W]]="swal2-"+F[W];return N},Ge=Mi(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),Ji=Mi(["success","warning","info","question","error"]),er=()=>document.body.querySelector(".".concat(Ge.container)),yn=F=>{const N=er();return N?N.querySelector(F):null},rr=F=>yn(".".concat(F)),In=()=>rr(Ge.popup),Xo=()=>rr(Ge.icon),Vs=()=>rr(Ge.title),bn=()=>rr(Ge["html-container"]),js=()=>rr(Ge.image),cl=()=>rr(Ge["progress-steps"]),Ko=()=>rr(Ge["validation-message"]),wr=()=>yn(".".concat(Ge.actions," .").concat(Ge.confirm)),Gn=()=>yn(".".concat(Ge.actions," .").concat(Ge.deny)),Yi=()=>yn(".".concat(Ge.loader)),ho=()=>yn(".".concat(Ge.actions," .").concat(Ge.cancel)),mi=()=>rr(Ge.actions),Qn=()=>rr(Ge.footer),ul=()=>rr(Ge["timer-progress-bar"]),Gt=()=>rr(Ge.close),Jn=()=>{const F=Un(In().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((W,ge)=>{const tt=parseInt(W.getAttribute("tabindex")),Wt=parseInt(ge.getAttribute("tabindex"));return tt>Wt?1:tt<Wt?-1:0}),N=Un(In().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(W=>"-1"!==W.getAttribute("tabindex"));return(F=>{const N=[];for(let W=0;W<F.length;W++)-1===N.indexOf(F[W])&&N.push(F[W]);return N})(F.concat(N)).filter(W=>Er(W))},bo=()=>Ro(document.body,Ge.shown)&&!Ro(document.body,Ge["toast-shown"])&&!Ro(document.body,Ge["no-backdrop"]),Mo=()=>In()&&Ro(In(),Ge.toast),ko={previousBodyPadding:null},Lr=(F,N)=>{if(F.textContent="",N){const ge=(new DOMParser).parseFromString(N,"text/html");Un(ge.querySelector("head").childNodes).forEach(tt=>{F.appendChild(tt)}),Un(ge.querySelector("body").childNodes).forEach(tt=>{F.appendChild(tt)})}},Ro=(F,N)=>{if(!N)return!1;const W=N.split(/\s+/);for(let ge=0;ge<W.length;ge++)if(!F.classList.contains(W[ge]))return!1;return!0},mr=(F,N,W)=>{if(((F,N)=>{Un(F.classList).forEach(W=>{!Object.values(Ge).includes(W)&&!Object.values(Ji).includes(W)&&!Object.values(N.showClass).includes(W)&&F.classList.remove(W)})})(F,N),N.customClass&&N.customClass[W]){if("string"!=typeof N.customClass[W]&&!N.customClass[W].forEach)return ii("Invalid type of customClass.".concat(W,'! Expected string or iterable object, got "').concat(typeof N.customClass[W],'"'));Wn(F,N.customClass[W])}},hs=(F,N)=>{if(!N)return null;switch(N){case"select":case"textarea":case"file":return F.querySelector(".".concat(Ge.popup," > .").concat(Ge[N]));case"checkbox":return F.querySelector(".".concat(Ge.popup," > .").concat(Ge.checkbox," input"));case"radio":return F.querySelector(".".concat(Ge.popup," > .").concat(Ge.radio," input:checked"))||F.querySelector(".".concat(Ge.popup," > .").concat(Ge.radio," input:first-child"));case"range":return F.querySelector(".".concat(Ge.popup," > .").concat(Ge.range," input"));default:return F.querySelector(".".concat(Ge.popup," > .").concat(Ge.input))}},Ma=F=>{if(F.focus(),"file"!==F.type){const N=F.value;F.value="",F.value=N}},dl=(F,N,W)=>{!F||!N||("string"==typeof N&&(N=N.split(/\s+/).filter(Boolean)),N.forEach(ge=>{Array.isArray(F)?F.forEach(tt=>{W?tt.classList.add(ge):tt.classList.remove(ge)}):W?F.classList.add(ge):F.classList.remove(ge)}))},Wn=(F,N)=>{dl(F,N,!0)},ro=(F,N)=>{dl(F,N,!1)},vo=(F,N)=>{const W=Un(F.childNodes);for(let ge=0;ge<W.length;ge++)if(Ro(W[ge],N))return W[ge]},Is=(F,N,W)=>{W==="".concat(parseInt(W))&&(W=parseInt(W)),W||0===parseInt(W)?F.style[N]="number"==typeof W?"".concat(W,"px"):W:F.style.removeProperty(N)},fr=function(F){F.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},Vi=F=>{F.style.display="none"},Ul=(F,N,W,ge)=>{const tt=F.querySelector(N);tt&&(tt.style[W]=ge)},Zr=(F,N,W)=>{N?fr(F,W):Vi(F)},Er=F=>!(!F||!(F.offsetWidth||F.offsetHeight||F.getClientRects().length)),ka=F=>F.scrollHeight>F.clientHeight,hl=F=>{const N=window.getComputedStyle(F),W=parseFloat(N.getPropertyValue("animation-duration")||"0"),ge=parseFloat(N.getPropertyValue("transition-duration")||"0");return W>0||ge>0},ua=function(F){let N=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const W=ul();Er(W)&&(N&&(W.style.transition="none",W.style.width="100%"),setTimeout(()=>{W.style.transition="width ".concat(F/1e3,"s linear"),W.style.width="0%"},10))},Ra=()=>typeof window>"u"||typeof document>"u",Dn={},Ud=F=>new Promise(N=>{if(!F)return N();const W=window.scrollX,ge=window.scrollY;Dn.restoreFocusTimeout=setTimeout(()=>{Dn.previousActiveElement&&Dn.previousActiveElement.focus?(Dn.previousActiveElement.focus(),Dn.previousActiveElement=null):document.body&&document.body.focus(),N()},100),window.scrollTo(W,ge)}),Pa='\n <div aria-labelledby="'.concat(Ge.title,'" aria-describedby="').concat(Ge["html-container"],'" class="').concat(Ge.popup,'" tabindex="-1">\n   <button type="button" class="').concat(Ge.close,'"></button>\n   <ul class="').concat(Ge["progress-steps"],'"></ul>\n   <div class="').concat(Ge.icon,'"></div>\n   <img class="').concat(Ge.image,'" />\n   <h2 class="').concat(Ge.title,'" id="').concat(Ge.title,'"></h2>\n   <div class="').concat(Ge["html-container"],'" id="').concat(Ge["html-container"],'"></div>\n   <input class="').concat(Ge.input,'" />\n   <input type="file" class="').concat(Ge.file,'" />\n   <div class="').concat(Ge.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(Ge.select,'"></select>\n   <div class="').concat(Ge.radio,'"></div>\n   <label for="').concat(Ge.checkbox,'" class="').concat(Ge.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(Ge.label,'"></span>\n   </label>\n   <textarea class="').concat(Ge.textarea,'"></textarea>\n   <div class="').concat(Ge["validation-message"],'" id="').concat(Ge["validation-message"],'"></div>\n   <div class="').concat(Ge.actions,'">\n     <div class="').concat(Ge.loader,'"></div>\n     <button type="button" class="').concat(Ge.confirm,'"></button>\n     <button type="button" class="').concat(Ge.deny,'"></button>\n     <button type="button" class="').concat(Ge.cancel,'"></button>\n   </div>\n   <div class="').concat(Ge.footer,'"></div>\n   <div class="').concat(Ge["timer-progress-bar-container"],'">\n     <div class="').concat(Ge["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Cr=()=>{Dn.currentInstance.resetValidationMessage()},$=F=>{const N=(()=>{const F=er();return!!F&&(F.remove(),ro([document.documentElement,document.body],[Ge["no-backdrop"],Ge["toast-shown"],Ge["has-column"]]),!0)})();if(Ra())return void f("SweetAlert2 requires document to initialize");const W=document.createElement("div");W.className=Ge.container,N&&Wn(W,Ge["no-transition"]),Lr(W,Pa);const ge=(F=>"string"==typeof F?document.querySelector(F):F)(F.target);ge.appendChild(W),(F=>{const N=In();N.setAttribute("role",F.toast?"alert":"dialog"),N.setAttribute("aria-live",F.toast?"polite":"assertive"),F.toast||N.setAttribute("aria-modal","true")})(F),(F=>{"rtl"===window.getComputedStyle(F).direction&&Wn(er(),Ge.rtl)})(ge),(()=>{const F=In(),N=vo(F,Ge.input),W=vo(F,Ge.file),ge=F.querySelector(".".concat(Ge.range," input")),tt=F.querySelector(".".concat(Ge.range," output")),Wt=vo(F,Ge.select),xi=F.querySelector(".".concat(Ge.checkbox," input")),sn=vo(F,Ge.textarea);N.oninput=Cr,W.onchange=Cr,Wt.onchange=Cr,xi.onchange=Cr,sn.oninput=Cr,ge.oninput=()=>{Cr(),tt.value=ge.value},ge.onchange=()=>{Cr(),ge.nextSibling.value=ge.value}})()},q=(F,N)=>{F instanceof HTMLElement?N.appendChild(F):"object"==typeof F?re(F,N):F&&Lr(N,F)},re=(F,N)=>{F.jquery?ue(N,F):Lr(N,F.toString())},ue=(F,N)=>{if(F.textContent="",0 in N)for(let W=0;W in N;W++)F.appendChild(N[W].cloneNode(!0));else F.appendChild(N.cloneNode(!0))},we=(()=>{if(Ra())return!1;const F=document.createElement("div"),N={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const W in N)if(Object.prototype.hasOwnProperty.call(N,W)&&typeof F.style[W]<"u")return N[W];return!1})(),ke=(F,N)=>{const W=mi(),ge=Yi();N.showConfirmButton||N.showDenyButton||N.showCancelButton?fr(W):Vi(W),mr(W,N,"actions"),function Te(F,N,W){const ge=wr(),tt=Gn(),Wt=ho();ot(ge,"confirm",W),ot(tt,"deny",W),ot(Wt,"cancel",W),function Oe(F,N,W,ge){if(!ge.buttonsStyling)return ro([F,N,W],Ge.styled);Wn([F,N,W],Ge.styled),ge.confirmButtonColor&&(F.style.backgroundColor=ge.confirmButtonColor,Wn(F,Ge["default-outline"])),ge.denyButtonColor&&(N.style.backgroundColor=ge.denyButtonColor,Wn(N,Ge["default-outline"])),ge.cancelButtonColor&&(W.style.backgroundColor=ge.cancelButtonColor,Wn(W,Ge["default-outline"]))}(ge,tt,Wt,W),W.reverseButtons&&(W.toast?(F.insertBefore(Wt,ge),F.insertBefore(tt,ge)):(F.insertBefore(Wt,N),F.insertBefore(tt,N),F.insertBefore(ge,N)))}(W,ge,N),Lr(ge,N.loaderHtml),mr(ge,N,"loader")};function ot(F,N,W){Zr(F,W["show".concat(zt(N),"Button")],"inline-block"),Lr(F,W["".concat(N,"ButtonText")]),F.setAttribute("aria-label",W["".concat(N,"ButtonAriaLabel")]),F.className=Ge[N],mr(F,W,"".concat(N,"Button")),Wn(F,W["".concat(N,"ButtonClass")])}const Pt=(F,N)=>{const W=er();W&&(function Mt(F,N){"string"==typeof N?F.style.background=N:N||Wn([document.documentElement,document.body],Ge["no-backdrop"])}(W,N.backdrop),function ut(F,N){N in Ge?Wn(F,Ge[N]):(ii('The "position" parameter is not valid, defaulting to "center"'),Wn(F,Ge.center))}(W,N.position),function tn(F,N){if(N&&"string"==typeof N){const W="grow-".concat(N);W in Ge&&Wn(F,Ge[W])}}(W,N.grow),mr(W,N,"container"))};var xt={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Zt=["input","file","range","select","radio","checkbox","textarea"],li=F=>{if(!tr[F.input])return f('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(F.input,'"'));const N=Ye(F.input),W=tr[F.input](N,F);fr(W),setTimeout(()=>{Ma(W)})},gi=(F,N)=>{const W=hs(In(),F);if(W){(F=>{for(let N=0;N<F.attributes.length;N++){const W=F.attributes[N].name;["type","value","style"].includes(W)||F.removeAttribute(W)}})(W);for(const ge in N)W.setAttribute(ge,N[ge])}},vi=F=>{const N=Ye(F.input);F.customClass&&Wn(N,F.customClass.input)},Po=(F,N)=>{(!F.placeholder||N.inputPlaceholder)&&(F.placeholder=N.inputPlaceholder)},Jo=(F,N,W)=>{if(W.inputLabel){F.id=Ge.input;const ge=document.createElement("label"),tt=Ge["input-label"];ge.setAttribute("for",F.id),ge.className=tt,Wn(ge,W.customClass.inputLabel),ge.innerText=W.inputLabel,N.insertAdjacentElement("beforebegin",ge)}},Ye=F=>{const N=Ge[F]?Ge[F]:Ge.input;return vo(In(),N)},tr={};tr.text=tr.email=tr.password=tr.number=tr.tel=tr.url=(F,N)=>("string"==typeof N.inputValue||"number"==typeof N.inputValue?F.value=N.inputValue:Ft(N.inputValue)||ii('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof N.inputValue,'"')),Jo(F,F,N),Po(F,N),F.type=N.input,F),tr.file=(F,N)=>(Jo(F,F,N),Po(F,N),F),tr.range=(F,N)=>{const W=F.querySelector("input"),ge=F.querySelector("output");return W.value=N.inputValue,W.type=N.input,ge.value=N.inputValue,Jo(W,F,N),F},tr.select=(F,N)=>{if(F.textContent="",N.inputPlaceholder){const W=document.createElement("option");Lr(W,N.inputPlaceholder),W.value="",W.disabled=!0,W.selected=!0,F.appendChild(W)}return Jo(F,F,N),F},tr.radio=F=>(F.textContent="",F),tr.checkbox=(F,N)=>{const W=hs(In(),"checkbox");W.value="1",W.id=Ge.checkbox,W.checked=!!N.inputValue;const ge=F.querySelector("span");return Lr(ge,N.inputPlaceholder),F},tr.textarea=(F,N)=>{F.value=N.inputValue,Po(F,N),Jo(F,F,N);return setTimeout(()=>{if("MutationObserver"in window){const ge=parseInt(window.getComputedStyle(In()).width);new MutationObserver(()=>{const Wt=F.offsetWidth+(ge=>parseInt(window.getComputedStyle(ge).marginLeft)+parseInt(window.getComputedStyle(ge).marginRight))(F);In().style.width=Wt>ge?"".concat(Wt,"px"):null}).observe(F,{attributes:!0,attributeFilter:["style"]})}}),F};const gr=(F,N)=>{const W=bn();mr(W,N,"htmlContainer"),N.html?(q(N.html,W),fr(W,"block")):N.text?(W.textContent=N.text,fr(W,"block")):Vi(W),((F,N)=>{const W=In(),ge=xt.innerParams.get(F),tt=!ge||N.input!==ge.input;Zt.forEach(Wt=>{const xi=Ge[Wt],sn=vo(W,xi);gi(Wt,N.inputAttributes),sn.className=xi,tt&&Vi(sn)}),N.input&&(tt&&li(N),vi(N))})(F,N)},Na=(F,N)=>{for(const W in Ji)N.icon!==W&&ro(F,Ji[W]);Wn(F,Ji[N.icon]),Ct(F,N),sf(),mr(F,N,"icon")},sf=()=>{const F=In(),N=window.getComputedStyle(F).getPropertyValue("background-color"),W=F.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let ge=0;ge<W.length;ge++)W[ge].style.backgroundColor=N},Rn=(F,N)=>{F.textContent="",Lr(F,N.iconHtml?es(N.iconHtml):"success"===N.icon?'\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n':"error"===N.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':es({question:"?",warning:"!",info:"i"}[N.icon]))},Ct=(F,N)=>{if(N.iconColor){F.style.color=N.iconColor,F.style.borderColor=N.iconColor;for(const W of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Ul(F,W,"backgroundColor",N.iconColor);Ul(F,".swal2-success-ring","borderColor",N.iconColor)}},es=F=>'<div class="'.concat(Ge["icon-content"],'">').concat(F,"</div>"),$l=(F,N)=>{const W=cl();if(!N.progressSteps||0===N.progressSteps.length)return Vi(W);fr(W),W.textContent="",N.currentProgressStep>=N.progressSteps.length&&ii("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),N.progressSteps.forEach((ge,tt)=>{const Wt=(F=>{const N=document.createElement("li");return Wn(N,Ge["progress-step"]),Lr(N,F),N})(ge);if(W.appendChild(Wt),tt===N.currentProgressStep&&Wn(Wt,Ge["active-progress-step"]),tt!==N.progressSteps.length-1){const xi=(F=>{const N=document.createElement("li");return Wn(N,Ge["progress-step-line"]),F.progressStepsDistance&&(N.style.width=F.progressStepsDistance),N})(N);W.appendChild(xi)}})},An=(F,N)=>{F.className="".concat(Ge.popup," ").concat(Er(F)?N.showClass.popup:""),N.toast?(Wn([document.documentElement,document.body],Ge["toast-shown"]),Wn(F,Ge.toast)):Wn(F,Ge.modal),mr(F,N,"popup"),"string"==typeof N.customClass&&Wn(F,N.customClass),N.icon&&Wn(F,Ge["icon-".concat(N.icon)])},Fc=(F,N)=>{((F,N)=>{const W=er(),ge=In();N.toast?(Is(W,"width",N.width),ge.style.width="100%",ge.insertBefore(Yi(),Xo())):Is(ge,"width",N.width),Is(ge,"padding",N.padding),N.color&&(ge.style.color=N.color),N.background&&(ge.style.background=N.background),Vi(Ko()),An(ge,N)})(0,N),Pt(0,N),$l(0,N),((F,N)=>{const W=xt.innerParams.get(F),ge=Xo();W&&N.icon===W.icon?(Rn(ge,N),Na(ge,N)):N.icon||N.iconHtml?N.icon&&-1===Object.keys(Ji).indexOf(N.icon)?(f('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(N.icon,'"')),Vi(ge)):(fr(ge),Rn(ge,N),Na(ge,N),Wn(ge,N.showClass.icon)):Vi(ge)})(F,N),((F,N)=>{const W=js();if(!N.imageUrl)return Vi(W);fr(W,""),W.setAttribute("src",N.imageUrl),W.setAttribute("alt",N.imageAlt),Is(W,"width",N.imageWidth),Is(W,"height",N.imageHeight),W.className=Ge.image,mr(W,N,"image")})(0,N),((F,N)=>{const W=Vs();Zr(W,N.title||N.titleText,"block"),N.title&&q(N.title,W),N.titleText&&(W.innerText=N.titleText),mr(W,N,"title")})(0,N),((F,N)=>{const W=Gt();Lr(W,N.closeButtonHtml),mr(W,N,"closeButton"),Zr(W,N.showCloseButton),W.setAttribute("aria-label",N.closeButtonAriaLabel)})(0,N),gr(F,N),ke(0,N),((F,N)=>{const W=Qn();Zr(W,N.footer),N.footer&&q(N.footer,W),mr(W,N,"footer")})(0,N),"function"==typeof N.didRender&&N.didRender(In())},Br=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),mn=()=>{Un(document.body.children).forEach(N=>{N.hasAttribute("data-previous-aria-hidden")?(N.setAttribute("aria-hidden",N.getAttribute("data-previous-aria-hidden")),N.removeAttribute("data-previous-aria-hidden")):N.removeAttribute("aria-hidden")})},Gl=["swal-title","swal-html","swal-footer"],Ru=F=>{const N={};return Un(F.querySelectorAll("swal-param")).forEach(W=>{Hs(W,["name","value"]);const ge=W.getAttribute("name"),tt=W.getAttribute("value");"boolean"==typeof an[ge]&&"false"===tt&&(N[ge]=!1),"object"==typeof an[ge]&&(N[ge]=JSON.parse(tt))}),N},La=F=>{const N={};return Un(F.querySelectorAll("swal-button")).forEach(W=>{Hs(W,["type","color","aria-label"]);const ge=W.getAttribute("type");N["".concat(ge,"ButtonText")]=W.innerHTML,N["show".concat(zt(ge),"Button")]=!0,W.hasAttribute("color")&&(N["".concat(ge,"ButtonColor")]=W.getAttribute("color")),W.hasAttribute("aria-label")&&(N["".concat(ge,"ButtonAriaLabel")]=W.getAttribute("aria-label"))}),N},Xe=F=>{const N={},W=F.querySelector("swal-image");return W&&(Hs(W,["src","width","height","alt"]),W.hasAttribute("src")&&(N.imageUrl=W.getAttribute("src")),W.hasAttribute("width")&&(N.imageWidth=W.getAttribute("width")),W.hasAttribute("height")&&(N.imageHeight=W.getAttribute("height")),W.hasAttribute("alt")&&(N.imageAlt=W.getAttribute("alt"))),N},ql=F=>{const N={},W=F.querySelector("swal-icon");return W&&(Hs(W,["type","color"]),W.hasAttribute("type")&&(N.icon=W.getAttribute("type")),W.hasAttribute("color")&&(N.iconColor=W.getAttribute("color")),N.iconHtml=W.innerHTML),N},cn=F=>{const N={},W=F.querySelector("swal-input");W&&(Hs(W,["type","label","placeholder","value"]),N.input=W.getAttribute("type")||"text",W.hasAttribute("label")&&(N.inputLabel=W.getAttribute("label")),W.hasAttribute("placeholder")&&(N.inputPlaceholder=W.getAttribute("placeholder")),W.hasAttribute("value")&&(N.inputValue=W.getAttribute("value")));const ge=F.querySelectorAll("swal-input-option");return ge.length&&(N.inputOptions={},Un(ge).forEach(tt=>{Hs(tt,["value"]);const Wt=tt.getAttribute("value");N.inputOptions[Wt]=tt.innerHTML})),N},vn=(F,N)=>{const W={};for(const ge in N){const tt=N[ge],Wt=F.querySelector(tt);Wt&&(Hs(Wt,[]),W[tt.replace(/^swal-/,"")]=Wt.innerHTML.trim())}return W},Pu=F=>{const N=Gl.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Un(F.children).forEach(W=>{const ge=W.tagName.toLowerCase();-1===N.indexOf(ge)&&ii("Unrecognized element <".concat(ge,">"))})},Hs=(F,N)=>{Un(F.attributes).forEach(W=>{-1===N.indexOf(W.name)&&ii(['Unrecognized attribute "'.concat(W.name,'" on <').concat(F.tagName.toLowerCase(),">."),"".concat(N.length?"Allowed attributes are: ".concat(N.join(", ")):"To set the value, use HTML within the element.")])})};var wo={email:(F,N)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(F)?Promise.resolve():Promise.resolve(N||"Invalid email address"),url:(F,N)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(F)?Promise.resolve():Promise.resolve(N||"Invalid URL")};function Hd(F){(function Xr(F){F.inputValidator||Object.keys(wo).forEach(N=>{F.input===N&&(F.inputValidator=wo[N])})})(F),F.showLoaderOnConfirm&&!F.preConfirm&&ii("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function Oo(F){(!F.target||"string"==typeof F.target&&!document.querySelector(F.target)||"string"!=typeof F.target&&!F.target.appendChild)&&(ii('Target parameter is not valid, defaulting to "body"'),F.target="body")}(F),"string"==typeof F.title&&(F.title=F.title.split("\n").join("<br />")),$(F)}class Tr{constructor(N,W){this.callback=N,this.remaining=W,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(N){const W=this.running;return W&&this.stop(),this.remaining+=N,W&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Ou=()=>{null===ko.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(ko.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(ko.previousBodyPadding+(()=>{const F=document.createElement("div");F.className=Ge["scrollbar-measure"],document.body.appendChild(F);const N=F.getBoundingClientRect().width-F.clientWidth;return document.body.removeChild(F),N})(),"px"))},fo=()=>{const F=navigator.userAgent,N=!!F.match(/iPad/i)||!!F.match(/iPhone/i),W=!!F.match(/WebKit/i);N&&W&&!F.match(/CriOS/i)&&In().scrollHeight>window.innerHeight-44&&(er().style.paddingBottom="".concat(44,"px"))},$d=()=>{const F=er();let N;F.ontouchstart=W=>{N=Nc(W)},F.ontouchmove=W=>{N&&(W.preventDefault(),W.stopPropagation())}},Nc=F=>{const N=F.target,W=er();return!(fa(F)||Nu(F)||N!==W&&(ka(W)||"INPUT"===N.tagName||"TEXTAREA"===N.tagName||ka(bn())&&bn().contains(N)))},fa=F=>F.touches&&F.touches.length&&"stylus"===F.touches[0].touchType,Nu=F=>F.touches&&F.touches.length>1,Fo=F=>{const N=er(),W=In();"function"==typeof F.willOpen&&F.willOpen(W);const tt=window.getComputedStyle(document.body).overflowY;Lc(N,W,F),setTimeout(()=>{Mp(N,W)},10),bo()&&(Bu(N,F.scrollbarPadding,tt),Un(document.body.children).forEach(N=>{N===er()||N.contains(er())||(N.hasAttribute("aria-hidden")&&N.setAttribute("data-previous-aria-hidden",N.getAttribute("aria-hidden")),N.setAttribute("aria-hidden","true"))})),!Mo()&&!Dn.previousActiveElement&&(Dn.previousActiveElement=document.activeElement),"function"==typeof F.didOpen&&setTimeout(()=>F.didOpen(W)),ro(N,Ge["no-transition"])},ri=F=>{const N=In();if(F.target!==N)return;const W=er();N.removeEventListener(we,ri),W.style.overflowY="auto"},Mp=(F,N)=>{we&&hl(N)?(F.style.overflowY="hidden",N.addEventListener(we,ri)):F.style.overflowY="auto"},Bu=(F,N,W)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!Ro(document.body,Ge.iosfix)){const N=document.body.scrollTop;document.body.style.top="".concat(-1*N,"px"),Wn(document.body,Ge.iosfix),$d(),fo()}})(),N&&"hidden"!==W&&Ou(),setTimeout(()=>{F.scrollTop=0})},Lc=(F,N,W)=>{Wn(F,W.showClass.backdrop),N.style.setProperty("opacity","0","important"),fr(N,"grid"),setTimeout(()=>{Wn(N,W.showClass.popup),N.style.removeProperty("opacity")},10),Wn([document.documentElement,document.body],Ge.shown),W.heightAuto&&W.backdrop&&!W.toast&&Wn([document.documentElement,document.body],Ge["height-auto"])},Tt=F=>{let N=In();N||new Fi,N=In();const W=Yi();Mo()?Vi(Xo()):Gd(N,F),fr(W),N.setAttribute("data-loading",!0),N.setAttribute("aria-busy",!0),N.focus()},Gd=(F,N)=>{const W=mi(),ge=Yi();!N&&Er(wr())&&(N=wr()),fr(W),N&&(Vi(N),ge.setAttribute("data-button-to-replace",N.className)),ge.parentNode.insertBefore(ge,N),Wn([F,W],Ge.loading)},Bc=F=>F.checked?1:0,Wd=F=>F.checked?F.value:null,af=F=>F.files.length?null!==F.getAttribute("multiple")?F.files:F.files[0]:null,zc=(F,N)=>{const W=In(),ge=tt=>jc[N.input](W,Zl(tt),N);qe(N.inputOptions)||Ft(N.inputOptions)?(Tt(wr()),wt(N.inputOptions).then(tt=>{F.hideLoading(),ge(tt)})):"object"==typeof N.inputOptions?ge(N.inputOptions):f("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof N.inputOptions))},Vc=(F,N)=>{const W=F.getInput();Vi(W),wt(N.inputValue).then(ge=>{W.value="number"===N.input?parseFloat(ge)||0:"".concat(ge),fr(W),W.focus(),F.hideLoading()}).catch(ge=>{f("Error in inputValue promise: ".concat(ge)),W.value="",fr(W),W.focus(),F.hideLoading()})},jc={select:(F,N,W)=>{const ge=vo(F,Ge.select),tt=(Wt,xi,sn)=>{const cr=document.createElement("option");cr.value=sn,Lr(cr,xi),cr.selected=pl(sn,W.inputValue),Wt.appendChild(cr)};N.forEach(Wt=>{const xi=Wt[0],sn=Wt[1];if(Array.isArray(sn)){const cr=document.createElement("optgroup");cr.label=xi,cr.disabled=!1,ge.appendChild(cr),sn.forEach(St=>tt(cr,St[1],St[0]))}else tt(ge,sn,xi)}),ge.focus()},radio:(F,N,W)=>{const ge=vo(F,Ge.radio);N.forEach(Wt=>{const xi=Wt[0],sn=Wt[1],cr=document.createElement("input"),St=document.createElement("label");cr.type="radio",cr.name=Ge.radio,cr.value=xi,pl(xi,W.inputValue)&&(cr.checked=!0);const jr=document.createElement("span");Lr(jr,sn),jr.className=Ge.label,St.appendChild(cr),St.appendChild(jr),ge.appendChild(St)});const tt=ge.querySelectorAll("input");tt.length&&tt[0].focus()}},Zl=F=>{const N=[];return typeof Map<"u"&&F instanceof Map?F.forEach((W,ge)=>{let tt=W;"object"==typeof tt&&(tt=Zl(tt)),N.push([ge,tt])}):Object.keys(F).forEach(W=>{let ge=F[W];"object"==typeof ge&&(ge=Zl(ge)),N.push([W,ge])}),N},pl=(F,N)=>N&&N.toString()===F.toString();function gn(){const F=xt.innerParams.get(this);if(!F)return;const N=xt.domCache.get(this);Vi(N.loader),Mo()?F.icon&&fr(Xo()):Yl(N),ro([N.popup,N.actions],Ge.loading),N.popup.removeAttribute("aria-busy"),N.popup.removeAttribute("data-loading"),N.confirmButton.disabled=!1,N.denyButton.disabled=!1,N.cancelButton.disabled=!1}const Yl=F=>{const N=F.popup.getElementsByClassName(F.loader.getAttribute("data-button-to-replace"));N.length?fr(N[0],"inline-block"):!Er(wr())&&!Er(Gn())&&!Er(ho())&&Vi(F.actions)};var Sr={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const di=()=>wr()&&wr().click(),Hc=F=>{F.keydownTarget&&F.keydownHandlerAdded&&(F.keydownTarget.removeEventListener("keydown",F.keydownHandler,{capture:F.keydownListenerCapture}),F.keydownHandlerAdded=!1)},Gs=(F,N,W)=>{const ge=Jn();if(ge.length)return(N+=W)===ge.length?N=0:-1===N&&(N=ge.length-1),ge[N].focus();In().focus()},_l=["ArrowRight","ArrowDown"],Xl=["ArrowLeft","ArrowUp"],Vu=(F,N,W)=>{const ge=xt.innerParams.get(F);ge&&(N.isComposing||229===N.keyCode||(ge.stopKeydownPropagation&&N.stopPropagation(),"Enter"===N.key?qd(F,N,ge):"Tab"===N.key?za(N,ge):[..._l,...Xl].includes(N.key)?Va(N.key):"Escape"===N.key&&pa(N,ge,W)))},qd=(F,N,W)=>{if(Dt(W.allowEnterKey)&&N.target&&F.getInput()&&N.target.outerHTML===F.getInput().outerHTML){if(["textarea","file"].includes(W.input))return;di(),N.preventDefault()}},za=(F,N)=>{const W=F.target,ge=Jn();let tt=-1;for(let Wt=0;Wt<ge.length;Wt++)if(W===ge[Wt]){tt=Wt;break}Gs(0,tt,F.shiftKey?-1:1),F.stopPropagation(),F.preventDefault()},Va=F=>{if(![wr(),Gn(),ho()].includes(document.activeElement))return;const tt=_l.includes(F)?"nextElementSibling":"previousElementSibling";let Wt=document.activeElement;for(let xi=0;xi<mi().children.length;xi++){if(Wt=Wt[tt],!Wt)return;if(Er(Wt)&&Wt instanceof HTMLButtonElement)break}Wt instanceof HTMLButtonElement&&Wt.focus()},pa=(F,N,W)=>{Dt(N.allowEscapeKey)&&(F.preventDefault(),W(Br.esc))};function ju(F,N,W,ge){Mo()?Gc(F,ge):(Ud(W).then(()=>Gc(F,ge)),Hc(Dn)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(N.setAttribute("style","display:none !important"),N.removeAttribute("class"),N.innerHTML=""):N.remove(),bo()&&(null!==ko.previousBodyPadding&&(document.body.style.paddingRight="".concat(ko.previousBodyPadding,"px"),ko.previousBodyPadding=null),(()=>{if(Ro(document.body,Ge.iosfix)){const F=parseInt(document.body.style.top,10);ro(document.body,Ge.iosfix),document.body.style.top="",document.body.scrollTop=-1*F}})(),mn()),function On(){ro([document.documentElement,document.body],[Ge.shown,Ge["height-auto"],Ge["no-backdrop"],Ge["toast-shown"]])}()}function ja(F){F=$c(F);const N=Sr.swalPromiseResolve.get(this),W=Zd(this);this.isAwaitingPromise()?F.isDismissed||(Ws(this),N(F)):W&&N(F)}const Zd=F=>{const N=In();if(!N)return!1;const W=xt.innerParams.get(F);if(!W||Ro(N,W.hideClass.popup))return!1;ro(N,W.showClass.popup),Wn(N,W.hideClass.popup);const ge=er();return ro(ge,W.showClass.backdrop),Wn(ge,W.hideClass.backdrop),Kl(F,N,W),!0};const Ws=F=>{F.isAwaitingPromise()&&(xt.awaitingPromise.delete(F),xt.innerParams.get(F)||F._destroy())},$c=F=>typeof F>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},F),Kl=(F,N,W)=>{const ge=er(),tt=we&&hl(N);"function"==typeof W.willClose&&W.willClose(N),tt?kp(F,N,ge,W.returnFocus,W.didClose):ju(F,ge,W.returnFocus,W.didClose)},kp=(F,N,W,ge,tt)=>{Dn.swalCloseEventFinishedCallback=ju.bind(null,F,W,ge,tt),N.addEventListener(we,function(Wt){Wt.target===N&&(Dn.swalCloseEventFinishedCallback(),delete Dn.swalCloseEventFinishedCallback)})},Gc=(F,N)=>{setTimeout(()=>{"function"==typeof N&&N.bind(F.params)(),F._destroy()})};function Uu(F,N,W){const ge=xt.domCache.get(F);N.forEach(tt=>{ge[tt].disabled=W})}function ts(F,N){if(!F)return!1;if("radio"===F.type){const ge=F.parentNode.parentNode.querySelectorAll("input");for(let tt=0;tt<ge.length;tt++)ge[tt].disabled=N}else F.disabled=N}const Ms=F=>{const N={};return Object.keys(F).forEach(W=>{ln(W)?N[W]=F[W]:ii('Invalid parameter to update: "'.concat(W,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))}),N};const $u=F=>{Gu(F),delete F.params,delete Dn.keydownHandler,delete Dn.keydownTarget,delete Dn.currentInstance},Gu=F=>{F.isAwaitingPromise()?(Ha(xt,F),xt.awaitingPromise.set(F,!0)):(Ha(Sr,F),Ha(xt,F))},Ha=(F,N)=>{for(const W in F)F[W].delete(N)};var Wc=Object.freeze({hideLoading:gn,disableLoading:gn,getInput:function Uc(F){const N=xt.innerParams.get(F||this),W=xt.domCache.get(F||this);return W?hs(W.popup,N.input):null},close:ja,isAwaitingPromise:function lt(){return!!xt.awaitingPromise.get(this)},rejectPromise:function Ht(F){const N=Sr.swalPromiseReject.get(this);Ws(this),N&&N(F)},handleAwaitingPromise:Ws,closePopup:ja,closeModal:ja,closeToast:ja,enableButtons:function ns(){Uu(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function Co(){Uu(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function As(){return ts(this.getInput(),!1)},disableInput:function wi(){return ts(this.getInput(),!0)},showValidationMessage:function Ua(F){const N=xt.domCache.get(this),W=xt.innerParams.get(this);Lr(N.validationMessage,F),N.validationMessage.className=Ge["validation-message"],W.customClass&&W.customClass.validationMessage&&Wn(N.validationMessage,W.customClass.validationMessage),fr(N.validationMessage);const ge=this.getInput();ge&&(ge.setAttribute("aria-invalid",!0),ge.setAttribute("aria-describedby",Ge["validation-message"]),Ma(ge),Wn(ge,Ge.inputerror))},resetValidationMessage:function ml(){const F=xt.domCache.get(this);F.validationMessage&&Vi(F.validationMessage);const N=this.getInput();N&&(N.removeAttribute("aria-invalid"),N.removeAttribute("aria-describedby"),ro(N,Ge.inputerror))},getProgressSteps:function Hu(){return xt.domCache.get(this).progressSteps},update:function Ql(F){const N=In(),W=xt.innerParams.get(this);if(!N||Ro(N,W.hideClass.popup))return ii("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const ge=Ms(F),tt=Object.assign({},W,ge);Fc(this,tt),xt.innerParams.set(this,tt),Object.defineProperties(this,{params:{value:Object.assign({},this.params,F),writable:!1,enumerable:!0}})},_destroy:function No(){const F=xt.domCache.get(this),N=xt.innerParams.get(this);N?(F.popup&&Dn.swalCloseEventFinishedCallback&&(Dn.swalCloseEventFinishedCallback(),delete Dn.swalCloseEventFinishedCallback),Dn.deferDisposalTimer&&(clearTimeout(Dn.deferDisposalTimer),delete Dn.deferDisposalTimer),"function"==typeof N.didDestroy&&N.didDestroy(),$u(this)):Gu(this)}});const qu=(F,N)=>{const W=xt.innerParams.get(F);if(!W.input)return f('The "input" parameter is needed to be set when using returnInputValueOn'.concat(zt(N)));const ge=((F,N)=>{const W=F.getInput();if(!W)return null;switch(N.input){case"checkbox":return Bc(W);case"radio":return Wd(W);case"file":return af(W);default:return N.inputAutoTrim?W.value.trim():W.value}})(F,W);W.inputValidator?Yc(F,ge,N):F.getInput().checkValidity()?"deny"===N?Xc(F,ge):To(F,ge):(F.enableButtons(),F.showValidationMessage(W.validationMessage))},Yc=(F,N,W)=>{const ge=xt.innerParams.get(F);F.disableInput(),Promise.resolve().then(()=>wt(ge.inputValidator(N,ge.validationMessage))).then(Wt=>{F.enableButtons(),F.enableInput(),Wt?F.showValidationMessage(Wt):"deny"===W?Xc(F,N):To(F,N)})},Xc=(F,N)=>{const W=xt.innerParams.get(F||void 0);W.showLoaderOnDeny&&Tt(Gn()),W.preDeny?(xt.awaitingPromise.set(F||void 0,!0),Promise.resolve().then(()=>wt(W.preDeny(N,W.validationMessage))).then(tt=>{!1===tt?(F.hideLoading(),Ws(F)):F.closePopup({isDenied:!0,value:typeof tt>"u"?N:tt})}).catch(tt=>cf(F||void 0,tt))):F.closePopup({isDenied:!0,value:N})},Zu=(F,N)=>{F.closePopup({isConfirmed:!0,value:N})},cf=(F,N)=>{F.rejectPromise(N)},To=(F,N)=>{const W=xt.innerParams.get(F||void 0);W.showLoaderOnConfirm&&Tt(),W.preConfirm?(F.resetValidationMessage(),xt.awaitingPromise.set(F||void 0,!0),Promise.resolve().then(()=>wt(W.preConfirm(N,W.validationMessage))).then(tt=>{Er(Ko())||!1===tt?(F.hideLoading(),Ws(F)):Zu(F,typeof tt>"u"?N:tt)}).catch(tt=>cf(F||void 0,tt))):Zu(F,N)},$a=(F,N,W)=>{N.popup.onclick=()=>{const ge=xt.innerParams.get(F);ge&&(uf(ge)||ge.timer||ge.input)||W(Br.close)}},uf=F=>F.showConfirmButton||F.showDenyButton||F.showCancelButton||F.showCloseButton;let Jl=!1;const df=F=>{F.popup.onmousedown=()=>{F.container.onmouseup=function(N){F.container.onmouseup=void 0,N.target===F.container&&(Jl=!0)}}},ec=F=>{F.container.onmousedown=()=>{F.popup.onmouseup=function(N){F.popup.onmouseup=void 0,(N.target===F.popup||F.popup.contains(N.target))&&(Jl=!0)}}},hf=(F,N,W)=>{N.container.onclick=ge=>{const tt=xt.innerParams.get(F);Jl?Jl=!1:ge.target===N.container&&Dt(tt.allowOutsideClick)&&W(Br.backdrop)}},Yd=F=>F instanceof Element||(F=>"object"==typeof F&&F.jquery)(F);const Yu=()=>{if(Dn.timeout)return(()=>{const F=ul(),N=parseInt(window.getComputedStyle(F).width);F.style.removeProperty("transition"),F.style.width="100%";const ge=N/parseInt(window.getComputedStyle(F).width)*100;F.style.removeProperty("transition"),F.style.width="".concat(ge,"%")})(),Dn.timeout.stop()},Xn=()=>{if(Dn.timeout){const F=Dn.timeout.start();return ua(F),F}};let sr=!1;const Kn={};const Vr=F=>{for(let N=F.target;N&&N!==document;N=N.parentNode)for(const W in Kn){const ge=N.getAttribute(W);if(ge)return void Kn[W].fire({template:ge})}};var ks=Object.freeze({isValidParameter:kn,isUpdatableParameter:ln,isDeprecatedParameter:ft,argsToParams:F=>{const N={};return"object"!=typeof F[0]||Yd(F[0])?["title","html","icon"].forEach((W,ge)=>{const tt=F[ge];"string"==typeof tt||Yd(tt)?N[W]=tt:void 0!==tt&&f("Unexpected type of ".concat(W,'! Expected "string" or "Element", got ').concat(typeof tt))}):Object.assign(N,F[0]),N},isVisible:()=>Er(In()),clickConfirm:di,clickDeny:()=>Gn()&&Gn().click(),clickCancel:()=>ho()&&ho().click(),getContainer:er,getPopup:In,getTitle:Vs,getHtmlContainer:bn,getImage:js,getIcon:Xo,getInputLabel:()=>rr(Ge["input-label"]),getCloseButton:Gt,getActions:mi,getConfirmButton:wr,getDenyButton:Gn,getCancelButton:ho,getLoader:Yi,getFooter:Qn,getTimerProgressBar:ul,getFocusableElements:Jn,getValidationMessage:Ko,isLoading:()=>In().hasAttribute("data-loading"),fire:function zr(){for(var N=arguments.length,W=new Array(N),ge=0;ge<N;ge++)W[ge]=arguments[ge];return new this(...W)},mixin:function Pp(F){return class N extends(this){_main(ge,tt){return super._main(ge,Object.assign({},F,tt))}}},showLoading:Tt,enableLoading:Tt,getTimerLeft:()=>Dn.timeout&&Dn.timeout.getTimerLeft(),stopTimer:Yu,resumeTimer:Xn,toggleTimer:()=>{const F=Dn.timeout;return F&&(F.running?Yu():Xn())},increaseTimer:F=>{if(Dn.timeout){const N=Dn.timeout.increase(F);return ua(N,!0),N}},isTimerRunning:()=>Dn.timeout&&Dn.timeout.isRunning(),bindClickHandler:function Ir(){Kn[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,sr||(document.body.addEventListener("click",Vr),sr=!0)}});let ar;class qs{constructor(){if(typeof window>"u")return;ar=this;for(var N=arguments.length,W=new Array(N),ge=0;ge<N;ge++)W[ge]=arguments[ge];const tt=Object.freeze(this.constructor.argsToParams(W));Object.defineProperties(this,{params:{value:tt,writable:!1,enumerable:!0,configurable:!0}});const Wt=this._main(this.params);xt.promise.set(this,Wt)}_main(N){let W=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(F=>{!F.backdrop&&F.allowOutsideClick&&ii('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const N in F)me(N),F.toast&&De(N),at(N)})(Object.assign({},W,N)),Dn.currentInstance&&(Dn.currentInstance._destroy(),bo()&&mn()),Dn.currentInstance=this;const ge=gl(N,W);Hd(ge),Object.freeze(ge),Dn.timeout&&(Dn.timeout.stop(),delete Dn.timeout),clearTimeout(Dn.restoreFocusTimeout);const tt=Op(this);return Fc(this,ge),xt.innerParams.set(this,ge),qn(this,tt,ge)}then(N){return xt.promise.get(this).then(N)}finally(N){return xt.promise.get(this).finally(N)}}const qn=(F,N,W)=>new Promise((ge,tt)=>{const Wt=xi=>{F.closePopup({isDismissed:!0,dismiss:xi})};Sr.swalPromiseResolve.set(F,ge),Sr.swalPromiseReject.set(F,tt),N.confirmButton.onclick=()=>(F=>{const N=xt.innerParams.get(F);F.disableButtons(),N.input?qu(F,"confirm"):To(F,!0)})(F),N.denyButton.onclick=()=>(F=>{const N=xt.innerParams.get(F);F.disableButtons(),N.returnInputValueOnDeny?qu(F,"deny"):Xc(F,!1)})(F),N.cancelButton.onclick=()=>((F,N)=>{F.disableButtons(),N(Br.cancel)})(F,Wt),N.closeButton.onclick=()=>Wt(Br.close),((F,N,W)=>{xt.innerParams.get(F).toast?$a(F,N,W):(df(N),ec(N),hf(F,N,W))})(F,N,Wt),((F,N,W,ge)=>{Hc(N),W.toast||(N.keydownHandler=tt=>Vu(F,tt,ge),N.keydownTarget=W.keydownListenerCapture?window:In(),N.keydownListenerCapture=W.keydownListenerCapture,N.keydownTarget.addEventListener("keydown",N.keydownHandler,{capture:N.keydownListenerCapture}),N.keydownHandlerAdded=!0)})(F,Dn,W,Wt),((F,N)=>{"select"===N.input||"radio"===N.input?zc(F,N):["text","email","number","tel","textarea"].includes(N.input)&&(qe(N.inputValue)||Ft(N.inputValue))&&(Tt(wr()),Vc(F,N))})(F,W),Fo(W),Qd(Dn,W,Wt),lr(N,W),setTimeout(()=>{N.container.scrollTop=0})}),gl=(F,N)=>{const W=(F=>{const N="string"==typeof F.template?document.querySelector(F.template):F.template;if(!N)return{};const W=N.content;return Pu(W),Object.assign(Ru(W),La(W),Xe(W),ql(W),cn(W),vn(W,Gl))})(F),ge=Object.assign({},an,N,W,F);return ge.showClass=Object.assign({},an.showClass,ge.showClass),ge.hideClass=Object.assign({},an.hideClass,ge.hideClass),ge},Op=F=>{const N={popup:In(),container:er(),actions:mi(),confirmButton:wr(),denyButton:Gn(),cancelButton:ho(),loader:Yi(),closeButton:Gt(),validationMessage:Ko(),progressSteps:cl()};return xt.domCache.set(F,N),N},Qd=(F,N,W)=>{const ge=ul();Vi(ge),N.timer&&(F.timeout=new Tr(()=>{W("timer"),delete F.timeout},N.timer),N.timerProgressBar&&(fr(ge),mr(ge,N,"timerProgressBar"),setTimeout(()=>{F.timeout&&F.timeout.running&&ua(N.timer)})))},lr=(F,N)=>{if(!N.toast){if(!Dt(N.allowEnterKey))return Fn();jt(F,N)||Gs(0,-1,1)}},jt=(F,N)=>N.focusDeny&&Er(F.denyButton)?(F.denyButton.focus(),!0):N.focusCancel&&Er(F.cancelButton)?(F.cancelButton.focus(),!0):!(!N.focusConfirm||!Er(F.confirmButton)||(F.confirmButton.focus(),0)),Fn=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};Object.assign(qs.prototype,Wc),Object.assign(qs,ks),Object.keys(Wc).forEach(F=>{qs[F]=function(){if(ar)return ar[F](...arguments)}}),qs.DismissReason=Br,qs.version="11.4.8";const Fi=qs;return Fi.default=Fi,Fi}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Zi,_i){var zt=Zi.createElement("style");if(Zi.getElementsByTagName("head")[0].appendChild(zt),zt.styleSheet)zt.styleSheet.disabled||(zt.styleSheet.cssText=_i);else try{zt.innerHTML=_i}catch{zt.innerText=_i}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')}},qr=>{qr(qr.s=712)}]);